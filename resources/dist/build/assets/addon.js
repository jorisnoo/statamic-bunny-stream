var nl=Object.defineProperty;var kr=i=>{throw TypeError(i)};var rl=(i,e,t)=>e in i?nl(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var v=(i,e,t)=>rl(i,typeof e!="symbol"?e+"":e,t),$i=(i,e,t)=>e.has(i)||kr("Cannot "+t);var w=(i,e,t)=>($i(i,e,"read from private field"),t?t.call(i):e.get(i)),L=(i,e,t)=>e.has(i)?kr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),j=(i,e,t,n)=>($i(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),D=(i,e,t)=>($i(i,e,"access private method"),t);const sl=window.Vue,{BaseTransition:xm,BaseTransitionPropsValidators:km,Comment:Um,DeprecationTypes:Om,EffectScope:Am,ErrorCodes:Rm,ErrorTypeStrings:Im,Fragment:En,KeepAlive:Dm,ReactiveEffect:Nm,Static:Bm,Suspense:Lm,Teleport:Mm,Text:$m,TrackOpTypes:zm,Transition:jm,TransitionGroup:qm,TriggerOpTypes:Hm,VueElement:Vm,__esModule:Wm,assertNumber:Gm,callWithAsyncErrorHandling:Km,callWithErrorHandling:Xm,camelize:Ym,capitalize:Qm,cloneVNode:Zm,compatUtils:Jm,compile:eg,computed:ol,createApp:tg,createBlock:yo,createCommentVNode:al,createElementBlock:Y,createElementVNode:I,createHydrationRenderer:ig,createPropsRestProxy:ng,createRenderer:rg,createSSRApp:sg,createSlots:og,createStaticVNode:ag,createTextVNode:Be,createVNode:ne,customRef:lg,defineAsyncComponent:ug,defineComponent:cg,defineCustomElement:dg,defineEmits:hg,defineExpose:pg,defineModel:fg,defineOptions:mg,defineProps:gg,defineSSRCustomElement:yg,defineSlots:bg,devtools:vg,effect:_g,effectScope:wg,getCurrentInstance:Sg,getCurrentScope:Fg,getCurrentWatcher:Pg,getTransitionRawChildren:Tg,guardReactiveProps:Cg,h:Eg,handleError:xg,hasInjectionContext:kg,hydrate:Ug,hydrateOnIdle:Og,hydrateOnInteraction:Ag,hydrateOnMediaQuery:Rg,hydrateOnVisible:Ig,initCustomFormatter:Dg,initDirectivesForSSR:Ng,inject:Bg,isMemoSame:Lg,isProxy:Mg,isReactive:$g,isReadonly:zg,isRef:jg,isRuntimeOnly:qg,isShallow:Hg,isVNode:Vg,markRaw:Wg,mergeDefaults:Gg,mergeModels:Kg,mergeProps:Xg,nextTick:Yg,nodeOps:Qg,normalizeClass:Zg,normalizeProps:Jg,normalizeStyle:ey,onActivated:ty,onBeforeMount:iy,onBeforeUnmount:ny,onBeforeUpdate:ry,onDeactivated:sy,onErrorCaptured:oy,onMounted:ll,onRenderTracked:ay,onRenderTriggered:ly,onScopeDispose:uy,onServerPrefetch:cy,onUnmounted:dy,onUpdated:hy,onWatcherCleanup:py,openBlock:X,patchProp:fy,popScopeId:my,provide:zi,proxyRefs:gy,pushScopeId:yy,queuePostFlushCb:by,reactive:vy,readonly:_y,ref:ti,registerRuntimeCompiler:wy,render:Sy,renderList:ul,renderSlot:Fy,resolveComponent:he,resolveDirective:Py,resolveDynamicComponent:Ty,resolveFilter:Cy,resolveTransitionHooks:Ey,setBlockTracking:xy,setDevtoolsHook:ky,setTransitionHooks:Uy,shallowReactive:Oy,shallowReadonly:Ay,shallowRef:Ry,ssrContextKey:Iy,ssrUtils:Dy,stop:Ny,toDisplayString:H,toHandlerKey:By,toHandlers:Ly,toRaw:My,toRef:$y,toRefs:zy,toValue:jy,transformVNodeArgs:qy,triggerRef:Hy,unref:xn,useAttrs:Vy,useCssModule:Wy,useCssVars:Gy,useHost:Ky,useId:Xy,useModel:Yy,useSSRContext:Qy,useShadowRoot:Zy,useSlots:Jy,useTemplateRef:e0,useTransitionState:t0,vModelCheckbox:i0,vModelDynamic:n0,vModelRadio:r0,vModelSelect:s0,vModelText:bo,vShow:o0,version:a0,warn:l0,watch:u0,watchEffect:c0,watchPostEffect:d0,watchSyncEffect:h0,withAsyncContext:p0,withCtx:je,withDefaults:f0,withDirectives:vo,withKeys:m0,withMemo:g0,withModifiers:y0,withScopeId:b0}=sl,{Fieldtype:ji,IndexFieldtype:v0,FieldtypeMixin:_0,HasActionsMixin:w0,HasInputOptionsMixin:S0,HasPreferencesMixin:F0,IndexFieldtypeMixin:P0,InlineEditForm:T0,DateFormatter:C0,ItemActions:E0,RelatedItem:x0,RestoreRevision:k0,RevisionHistory:U0,RevisionPreview:O0,SaveButtonOptions:A0,SortableList:R0,requireElevatedSession:I0,requireElevatedSessionIf:D0,clone:N0,deepClone:B0,resetValuesFromResponse:L0}=__STATAMIC__.core,{Alert:M0,AuthCard:$0,Avatar:z0,Badge:j0,Button:q0,ButtonGroup:H0,Calendar:V0,Card:W0,CardList:G0,CardListItem:K0,CardPanel:X0,CharacterCounter:Y0,Checkbox:Q0,CheckboxGroup:Z0,CodeEditor:J0,Combobox:_o,CommandPaletteItem:e1,ConfirmationModal:t1,Context:i1,ContextFooter:n1,ContextHeader:r1,ContextItem:s1,ContextLabel:o1,ContextMenu:a1,ContextSeparator:l1,CreateForm:u1,DatePicker:c1,DateRangePicker:d1,Description:h1,DocsCallout:cl,DragHandle:p1,Dropdown:f1,DropdownItem:m1,DropdownLabel:g1,DropdownMenu:y1,DropdownSeparator:b1,DropdownFooter:v1,DropdownHeader:_1,Editable:w1,ErrorMessage:S1,EmptyStateItem:F1,EmptyStateMenu:P1,Field:T1,Header:C1,Heading:E1,HoverCard:x1,Icon:k1,Input:U1,InputGroup:O1,InputGroupAppend:A1,InputGroupPrepend:R1,Label:I1,Listing:D1,ListingCustomizeColumns:N1,ListingFilters:B1,ListingHeaderCell:L1,ListingPagination:M1,ListingPresets:$1,ListingPresetTrigger:z1,ListingRowActions:j1,ListingSearch:q1,ListingTable:H1,ListingTableBody:V1,ListingTableHead:W1,ListingToggleAll:G1,LivePreview:K1,LivePreviewPopout:X1,Modal:Y1,ModalClose:Q1,ModalTitle:Z1,Pagination:J1,Panel:eb,PanelFooter:tb,PanelHeader:ib,Popover:nb,PublishComponents:rb,PublishContainer:sb,publishContextKey:ob,injectPublishContext:ab,PublishField:lb,PublishFields:ub,PublishFieldsProvider:cb,PublishForm:db,PublishLocalizations:hb,PublishSections:pb,PublishTabs:fb,Radio:mb,RadioGroup:gb,Select:yb,Separator:bb,Slider:vb,Skeleton:_b,SplitterGroup:wb,SplitterPanel:Sb,SplitterResizeHandle:Fb,StatusIndicator:Pb,Subheading:Tb,Switch:Cb,TabContent:Eb,Stack:xb,StackClose:kb,StackHeader:Ub,StackFooter:Ob,StackContent:Ab,Table:Rb,TableCell:Ib,TableColumn:Db,TableColumns:Nb,TableRow:Bb,TableRows:Lb,TabList:Mb,TabProvider:$b,Tabs:zb,TabTrigger:jb,Textarea:qb,TimePicker:Hb,ToggleGroup:Vb,ToggleItem:Wb,Widget:Gb,registerIconSet:Kb,registerIconSetFromStrings:Xb}=__STATAMIC__.ui,dl=["textContent"],hl={__name:"Bunny",props:ji.props,emits:ji.emits,setup(i,{expose:e,emit:t}){const n=t,r=i,{expose:s,update:o}=ji.use(n,r);e(s);const a=ti(null),l=ti(!0),u=ti([]),d=ti([]),h=ol(()=>{let T=r.value||[];return(typeof T=="string"||typeof T=="number")&&(T=[T]),T.map(O=>d.value.find(A=>A.value===O)||{value:O,label:O})});function b(){fetch(`https://video.bunnycdn.com/library/${r.meta.library}/videos?page=1&itemsPerPage=100&orderBy=date`,{headers:{Accept:"application/json",AccessKey:r.meta.api}}).then(T=>T.json()).then(T=>{u.value=T,l.value=!1,S()}).catch(T=>{console.error(T)})}function S(){u.value.items.forEach(T=>{d.value.push({value:T.guid,label:`${T.title} (${new Date(T.dateUploaded).toLocaleString()})`})})}function x(T){o(T?T.value:null)}return ll(()=>{b()}),(T,O)=>(X(),Y("div",null,[ne(xn(_o),{ref_key:"input",ref:a,class:"flex-1",clearable:!1,disabled:!1,options:d.value,placeholder:T.__("Select Video..."),searchable:!0,multiple:!1,"close-on-select":!0,"model-value":h.value,"onUpdate:modelValue":x,onFocus:O[0]||(O[0]=A=>T.$emit("focus")),onBlur:O[1]||(O[1]=A=>T.$emit("blur"))},{option:je(({label:A})=>[Be(H(A),1)]),"selected-option":je(({label:A})=>[Be(H(A),1)]),"no-options":je(()=>[I("div",{class:"text-sm text-gray-700 text-left py-2 px-4",textContent:H(T.__("No options to choose from."))},null,8,dl)]),_:1},8,["options","placeholder","model-value"])]))}},{Form:Yb,Head:pl,Link:Qb,router:Zb,toggleArchitecturalBackground:Jb,useArchitecturalBackground:ev,useForm:tv,usePoll:iv}=__STATAMIC__.inertia,fe=(i,e)=>{const t=i.__vccOpts||i;for(const[n,r]of e)t[n]=r;return t},fl={},ml={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function gl(i,e){return X(),Y("svg",ml,[...e[0]||(e[0]=[I("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])}const yl=fe(fl,[["render",gl]]),bl={},vl={"aria-hidden":"true",viewBox:"0 0 100 101",style:{color:"#eef2f6"},fill:"#2D9EFC",xmlns:"http://www.w3.org/2000/svg"};function _l(i,e){return X(),Y("svg",vl,[...e[0]||(e[0]=[I("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"},null,-1),I("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"},null,-1)])])}const wo=fe(bl,[["render",_l]]),wl={},Sl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"};function Fl(i,e){return X(),Y("svg",Sl,[...e[0]||(e[0]=[I("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6 6 0 00-5.98 6.496A5.25 5.25 0 006.75 20.25H18a4.5 4.5 0 002.206-8.423 3.75 3.75 0 00-4.133-4.303A6.001 6.001 0 0010.5 3.75zm2.03 5.47a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.72-1.72v4.94a.75.75 0 001.5 0v-4.94l1.72 1.72a.75.75 0 101.06-1.06l-3-3z","clip-rule":"evenodd"},null,-1)])])}const Pl=fe(wl,[["render",Fl]]),Tl={},Cl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"};function El(i,e){return X(),Y("svg",Cl,[...e[0]||(e[0]=[I("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"},null,-1),I("path",{"fill-rule":"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z","clip-rule":"evenodd"},null,-1)])])}const xl=fe(Tl,[["render",El]]),kl={},Ul={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"};function Ol(i,e){return X(),Y("svg",Ul,[...e[0]||(e[0]=[I("path",{"fill-rule":"evenodd",d:"M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z","clip-rule":"evenodd"},null,-1),I("path",{"fill-rule":"evenodd",d:"M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.194a.75.75 0 00-.053 1.06z","clip-rule":"evenodd"},null,-1)])])}const Al=fe(kl,[["render",Ol]]),Rl={},Il={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function Dl(i,e){return X(),Y("svg",Il,[...e[0]||(e[0]=[I("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1)])])}const Nl=fe(Rl,[["render",Dl]]),Bl={},Ll={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function Ml(i,e){return X(),Y("svg",Ll,[...e[0]||(e[0]=[I("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"},null,-1),I("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)])])}const $l=fe(Bl,[["render",Ml]]);function zl(i){return{all:i=i||new Map,on:function(e,t){var n=i.get(e);n?n.push(t):i.set(e,[t])},off:function(e,t){var n=i.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):i.set(e,[]))},emit:function(e,t){var n=i.get(e);n&&n.slice().map(function(r){r(t)}),(n=i.get("*"))&&n.slice().map(function(r){r(e,t)})}}}const Ae=zl(),jl={components:{CogIcon:$l,Combobox:_o},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary"],props:{id:String,title:String,assetOptions:[]},data(){return{isOpen:!1,videoTitle:this.title,selectedThumbnails:[]}},methods:{save(){this.title!==this.videoTitle&&(this.$progress.start("title"),this.changeTitle()),this.selectedThumbnails.length>0&&(this.$progress.start("thumbnail"),this.changeThumbnail()),this.isOpen=!1},changeTitle(){fetch(`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.id}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/*+json",AccessKey:this.bunnyApiKey},body:JSON.stringify({title:this.videoTitle})}).then(i=>{if(!i.ok)throw new Error(`Failed to update title: ${i.status}`);this.$toast.success(__("Video title has been updated!")),this.$progress.complete("title"),Ae.emit("load")}).catch(i=>{this.$toast.error(__("An error occured while trying to update the video title.")),this.$progress.complete("title"),console.error(i)})},changeThumbnail(){fetch(`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.id}/thumbnail?thumbnailUrl=${this.selectedThumbnails[0].url}`,{method:"POST",headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}}).then(i=>{if(!i.ok)throw new Error(`Failed to update thumbnail: ${i.status}`);this.$toast.success(__("Thumbnail has been updated!")),this.thumbnailUrl=null,this.$progress.complete("thumbnail"),Ae.emit("load")}).catch(i=>{this.$toast.error(__("An error occured while trying to update the thumbnail.")),this.$progress.complete("thumbnail"),console.error(i)})},selectThumbnail(i){this.selectedThumbnails=[i]}}},ql={class:"flex flex-col h-full"},Hl={class:"text-lg font-semibold px-5 py-3 bg-gray-200 rounded-t-lg flex items-center justify-between border-b"},Vl={class:"flex-1 px-5 py-6 text-gray"},Wl={class:"px-2 m-0 @container form-group publish-field text-fieldtype w-full"},Gl={for:"title",class:"block"},Kl={class:"input-group"},Xl={class:"px-2 m-0 @container form-group publish-field text-fieldtype w-full"},Yl={for:"thumbnail",class:"block"},Ql={class:"input-group"},Zl=["textContent"],Jl={class:"px-5 py-3 bg-gray-200 rounded-b-lg border-t flex items-center justify-end text-sm"},eu=["textContent"],tu=["textContent"];function iu(i,e,t,n,r,s){const o=he("CogIcon"),a=he("Combobox"),l=he("modal");return X(),Y("div",null,[I("button",{onClick:e[0]||(e[0]=u=>r.isOpen=!0)},[ne(o,{class:"size-5"})]),ne(l,{open:r.isOpen,"onUpdate:open":e[4]||(e[4]=u=>r.isOpen=u),name:"settings"},{default:je(()=>[I("div",ql,[I("header",Hl,H(i.__("Video Settings")),1),I("div",Vl,[I("div",Wl,[I("label",Gl,H(i.__("Title")),1),I("div",Kl,[vo(I("input",{type:"text",id:"title",name:"title","onUpdate:modelValue":e[1]||(e[1]=u=>r.videoTitle=u),class:"input-text"},null,512),[[bo,r.videoTitle]])])]),I("div",Xl,[I("label",Yl,H(i.__("Thumbnail")),1),I("div",Ql,[ne(a,{ref:"input",class:"flex-1",clearable:!1,disabled:!1,options:t.assetOptions,placeholder:i.__("Select new thumbnail"),searchable:!0,multiple:!1,"close-on-select":!0,"model-value":r.selectedThumbnails,"onUpdate:modelValue":s.selectThumbnail},{option:je(({label:u})=>[Be(H(u),1)]),"selected-option":je(({label:u})=>[Be(H(u),1)]),"no-options":je(()=>[I("div",{class:"text-sm text-gray-700 text-left py-2 px-4",textContent:H(i.__("No options to choose from."))},null,8,Zl)]),_:1},8,["options","placeholder","model-value","onUpdate:modelValue"])])])]),I("div",Jl,[I("button",{class:"text-gray hover:text-gray-900",onClick:e[2]||(e[2]=u=>r.isOpen=!1),textContent:H(i.__("Cancel"))},null,8,eu),I("button",{class:"ml-4 btn-primary",textContent:H(i.__("Save")),onClick:e[3]||(e[3]=(...u)=>s.save&&s.save(...u))},null,8,tu)])])]),_:1},8,["open"])])}const nu=fe(jl,[["render",iu]]),ru={components:{VideoSettings:nu,CloudIcon:Pl,LinkIcon:Al,TrashIcon:Nl,SpinnerIcon:wo,EyeIcon:xl},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary"],props:{video:Object,assetOptions:Array},data(){return{currentVideo:this.video,isLoading:!1,thumbnailUrl:`https://${this.bunnyHostname}/${this.video.guid}/${this.video.thumbnailFileName}`,videoUrl:`https://iframe.mediadelivery.net/play/${this.video.videoLibraryId}/${this.video.guid}`,triggerDeletion:!1}},mounted(){this.currentVideo.status<4&&(this.polling=setInterval(()=>{this.loadVideo()},5e3))},methods:{confirmDeletion(){this.triggerDeletion=!0},loadVideo(){this.isLoading=!0,fetch(`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.currentVideo.guid}`,{headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}}).then(i=>i.json()).then(i=>{this.currentVideo=i,this.currentVideo.status>=4&&(clearInterval(this.polling),Ae.emit("load"))}).catch(i=>{console.error(i)}).finally(()=>{this.isLoading=!1})},deleteVideo(){this.isLoading=!0,fetch(`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.currentVideo.guid}`,{method:"DELETE",headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}}).then(()=>{this.cancelDeletion(),clearInterval(this.polling),Ae.emit("load")}).catch(i=>{console.error(i)}).finally(()=>{this.isLoading=!1})},cancelDeletion(){this.triggerDeletion=!1}}},su={key:0,class:"sm:grid sm:grid-cols-3 overflow-hidden bg-white rounded shadow-xl w-full mb-4"},ou=["href"],au=["src"],lu={class:"sm:col-span-2 py-2 sm:py-4 px-2 sm:px-6 text-gray-800 flex flex-col justify-between gap-1 sm:shrink"},uu={class:"flex sm:flex-grow items-start justify-between gap-4 w-full"},cu=["href"],du={class:"flex gap-1"},hu={class:"flex gap-2 md:gap-4 items-center justify-start text-xs md:text-sm whitespace-nowrap"},pu=["href"],fu={class:"text-xs md:text-sm text-gray-600 flex justify-between"},mu={class:"flex gap-2 items-center"},gu={class:"flex gap-2 items-center"},yu={key:1,class:"flex flex-col overflow-hidden bg-white rounded shadow-xl w-full mb-4 p-6 items-center justify-center"},bu={class:"text-lg"},vu={class:"text-xs text-gray-600"},_u={role:"status",class:"mt-4 mx-auto"},wu={class:"sr-only"};function Su(i,e,t,n,r,s){const o=he("VideoSettings"),a=he("TrashIcon"),l=he("LinkIcon"),u=he("CloudIcon"),d=he("EyeIcon"),h=he("SpinnerIcon"),b=he("ui-confirmation-modal");return X(),Y("div",null,[r.currentVideo.status>=4?(X(),Y("div",su,[I("a",{href:r.videoUrl,target:"_blank",class:""},[I("img",{src:r.thumbnailUrl,class:"aspect-video inset-0 h-full object-cover w-full"},null,8,au)],8,ou),I("div",lu,[I("div",uu,[I("a",{href:r.videoUrl,target:"_blank",class:"flex-grow font-semibold text-base sm:text-lg leading-tight truncate"},H(r.currentVideo.title),9,cu),I("div",du,[ne(o,{id:r.currentVideo.guid,title:r.currentVideo.title,assetOptions:t.assetOptions,class:"size-5"},null,8,["id","title","assetOptions"]),I("button",{class:"size-5",onClick:e[0]||(e[0]=S=>s.confirmDeletion())},[ne(a,{class:"size-5"})])])]),I("p",hu,[I("a",{href:r.thumbnailUrl,target:"_blank",class:"flex gap-1 items-center"},[Be(H(i.__("Thumbnail"))+" ",1),ne(l,{class:"size-4"})],8,pu)]),I("div",fu,[I("div",mu,[ne(u,{class:"text-gray-500 size-4"}),Be(" "+H(new Date(r.currentVideo.dateUploaded).toLocaleString()),1)]),I("div",gu,[ne(d,{class:"text-gray-500 size-4"}),Be(" "+H(r.currentVideo.views),1)])])])])):(X(),Y("div",yu,[I("h2",bu,H(i.__("Video is being processed"))+" – "+H(r.currentVideo.encodeProgress*2)+"% ",1),I("p",vu,H(i.__("This may take some time.")),1),I("button",{class:"text-xs text-red-500",onClick:e[1]||(e[1]=S=>s.confirmDeletion())},H(i.__("Cancel and delete video")),1),I("div",_u,[ne(h,{class:"w-8 h-8 mr-2 animate-spin"}),I("span",wu,H(i.__("Loading...")),1)])])),ne(b,{open:r.triggerDeletion,"onUpdate:open":e[2]||(e[2]=S=>r.triggerDeletion=S),title:i.__("Delete video :title",{title:r.currentVideo.title}),onConfirm:s.deleteVideo,onCancel:s.cancelDeletion,danger:"true"},null,8,["open","title","onConfirm","onCancel"])])}const Fu=fe(ru,[["render",Su]]);var it=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Me(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ii={exports:{}},Ur;function Pu(){if(Ur)return ii.exports;Ur=1;function i(e,t=100,n={}){if(typeof e!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(t<0)throw new RangeError("`wait` must not be negative.");const{immediate:r}=typeof n=="boolean"?{immediate:n}:n;let s,o,a,l,u;function d(){const S=s,x=o;return s=void 0,o=void 0,u=e.apply(S,x),u}function h(){const S=Date.now()-l;S<t&&S>=0?a=setTimeout(h,t-S):(a=void 0,r||(u=d()))}const b=function(...S){if(s&&this!==s&&Object.getPrototypeOf(this)===Object.getPrototypeOf(s))throw new Error("Debounced method called with different contexts of the same prototype.");s=this,o=S,l=Date.now();const x=r&&!a;return a||(a=setTimeout(h,t)),x&&(u=d()),u};return Object.defineProperty(b,"isPending",{get(){return a!==void 0}}),b.clear=()=>{a&&(clearTimeout(a),a=void 0)},b.flush=()=>{a&&b.trigger()},b.trigger=()=>{u=d(),b.clear()},b}return ii.exports.debounce=i,ii.exports=i,ii.exports}var Tu=Pu();const Cu=Me(Tu),Eu={components:{PlusCircleIcon:yl,SpinnerIcon:wo,VideoCard:Fu},inject:["bunnyApiKey","bunnyLibrary"],data(){return{search:"",loading:!0,polling:null,result:null,page:1,maxPage:1,itemsPerPage:10,assetOptions:[]}},created(){this.getVideos(),this.getAssets(),Ae.on("load",i=>{i&&i.page&&(this.page=i.page),this.getVideos()})},methods:{getAssets(){fetch("/cp/bunny/assets/",{headers:{Accept:"application/json"}}).then(i=>i.json()).then(i=>{this.assetOptions=i.items}).catch(i=>{console.error(i)})},getVideos(){let i=`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos?page=${this.page}&itemsPerPage=${this.itemsPerPage}&orderBy=date`;this.search!==""&&(i+=`&search=${this.search}`),fetch(i,{headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}}).then(e=>e.json()).then(e=>{this.maxPage=Math.ceil(e.totalItems/this.itemsPerPage),this.result=e,this.loading=!1}).catch(e=>{console.error(e)})},openUpload(){Ae.emit("upload")},debouncedSearch:Cu(()=>{Ae.emit("load",{page:1})},500),nextPage(){this.page++,this.page>this.maxPage&&(this.page=1),this.getVideos()},prevPage(){this.page--,this.page<=0&&(this.page=this.maxPage),this.getVideos()}}},xu={class:"container w-100 lg:w-4/5 mx-auto input-group mb-4"},ku=["placeholder"],Uu={key:0,class:"flex items-center"},Ou={role:"status",class:"mt-4 mx-auto"},Au={class:"sr-only"},Ru={key:1},Iu={id:"card"},Du={class:"container w-100 lg:w-4/5 mx-auto"},Nu={class:"flex flex-col"},Bu={key:0,class:"flex items-center justify-between"},Lu={key:2,class:"text-center text-sm"},Mu={class:"text-xl"};function $u(i,e,t,n,r,s){const o=he("SpinnerIcon"),a=he("VideoCard"),l=he("PlusCircleIcon");return X(),Y("div",null,[I("div",xu,[vo(I("input",{type:"text",placeholder:i.__("Search videos"),onInput:e[0]||(e[0]=(...u)=>s.debouncedSearch&&s.debouncedSearch(...u)),"onUpdate:modelValue":e[1]||(e[1]=u=>r.search=u),class:"input-text"},null,40,ku),[[bo,r.search]])]),r.loading?(X(),Y("div",Uu,[I("div",Ou,[ne(o,{class:"w-8 h-8 mr-2 animate-spin"}),I("span",Au,H(i.__("Loading...")),1)])])):!r.loading&&r.result.totalItems>=1?(X(),Y("div",Ru,[I("div",Iu,[I("div",Du,[I("div",Nu,[(X(!0),Y(En,null,ul(r.result.items,u=>(X(),yo(a,{key:u.guid,video:u,assetOptions:r.assetOptions},null,8,["video","assetOptions"]))),128))]),r.result.totalItems>r.result.items.length?(X(),Y("div",Bu,[I("button",{class:"btn-primary",onClick:e[2]||(e[2]=(...u)=>s.prevPage&&s.prevPage(...u))}," « "),I("div",null,H(r.page)+" / "+H(r.maxPage),1),I("button",{class:"btn-primary",onClick:e[3]||(e[3]=(...u)=>s.nextPage&&s.nextPage(...u))}," » ")])):al("",!0)])])])):r.search.length>0?(X(),Y("div",Lu,H(i.__("No videos found.")),1)):(X(),Y("button",{key:3,onClick:e[4]||(e[4]=u=>s.openUpload()),class:"flex flex-col overflow-hidden border-gray-600 border-dashed border-2 rounded shadow-xl w-full mb-4 p-6 items-center justify-center"},[I("h2",Mu,H(i.__("Upload Video")),1),ne(l,{class:"h-10 w-10"})]))])}const zu=fe(Eu,[["render",$u]]),ju={},qu={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"};function Hu(i,e){return X(),Y("svg",qu,[...e[0]||(e[0]=[I("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m6-6H6"},null,-1)])])}const Vu=fe(ju,[["render",Hu]]);function Wu(i,e,t){const n=[];return i.forEach(r=>typeof r!="string"?n.push(r):e[Symbol.split](r).forEach((s,o,a)=>{s!==""&&n.push(s),o<a.length-1&&n.push(t)})),n}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function Or(i,e){const t=/\$/g,n="$$$$";let r=[i];if(e==null)return r;for(const s of Object.keys(e))if(s!=="_"){let o=e[s];typeof o=="string"&&(o=t[Symbol.replace](o,n)),r=Wu(r,new RegExp(`%\\{${s}\\}`,"g"),o)}return r}const Gu=i=>{throw new Error(`missing string: ${i}`)};var jt,qt,kn;class So{constructor(e,{onMissingKey:t=Gu}={}){L(this,qt);v(this,"locale");L(this,jt);this.locale={strings:{},pluralize(n){return n===1?0:1}},Array.isArray(e)?e.forEach(D(this,qt,kn),this):D(this,qt,kn).call(this,e),j(this,jt,t)}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let n=this.locale.strings[e];if(n==null&&(w(this,jt).call(this,e),n=e),typeof n=="object"){if(t&&typeof t.smart_count<"u"){const s=this.locale.pluralize(t.smart_count);return Or(n[s],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof n!="string")throw new Error("string was not a string");return Or(n,t)}}jt=new WeakMap,qt=new WeakSet,kn=function(e){if(!e?.strings)return;const t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})};class ur{constructor(e,t){v(this,"uppy");v(this,"opts");v(this,"id");v(this,"defaultLocale");v(this,"i18n");v(this,"i18nArray");v(this,"type");v(this,"VERSION");this.uppy=e,this.opts=t??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new So([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}function qi(i){return i<10?`0${i}`:i.toString()}function yi(){const i=new Date,e=qi(i.getHours()),t=qi(i.getMinutes()),n=qi(i.getSeconds());return`${e}:${t}:${n}`}const Ku={debug:()=>{},warn:()=>{},error:(...i)=>console.error(`[Uppy] [${yi()}]`,...i)},Xu={debug:(...i)=>console.debug(`[Uppy] [${yi()}]`,...i),warn:(...i)=>console.warn(`[Uppy] [${yi()}]`,...i),error:(...i)=>console.error(`[Uppy] [${yi()}]`,...i)};function Fo(i){return typeof i!="object"||i===null||!("nodeType"in i)?!1:i.nodeType===Node.ELEMENT_NODE}function Yu(i,e=document){return typeof i=="string"?e.querySelector(i):Fo(i)?i:null}function Po(i){for(;i&&!i.dir;)i=i.parentNode;return i?.dir}var Zt,z,To,ze,Ar,Co,Eo,xo,cr,Un,On,Ut={},ko=[],Qu=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Jt=Array.isArray;function xe(i,e){for(var t in e)i[t]=e[t];return i}function dr(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function Ot(i,e,t){var n,r,s,o={};for(s in e)s=="key"?n=e[s]:s=="ref"?r=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Zt.call(arguments,2):t),typeof i=="function"&&i.defaultProps!=null)for(s in i.defaultProps)o[s]===void 0&&(o[s]=i.defaultProps[s]);return xt(i,o,n,r,null)}function xt(i,e,t,n,r){var s={type:i,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++To,__i:-1,__u:0};return r==null&&z.vnode!=null&&z.vnode(s),s}function Zu(){return{current:null}}function we(i){return i.children}function pe(i,e){this.props=i,this.context=e}function mt(i,e){if(e==null)return i.__?mt(i.__,i.__i+1):null;for(var t;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null)return t.__e;return typeof i.type=="function"?mt(i):null}function Uo(i){var e,t;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null){i.__e=i.__c.base=t.__e;break}return Uo(i)}}function Rr(i){(!i.__d&&(i.__d=!0)&&ze.push(i)&&!Pi.__r++||Ar!=z.debounceRendering)&&((Ar=z.debounceRendering)||Co)(Pi)}function Pi(){for(var i,e,t,n,r,s,o,a=1;ze.length;)ze.length>a&&ze.sort(Eo),i=ze.shift(),a=ze.length,i.__d&&(t=void 0,n=void 0,r=(n=(e=i).__v).__e,s=[],o=[],e.__P&&((t=xe({},n)).__v=n.__v+1,z.vnode&&z.vnode(t),hr(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[r]:null,s,r??mt(n),!!(32&n.__u),o),t.__v=n.__v,t.__.__k[t.__i]=t,Ro(s,t,o),n.__e=n.__=null,t.__e!=r&&Uo(t)));Pi.__r=0}function Oo(i,e,t,n,r,s,o,a,l,u,d){var h,b,S,x,T,O,A,m=n&&n.__k||ko,y=e.length;for(l=Ju(t,e,m,l,y),h=0;h<y;h++)(S=t.__k[h])!=null&&(b=S.__i==-1?Ut:m[S.__i]||Ut,S.__i=h,O=hr(i,S,b,r,s,o,a,l,u,d),x=S.__e,S.ref&&b.ref!=S.ref&&(b.ref&&pr(b.ref,null,S),d.push(S.ref,S.__c||x,S)),T==null&&x!=null&&(T=x),(A=!!(4&S.__u))||b.__k===S.__k?l=Ao(S,l,i,A):typeof S.type=="function"&&O!==void 0?l=O:x&&(l=x.nextSibling),S.__u&=-7);return t.__e=T,l}function Ju(i,e,t,n,r){var s,o,a,l,u,d=t.length,h=d,b=0;for(i.__k=new Array(r),s=0;s<r;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=i.__k[s]=xt(null,o,null,null,null):Jt(o)?o=i.__k[s]=xt(we,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?o=i.__k[s]=xt(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):i.__k[s]=o,l=s+b,o.__=i,o.__b=i.__b+1,a=null,(u=o.__i=ec(o,t,l,h))!=-1&&(h--,(a=t[u])&&(a.__u|=2)),a==null||a.__v==null?(u==-1&&(r>d?b--:r<d&&b++),typeof o.type!="function"&&(o.__u|=4)):u!=l&&(u==l-1?b--:u==l+1?b++:(u>l?b--:b++,o.__u|=4))):i.__k[s]=null;if(h)for(s=0;s<d;s++)(a=t[s])!=null&&(2&a.__u)==0&&(a.__e==n&&(n=mt(a)),Do(a,a));return n}function Ao(i,e,t,n){var r,s;if(typeof i.type=="function"){for(r=i.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=i,e=Ao(r[s],e,t,n));return e}i.__e!=e&&(n&&(e&&i.type&&!e.parentNode&&(e=mt(i)),t.insertBefore(i.__e,e||null)),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ve(i,e){return e=e||[],i==null||typeof i=="boolean"||(Jt(i)?i.some(function(t){ve(t,e)}):e.push(i)),e}function ec(i,e,t,n){var r,s,o,a=i.key,l=i.type,u=e[t],d=u!=null&&(2&u.__u)==0;if(u===null&&a==null||d&&a==u.key&&l==u.type)return t;if(n>(d?1:0)){for(r=t-1,s=t+1;r>=0||s<e.length;)if((u=e[o=r>=0?r--:s++])!=null&&(2&u.__u)==0&&a==u.key&&l==u.type)return o}return-1}function Ir(i,e,t){e[0]=="-"?i.setProperty(e,t??""):i[e]=t==null?"":typeof t!="number"||Qu.test(e)?t:t+"px"}function ni(i,e,t,n,r){var s,o;e:if(e=="style")if(typeof t=="string")i.style.cssText=t;else{if(typeof n=="string"&&(i.style.cssText=n=""),n)for(e in n)t&&e in t||Ir(i.style,e,"");if(t)for(e in t)n&&t[e]==n[e]||Ir(i.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(xo,"$1")),o=e.toLowerCase(),e=o in i||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),i.l||(i.l={}),i.l[e+s]=t,t?n?t.u=n.u:(t.u=cr,i.addEventListener(e,s?On:Un,s)):i.removeEventListener(e,s?On:Un,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&t==1?"":t))}}function Dr(i){return function(e){if(this.l){var t=this.l[e.type+i];if(e.t==null)e.t=cr++;else if(e.t<t.u)return;return t(z.event?z.event(e):e)}}}function hr(i,e,t,n,r,s,o,a,l,u){var d,h,b,S,x,T,O,A,m,y,_,F,R,U,M,N,K,W=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),s=[a=e.__e=t.__e]),(d=z.__b)&&d(e);e:if(typeof W=="function")try{if(A=e.props,m="prototype"in W&&W.prototype.render,y=(d=W.contextType)&&n[d.__c],_=d?y?y.props.value:d.__:n,t.__c?O=(h=e.__c=t.__c).__=h.__E:(m?e.__c=h=new W(A,_):(e.__c=h=new pe(A,_),h.constructor=W,h.render=ic),y&&y.sub(h),h.state||(h.state={}),h.__n=n,b=h.__d=!0,h.__h=[],h._sb=[]),m&&h.__s==null&&(h.__s=h.state),m&&W.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=xe({},h.__s)),xe(h.__s,W.getDerivedStateFromProps(A,h.__s))),S=h.props,x=h.state,h.__v=e,b)m&&W.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),m&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(m&&W.getDerivedStateFromProps==null&&A!==S&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(A,_),e.__v==t.__v||!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(A,h.__s,_)===!1){for(e.__v!=t.__v&&(h.props=A,h.state=h.__s,h.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(Z){Z&&(Z.__=e)}),F=0;F<h._sb.length;F++)h.__h.push(h._sb[F]);h._sb=[],h.__h.length&&o.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(A,h.__s,_),m&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(S,x,T)})}if(h.context=_,h.props=A,h.__P=i,h.__e=!1,R=z.__r,U=0,m){for(h.state=h.__s,h.__d=!1,R&&R(e),d=h.render(h.props,h.state,h.context),M=0;M<h._sb.length;M++)h.__h.push(h._sb[M]);h._sb=[]}else do h.__d=!1,R&&R(e),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++U<25);h.state=h.__s,h.getChildContext!=null&&(n=xe(xe({},n),h.getChildContext())),m&&!b&&h.getSnapshotBeforeUpdate!=null&&(T=h.getSnapshotBeforeUpdate(S,x)),N=d,d!=null&&d.type===we&&d.key==null&&(N=Io(d.props.children)),a=Oo(i,Jt(N)?N:[N],e,t,n,r,s,o,a,l,u),h.base=e.__e,e.__u&=-161,h.__h.length&&o.push(h),O&&(h.__E=h.__=null)}catch(Z){if(e.__v=null,l||s!=null)if(Z.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else{for(K=s.length;K--;)dr(s[K]);An(e)}else e.__e=t.__e,e.__k=t.__k,Z.then||An(e);z.__e(Z,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=tc(t.__e,e,t,n,r,s,o,l,u);return(d=z.diffed)&&d(e),128&e.__u?void 0:a}function An(i){i&&i.__c&&(i.__c.__e=!0),i&&i.__k&&i.__k.forEach(An)}function Ro(i,e,t){for(var n=0;n<t.length;n++)pr(t[n],t[++n],t[++n]);z.__c&&z.__c(e,i),i.some(function(r){try{i=r.__h,r.__h=[],i.some(function(s){s.call(r)})}catch(s){z.__e(s,r.__v)}})}function Io(i){return typeof i!="object"||i==null||i.__b&&i.__b>0?i:Jt(i)?i.map(Io):xe({},i)}function tc(i,e,t,n,r,s,o,a,l){var u,d,h,b,S,x,T,O=t.props||Ut,A=e.props,m=e.type;if(m=="svg"?r="http://www.w3.org/2000/svg":m=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(u=0;u<s.length;u++)if((S=s[u])&&"setAttribute"in S==!!m&&(m?S.localName==m:S.nodeType==3)){i=S,s[u]=null;break}}if(i==null){if(m==null)return document.createTextNode(A);i=document.createElementNS(r,m,A.is&&A),a&&(z.__m&&z.__m(e,s),a=!1),s=null}if(m==null)O===A||a&&i.data==A||(i.data=A);else{if(s=s&&Zt.call(i.childNodes),!a&&s!=null)for(O={},u=0;u<i.attributes.length;u++)O[(S=i.attributes[u]).name]=S.value;for(u in O)if(S=O[u],u!="children"){if(u=="dangerouslySetInnerHTML")h=S;else if(!(u in A)){if(u=="value"&&"defaultValue"in A||u=="checked"&&"defaultChecked"in A)continue;ni(i,u,null,S,r)}}for(u in A)S=A[u],u=="children"?b=S:u=="dangerouslySetInnerHTML"?d=S:u=="value"?x=S:u=="checked"?T=S:a&&typeof S!="function"||O[u]===S||ni(i,u,S,O[u],r);if(d)a||h&&(d.__html==h.__html||d.__html==i.innerHTML)||(i.innerHTML=d.__html),e.__k=[];else if(h&&(i.innerHTML=""),Oo(e.type=="template"?i.content:i,Jt(b)?b:[b],e,t,n,m=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,o,s?s[0]:t.__k&&mt(t,0),a,l),s!=null)for(u=s.length;u--;)dr(s[u]);a||(u="value",m=="progress"&&x==null?i.removeAttribute("value"):x!=null&&(x!==i[u]||m=="progress"&&!x||m=="option"&&x!=O[u])&&ni(i,u,x,O[u],r),u="checked",T!=null&&T!=i[u]&&ni(i,u,T,O[u],r))}return i}function pr(i,e,t){try{if(typeof i=="function"){var n=typeof i.__u=="function";n&&i.__u(),n&&e==null||(i.__u=i(e))}else i.current=e}catch(r){z.__e(r,t)}}function Do(i,e,t){var n,r;if(z.unmount&&z.unmount(i),(n=i.ref)&&(n.current&&n.current!=i.__e||pr(n,null,e)),(n=i.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){z.__e(s,e)}n.base=n.__P=null}if(n=i.__k)for(r=0;r<n.length;r++)n[r]&&Do(n[r],e,t||typeof i.type!="function");t||dr(i.__e),i.__c=i.__=i.__e=void 0}function ic(i,e,t){return this.constructor(i,t)}function nc(i,e,t){var n,r,s,o;e==document&&(e=document.documentElement),z.__&&z.__(i,e),r=(n=!1)?null:e.__k,s=[],o=[],hr(e,i=e.__k=Ot(we,null,[i]),r||Ut,Ut,e.namespaceURI,r?null:e.firstChild?Zt.call(e.childNodes):null,s,r?r.__e:e.firstChild,n,o),Ro(s,i,o)}function No(i,e,t){var n,r,s,o,a=xe({},i.props);for(s in i.type&&i.type.defaultProps&&(o=i.type.defaultProps),e)s=="key"?n=e[s]:s=="ref"?r=e[s]:a[s]=e[s]===void 0&&o!=null?o[s]:e[s];return arguments.length>2&&(a.children=arguments.length>3?Zt.call(arguments,2):t),xt(i.type,a,n||i.key,r||i.ref,null)}Zt=ko.slice,z={__e:function(i,e,t,n){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(i)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(i,n||{}),o=r.__d),o)return r.__E=r}catch(a){i=a}throw i}},To=0,pe.prototype.setState=function(i,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=xe({},this.state),typeof i=="function"&&(i=i(xe({},t),this.props)),i&&xe(t,i),i!=null&&this.__v&&(e&&this._sb.push(e),Rr(this))},pe.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),Rr(this))},pe.prototype.render=we,ze=[],Co=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Eo=function(i,e){return i.__v.__b-e.__v.__b},Pi.__r=0,xo=/(PointerCapture)$|Capture$/i,cr=0,Un=Dr(!1),On=Dr(!0);var At,J,Hi,Nr,Rt=0,Bo=[],ee=z,Br=ee.__b,Lr=ee.__r,Mr=ee.diffed,$r=ee.__c,zr=ee.unmount,jr=ee.__;function fr(i,e){ee.__h&&ee.__h(J,i,Rt||e),Rt=0;var t=J.__H||(J.__H={__:[],__h:[]});return i>=t.__.length&&t.__.push({}),t.__[i]}function Ti(i){return Rt=1,rc(Mo,i)}function rc(i,e,t){var n=fr(At++,2);if(n.t=i,!n.__c&&(n.__=[t?t(e):Mo(void 0,e),function(a){var l=n.__N?n.__N[0]:n.__[0],u=n.t(l,a);l!==u&&(n.__N=[u,n.__[1]],n.__c.setState({}))}],n.__c=J,!J.__f)){var r=function(a,l,u){if(!n.__c.__H)return!0;var d=n.__c.__H.__.filter(function(b){return!!b.__c});if(d.every(function(b){return!b.__N}))return!s||s.call(this,a,l,u);var h=n.__c.props!==a;return d.forEach(function(b){if(b.__N){var S=b.__[0];b.__=b.__N,b.__N=void 0,S!==b.__[0]&&(h=!0)}}),s&&s.call(this,a,l,u)||h};J.__f=!0;var s=J.shouldComponentUpdate,o=J.componentWillUpdate;J.componentWillUpdate=function(a,l,u){if(this.__e){var d=s;s=void 0,r(a,l,u),s=d}o&&o.call(this,a,l,u)},J.shouldComponentUpdate=r}return n.__N||n.__}function Rn(i,e){var t=fr(At++,3);!ee.__s&&Lo(t.__H,e)&&(t.__=i,t.u=e,J.__H.__h.push(t))}function bi(i){return Rt=5,mr(function(){return{current:i}},[])}function mr(i,e){var t=fr(At++,7);return Lo(t.__H,e)&&(t.__=i(),t.__H=e,t.__h=i),t.__}function sc(i,e){return Rt=8,mr(function(){return i},e)}function oc(){for(var i;i=Bo.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(vi),i.__H.__h.forEach(In),i.__H.__h=[]}catch(e){i.__H.__h=[],ee.__e(e,i.__v)}}ee.__b=function(i){J=null,Br&&Br(i)},ee.__=function(i,e){i&&e.__k&&e.__k.__m&&(i.__m=e.__k.__m),jr&&jr(i,e)},ee.__r=function(i){Lr&&Lr(i),At=0;var e=(J=i.__c).__H;e&&(Hi===J?(e.__h=[],J.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(vi),e.__h.forEach(In),e.__h=[],At=0)),Hi=J},ee.diffed=function(i){Mr&&Mr(i);var e=i.__c;e&&e.__H&&(e.__H.__h.length&&(Bo.push(e)!==1&&Nr===ee.requestAnimationFrame||((Nr=ee.requestAnimationFrame)||ac)(oc)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Hi=J=null},ee.__c=function(i,e){e.some(function(t){try{t.__h.forEach(vi),t.__h=t.__h.filter(function(n){return!n.__||In(n)})}catch(n){e.some(function(r){r.__h&&(r.__h=[])}),e=[],ee.__e(n,t.__v)}}),$r&&$r(i,e)},ee.unmount=function(i){zr&&zr(i);var e,t=i.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{vi(n)}catch(r){e=r}}),t.__H=void 0,e&&ee.__e(e,t.__v))};var qr=typeof requestAnimationFrame=="function";function ac(i){var e,t=function(){clearTimeout(n),qr&&cancelAnimationFrame(e),setTimeout(i)},n=setTimeout(t,35);qr&&(e=requestAnimationFrame(t))}function vi(i){var e=J,t=i.__c;typeof t=="function"&&(i.__c=void 0,t()),J=e}function In(i){var e=J;i.__c=i.__(),J=e}function Lo(i,e){return!i||i.length!==e.length||e.some(function(t,n){return t!==i[n]})}function Mo(i,e){return typeof e=="function"?e(i):e}function lc(i,e){for(var t in e)i[t]=e[t];return i}function Hr(i,e){for(var t in i)if(t!=="__source"&&!(t in e))return!0;for(var n in e)if(n!=="__source"&&i[n]!==e[n])return!0;return!1}function Vr(i,e){this.props=i,this.context=e}(Vr.prototype=new pe).isPureReactComponent=!0,Vr.prototype.shouldComponentUpdate=function(i,e){return Hr(this.props,i)||Hr(this.state,e)};var Wr=z.__b;z.__b=function(i){i.type&&i.type.__f&&i.ref&&(i.props.ref=i.ref,i.ref=null),Wr&&Wr(i)};var uc=z.__e;z.__e=function(i,e,t,n){if(i.then){for(var r,s=e;s=s.__;)if((r=s.__c)&&r.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),r.__c(i,e)}uc(i,e,t,n)};var Gr=z.unmount;function $o(i,e,t){return i&&(i.__c&&i.__c.__H&&(i.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),i.__c.__H=null),(i=lc({},i)).__c!=null&&(i.__c.__P===t&&(i.__c.__P=e),i.__c.__e=!0,i.__c=null),i.__k=i.__k&&i.__k.map(function(n){return $o(n,e,t)})),i}function zo(i,e,t){return i&&t&&(i.__v=null,i.__k=i.__k&&i.__k.map(function(n){return zo(n,e,t)}),i.__c&&i.__c.__P===e&&(i.__e&&t.appendChild(i.__e),i.__c.__e=!0,i.__c.__P=t)),i}function Vi(){this.__u=0,this.o=null,this.__b=null}function jo(i){if(!i.__)return null;var e=i.__.__c;return e&&e.__a&&e.__a(i)}function ri(){this.i=null,this.l=null}z.unmount=function(i){var e=i.__c;e&&(e.__z=!0),e&&e.__R&&e.__R(),e&&32&i.__u&&(i.type=null),Gr&&Gr(i)},(Vi.prototype=new pe).__c=function(i,e){var t=e.__c,n=this;n.o==null&&(n.o=[]),n.o.push(t);var r=jo(n.__v),s=!1,o=function(){s||n.__z||(s=!0,t.__R=null,r?r(l):l())};t.__R=o;var a=t.__P;t.__P=null;var l=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=zo(u,u.__c.__P,u.__c.__O)}var d;for(n.setState({__a:n.__b=null});d=n.o.pop();)d.__P=a,d.forceUpdate()}};n.__u++||32&e.__u||n.setState({__a:n.__b=n.__v.__k[0]}),i.then(o,o)},Vi.prototype.componentWillUnmount=function(){this.o=[]},Vi.prototype.render=function(i,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=$o(this.__b,t,n.__O=n.__P)}this.__b=null}var r=e.__a&&Ot(we,null,i.fallback);return r&&(r.__u&=-33),[Ot(we,null,e.__a?null:i.children),r]};var Kr=function(i,e,t){if(++t[1]===t[0]&&i.l.delete(e),i.props.revealOrder&&(i.props.revealOrder[0]!=="t"||!i.l.size))for(t=i.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;i.i=t=t[2]}};(ri.prototype=new pe).__a=function(i){var e=this,t=jo(e.__v),n=e.l.get(i);return n[0]++,function(r){var s=function(){e.props.revealOrder?(n.push(r),Kr(e,i,n)):r()};t?t(s):s()}},ri.prototype.render=function(i){this.i=null,this.l=new Map;var e=ve(i.children);i.revealOrder&&i.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return i.children},ri.prototype.componentDidUpdate=ri.prototype.componentDidMount=function(){var i=this;this.l.forEach(function(e,t){Kr(i,t,e)})};var cc=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,dc=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,hc=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,pc=/[A-Z0-9]/g,fc=typeof document<"u",mc=function(i){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(i)};function Xr(i,e,t){return e.__k==null&&(e.textContent=""),nc(i,e),typeof t=="function"&&t(),i?i.__c:null}pe.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(i){Object.defineProperty(pe.prototype,i,{configurable:!0,get:function(){return this["UNSAFE_"+i]},set:function(e){Object.defineProperty(this,i,{configurable:!0,writable:!0,value:e})}})});var Yr=z.event;function gc(){}function yc(){return this.cancelBubble}function bc(){return this.defaultPrevented}z.event=function(i){return Yr&&(i=Yr(i)),i.persist=gc,i.isPropagationStopped=yc,i.isDefaultPrevented=bc,i.nativeEvent=i};var vc={enumerable:!1,configurable:!0,get:function(){return this.class}},Qr=z.vnode;z.vnode=function(i){typeof i.type=="string"&&(function(e){var t=e.props,n=e.type,r={},s=n.indexOf("-")===-1;for(var o in t){var a=t[o];if(!(o==="value"&&"defaultValue"in t&&a==null||fc&&o==="children"&&n==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||n!=="input"&&n!=="textarea"||mc(t.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":hc.test(o)&&(o=l):l=o="oninput":s&&dc.test(o)?o=o.replace(pc,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&r[o=l]&&(o="oninputCapture"),r[o]=a}}n=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=ve(t.children).forEach(function(u){u.props.selected=r.value.indexOf(u.props.value)!=-1})),n=="select"&&r.defaultValue!=null&&(r.value=ve(t.children).forEach(function(u){u.props.selected=r.multiple?r.defaultValue.indexOf(u.props.value)!=-1:r.defaultValue==u.props.value})),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",vc)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r})(i),i.$$typeof=cc,Qr&&Qr(i)};var Zr=z.__r;z.__r=function(i){Zr&&Zr(i),i.__c};var Jr=z.diffed;z.diffed=function(i){Jr&&Jr(i);var e=i.props,t=i.__e;t!=null&&i.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};function _c(i){let e=null,t;return(...n)=>(t=n,e||(e=Promise.resolve().then(()=>(e=null,i(...t)))),e)}var Ht;const ki=class ki extends ur{constructor(){super(...arguments);L(this,Ht);v(this,"isTargetDOMEl");v(this,"el");v(this,"parent");v(this,"title")}getTargetPlugin(t){let n;if(typeof t?.addTarget=="function")n=t,n instanceof ki||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:n,UIPlugin:ki}}));else if(typeof t=="function"){const r=t;this.uppy.iteratePlugins(s=>{s instanceof r&&(n=s)})}return n}mount(t,n){const r=n.id,s=Yu(t);if(s){this.isTargetDOMEl=!0;const l=document.createElement("div");return l.classList.add("uppy-Root"),j(this,Ht,_c(u=>{this.uppy.getPlugin(this.id)&&(Xr(this.render(u,l),l),this.afterUpdate())})),this.uppy.log(`Installing ${r} to a DOM element '${t}'`),this.opts.replaceTargetContent&&(s.innerHTML=""),Xr(this.render(this.uppy.getState(),l),l),this.el=l,s.appendChild(l),l.dir=this.opts.direction||Po(l)||"ltr",this.onMount(),this.el}const o=this.getTargetPlugin(t);if(o)return this.uppy.log(`Installing ${r} to ${o.id}`),this.parent=o,this.el=o.addTarget(n),this.onMount(),this.el;this.uppy.log(`Not installing ${r}`);let a=`Invalid target option given to ${r}.`;throw typeof t=="function"?a+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":a+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(a)}render(t,n){throw new Error("Extend the render method to add your plugin to a DOM element")}update(t){var n;this.el!=null&&((n=w(this,Ht))==null||n.call(this,t))}unmount(){this.isTargetDOMEl&&this.el?.remove(),this.onUnmount()}onMount(){}onUnmount(){}};Ht=new WeakMap;let gt=ki;const wc="4.3.2",Sc={version:wc};var ot,Ui,Ho;class qo{constructor(){L(this,Ui);v(this,"state",{});L(this,ot,new Set)}getState(){return this.state}setState(e){const t={...this.state},n={...this.state,...e};this.state=n,D(this,Ui,Ho).call(this,t,n,e)}subscribe(e){return w(this,ot).add(e),()=>{w(this,ot).delete(e)}}}ot=new WeakMap,Ui=new WeakSet,Ho=function(...e){w(this,ot).forEach(t=>{t(...e)})},v(qo,"VERSION",Sc.version);function Vo(i){const e=i.lastIndexOf(".");return e===-1||e===i.length-1?{name:i,extension:void 0}:{name:i.slice(0,e),extension:i.slice(e+1)}}const es={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function Wo(i){if(i.type)return i.type;const e=i.name?Vo(i.name).extension?.toLowerCase():null;return e&&e in es?es[e]:"application/octet-stream"}function Fc(i){return i.charCodeAt(0).toString(32)}function ts(i){let e="";return i.replace(/[^A-Z0-9]/gi,t=>(e+=`-${Fc(t)}`,"/"))+e}function Pc(i,e){let t=e||"uppy";return typeof i.name=="string"&&(t+=`-${ts(i.name.toLowerCase())}`),i.type!==void 0&&(t+=`-${i.type}`),i.meta&&typeof i.meta.relativePath=="string"&&(t+=`-${ts(i.meta.relativePath.toLowerCase())}`),i.data.size!==void 0&&(t+=`-${i.data.size}`),i.data.lastModified!==void 0&&(t+=`-${i.data.lastModified}`),t}function Tc(i){return!i.isRemote||!i.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(i.remote.provider)}function Cc(i,e){if(Tc(i))return i.id;const t=Wo(i);return Pc({...i,type:t},e)}var Wi,is;function gr(){if(is)return Wi;is=1;function i(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Wi=i,Wi}var Gi,ns;function Ec(){if(ns)return Gi;ns=1;var i=typeof it=="object"&&it&&it.Object===Object&&it;return Gi=i,Gi}var Ki,rs;function Go(){if(rs)return Ki;rs=1;var i=Ec(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=i||e||Function("return this")();return Ki=t,Ki}var Xi,ss;function xc(){if(ss)return Xi;ss=1;var i=Go(),e=function(){return i.Date.now()};return Xi=e,Xi}var Yi,os;function kc(){if(os)return Yi;os=1;var i=/\s/;function e(t){for(var n=t.length;n--&&i.test(t.charAt(n)););return n}return Yi=e,Yi}var Qi,as;function Uc(){if(as)return Qi;as=1;var i=kc(),e=/^\s+/;function t(n){return n&&n.slice(0,i(n)+1).replace(e,"")}return Qi=t,Qi}var Zi,ls;function Ko(){if(ls)return Zi;ls=1;var i=Go(),e=i.Symbol;return Zi=e,Zi}var Ji,us;function Oc(){if(us)return Ji;us=1;var i=Ko(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,r=i?i.toStringTag:void 0;function s(o){var a=t.call(o,r),l=o[r];try{o[r]=void 0;var u=!0}catch{}var d=n.call(o);return u&&(a?o[r]=l:delete o[r]),d}return Ji=s,Ji}var en,cs;function Ac(){if(cs)return en;cs=1;var i=Object.prototype,e=i.toString;function t(n){return e.call(n)}return en=t,en}var tn,ds;function Rc(){if(ds)return tn;ds=1;var i=Ko(),e=Oc(),t=Ac(),n="[object Null]",r="[object Undefined]",s=i?i.toStringTag:void 0;function o(a){return a==null?a===void 0?r:n:s&&s in Object(a)?e(a):t(a)}return tn=o,tn}var nn,hs;function Ic(){if(hs)return nn;hs=1;function i(e){return e!=null&&typeof e=="object"}return nn=i,nn}var rn,ps;function Dc(){if(ps)return rn;ps=1;var i=Rc(),e=Ic(),t="[object Symbol]";function n(r){return typeof r=="symbol"||e(r)&&i(r)==t}return rn=n,rn}var sn,fs;function Nc(){if(fs)return sn;fs=1;var i=Uc(),e=gr(),t=Dc(),n=NaN,r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function l(u){if(typeof u=="number")return u;if(t(u))return n;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=i(u);var h=s.test(u);return h||o.test(u)?a(u.slice(2),h?2:8):r.test(u)?n:+u}return sn=l,sn}var on,ms;function Xo(){if(ms)return on;ms=1;var i=gr(),e=xc(),t=Nc(),n="Expected a function",r=Math.max,s=Math.min;function o(a,l,u){var d,h,b,S,x,T,O=0,A=!1,m=!1,y=!0;if(typeof a!="function")throw new TypeError(n);l=t(l)||0,i(u)&&(A=!!u.leading,m="maxWait"in u,b=m?r(t(u.maxWait)||0,l):b,y="trailing"in u?!!u.trailing:y);function _(k){var Q=d,ae=h;return d=h=void 0,O=k,S=a.apply(ae,Q),S}function F(k){return O=k,x=setTimeout(M,l),A?_(k):S}function R(k){var Q=k-T,ae=k-O,g=l-Q;return m?s(g,b-ae):g}function U(k){var Q=k-T,ae=k-O;return T===void 0||Q>=l||Q<0||m&&ae>=b}function M(){var k=e();if(U(k))return N(k);x=setTimeout(M,R(k))}function N(k){return x=void 0,y&&d?_(k):(d=h=void 0,S)}function K(){x!==void 0&&clearTimeout(x),O=0,d=T=h=x=void 0}function W(){return x===void 0?S:N(e())}function Z(){var k=e(),Q=U(k);if(d=arguments,h=this,T=k,Q){if(x===void 0)return F(T);if(m)return clearTimeout(x),x=setTimeout(M,l),_(T)}return x===void 0&&(x=setTimeout(M,l)),S}return Z.cancel=K,Z.flush=W,Z}return on=o,on}var an,gs;function Bc(){if(gs)return an;gs=1;var i=Xo(),e=gr(),t="Expected a function";function n(r,s,o){var a=!0,l=!0;if(typeof r!="function")throw new TypeError(t);return e(o)&&(a="leading"in o?!!o.leading:a,l="trailing"in o?!!o.trailing:l),i(r,s,{leading:a,maxWait:s,trailing:l})}return an=n,an}var Lc=Bc();const Mc=Me(Lc);var ln,ys;function $c(){return ys||(ys=1,ln=function(){var e={},t=e._fns={};e.emit=function(o,a,l,u,d,h,b){var S=n(o);S.length&&r(o,S,[a,l,u,d,h,b])},e.on=function(o,a){t[o]||(t[o]=[]),t[o].push(a)},e.once=function(o,a){function l(){a.apply(this,arguments),e.off(o,l)}this.on(o,l)},e.off=function(o,a){var l=[];if(o&&a){var u=this._fns[o],d=0,h=u?u.length:0;for(d;d<h;d++)u[d]!==a&&l.push(u[d])}l.length?this._fns[o]=l:delete this._fns[o]};function n(s){var o=t[s]?t[s]:[],a=s.indexOf(":"),l=a===-1?[s]:[s.substring(0,a),s.substring(a+1)],u=Object.keys(t),d=0,h=u.length;for(d;d<h;d++){var b=u[d];if(b==="*"&&(o=o.concat(t[b])),l.length===2&&l[0]===b){o=o.concat(t[b]);break}}return o}function r(s,o,a){var l=0,u=o.length;for(l;l<u&&o[l];l++)o[l].event=s,o[l].apply(o[l],a)}return e}),ln}var zc=$c();const jc=Me(zc);let qc="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",yr=(i=21)=>{let e="",t=i|0;for(;t--;)e+=qc[Math.random()*64|0];return e};const Hc="4.5.3",Vc={version:Hc};function Wc(i,e){return e.name?e.name:i.split("/")[0]==="image"?`${i.split("/")[0]}.${i.split("/")[1]}`:"noname"}const Gc={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var un,bs;function Kc(){return bs||(bs=1,un=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const t=e<0;let n=Math.abs(e);if(t&&(n=-n),n===0)return"0 B";const r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.min(Math.floor(Math.log(n)/Math.log(1024)),r.length-1),o=Number(n/1024**s),a=r[s];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`}),un}var Xc=Kc();const qe=Me(Xc);var cn,vs;function Yc(){if(vs)return cn;vs=1;function i(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}return i.prototype.match=function(e){var t=!0,n=this.parts,r,s=n.length,o;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(o=(e||"").split(this.separator),r=0;t&&r<s;r++)n[r]!=="*"&&(r<o.length?t=n[r]===o[r]:t=!1);t=t&&o}else if(typeof e.splice=="function")for(t=[],r=e.length;r--;)this.match(e[r])&&(t[t.length]=e[r]);else if(typeof e=="object"){t={};for(var a in e)this.match(a)&&(t[a]=e[a])}return t},cn=function(e,t,n){var r=new i(e,n||/[\/\.]/);return typeof t<"u"?r.match(t):r},cn}var dn,_s;function Qc(){if(_s)return dn;_s=1;var i=Yc(),e=/[\/\+\.]/;return dn=function(t,n){function r(s){var o=i(s,t,e);return o&&o.length>=2}return n?r(n.split(";")[0]):r},dn}var Zc=Qc();const Jc=Me(Zc),ed={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class ye extends Error{constructor(t,n){super(t);v(this,"isUserFacing");v(this,"file");v(this,"isRestriction",!0);this.isUserFacing=n?.isUserFacing??!0,n?.file&&(this.file=n.file)}}class td{constructor(e,t){v(this,"getI18n");v(this,"getOpts");this.getI18n=t,this.getOpts=()=>{const n=e();if(n.restrictions?.allowedFileTypes!=null&&!Array.isArray(n.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return n}}validateAggregateRestrictions(e,t){const{maxTotalFileSize:n,maxNumberOfFiles:r}=this.getOpts().restrictions;if(r&&e.filter(o=>!o.isGhost).length+t.length>r)throw new ye(`${this.getI18n()("youCanOnlyUploadX",{smart_count:r})}`);if(n){const s=[...e,...t].reduce((o,a)=>o+(a.size??0),0);if(s>n)throw new ye(this.getI18n()("aggregateExceedsSize",{sizeAllowed:qe(n),size:qe(s)}))}}validateSingleFile(e){const{maxFileSize:t,minFileSize:n,allowedFileTypes:r}=this.getOpts().restrictions;if(r&&!r.some(o=>o.includes("/")?e.type?Jc(e.type.replace(/;.*?$/,""),o):!1:o[0]==="."&&e.extension?e.extension.toLowerCase()===o.slice(1).toLowerCase():!1)){const o=r.join(", ");throw new ye(this.getI18n()("youCanOnlyUploadFileTypes",{types:o}),{file:e})}if(t&&e.size!=null&&e.size>t)throw new ye(this.getI18n()("exceedsSize",{size:qe(t),file:e.name??this.getI18n()("unnamed")}),{file:e});if(n&&e.size!=null&&e.size<n)throw new ye(this.getI18n()("inferiorSize",{size:qe(n)}),{file:e})}validate(e,t){t.forEach(n=>{this.validateSingleFile(n)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new ye(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new ye(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:n}=this.getOpts().restrictions,r=[];for(const s of n)(!Object.hasOwn(e.meta,s)||e.meta[s]==="")&&r.push(s);return{missingFields:r,error:t}}}function id(i){if(i==null&&typeof navigator<"u"&&(i=navigator.userAgent),!i)return!0;const e=/Edge\/(\d+\.\d+)/.exec(i);if(!e)return!0;const n=e[1].split(".",2),r=parseInt(n[0],10),s=parseInt(n[1],10);return r<15||r===15&&s<15063||r>18||r===18&&s>=18218}const si={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var me,ge,Vt,He,at,lt,Ve,B,$e,Nn,Yo,Bn,Qo,Ln,Mn,$n,zn,Oi,jn,We,Zo,Jo,Re,Wt,wt,ea,_i,St;const Ai=class Ai{constructor(e){L(this,B);L(this,me,Object.create(null));L(this,ge);L(this,Vt);L(this,He,jc());L(this,at,new Set);L(this,lt,new Set);L(this,Ve,new Set);v(this,"defaultLocale");v(this,"locale");v(this,"opts");v(this,"store");v(this,"i18n");v(this,"i18nArray");v(this,"scheduledAutoProceed",null);v(this,"wasOffline",!1);L(this,Oi,(e,t)=>{const n=e?this.getFile(e.id):void 0;if(e==null||!n){this.log(`Not setting progress for a file that has been removed: ${e?.id}`);return}if(n.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);return}const r={bytesTotal:t.bytesTotal,percentage:t.bytesTotal!=null&&Number.isFinite(t.bytesTotal)&&t.bytesTotal>0?Math.round(t.bytesUploaded/t.bytesTotal*100):void 0};n.progress.uploadStarted!=null?this.setFileState(e.id,{progress:{...n.progress,...r,bytesUploaded:t.bytesUploaded}}):this.setFileState(e.id,{progress:{...n.progress,...r}}),w(this,We).call(this)});L(this,We,Mc(()=>D(this,B,jn).call(this),500,{leading:!0,trailing:!0}));L(this,Re,this.updateOnlineStatus.bind(this));L(this,Wt,new Map);this.defaultLocale=Gc;const t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:ed,meta:{},onBeforeFileAdded:(r,s)=>!Object.hasOwn(s,r.id),onBeforeUpload:r=>r,store:new qo,logger:Ku,infoTimeout:5e3},n={...t,...e};this.opts={...n,restrictions:{...t.restrictions,...e?.restrictions}},e?.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e?.debug&&(this.opts.logger=Xu),this.log(`Using Core v${Ai.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...si,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:id(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),j(this,ge,new td(()=>this.opts,()=>this.i18n)),j(this,Vt,this.store.subscribe((r,s,o)=>{this.emit("state-update",r,s,o),this.updateAll(s)})),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),D(this,B,Jo).call(this)}emit(e,...t){w(this,He).emit(e,...t)}on(e,t){return w(this,He).on(e,t),this}once(e,t){return w(this,He).once(e,t),this}off(e,t){return w(this,He).off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(([n,r])=>[n,{...t[n],...r}]))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can’t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){const e=n=>this.log(`Missing i18n string: ${n}`,"error"),t=new So([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},n=Object.create(null);Object.keys(t).forEach(r=>{n[r]={...t[r],progress:{...t[r].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:n,...si})}clear(){const{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...si,files:{}})}addPreProcessor(e){w(this,at).add(e)}removePreProcessor(e){return w(this,at).delete(e)}addPostProcessor(e){w(this,Ve).add(e)}removePostProcessor(e){return w(this,Ve).delete(e)}addUploader(e){w(this,lt).add(e)}removeUploader(e){return w(this,lt).delete(e)}setMeta(e){const t={...this.getState().meta,...e},n={...this.getState().files};Object.keys(n).forEach(r=>{n[r]={...n[r],meta:{...n[r].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:n})}setFileMeta(e,t){const n={...this.getState().files};if(!n[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}const r={...n[e].meta,...t};n[e]={...n[e],meta:r},this.setState({files:n})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:n}=this.getState(),r=Object.values(e),s=[],o=[],a=[],l=[],u=[],d=[],h=[],b=[],S=[];for(const x of r){const{progress:T}=x;!T.uploadComplete&&T.uploadStarted&&(s.push(x),x.isPaused||b.push(x)),T.uploadStarted||o.push(x),(T.uploadStarted||T.preprocess||T.postprocess)&&a.push(x),T.uploadStarted&&l.push(x),x.isPaused&&u.push(x),T.uploadComplete&&d.push(x),x.error&&h.push(x),(T.preprocess||T.postprocess)&&S.push(x)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:u,completeFiles:d,erroredFiles:h,inProgressFiles:s,inProgressNotPausedFiles:b,processingFiles:S,isUploadStarted:l.length>0,isAllComplete:t===100&&d.length===r.length&&S.length===0,isAllErrored:!!n&&h.length===r.length,isAllPaused:s.length!==0&&u.length===s.length,isUploadInProgress:s.length>0,isSomeGhost:r.some(x=>x.isGhost)}}validateRestrictions(e,t=this.getFiles()){try{w(this,ge).validate(t,[e])}catch(n){return n}return null}validateSingleFile(e){try{w(this,ge).validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){const t=this.getFiles();try{w(this,ge).validateAggregateRestrictions(t,e)}catch(n){return n.message}return null}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){D(this,B,Bn).call(this,e);const{nextFilesState:t,validFilesToAdd:n,errors:r}=D(this,B,Mn).call(this,[e]),s=r.filter(a=>a.isRestriction);if(D(this,B,$e).call(this,s),r.length>0)throw r[0];this.setState({files:t});const[o]=n;return this.emit("file-added",o),this.emit("files-added",n),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),D(this,B,Ln).call(this),o.id}addFiles(e){D(this,B,Bn).call(this);const{nextFilesState:t,validFilesToAdd:n,errors:r}=D(this,B,Mn).call(this,e),s=r.filter(a=>a.isRestriction);D(this,B,$e).call(this,s);const o=r.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{const l=new Error(a);throw l.errors=o,l}}this.setState({files:t}),n.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",n),n.length>5?this.log(`Added batch of ${n.length} files`):Object.values(n).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),n.length>0&&D(this,B,Ln).call(this)}removeFiles(e){const{files:t,currentUploads:n}=this.getState(),r={...t},s={...n},o=Object.create(null);e.forEach(d=>{t[d]&&(o[d]=t[d],delete r[d])});function a(d){return o[d]===void 0}Object.keys(s).forEach(d=>{const h=n[d].fileIDs.filter(a);if(h.length===0){delete s[d];return}const{capabilities:b}=this.getState();if(h.length!==n[d].fileIDs.length&&!b.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");s[d]={...n[d],fileIDs:h}});const l={currentUploads:s,files:r};Object.keys(r).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),w(this,We).call(this);const u=Object.keys(o);u.forEach(d=>{this.emit("file-removed",o[d])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const t=this.getFile(e),r=!(t.isPaused||!1);return this.setFileState(e,{isPaused:r}),this.emit("upload-pause",t,r),r}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(n=>!e[n].progress.uploadComplete&&e[n].progress.uploadStarted).forEach(n=>{const r={...e[n],isPaused:!0};e[n]=r}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(n=>!e[n].progress.uploadComplete&&e[n].progress.uploadStarted).forEach(n=>{const r={...e[n],isPaused:!1,error:null};e[n]=r}),this.setState({files:e}),this.emit("resume-all")}async retryAll(){const e=await D(this,B,zn).call(this);return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(si)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const t=D(this,B,wt).call(this,[e],{forceAllowNewUpload:!0});return D(this,B,St).call(this,t)}logout(){this.iteratePlugins(e=>{e.provider?.logout?.()})}[Symbol.for("uppy test: updateTotalProgress")](){return D(this,B,jn).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,...t){if(typeof e!="function"){const o=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(o)}const n=new e(this,...t),r=n.id;if(!r)throw new Error("Your plugin must have an id");if(!n.type)throw new Error("Your plugin must have a type");const s=this.getPlugin(r);if(s){const o=`Already found a plugin named '${s.id}'. Tried to use: '${r}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(o)}return e.VERSION&&this.log(`Using ${r} v${e.VERSION}`),n.type in w(this,me)?w(this,me)[n.type].push(n):w(this,me)[n.type]=[n],n.install(),this.emit("plugin-added",n),this}getPlugin(e){for(const t of Object.values(w(this,me))){const n=t.find(r=>r.id===e);if(n!=null)return n}}[Symbol.for("uppy test: getPlugins")](e){return w(this,me)[e]}iteratePlugins(e){Object.values(w(this,me)).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=w(this,me)[e.type],n=t.findIndex(o=>o.id===e.id);n!==-1&&t.splice(n,1);const s={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(s)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),w(this,Vt).call(this),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",w(this,Re)),window.removeEventListener("offline",w(this,Re)))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t="info",n=3e3){const r=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:r?e.message:e,details:r?e.details:null}]}),setTimeout(()=>this.hideInfo(),n),this.emit("info-visible")}log(e,t){const{logger:n}=this.opts;switch(t){case"error":n.error(e);break;case"warning":n.warn(e);break;default:n.debug(e);break}}registerRequestClient(e,t){w(this,Wt).set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const t=w(this,Wt).get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?D(this,B,St).call(this,e):(D(this,B,_i).call(this,e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](...e){return D(this,B,wt).call(this,...e)}addResultData(e,t){if(!D(this,B,ea).call(this,e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:n}=this.getState(),r={...n[e],result:{...n[e].result,...t}};this.setState({currentUploads:{...n,[e]:r}})}async upload(){w(this,me).uploader?.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(D(this,B,$n).call(this).length>0){const r=await D(this,B,zn).call(this);if(!(this.getFiles().filter(o=>o.progress.uploadStarted==null).length>0))return this.emit("complete",r),r;({files:e}=this.getState())}const n=this.opts.onBeforeUpload(e);return n===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(n&&typeof n=="object"&&(e=n,this.setState({files:e})),Promise.resolve().then(()=>w(this,ge).validateMinNumberOfFiles(e)).catch(r=>{throw D(this,B,$e).call(this,[r]),r}).then(()=>{if(!D(this,B,Yo).call(this,e))throw new ye(this.i18n("missingRequiredMetaField"))}).catch(r=>{throw r}).then(async()=>{const{currentUploads:r}=this.getState(),s=Object.values(r).flatMap(u=>u.fileIDs),o=[];Object.keys(e).forEach(u=>{const d=this.getFile(u);!d.progress.uploadStarted&&s.indexOf(u)===-1&&o.push(d.id)});const a=D(this,B,wt).call(this,o),l=await D(this,B,St).call(this,a);return this.emit("complete",l),l}).catch(r=>{throw this.emit("error",r),this.log(r,"error"),r}))}};me=new WeakMap,ge=new WeakMap,Vt=new WeakMap,He=new WeakMap,at=new WeakMap,lt=new WeakMap,Ve=new WeakMap,B=new WeakSet,$e=function(e){for(const o of e)o.isRestriction?this.emit("restriction-failed",o.file,o):this.emit("error",o,o.file),this.log(o,"warning");const t=e.filter(o=>o.isUserFacing),n=4,r=t.slice(0,n),s=t.slice(n);r.forEach(({message:o,details:a=""})=>{this.info({message:o,details:a},"error",this.opts.infoTimeout)}),s.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:s.length})})},Nn=function(e){const{missingFields:t,error:n}=w(this,ge).getMissingRequiredMetaFields(e);return t.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:t,error:n.message}),this.log(n.message),this.emit("restriction-failed",e,n),!1):(t.length===0&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)},Yo=function(e){let t=!0;for(const n of Object.values(e))D(this,B,Nn).call(this,n)||(t=!1);return t},Bn=function(e){const{allowNewUpload:t}=this.getState();if(t===!1){const n=new ye(this.i18n("noMoreFilesAllowed"),{file:e});throw D(this,B,$e).call(this,[n]),n}},Qo=function(e){const t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,n=Wo(t),r=Wc(n,t),s=Vo(r).extension,o=Cc(t,this.getID()),a=t.meta||{};a.name=r,a.type=n;const l=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:o,name:r,extension:s||"",meta:{...this.getState().meta,...a},type:n,data:t.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:l,uploadComplete:!1,uploadStarted:null},size:l,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote,preview:t.preview}},Ln=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))},Mn=function(e){let{files:t}=this.getState(),n={...t};const r=[],s=[];for(const o of e)try{let a=D(this,B,Qo).call(this,o);const l=t[a.id]?.isGhost;l&&(a={...t[a.id],isGhost:!1,data:o.data},this.log(`Replaced the blob in the restored ghost file: ${a.name}, ${a.id}`));const u=this.opts.onBeforeFileAdded(a,n);if(t=this.getState().files,n={...t,...n},!u&&this.checkIfFileAlreadyExists(a.id))throw new ye(this.i18n("noDuplicates",{fileName:a.name??this.i18n("unnamed")}),{file:o});if(u===!1&&!l)throw new ye("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:o});typeof u=="object"&&u!==null&&(a=u),w(this,ge).validateSingleFile(a),n[a.id]=a,r.push(a)}catch(a){s.push(a)}try{w(this,ge).validateAggregateRestrictions(Object.values(t),r)}catch(o){return s.push(o),{nextFilesState:t,validFilesToAdd:[],errors:s}}return{nextFilesState:n,validFilesToAdd:r,errors:s}},$n=function(){const{files:e}=this.getState();return Object.keys(e).filter(t=>{const n=e[t];return n.error&&(!n.missingRequiredMetaFields||n.missingRequiredMetaFields.length===0)})},zn=async function(){const e=D(this,B,$n).call(this),t={...this.getState().files};if(e.forEach(r=>{t[r]={...t[r],isPaused:!1,error:null}}),this.setState({files:t,error:null}),this.emit("retry-all",this.getFilesByIds(e)),e.length===0)return{successful:[],failed:[]};const n=D(this,B,wt).call(this,e,{forceAllowNewUpload:!0});return D(this,B,St).call(this,n)},Oi=new WeakMap,jn=function(){const e=D(this,B,Zo).call(this);let t=null;e!=null&&(t=Math.round(e*100),t>100?t=100:t<0&&(t=0)),this.emit("progress",t??0),this.setState({totalProgress:t??0})},We=new WeakMap,Zo=function(){const t=this.getFiles().filter(l=>l.progress.uploadStarted||l.progress.preprocess||l.progress.postprocess);if(t.length===0)return 0;if(t.every(l=>l.progress.uploadComplete))return 1;const n=l=>l.progress.bytesTotal!=null&&l.progress.bytesTotal!==0,r=t.filter(n),s=t.filter(l=>!n(l));if(r.every(l=>l.progress.uploadComplete)&&s.length>0&&!s.every(l=>l.progress.uploadComplete))return null;const o=r.reduce((l,u)=>l+(u.progress.bytesTotal??0),0),a=r.reduce((l,u)=>l+(u.progress.bytesUploaded||0),0);return o===0?0:a/o},Jo=function(){const e=(r,s,o)=>{let a=r.message||"Unknown error";r.details&&(a+=` ${r.details}`),this.setState({error:a}),s!=null&&s.id in this.getState().files&&this.setFileState(s.id,{error:a,response:o})};this.on("error",e),this.on("upload-error",(r,s,o)=>{if(e(s,r,o),typeof s=="object"&&s.message){this.log(s.message,"error");const a=new Error(this.i18n("failedToUpload",{file:r?.name??""}));a.isUserFacing=!0,a.details=s.message,s.details&&(a.details+=` ${s.details}`),D(this,B,$e).call(this,[a])}else D(this,B,$e).call(this,[s])});let t=null;this.on("upload-stalled",(r,s)=>{const{message:o}=r,a=s.map(l=>l.meta.name).join(", ");t||(this.info({message:o,details:a},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${o} ${a}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const n=r=>{const s=r.filter(a=>{const l=a!=null&&this.getFile(a.id);return l||this.log(`Not setting progress for a file that has been removed: ${a?.id}`),l}),o=Object.fromEntries(s.map(a=>[a.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:a.size}}]));this.patchFilesState(o)};this.on("upload-start",n),this.on("upload-progress",w(this,Oi)),this.on("upload-success",(r,s)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}const o=this.getFile(r.id).progress;this.setFileState(r.id,{progress:{...o,postprocess:w(this,Ve).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:o.bytesTotal},response:s,uploadURL:s.uploadURL,isPaused:!1}),r.size==null&&this.setFileState(r.id,{size:s.bytesUploaded||o.bytesTotal}),w(this,We).call(this)}),this.on("preprocess-progress",(r,s)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}this.setFileState(r.id,{progress:{...this.getFile(r.id).progress,preprocess:s}})}),this.on("preprocess-complete",r=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}const s={...this.getState().files};s[r.id]={...s[r.id],progress:{...s[r.id].progress}},delete s[r.id].progress.preprocess,this.setState({files:s})}),this.on("postprocess-progress",(r,s)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}this.setFileState(r.id,{progress:{...this.getState().files[r.id].progress,postprocess:s}})}),this.on("postprocess-complete",r=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}const s={...this.getState().files};s[r.id]={...s[r.id],progress:{...s[r.id].progress}},delete s[r.id].progress.postprocess,this.setState({files:s})}),this.on("restored",()=>{w(this,We).call(this)}),this.on("dashboard:file-edit-complete",r=>{r&&D(this,B,Nn).call(this,r)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",w(this,Re)),window.addEventListener("offline",w(this,Re)),setTimeout(w(this,Re),3e3))},Re=new WeakMap,Wt=new WeakMap,wt=function(e,t={}){const{forceAllowNewUpload:n=!1}=t,{allowNewUpload:r,currentUploads:s}=this.getState();if(!r&&!n)throw new Error("Cannot create a new upload: already uploading.");const o=yr();return this.emit("upload",o,this.getFilesByIds(e)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...s,[o]:{fileIDs:e,step:0,result:{}}}}),o},ea=function(e){const{currentUploads:t}=this.getState();return t[e]},_i=function(e){const t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})},St=async function(e){const t=()=>{const{currentUploads:o}=this.getState();return o[e]};let n=t();const r=[...w(this,at),...w(this,lt),...w(this,Ve)];try{for(let o=n.step||0;o<r.length&&n;o++){const a=r[o];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...n,step:o}}});const{fileIDs:l}=n;await a(l,e),n=t()}}catch(o){throw D(this,B,_i).call(this,e),o}if(n){n.fileIDs.forEach(u=>{const d=this.getFile(u);d?.progress.postprocess&&this.emit("postprocess-complete",d)});const o=n.fileIDs.map(u=>this.getFile(u)),a=o.filter(u=>!u.error),l=o.filter(u=>u.error);this.addResultData(e,{successful:a,failed:l,uploadID:e}),n=t()}let s;return n&&(s=n.result,D(this,B,_i).call(this,e)),s==null&&(this.log(`Not setting result for an upload that has been removed: ${e}`),s={successful:[],failed:[],uploadID:e}),s},v(Ai,"VERSION",Vc.version);let Dn=Ai;var nd=0;function c(i,e,t,n,r,s){e||(e={});var o,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?o=e[a]:l[a]=e[a];var u={type:i,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--nd,__i:-1,__u:0,__source:r,__self:s};if(typeof i=="function"&&(o=i.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return z.vnode&&z.vnode(u),u}const rd="4.3.2",sd={version:rd},ws=300;class od extends pe{constructor(){super(...arguments);v(this,"ref",Zu())}componentWillEnter(t){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(t,ws)}componentWillLeave(t){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(t,ws)}render(){const{children:t}=this.props;return c("div",{className:"uppy-Informer-animated",ref:this.ref,children:t})}}function ad(i,e){return Object.assign(i,e)}function ld(i,e){return i?.key??e}function ud(i,e){const t=i._ptgLinkedRefs||(i._ptgLinkedRefs={});return t[e]||(t[e]=n=>{i.refs[e]=n})}function vt(i){const e={};for(let t=0;t<i.length;t++)if(i[t]!=null){const n=ld(i[t],t.toString(36));e[n]=i[t]}return e}function cd(i,e){i=i||{},e=e||{};const t=o=>Object.hasOwn(e,o)?e[o]:i[o],n={};let r=[];for(const o in i)Object.hasOwn(e,o)?r.length&&(n[o]=r,r=[]):r.push(o);const s={};for(const o in e){if(Object.hasOwn(n,o))for(let a=0;a<n[o].length;a++){const l=n[o][a];s[n[o][a]]=t(l)}s[o]=t(o)}for(let o=0;o<r.length;o++)s[r[o]]=t(r[o]);return s}const dd=i=>i;class ta extends pe{constructor(e,t){super(e,t),this.refs={},this.state={children:vt(ve(ve(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){const t=vt(ve(e.children)||[]),n=this.state.children;this.setState(s=>({children:cd(s.children,t)}));let r;for(r in t)if(Object.hasOwn(t,r)){const s=n&&Object.hasOwn(n,r);t[r]&&s&&this.currentlyTransitioningKeys[r]?(this.keysToEnter.push(r),this.keysToAbortLeave.push(r)):t[r]&&!s&&!this.currentlyTransitioningKeys[r]&&this.keysToEnter.push(r)}for(r in n)if(Object.hasOwn(n,r)){const s=t&&Object.hasOwn(t,r);n[r]&&!s&&!this.currentlyTransitioningKeys[r]&&this.keysToLeave.push(r)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){const t=this.keysToAbortLeave.indexOf(e);t!==-1&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t?.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const t=this.refs[e];t?.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const n=vt(ve(this.props.children)||[]);(!n||!Object.hasOwn(n,e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t?.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const t=this.refs[e];t?.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const n=vt(ve(this.props.children)||[]);(!n||!Object.hasOwn(n,e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const n=this.refs[e];n?.componentWillLeave?n.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const n=this.refs[e];n?.componentDidLeave&&n.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const r=vt(ve(this.props.children)||[]);if(r&&Object.hasOwn(r,e))this.performEnter(e);else{const s=ad({},this.state.children);delete s[e],this.setState({children:s})}}render({childFactory:e,transitionLeave:t,transitionName:n,transitionAppear:r,transitionEnter:s,transitionLeaveTimeout:o,transitionEnterTimeout:a,transitionAppearTimeout:l,component:u,...d},{children:h}){const b=Object.entries(h).map(([S,x])=>{if(!x)return;const T=ud(this,S);return No(e(x),{ref:T,key:S})}).filter(Boolean);return Ot(u,d,b)}}ta.defaultProps={component:"span",childFactory:dd};class ia extends gt{constructor(t,n){super(t,n);v(this,"render",t=>c("div",{className:"uppy uppy-Informer",children:c(ta,{children:t.info.map(n=>c(od,{children:c("p",{role:"alert",children:[n.message," ",n.details&&c("span",{"aria-label":n.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${n.message} 

 ${n.details}`),children:"?"})]})},n.message))})}));this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){const{target:t}=this.opts;t&&this.mount(t,this)}}v(ia,"VERSION",sd.version);var hn={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Ss;function hd(){return Ss||(Ss=1,(function(i){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,n(a)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}i.exports?(t.default=t,i.exports=t):window.classNames=t})()})(hn)),hn.exports}var pd=hd();const Se=Me(pd),fd={position:"relative",width:"100%",minHeight:"100%"},md={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class gd extends pe{constructor(t){super(t);v(this,"handleScroll",()=>{this.setState({offset:this.base.scrollTop})});v(this,"handleResize",()=>{this.resize()});this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement?.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:t}=this.state;t!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render({data:t,rowHeight:n,renderRow:r,overscanCount:s=10,...o}){const{offset:a,height:l}=this.state;let u=Math.floor(a/n),d=Math.floor(l/n);s&&(u=Math.max(0,u-u%s),d+=s);const h=u+d+4,b=t.slice(u,h),S={...fd,height:t.length*n},x={...md,top:u*n};return c("div",{onScroll:this.handleScroll,...o,children:c("div",{role:"presentation",style:S,children:c("div",{role:"presentation",style:x,children:b.map(r)})})})}}function yd(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:c("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function Fs(i,e,t,n){return i===e?i:n===0?e:i+(e-i)*2**(-n/t)}const bd="4.2.3",vd={version:bd},_d={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},Pe={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function wd(i){const e=Math.floor(i/3600)%24,t=Math.floor(i/60)%60,n=Math.floor(i%60);return{hours:e,minutes:t,seconds:n}}function Sd(i){const e=wd(i),t=e.hours===0?"":`${e.hours}h`,n=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,r=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${n}${r}`}const Fd="·",Ps=()=>` ${Fd} `;function Pd(i){const{newFiles:e,isUploadStarted:t,recoveredState:n,i18n:r,uploadState:s,isSomeGhost:o,startUpload:a}=i,l=Se("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":s===Pe.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),u=e&&t&&!n?r("uploadXNewFiles",{smart_count:e}):r("uploadXFiles",{smart_count:e});return c("button",{type:"button",className:l,"aria-label":r("uploadXFiles",{smart_count:e}),onClick:a,disabled:o,"data-uppy-super-focusable":!0,children:u})}function Td(i){const{i18n:e,uppy:t}=i;return c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:c("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),e("retry")]})}function Cd(i){const{i18n:e,uppy:t}=i;return c("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:c("g",{fill:"none",fillRule:"evenodd",children:[c("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),c("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function Ed(i){const{isAllPaused:e,i18n:t,isAllComplete:n,resumableUploads:r,uppy:s}=i,o=t(e?"resume":"pause");function a(){if(!n){if(!r){s.cancelAll();return}if(e){s.resumeAll();return}s.pauseAll()}}return c("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:a,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:c("g",{fill:"none",fillRule:"evenodd",children:[c("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),c("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function xd(i){const{i18n:e,doneButtonHandler:t}=i;return c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0,children:e("done")})}function na(){return c("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:c("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function kd(i){const{progress:e}=i,{value:t,mode:n,message:r}=e;return c("div",{className:"uppy-StatusBar-content",children:[c(na,{}),n==="determinate"?`${Math.round(t*100)}% · `:"",r]})}function Ud(i){const{numUploads:e,complete:t,totalUploadedSize:n,totalSize:r,totalETA:s,i18n:o}=i,a=e>1,l=qe(n);return c("div",{className:"uppy-StatusBar-statusSecondary",children:[a&&o("filesUploadedOfTotal",{complete:t,smart_count:e}),c("span",{className:"uppy-StatusBar-additionalInfo",children:[a&&Ps(),r!=null?o("dataUploadedOfTotal",{complete:l,total:qe(r)}):o("dataUploadedOfUnknown",{complete:l}),Ps(),s!=null&&o("xTimeLeft",{time:Sd(s)})]})]})}function ra(i){const{i18n:e,complete:t,numUploads:n}=i;return c("div",{className:"uppy-StatusBar-statusSecondary",children:e("filesUploadedOfTotal",{complete:t,smart_count:n})})}function Od(i){const{i18n:e,newFiles:t,startUpload:n}=i,r=Se("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return c("div",{className:"uppy-StatusBar-statusSecondary",children:[c("div",{className:"uppy-StatusBar-statusSecondaryHint",children:e("xMoreFilesAdded",{smart_count:t})}),c("button",{type:"button",className:r,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:n,children:e("upload")})]})}function Ad(i){const{i18n:e,supportsUploadProgress:t,totalProgress:n,showProgressDetails:r,isUploadStarted:s,isAllComplete:o,isAllPaused:a,newFiles:l,numUploads:u,complete:d,totalUploadedSize:h,totalSize:b,totalETA:S,startUpload:x}=i,T=l&&s;if(!s||o)return null;const O=e(a?"paused":"uploading");function A(){return!a&&!T&&r?t?c(Ud,{numUploads:u,complete:d,totalUploadedSize:h,totalSize:b,totalETA:S,i18n:e}):c(ra,{i18n:e,complete:d,numUploads:u}):null}return c("div",{className:"uppy-StatusBar-content",title:O,children:[a?null:c(na,{}),c("div",{className:"uppy-StatusBar-status",children:[c("div",{className:"uppy-StatusBar-statusPrimary",children:t&&n!==0?`${O}: ${n}%`:O}),A(),T?c(Od,{i18n:e,newFiles:l,startUpload:x}):null]})]})}function Rd(i){const{i18n:e}=i;return c("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete"),children:c("div",{className:"uppy-StatusBar-status",children:c("div",{className:"uppy-StatusBar-statusPrimary",children:[c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:c("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),e("complete")]})})})}function Id(i){const{error:e,i18n:t,complete:n,numUploads:r}=i;function s(){const o=`${t("uploadFailed")} 

 ${e}`;alert(o)}return c("div",{className:"uppy-StatusBar-content",title:t("uploadFailed"),children:[c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:c("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),c("div",{className:"uppy-StatusBar-status",children:[c("div",{className:"uppy-StatusBar-statusPrimary",children:[t("uploadFailed"),c("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:s,type:"button",children:"?"})]}),c(ra,{i18n:t,complete:n,numUploads:r})]})]})}function pn(i){const e=[];let t="indeterminate",n;for(const{progress:s}of Object.values(i)){const{preprocess:o,postprocess:a}=s;n==null&&(o||a)&&({mode:t,message:n}=o||a),o?.mode==="determinate"&&e.push(o.value),a?.mode==="determinate"&&e.push(a.value)}const r=e.reduce((s,o)=>s+o/e.length,0);return{mode:t,message:n,value:r}}const{STATE_ERROR:Ts,STATE_WAITING:Dd,STATE_PREPROCESSING:fn,STATE_UPLOADING:oi,STATE_POSTPROCESSING:mn,STATE_COMPLETE:ai}=Pe;function Nd({newFiles:i,allowNewUpload:e,isUploadInProgress:t,isAllPaused:n,resumableUploads:r,error:s,hideUploadButton:o=void 0,hidePauseResumeButton:a=!1,hideCancelButton:l=!1,hideRetryButton:u=!1,recoveredState:d,uploadState:h,totalProgress:b,files:S,supportsUploadProgress:x,hideAfterFinish:T=!1,isSomeGhost:O,doneButtonHandler:A=void 0,isUploadStarted:m,i18n:y,startUpload:_,uppy:F,isAllComplete:R,showProgressDetails:U=void 0,numUploads:M,complete:N,totalSize:K,totalETA:W,totalUploadedSize:Z}){function k(){switch(h){case mn:case fn:{const ei=pn(S);return ei.mode==="determinate"?ei.value*100:b}case Ts:return null;case oi:return x?b:null;default:return b}}function Q(){switch(h){case mn:case fn:{const{mode:ei}=pn(S);return ei==="indeterminate"}case oi:return!x;default:return!1}}const ae=k(),g=ae??100,p=!s&&i&&(!t&&!n||d)&&e&&!o,f=!l&&h!==Dd&&h!==ai,P=r&&!a&&h===oi,E=s&&!R&&!u,C=A&&h===ai,$=Se("uppy-StatusBar-progress",{"is-indeterminate":Q()}),q=Se("uppy-StatusBar",`is-${h}`,{"has-ghosts":O}),V=(()=>{switch(h){case fn:case mn:return c(kd,{progress:pn(S)});case ai:return c(Rd,{i18n:y});case Ts:return c(Id,{error:s,i18n:y,numUploads:M,complete:N});case oi:return c(Ad,{i18n:y,supportsUploadProgress:x,totalProgress:b,showProgressDetails:U,isUploadStarted:m,isAllComplete:R,isAllPaused:n,newFiles:i,numUploads:M,complete:N,totalUploadedSize:Z,totalSize:K,totalETA:W,startUpload:_});default:return null}})();return!(p||E||P||f||C)&&!V||h===ai&&T?null:c("div",{className:q,children:[c("div",{className:$,style:{width:`${g}%`},role:"progressbar","aria-label":`${g}%`,"aria-valuetext":`${g}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":ae}),V,c("div",{className:"uppy-StatusBar-actions",children:[p?c(Pd,{newFiles:i,isUploadStarted:m,recoveredState:d,i18n:y,isSomeGhost:O,startUpload:_,uploadState:h}):null,E?c(Td,{i18n:y,uppy:F}):null,P?c(Ed,{isAllPaused:n,i18n:y,isAllComplete:R,resumableUploads:r,uppy:F}):null,f?c(Cd,{i18n:y,uppy:F}):null,C?c(xd,{i18n:y,doneButtonHandler:A}):null]})]})}const Bd=2e3,Ld=2e3;function Md(i,e,t,n){if(i)return Pe.STATE_ERROR;if(e)return Pe.STATE_COMPLETE;if(t)return Pe.STATE_WAITING;let r=Pe.STATE_WAITING;const s=Object.keys(n);for(let o=0;o<s.length;o++){const{progress:a}=n[s[o]];if(a.uploadStarted&&!a.uploadComplete)return Pe.STATE_UPLOADING;a.preprocess&&(r=Pe.STATE_PREPROCESSING),a.postprocess&&r!==Pe.STATE_PREPROCESSING&&(r=Pe.STATE_POSTPROCESSING)}return r}const $d={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var Ie,De,Ge,ke,Ri,oa,Gt;class sa extends gt{constructor(t,n){super(t,{...$d,...n});L(this,Ri);L(this,Ie);L(this,De);L(this,Ge);L(this,ke);v(this,"startUpload",()=>this.uppy.upload().catch((()=>{})));L(this,Gt,()=>{const{recoveredState:t}=this.uppy.getState();if(j(this,Ge,null),j(this,ke,null),t){j(this,De,Object.values(t.files).reduce((n,{progress:r})=>n+r.bytesUploaded,0)),this.uppy.emit("restore-confirmed");return}j(this,Ie,performance.now()),j(this,De,0)});this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=_d,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(t){const{capabilities:n,files:r,allowNewUpload:s,totalProgress:o,error:a,recoveredState:l}=t,{newFiles:u,startedFiles:d,completeFiles:h,isUploadStarted:b,isAllComplete:S,isAllPaused:x,isUploadInProgress:T,isSomeGhost:O}=this.uppy.getObjectOfFilesPerState(),A=l?Object.values(r):u,m=!!n.resumableUploads,y=n.uploadProgress!==!1;let _=null,F=0;d.every(U=>U.progress.bytesTotal!=null&&U.progress.bytesTotal!==0)?(_=0,d.forEach(U=>{_+=U.progress.bytesTotal||0,F+=U.progress.bytesUploaded||0})):d.forEach(U=>{F+=U.progress.bytesUploaded||0});const R=D(this,Ri,oa).call(this,{uploaded:F,total:_});return Nd({error:a,uploadState:Md(a,S,l,t.files||{}),allowNewUpload:s,totalProgress:o,totalSize:_,totalUploadedSize:F,isAllComplete:!1,isAllPaused:x,isUploadStarted:b,isUploadInProgress:T,isSomeGhost:O,recoveredState:l,complete:h.length,newFiles:A.length,numUploads:d.length,totalETA:R,files:r,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:m,supportsUploadProgress:y,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const t=this.el;Po(t)||(t.dir="ltr")}install(){const{target:t}=this.opts;t&&this.mount(t,this),this.uppy.on("upload",w(this,Gt)),j(this,Ie,performance.now()),j(this,De,this.uppy.getFiles().reduce((n,r)=>n+r.progress.bytesUploaded,0))}uninstall(){this.unmount(),this.uppy.off("upload",w(this,Gt))}}Ie=new WeakMap,De=new WeakMap,Ge=new WeakMap,ke=new WeakMap,Ri=new WeakSet,oa=function(t){if(t.total==null||t.total===0)return null;const n=t.total-t.uploaded;if(n<=0)return null;w(this,Ie)??j(this,Ie,performance.now());const r=performance.now()-w(this,Ie);if(r===0)return Math.round((w(this,ke)??0)/100)/10;const s=t.uploaded-w(this,De);if(j(this,De,t.uploaded),s<=0)return Math.round((w(this,ke)??0)/100)/10;const o=s/r,a=w(this,Ge)==null?o:Fs(o,w(this,Ge),Bd,r);j(this,Ge,a);const l=n/a,u=Math.max(w(this,ke)-r,0),d=w(this,ke)==null?l:Fs(l,u,Ld,r);return j(this,ke,d),j(this,Ie,performance.now()),Math.round(d/100)/10},Gt=new WeakMap,v(sa,"VERSION",vd.version);const zd=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function jd(i,e,t){const n=zd.exec(i),r=e.mimeType??n?.[1]??"plain/text";let s;if(n?.[2]!=null){const o=atob(decodeURIComponent(n[3])),a=new Uint8Array(o.length);for(let l=0;l<o.length;l++)a[l]=o.charCodeAt(l);s=[a]}else n?.[3]!=null&&(s=[decodeURIComponent(n[3])]);return new Blob(s,{type:r})}function Cs(i){return i.startsWith("blob:")}function Es(i){return i?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(i):!1}function G(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var aa=typeof self<"u"?self:global;const It=typeof navigator<"u",qd=It&&typeof HTMLImageElement>"u",xs=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),la=aa.Buffer,ua=!!la,Hd=i=>i!==void 0;function ca(i){return i===void 0||(i instanceof Map?i.size===0:Object.values(i).filter(Hd).length===0)}function re(i){let e=new Error(i);throw delete e.stack,e}function ks(i){let e=(function(t){let n=0;return t.ifd0.enabled&&(n+=1024),t.exif.enabled&&(n+=2048),t.makerNote&&(n+=2048),t.userComment&&(n+=1024),t.gps.enabled&&(n+=512),t.interop.enabled&&(n+=100),t.ifd1.enabled&&(n+=1024),n+2048})(i);return i.jfif.enabled&&(e+=50),i.xmp.enabled&&(e+=2e4),i.iptc.enabled&&(e+=14e3),i.icc.enabled&&(e+=6e3),e}const gn=i=>String.fromCharCode.apply(null,i),Us=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class _e{static from(e,t){return e instanceof this&&e.le===t?e:new _e(e,void 0,void 0,t)}constructor(e,t=0,n,r){if(typeof r=="boolean"&&(this.le=r),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-t);let s=new DataView(e,t,n);this._swapDataView(s)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof _e){n===void 0&&(n=e.byteLength-t),(t+=e.byteOffset)+n>e.byteOffset+e.byteLength&&re("Creating view outside of available memory in ArrayBuffer");let s=new DataView(e.buffer,t,n);this._swapDataView(s)}else if(typeof e=="number"){let s=new DataView(new ArrayBuffer(e));this._swapDataView(s)}else re("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,n=_e){return e instanceof DataView||e instanceof _e?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||re("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new n(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new _e(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return r=this.getUint8Array(e,t),Us?Us.decode(r):ua?Buffer.from(r).toString("utf8"):decodeURIComponent(escape(gn(r)));var r}getLatin1String(e=0,t=this.byteLength){let n=this.getUint8Array(e,t);return gn(n)}getUnicodeString(e=0,t=this.byteLength){const n=[];for(let r=0;r<t&&e+r<this.byteLength;r+=2)n.push(this.getUint16(e+r));return gn(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function qn(i,e){re(`${i} '${e}' was not loaded, try using full build of exifr.`)}class br extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||qn(this.kind,e),t&&(e in t||(function(n,r){re(`Unknown ${n} '${r}'.`)})(this.kind,e),t[e].enabled||qn(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var da=new br("file parser"),be=new br("segment parser"),vr=new br("file reader");let Vd=aa.fetch;function Os(i,e){return(t=i).startsWith("data:")||t.length>1e4?Vn(i,e,"base64"):xs&&i.includes("://")?Hn(i,e,"url",As):xs?Vn(i,e,"fs"):It?Hn(i,e,"url",As):void re("Invalid input argument");var t}async function Hn(i,e,t,n){return vr.has(t)?Vn(i,e,t):n?(async function(r,s){let o=await s(r);return new _e(o)})(i,n):void re(`Parser ${t} is not loaded`)}async function Vn(i,e,t){let n=new(vr.get(t))(i,e);return await n.read(),n}const As=i=>Vd(i).then((e=>e.arrayBuffer())),Wn=i=>new Promise(((e,t)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=t,n.readAsArrayBuffer(i)})),_r=new Map,Wd=new Map,Gd=new Map,li=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],ha=["jfif","xmp","icc","iptc","ihdr"],Gn=["tiff",...ha],ie=["ifd0","ifd1","exif","gps","interop"],ui=[...Gn,...ie],ci=["makerNote","userComment"],pa=["translateKeys","translateValues","reviveValues","multiSegment"],di=[...pa,"sanitize","mergeOutput","silentErrors"];class fa{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class _t extends fa{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,n,r){if(super(),G(this,"enabled",!1),G(this,"skip",new Set),G(this,"pick",new Set),G(this,"deps",new Set),G(this,"translateKeys",!1),G(this,"translateValues",!1),G(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(r),this.canBeFiltered=ie.includes(e),this.canBeFiltered&&(this.dict=_r.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:s,skip:o}=n;s&&s.length>0&&this.translateTagSet(s,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:re(`Invalid options argument: ${n}`)}applyInheritables(e){let t,n;for(t of pa)n=e[t],n!==void 0&&(this[t]=n)}translateTagSet(e,t){if(this.dict){let n,r,{tagKeys:s,tagValues:o}=this.dict;for(n of e)typeof n=="string"?(r=o.indexOf(n),r===-1&&(r=s.indexOf(Number(n))),r!==-1&&t.add(Number(s[r]))):t.add(n)}else for(let n of e)t.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Ci(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Ci(this.pick,this.deps)}}var de={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Rs=new Map;class wr extends fa{static useCached(e){let t=Rs.get(e);return t!==void 0||(t=new this(e),Rs.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):re(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=It?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of li)this[e]=de[e];for(e of di)this[e]=de[e];for(e of ci)this[e]=de[e];for(e of ui)this[e]=new _t(e,de[e],void 0,this)}setupFromTrue(){let e;for(e of li)this[e]=de[e];for(e of di)this[e]=de[e];for(e of ci)this[e]=!0;for(e of ui)this[e]=new _t(e,!0,void 0,this)}setupFromArray(e){let t;for(t of li)this[t]=de[t];for(t of di)this[t]=de[t];for(t of ci)this[t]=de[t];for(t of ui)this[t]=new _t(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,ie)}setupFromObject(e){let t;for(t of(ie.ifd0=ie.ifd0||ie.image,ie.ifd1=ie.ifd1||ie.thumbnail,Object.assign(this,e),li))this[t]=yn(e[t],de[t]);for(t of di)this[t]=yn(e[t],de[t]);for(t of ci)this[t]=yn(e[t],de[t]);for(t of Gn)this[t]=new _t(t,de[t],e[t],this);for(t of ie)this[t]=new _t(t,de[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ie,ui),e.tiff===!0?this.batchEnableWithBool(ie,!0):e.tiff===!1?this.batchEnableWithUserValue(ie,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ie):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ie)}batchEnableWithBool(e,t){for(let n of e)this[n].enabled=t}batchEnableWithUserValue(e,t){for(let n of e){let r=t[n];this[n].enabled=r!==!1&&r!==void 0}}setupGlobalFilters(e,t,n,r=n){if(e&&e.length){for(let o of r)this[o].enabled=!1;let s=Is(e,n);for(let[o,a]of s)Ci(this[o].pick,a),this[o].enabled=!0}else if(t&&t.length){let s=Is(t,n);for(let[o,a]of s)Ci(this[o].skip,a)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:n,iptc:r,icc:s}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),n.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),s.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:n,interop:r}=this;r.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=ie.some((s=>this[s].enabled===!0))||this.makerNote||this.userComment;for(let s of ie)this[s].finalizeFilters()}get onlyTiff(){return!ha.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Gn)this[e].enabled&&!be.has(e)&&qn("segment parser",e)}}function Is(i,e){let t,n,r,s,o=[];for(r of e){for(s of(t=_r.get(r),n=[],t))(i.includes(s[0])||i.includes(s[1]))&&n.push(s[0]);n.length&&o.push([r,n])}return o}function yn(i,e){return i!==void 0?i:e!==void 0?e:void 0}function Ci(i,e){for(let t of e)i.add(t)}G(wr,"default",de);class Kd{constructor(e){G(this,"parsers",{}),G(this,"output",{}),G(this,"errors",[]),G(this,"pushToErrors",(t=>this.errors.push(t))),this.options=wr.useCached(e)}async read(e){this.file=await(function(t,n){return typeof t=="string"?Os(t,n):It&&!qd&&t instanceof HTMLImageElement?Os(t.src,n):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new _e(t):It&&t instanceof Blob?Hn(t,n,"blob",Wn):void re("Invalid input argument")})(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[n,r]of da)if(r.canHandle(e,t))return this.fileParser=new r(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),re("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),ca(n=e)?void 0:n;var n}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async n=>{let r=await n.parse();n.assignToOutput(e,r)}));this.options.silentErrors&&(t=t.map((n=>n.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,n=be.get("tiff",e);var r;if(t.tiff?r={start:0,type:"tiff"}:t.jpeg&&(r=await this.fileParser.getOrFindSegment("tiff")),r===void 0)return;let s=await this.fileParser.ensureSegmentChunk(r),o=this.parsers.tiff=new n(s,e,t),a=await o.extractThumbnail();return t.close&&t.close(),a}}class nt{static findPosition(e,t){let n=e.getUint16(t+2)+2,r=typeof this.headerLength=="function"?this.headerLength(e,t,n):this.headerLength,s=t+r,o=n-r;return{offset:t,length:n,headerLength:r,start:s,size:o,end:s+o}}static parse(e,t={}){return new this(e,new wr({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof _e?e:new _e(e)}constructor(e,t={},n){G(this,"errors",[]),G(this,"raw",new Map),G(this,"handleError",(r=>{if(!this.options.silentErrors)throw r;this.errors.push(r.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let n=Gd.get(t),r=Wd.get(t),s=_r.get(t),o=this.options[t],a=o.reviveValues&&!!n,l=o.translateValues&&!!r,u=o.translateKeys&&!!s,d={};for(let[h,b]of e)a&&n.has(h)?b=n.get(h)(b):l&&r.has(h)&&(b=this.translateValue(b,r.get(h))),u&&s.has(h)&&(h=s.get(h)||h),d[h]=b;return d}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[t]?Object.assign(e[t],n):e[t]=n}}G(nt,"headerLength",4),G(nt,"type",void 0),G(nt,"multiSegment",!1),G(nt,"canHandle",(()=>!1));function Xd(i){return i===192||i===194||i===196||i===219||i===221||i===218||i===254}function Yd(i){return i>=224&&i<=239}function Qd(i,e,t){for(let[n,r]of be)if(r.canHandle(i,e,t))return n}class Ds extends class{constructor(e,t,n){G(this,"errors",[]),G(this,"ensureSegmentChunk",(async r=>{let s=r.start,o=r.size||65536;if(this.file.chunked)if(this.file.available(s,o))r.chunk=this.file.subarray(s,o);else try{r.chunk=await this.file.readChunk(s,o)}catch(a){re(`Couldn't read segment: ${JSON.stringify(r)}. ${a.message}`)}else this.file.byteLength>s+o?r.chunk=this.file.subarray(s,o):r.size===void 0?r.chunk=this.file.subarray(s):re("Segment unreachable: "+JSON.stringify(r));return r.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=n}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let n=new(be.get(e))(t,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let t of e){let{type:n,chunk:r}=t,s=this.options[n];if(s&&s.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,r)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),G(this,"appSegments",[]),G(this,"jpegSegments",[]),G(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(be.keyList())):(e=e===void 0?be.keyList().filter((t=>this.options[t].enabled)):e.filter((t=>this.options[t].enabled&&be.has(t))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:n,findAll:r,wanted:s,remaining:o}=this;if(!r&&this.file.chunked&&(r=Array.from(s).some((a=>{let l=be.get(a),u=this.options[a];return l.multiSegment&&u.multiSegment})),r&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let a=!1;for(;o.size>0&&!a&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=n,u=this.appSegments.some((d=>!this.file.available(d.offset||d.start,d.length||d.size)));if(a=e>l&&!u?!await n.readNextChunk(e):!await n.readNextChunk(l),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let n,r,s,o,a,l,{file:u,findAll:d,wanted:h,remaining:b,options:S}=this;for(;e<t;e++)if(u.getUint8(e)===255){if(n=u.getUint8(e+1),Yd(n)){if(r=u.getUint16(e+2),s=Qd(u,e,r),s&&h.has(s)&&(o=be.get(s),a=o.findPosition(u,e),l=S[s],a.type=s,this.appSegments.push(a),!d&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||b.delete(s)):b.delete(s),b.size===0)))break;S.recordUnknownSegments&&(a=nt.findPosition(u,e),a.marker=n,this.unknownSegments.push(a)),e+=r+1}else if(Xd(n)){if(r=u.getUint16(e+2),n===218&&S.stopAfterSos!==!1)return;S.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:n}),e+=r+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let e=(function(t,n){let r,s,o,a=new Map;for(let l=0;l<t.length;l++)r=t[l],s=r[n],a.has(s)?o=a.get(s):a.set(s,o=[]),o.push(r);return Array.from(a)})(this.appSegments,"type");this.mergedAppSegments=e.map((([t,n])=>{let r=be.get(t,this.options);return r.handleMultiSegments?{type:t,chunk:r.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}G(Ds,"type","jpeg"),da.set("jpeg",Ds);const Zd=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class Jd extends nt{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,n=new Map){let{pick:r,skip:s}=this.options[t];r=new Set(r);let o=r.size>0,a=s.size===0,l=this.chunk.getUint16(e);e+=2;for(let u=0;u<l;u++){let d=this.chunk.getUint16(e);if(o){if(r.has(d)&&(n.set(d,this.parseTag(e,d,t)),r.delete(d),r.size===0))break}else!a&&s.has(d)||n.set(d,this.parseTag(e,d,t));e+=12}return n}parseTag(e,t,n){let{chunk:r}=this,s=r.getUint16(e+2),o=r.getUint32(e+4),a=Zd[s];if(a*o<=4?e+=8:e=r.getUint32(e+8),(s<1||s>13)&&re(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e}`),e>r.byteLength&&re(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e} is outside of chunk size ${r.byteLength}`),s===1)return r.getUint8Array(e,o);if(s===2)return(l=(function(u){for(;u.endsWith("\0");)u=u.slice(0,-1);return u})(l=r.getString(e,o)).trim())===""?void 0:l;var l;if(s===7)return r.getUint8Array(e,o);if(o===1)return this.parseTagValue(s,e);{let u=new((function(h){switch(h){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(s))(o),d=a;for(let h=0;h<o;h++)u[h]=this.parseTagValue(s,e),e+=d;return u}}parseTagValue(e,t){let{chunk:n}=this;switch(e){case 1:return n.getUint8(t);case 3:return n.getUint16(t);case 4:return n.getUint32(t);case 5:return n.getUint32(t)/n.getUint32(t+4);case 6:return n.getInt8(t);case 8:return n.getInt16(t);case 9:return n.getInt32(t);case 10:return n.getInt32(t)/n.getInt32(t+4);case 11:return n.getFloat(t);case 12:return n.getDouble(t);case 13:return n.getUint32(t);default:re(`Invalid tiff type ${e}`)}}}class bn extends Jd{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let n=new Map;return this[t]=n,this.parseTags(e,t,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&re("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&re(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,ks(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,ks(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let n=e.get(t);n&&n.length===1&&e.set(t,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Ns(...e.get(2),e.get(1))),e.set("longitude",Ns(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,n,r={};for(t of ie)if(e=this[t],!ca(e))if(n=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(r,n)}else r[t]=n;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[n,r]of Object.entries(t))this.assignObjectToOutput(e,n,r)}}function Ns(i,e,t,n){var r=i+e/60+t/3600;return n!=="S"&&n!=="W"||(r*=-1),r}G(bn,"type","tiff"),G(bn,"headerLength",10),be.set("tiff",bn);const Sr={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},Sr,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},Sr,{tiff:!1,ifd1:!0,mergeOutput:!1});const eh=Object.assign({},Sr,{firstChunkSize:4e4,ifd0:[274]});async function th(i){let e=new Kd(eh);await e.read(i);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const ih=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Ft=!0,Pt=!0;if(typeof navigator=="object"){let i=navigator.userAgent;if(i.includes("iPad")||i.includes("iPhone")){let e=i.match(/OS (\d+)_(\d+)/);if(e){let[,t,n]=e;Ft=Number(t)+.1*Number(n)<13.4,Pt=!1}}else if(i.includes("OS X 10")){let[,e]=i.match(/OS X 10[_.](\d+)/);Ft=Pt=Number(e)<15}if(i.includes("Chrome/")){let[,e]=i.match(/Chrome\/(\d+)/);Ft=Pt=Number(e)<81}else if(i.includes("Firefox/")){let[,e]=i.match(/Firefox\/(\d+)/);Ft=Pt=Number(e)<77}}async function nh(i){let e=await th(i);return Object.assign({canvas:Ft,css:Pt},ih[e])}class rh extends _e{constructor(...e){super(...e),G(this,"ranges",new sh),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,n){if(e===0&&this.byteLength===0&&n){let r=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(r)}else{let r=e+t;if(r>this.byteLength){let{dataView:s}=this._extend(r);this._swapDataView(s)}}}_extend(e){let t;t=ua?la.allocUnsafe(e):new Uint8Array(e);let n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}subarray(e,t,n=!1){return t=t||this._lengthToEnd(e),n&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,n=!1){n&&this._tryExtend(t,e.byteLength,e);let r=super.set(e,t);return this.ranges.add(t,r.byteLength),r}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class sh{constructor(){G(this,"list",[])}get length(){return this.list.length}add(e,t,n=0){let r=e+t,s=this.list.filter((o=>Bs(e,o.offset,r)||Bs(e,o.end,r)));if(s.length>0){e=Math.min(e,...s.map((a=>a.offset))),r=Math.max(r,...s.map((a=>a.end))),t=r-e;let o=s.shift();o.offset=e,o.length=t,o.end=r,this.list=this.list.filter((a=>!s.includes(a)))}else this.list.push({offset:e,length:t,end:r})}available(e,t){let n=e+t;return this.list.some((r=>r.offset<=e&&n<=r.end))}}function Bs(i,e,t){return i<=e&&e<=t}class oh extends rh{constructor(e,t){super(0),G(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,n=await this.readChunk(e,t);return!!n&&n.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}vr.set("blob",class extends oh{async readWhole(){this.chunked=!1;let i=await Wn(this.input);this._swapArrayBuffer(i)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(i,e){let t=e?i+e:void 0,n=this.input.slice(i,t),r=await Wn(n);return this.set(r,i,!0)}});const ah="4.2.3",lh={version:ah},uh={strings:{generatingThumbnails:"Generating thumbnails..."}};function ch(i,e,t){try{i.getContext("2d").getImageData(0,0,1,1)}catch(n){if(n.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return i.toBlob?new Promise(n=>{i.toBlob(n,e,t)}).then(n=>{if(n===null)throw new Error("cannot read image, probably an svg with external resources");return n}):Promise.resolve().then(()=>jd(i.toDataURL(e,t),{})).then(n=>{if(n===null)throw new Error("could not extract blob, probably an old browser");return n})}function dh(i,e){let t=i.width,n=i.height;(e.deg===90||e.deg===270)&&(t=i.height,n=i.width);const r=document.createElement("canvas");r.width=t,r.height=n;const s=r.getContext("2d");return s.translate(t/2,n/2),e.canvas&&(s.rotate(e.rad),s.scale(e.scaleX,e.scaleY)),s.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),r}function hh(i){const e=i.width/i.height,t=5e6,n=4096;let r=Math.floor(Math.sqrt(t*e)),s=Math.floor(t/Math.sqrt(t*e));if(r>n&&(r=n,s=Math.round(r/e)),s>n&&(s=n,r=Math.round(e*s)),i.width>r){const o=document.createElement("canvas");return o.width=r,o.height=s,o.getContext("2d").drawImage(i,0,0,r,s),o}return i}const ph={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class ma extends gt{constructor(t,n){super(t,{...ph,...n});v(this,"queue");v(this,"queueProcessing");v(this,"defaultThumbnailDimension");v(this,"thumbnailType");v(this,"onFileAdded",t=>{!t.preview&&t.data&&Es(t.type)&&!t.isRemote&&this.addToQueue(t.id)});v(this,"onCancelRequest",t=>{const n=this.queue.indexOf(t.id);n!==-1&&this.queue.splice(n,1)});v(this,"onFileRemoved",t=>{const n=this.queue.indexOf(t.id);n!==-1&&this.queue.splice(n,1),t.preview&&Cs(t.preview)&&URL.revokeObjectURL(t.preview)});v(this,"onRestored",()=>{this.uppy.getFiles().filter(n=>n.isRestored).forEach(n=>{(!n.preview||Cs(n.preview))&&this.addToQueue(n.id)})});v(this,"onAllFilesRemoved",()=>{this.queue=[]});v(this,"waitUntilAllProcessed",t=>{t.forEach(r=>{const s=this.uppy.getFile(r);this.uppy.emit("preprocess-progress",s,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const n=()=>{t.forEach(r=>{const s=this.uppy.getFile(r);this.uppy.emit("preprocess-complete",s)})};return new Promise(r=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{n(),r()}):(n(),r())})});if(this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=uh,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(t,n,r){const s=URL.createObjectURL(t.data),o=new Promise((l,u)=>{const d=new Image;d.src=s,d.addEventListener("load",()=>{URL.revokeObjectURL(s),l(d)}),d.addEventListener("error",h=>{URL.revokeObjectURL(s),u(h.error||new Error("Could not create thumbnail"))})}),a=nh(t.data).catch(()=>1);return Promise.all([o,a]).then(([l,u])=>{const d=this.getProportionalDimensions(l,n,r,u.deg),h=dh(l,u),b=this.resizeImage(h,d.width,d.height);return ch(b,this.thumbnailType,80)}).then(l=>URL.createObjectURL(l))}getProportionalDimensions(t,n,r,s){let o=t.width/t.height;if((s===90||s===270)&&(o=t.height/t.width),n!=null){let a=n;return t.width<n&&(a=t.width),{width:a,height:Math.round(a/o)}}if(r!=null){let a=r;return t.height<r&&(a=t.height),{width:Math.round(a*o),height:a}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/o)}}resizeImage(t,n,r){let s=hh(t),o=Math.ceil(Math.log2(s.width/n));o<1&&(o=1);let a=n*2**(o-1),l=r*2**(o-1);const u=2;for(;o--;){const d=document.createElement("canvas");d.width=a,d.height=l,d.getContext("2d").drawImage(s,0,0,a,l),s=d,a=Math.round(a/u),l=Math.round(l/u)}return s}setPreviewURL(t,n){this.uppy.setFileState(t,{preview:n})}addToQueue(t){this.queue.push(t),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const t=this.uppy.getFile(this.queue.shift());return t?this.requestThumbnail(t).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(t){return Es(t.type)&&!t.isRemote?this.createThumbnail(t,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(n=>{this.setPreviewURL(t.id,n),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${t.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(t.id),n)}).catch(n=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${t.id}:`,"warning"),this.uppy.log(n,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(t.id),n)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}v(ma,"VERSION",lh.version);function Ls(i){if(typeof i=="string"){const e=document.querySelectorAll(i);return e.length===0?null:Array.from(e)}return typeof i=="object"&&Fo(i)?[i]:null}const kt=Array.from;function fh(i){const e=kt(i.files);return Promise.resolve(e)}function ga(i,e,t,{onSuccess:n}){i.readEntries(r=>{const s=[...e,...r];r.length?queueMicrotask(()=>{ga(i,s,t,{onSuccess:n})}):n(s)},r=>{t(r),n(e)})}function ya(i,e){return i==null?i:{kind:i.isFile?"file":i.isDirectory?"directory":void 0,name:i.name,getFile(){return new Promise((t,n)=>i.file(t,n))},async*values(){const t=i.createReader();yield*await new Promise(r=>{ga(t,[],e,{onSuccess:s=>r(s.map(o=>ya(o,e)))})})},isSameEntry:void 0}}async function*ba(i,e,t=void 0){const n=()=>`${e}/${i.name}`;if(i.kind==="file"){const r=await i.getFile();r!=null?(r.relativePath=e?n():null,yield r):t!=null&&(yield t)}else if(i.kind==="directory")for await(const r of i.values())yield*ba(r,e?n():i.name);else t!=null&&(yield t)}async function*mh(i,e){const t=await Promise.all(Array.from(i.items,async n=>{let r;return r??=ya(typeof n.getAsEntry=="function"?n.getAsEntry():n.webkitGetAsEntry(),e),{fileSystemHandle:r,lastResortFile:n.getAsFile()}}));for(const{lastResortFile:n,fileSystemHandle:r}of t)if(r!=null)try{yield*ba(r,"",n)}catch(s){n!=null?yield n:e(s)}else n!=null&&(yield n)}async function gh(i,e){const t=e?.logDropError??Function.prototype;try{const n=[];for await(const r of mh(i,t))n.push(r);return n}catch{return fh(i)}}const yh="4.4.3",bh={version:yh};function vh(){const i=document.body;return!(!("draggable"in i)||!("ondragstart"in i&&"ondrop"in i)||!("FormData"in window)||!("FileReader"in window))}class va extends pe{constructor(){super(...arguments);v(this,"fileInput",null);v(this,"folderInput",null);v(this,"mobilePhotoFileInput",null);v(this,"mobileVideoFileInput",null);v(this,"triggerFileInputClick",()=>{this.fileInput?.click()});v(this,"triggerFolderInputClick",()=>{this.folderInput?.click()});v(this,"triggerVideoCameraInputClick",()=>{this.mobileVideoFileInput?.click()});v(this,"triggerPhotoCameraInputClick",()=>{this.mobilePhotoFileInput?.click()});v(this,"onFileInputChange",t=>{this.props.handleInputChange(t),t.currentTarget.value=""});v(this,"renderHiddenInput",(t,n)=>c("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:t,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes?.join(", "),ref:n}));v(this,"renderHiddenCameraInput",(t,n,r)=>{const o={photo:"image/*",video:"video/*"}[t];return c("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${t}`,onChange:this.onFileInputChange,capture:n===""?"environment":n,accept:o,ref:r})});v(this,"renderMyDeviceAcquirer",()=>c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[c("div",{className:"uppy-DashboardTab-inner",children:c("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:c("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),c("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})}));v(this,"renderPhotoCamera",()=>c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[c("div",{className:"uppy-DashboardTab-inner",children:c("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:c("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),c("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})}));v(this,"renderVideoCamera",()=>c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[c("div",{className:"uppy-DashboardTab-inner",children:c("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:c("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),c("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})}));v(this,"renderBrowseButton",(t,n)=>{const r=this.props.acquirers.length;return c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:n,"data-uppy-super-focusable":r===0,children:t})});v(this,"renderDropPasteBrowseTagline",t=>{const n=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),r=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),s=this.props.fileManagerSelectionType,o=s.charAt(0).toUpperCase()+s.slice(1);return c("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):t>0?this.props.i18nArray(`dropPasteImport${o}`,{browseFiles:n,browseFolders:r,browse:n}):this.props.i18nArray(`dropPaste${o}`,{browseFiles:n,browseFolders:r,browse:n})})});v(this,"renderAcquirer",t=>c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":t.id,children:c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":t.id,"aria-controls":`uppy-DashboardContent-panel--${t.id}`,"aria-selected":this.props.activePickerPanel?.id===t.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(t.id),children:[c("div",{className:"uppy-DashboardTab-inner",children:t.icon()}),c("div",{className:"uppy-DashboardTab-name",children:t.name})]})}));v(this,"renderAcquirers",t=>{const n=[...t],r=n.splice(t.length-2,t.length);return c(we,{children:[n.map(s=>this.renderAcquirer(s)),c("span",{role:"presentation",style:{"white-space":"nowrap"},children:r.map(s=>this.renderAcquirer(s))})]})});v(this,"renderSourcesList",(t,n)=>{const{showNativePhotoCameraButton:r,showNativeVideoCameraButton:s}=this.props;let o=[];const a="myDevice";n||o.push({key:a,elements:this.renderMyDeviceAcquirer()}),r&&o.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),s&&o.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),o.push(...t.map(h=>({key:h.id,elements:this.renderAcquirer(h)}))),o.length===1&&o[0].key===a&&(o=[]);const u=[...o],d=u.splice(o.length-2,o.length);return c(we,{children:[this.renderDropPasteBrowseTagline(o.length),c("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[u.map(({key:h,elements:b})=>c(we,{children:b},h)),c("span",{role:"presentation",style:{"white-space":"nowrap"},children:d.map(({key:h,elements:b})=>c(we,{children:b},h))})]})]})})}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:t}=this.props,n=c("span",{children:[c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:c("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),c("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),r=t("poweredBy",{uppy:n});return c("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:r})}render(){const{showNativePhotoCameraButton:t,showNativeVideoCameraButton:n,nativeCameraFacingMode:r}=this.props;return c("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,s=>{this.fileInput=s}),this.renderHiddenInput(!0,s=>{this.folderInput=s}),t&&this.renderHiddenCameraInput("photo",r,s=>{this.mobilePhotoFileInput=s}),n&&this.renderHiddenCameraInput("video",r,s=>{this.mobileVideoFileInput=s}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),c("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&c("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const _h=i=>c("div",{className:Se("uppy-Dashboard-AddFilesPanel",i.className),"data-uppy-panelType":"AddFiles","aria-hidden":!i.showAddFilesPanel,children:[c("div",{className:"uppy-DashboardContent-bar",children:[c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:i.i18n("addingMoreFiles")}),c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>i.toggleAddFilesPanel(!1),children:i.i18n("back")})]}),c(va,{...i})]});function wh(i){const e=i.files[i.fileCardFor],t=()=>{i.uppy.emit("file-editor:cancel",e),i.closeFileEditor()};return c("div",{className:Se("uppy-DashboardContent-panel",i.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[c("div",{className:"uppy-DashboardContent-bar",children:[c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:i.i18nArray("editing",{file:c("span",{className:"uppy-DashboardContent-titleFile",children:e.meta?e.meta.name:e.name})})}),c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:i.i18n("cancel")}),c("button",{className:"uppy-DashboardContent-save",type:"button",onClick:i.saveFileEditor,children:i.i18n("save")})]}),c("div",{className:"uppy-DashboardContent-panelBody",children:i.editors.map(n=>i.uppy.getPlugin(n.id).render(i.state))})]})}function Sh(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:c("g",{fill:"#686DE0",fillRule:"evenodd",children:[c("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),c("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),c("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function Fh(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:c("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function Ph(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:c("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function Th(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:c("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function Ch(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:c("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function Eh(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:c("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[c("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),c("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function xh(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:c("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function Fr(i){const e={color:"#838999",icon:Eh()};if(!i)return e;const t=i.split("/")[0],n=i.split("/")[1];return t==="text"?{color:"#5a5e69",icon:xh()}:t==="image"?{color:"#686de0",icon:Sh()}:t==="audio"?{color:"#068dbb",icon:Fh()}:t==="video"?{color:"#19af67",icon:Ph()}:t==="application"&&n==="pdf"?{color:"#e25149",icon:Th()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(n)!==-1?{color:"#00C469",icon:Ch()}:e}function Ne(i){const{tagName:e}=i.target;if(e==="INPUT"||e==="TEXTAREA"){i.stopPropagation();return}i.preventDefault(),i.stopPropagation()}function _a(i){const{file:e}=i;if(e.preview)return c("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});const{color:t,icon:n}=Fr(e.type);return c("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[c("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t},children:n}),c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:c("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function kh(i){const{computedMetaFields:e,requiredMetaFields:t,updateMeta:n,form:r,formState:s}=i,o={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(a=>{const l=`uppy-Dashboard-FileCard-input-${a.id}`,u=t.includes(a.id);return c("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[c("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:l,children:a.name}),a.render!==void 0?a.render({value:s[a.id],onChange:d=>n(d,a.id),fieldCSSClasses:o,required:u,form:r.id},Ot):c("input",{className:o.text,id:l,form:r.id,type:a.type||"text",required:u,value:s[a.id],placeholder:a.placeholder,onInput:d=>n(d.target.value,a.id),"data-uppy-super-focusable":!0})]},a.id)})}function Uh(i){const{files:e,fileCardFor:t,toggleFileCard:n,saveFileCard:r,metaFields:s,requiredMetaFields:o,openFileEditor:a,i18n:l,i18nArray:u,className:d,canEditFile:h}=i,b=()=>typeof s=="function"?s(e[t]):s,S=e[t],x=b()??[],T=h(S),O={};x.forEach(U=>{O[U.id]=S.meta[U.id]??""});const[A,m]=Ti(O),y=sc(U=>{U.preventDefault(),r(A,t)},[r,A,t]),_=(U,M)=>{m({...A,[M]:U})},F=()=>{n(!1)},[R]=Ti(()=>{const U=document.createElement("form");return U.setAttribute("tabindex","-1"),U.id=yr(),U});return Rn(()=>(document.body.appendChild(R),R.addEventListener("submit",y),()=>{R.removeEventListener("submit",y),document.body.removeChild(R)}),[R,y]),c("div",{className:Se("uppy-Dashboard-FileCard",d),"data-uppy-panelType":"FileCard",onDragOver:Ne,onDragLeave:Ne,onDrop:Ne,onPaste:Ne,children:[c("div",{className:"uppy-DashboardContent-bar",children:[c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:u("editing",{file:c("span",{className:"uppy-DashboardContent-titleFile",children:S.meta?S.meta.name:S.name})})}),c("button",{className:"uppy-DashboardContent-back",type:"button",form:R.id,title:l("finishEditingFile"),onClick:F,children:l("cancel")})]}),c("div",{className:"uppy-Dashboard-FileCard-inner",children:[c("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:Fr(S.type).color},children:[c(_a,{file:S}),T&&c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:U=>{y(U),a(S)},children:l("editImage")})]}),c("div",{className:"uppy-Dashboard-FileCard-info",children:c(kh,{computedMetaFields:x,requiredMetaFields:o,updateMeta:_,form:R,formState:A})}),c("div",{className:"uppy-Dashboard-FileCard-actions",children:[c("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:R.id,children:l("saveChanges")}),c("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:F,form:R.id,children:l("cancel")})]})]})]})}function Oh(i,e){if(i===e)return!0;if(!i||!e)return!1;const t=Object.keys(i),n=Object.keys(e),r=t.length;if(n.length!==r)return!1;for(let s=0;s<r;s++){const o=t[s];if(i[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function Ah(i,e="Copy the URL below"){return new Promise(t=>{const n=document.createElement("textarea");n.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),n.value=i,document.body.appendChild(n),n.select();const r=()=>{document.body.removeChild(n),window.prompt(e,i),t()};try{return document.execCommand("copy")?(document.body.removeChild(n),t()):r()}catch{return document.body.removeChild(n),r()}})}function Rh({file:i,uploadInProgressOrComplete:e,metaFields:t,canEditFile:n,i18n:r,onClick:s}){return!e&&t&&t.length>0||!e&&n(i)?c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":r("editFileWithFilename",{file:i.meta.name}),title:r("editFileWithFilename",{file:i.meta.name}),onClick:()=>s(),children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:c("g",{fillRule:"evenodd",children:[c("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),c("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),c("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function Ih({i18n:i,onClick:e,file:t}){return c("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":i("removeFile",{file:t.meta.name}),title:i("removeFile",{file:t.meta.name}),onClick:()=>e(),children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[c("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),c("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function Dh({file:i,uppy:e,i18n:t}){const n=r=>{Ah(i.uploadURL,t("copyLinkToClipboardFallback")).then(()=>{e.log("Link copied to clipboard."),e.info(t("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.log).then(()=>r.target.focus({preventScroll:!0}))};return c("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:r=>n(r),children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:c("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function Nh(i){const{uppy:e,file:t,uploadInProgressOrComplete:n,canEditFile:r,metaFields:s,showLinkToFileUploadResult:o,showRemoveButton:a,i18n:l,toggleFileCard:u,openFileEditor:d}=i;return c("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[c(Rh,{i18n:l,file:t,uploadInProgressOrComplete:n,canEditFile:r,metaFields:s,onClick:()=>{s&&s.length>0?u(!0,t.id):d(t)}}),o&&t.uploadURL?c(Dh,{file:t,uppy:e,i18n:l}):null,a?c(Ih,{i18n:l,file:t,onClick:()=>e.removeFile(t.id)}):null]})}const vn="...";function wa(i,e){if(e===0)return"";if(i.length<=e)return i;if(e<=vn.length+1)return`${i.slice(0,e-1)}…`;const t=e-vn.length,n=Math.ceil(t/2),r=Math.floor(t/2);return i.slice(0,n)+vn+i.slice(-r)}const Bh=(i,e)=>(typeof e=="function"?e():e).filter(r=>r.id===i)[0].name;function Sa(i){const{file:e,toggleFileCard:t,i18n:n,metaFields:r}=i,{missingRequiredMetaFields:s}=e;if(!s?.length)return null;const o=s.map(a=>Bh(a,r)).join(", ");return c("div",{className:"uppy-Dashboard-Item-errorMessage",children:[n("missingRequiredMetaFields",{smart_count:s.length,fields:o})," ",c("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id),children:n("editFile")})]})}const Lh=i=>{const{author:e,name:t}=i.file.meta;function n(){return i.isSingleFile&&i.containerHeight>=350?90:i.containerWidth<=352?35:i.containerWidth<=576?60:e?20:30}return c("div",{className:"uppy-Dashboard-Item-name",title:t,children:wa(t,n())})},Mh=i=>{const{author:e}=i.file.meta,t=i.file.remote?.providerName,n="·";return e?c("div",{className:"uppy-Dashboard-Item-author",children:[c("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:wa(e.name,13)}),t?c(we,{children:[` ${n} `,t,` ${n} `]}):null]}):null},$h=i=>i.file.size&&c("div",{className:"uppy-Dashboard-Item-statusSize",children:qe(i.file.size)}),zh=i=>i.file.isGhost&&c("span",{children:[" • ",c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>i.toggleAddFilesPanel(!0),children:i.i18n("reSelect")})]}),jh=({file:i,onClick:e})=>i.error?c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":i.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:e,type:"button",children:"?"}):null;function qh(i){const{file:e,i18n:t,toggleFileCard:n,metaFields:r,toggleAddFilesPanel:s,isSingleFile:o,containerHeight:a,containerWidth:l}=i;return c("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source,children:[c("div",{className:"uppy-Dashboard-Item-fileName",children:[Lh({file:e,isSingleFile:o,containerHeight:a,containerWidth:l}),c(jh,{file:e,onClick:()=>alert(e.error)})]}),c("div",{className:"uppy-Dashboard-Item-status",children:[Mh({file:e}),$h({file:e}),zh({file:e,toggleAddFilesPanel:s,i18n:t})]}),c(Sa,{file:e,i18n:t,toggleFileCard:n,metaFields:r})]})}function Hh(i){const{file:e,i18n:t,toggleFileCard:n,metaFields:r,showLinkToFileUploadResult:s}=i,a=e.preview?"rgba(255, 255, 255, 0.5)":Fr(e.type).color;return c("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:a},children:[s&&e.uploadURL&&c("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name,children:c("span",{hidden:!0,children:e.meta.name})}),c(_a,{file:e}),c(Sa,{file:e,i18n:t,toggleFileCard:n,metaFields:r})]})}function Vh(i){if(!i.isUploaded){if(i.error&&!i.hideRetryButton){i.uppy.retryUpload(i.file.id);return}i.resumableUploads&&!i.hidePauseResumeButton?i.uppy.pauseResume(i.file.id):i.individualCancellation&&!i.hideCancelButton&&i.uppy.removeFile(i.file.id)}}function Ms(i){return i.isUploaded?i.i18n("uploadComplete"):i.error?i.i18n("retryUpload"):i.resumableUploads?i.file.isPaused?i.i18n("resumeUpload"):i.i18n("pauseUpload"):i.individualCancellation?i.i18n("cancelUpload"):""}function _n(i){return c("div",{className:"uppy-Dashboard-Item-progress",children:c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":Ms(i),title:Ms(i),onClick:()=>Vh(i),children:i.children})})}function hi({children:i}){return c("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:i})}function wn({progress:i}){const e=2*Math.PI*15;return c("g",{children:[c("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),c("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":e,"stroke-dashoffset":e-e/100*i})]})}function Wh(i){return!i.file.progress.uploadStarted||i.file.progress.percentage===void 0?null:i.isUploaded?c("div",{className:"uppy-Dashboard-Item-progress",children:c("div",{className:"uppy-Dashboard-Item-progressIndicator",children:c(hi,{children:[c("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),c("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):i.recoveredState?null:i.error&&!i.hideRetryButton?c(_n,{...i,children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[c("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),c("path",{d:"M7.9 3H10v2H7.9z"}),c("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),c("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):i.resumableUploads&&!i.hidePauseResumeButton?c(_n,{...i,children:c(hi,{children:[c(wn,{progress:i.file.progress.percentage}),i.file.isPaused?c("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):c("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[c("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),c("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!i.resumableUploads&&i.individualCancellation&&!i.hideCancelButton?c(_n,{...i,children:c(hi,{children:[c(wn,{progress:i.file.progress.percentage}),c("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):c("div",{className:"uppy-Dashboard-Item-progress",children:c("div",{className:"uppy-Dashboard-Item-progressIndicator",children:c(hi,{children:c(wn,{progress:i.file.progress.percentage})})})})}class Gh extends pe{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!Oh(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,n=!!e.progress.uploadComplete&&!t&&!e.error,r=!!e.progress.uploadStarted||!!t,s=e.progress.uploadStarted&&!e.progress.uploadComplete||t,o=e.error||!1,{isGhost:a}=e;let l=(this.props.individualCancellation||!s)&&!n;n&&this.props.showRemoveButtonAfterComplete&&(l=!0);const u=Se({"uppy-Dashboard-Item":!0,"is-inprogress":s&&!this.props.recoveredState,"is-processing":t,"is-complete":n,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":a});return c("div",{className:u,id:`uppy_${e.id}`,role:this.props.role,children:[c("div",{className:"uppy-Dashboard-Item-preview",children:[c(Hh,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),c(Wh,{uppy:this.props.uppy,file:e,error:o,isUploaded:n,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),c("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[c(qh,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),c(Nh,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:l,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:r,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function Kh(i,e){const t=[];let n=[];return i.forEach(r=>{n.length<e?n.push(r):(t.push(n),n=[r])}),n.length&&t.push(n),t}function Xh({id:i,i18n:e,uppy:t,files:n,resumableUploads:r,hideRetryButton:s,hidePauseResumeButton:o,hideCancelButton:a,showLinkToFileUploadResult:l,showRemoveButtonAfterComplete:u,metaFields:d,isSingleFile:h,toggleFileCard:b,handleRequestThumbnail:S,handleCancelThumbnail:x,recoveredState:T,individualCancellation:O,itemsPerRow:A,openFileEditor:m,canEditFile:y,toggleAddFilesPanel:_,containerWidth:F,containerHeight:R}){const U=A===1?71:200,M=mr(()=>{const K=(Z,k)=>Number(n[k].isGhost)-Number(n[Z].isGhost),W=Object.keys(n);return T&&W.sort(K),Kh(W,A)},[n,A,T]),N=K=>c("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:K.map(W=>c(Gh,{uppy:t,id:i,i18n:e,resumableUploads:r,individualCancellation:O,hideRetryButton:s,hidePauseResumeButton:o,hideCancelButton:a,showLinkToFileUploadResult:l,showRemoveButtonAfterComplete:u,metaFields:d,recoveredState:T,isSingleFile:h,containerWidth:F,containerHeight:R,toggleFileCard:b,handleRequestThumbnail:S,handleCancelThumbnail:x,role:"listitem",openFileEditor:m,canEditFile:y,toggleAddFilesPanel:_,file:n[W]},W))},K[0]);return h?c("div",{class:"uppy-Dashboard-files",children:N(M[0])}):c(gd,{class:"uppy-Dashboard-files",role:"list",data:M,renderRow:N,rowHeight:U})}function Yh({activePickerPanel:i,className:e,hideAllPanels:t,i18n:n,state:r,uppy:s}){const o=bi(null);return c("div",{className:Se("uppy-DashboardContent-panel",e),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${i.id}`,onDragOver:Ne,onDragLeave:Ne,onDrop:Ne,onPaste:Ne,children:[c("div",{className:"uppy-DashboardContent-bar",children:[c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:n("importFrom",{name:i.name})}),c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:n("cancel")})]}),c("div",{ref:o,className:"uppy-DashboardContent-panelBody",children:s.getPlugin(i.id).render(r,o.current)})]})}const Fe={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function Qh(i,e,t,n={}){if(i)return Fe.STATE_ERROR;if(e)return Fe.STATE_COMPLETE;if(t)return Fe.STATE_PAUSED;let r=Fe.STATE_WAITING;const s=Object.keys(n);for(let o=0;o<s.length;o++){const{progress:a}=n[s[o]];if(a.uploadStarted&&!a.uploadComplete)return Fe.STATE_UPLOADING;a.preprocess&&r!==Fe.STATE_UPLOADING&&(r=Fe.STATE_PREPROCESSING),a.postprocess&&r!==Fe.STATE_UPLOADING&&r!==Fe.STATE_PREPROCESSING&&(r=Fe.STATE_POSTPROCESSING)}return r}function Zh({files:i,i18n:e,isAllComplete:t,isAllErrored:n,isAllPaused:r,inProgressNotPausedFiles:s,newFiles:o,processingFiles:a}){switch(Qh(n,t,r,i)){case"uploading":return e("uploadingXFiles",{smart_count:s.length});case"preprocessing":case"postprocessing":return e("processingXFiles",{smart_count:a.length});case"paused":return e("uploadPaused");case"waiting":return e("xFilesSelected",{smart_count:o.length});case"complete":return e("uploadComplete");case"error":return e("error")}}function Jh(i){const{i18n:e,isAllComplete:t,hideCancelButton:n,maxNumberOfFiles:r,toggleAddFilesPanel:s,uppy:o}=i;let{allowNewUpload:a}=i;return a&&r&&(a=i.totalFileCount<i.maxNumberOfFiles),c("div",{className:"uppy-DashboardContent-bar",children:[!t&&!n?c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>o.cancelAll(),children:e("cancel")}):c("div",{}),c("div",{className:"uppy-DashboardContent-title",children:c(Zh,{...i})}),a?c("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>s(!0),children:[c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:c("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),c("span",{className:"uppy-DashboardContent-addMoreCaption",children:e("addMore")})]}):c("div",{})]})}const Je="uppy-transition-slideDownUp",$s=250;function pi({children:i}){const[e,t]=Ti(null),[n,r]=Ti(""),s=bi(),o=bi(),a=bi(),l=()=>{r(`${Je}-enter`),cancelAnimationFrame(a.current),clearTimeout(o.current),o.current=void 0,a.current=requestAnimationFrame(()=>{r(`${Je}-enter ${Je}-enter-active`),s.current=setTimeout(()=>{r("")},$s)})},u=()=>{r(`${Je}-leave`),cancelAnimationFrame(a.current),clearTimeout(s.current),s.current=void 0,a.current=requestAnimationFrame(()=>{r(`${Je}-leave ${Je}-leave-active`),o.current=setTimeout(()=>{t(null),r("")},$s)})};return Rn(()=>{const d=ve(i)[0];e!==d&&(d&&!e?l():e&&!d&&!o.current&&u(),t(d))},[i,e]),Rn(()=>()=>{clearTimeout(s.current),clearTimeout(o.current),cancelAnimationFrame(a.current)},[]),e?No(e,{className:Se(n,e.props.className)}):null}const zs=900,js=700,Sn=576,qs=330;function ep(i){const e=i.totalFileCount===0,t=i.totalFileCount===1,n=i.containerWidth>Sn,r=i.containerHeight>qs,s=Se({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":i.disabled,"uppy-Dashboard--animateOpenClose":i.animateOpenClose,"uppy-Dashboard--isClosing":i.isClosing,"uppy-Dashboard--isDraggingOver":i.isDraggingOver,"uppy-Dashboard--modal":!i.inline,"uppy-size--md":i.containerWidth>Sn,"uppy-size--lg":i.containerWidth>js,"uppy-size--xl":i.containerWidth>zs,"uppy-size--height-md":i.containerHeight>qs,"uppy-Dashboard--isAddFilesPanelVisible":i.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":i.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":i.singleFileFullScreen&&t&&r});let o=1;i.containerWidth>zs?o=5:i.containerWidth>js?o=4:i.containerWidth>Sn&&(o=3);const a=i.showSelectedFiles&&!e,l=i.recoveredState?Object.keys(i.recoveredState.files).length:null,u=i.files?Object.keys(i.files).filter(b=>i.files[b].isGhost).length:0,d=()=>u>0?i.i18n("recoveredXFiles",{smart_count:u}):i.i18n("recoveredAllFiles");return c("div",{className:s,"data-uppy-theme":i.theme,"data-uppy-num-acquirers":i.acquirers.length,"data-uppy-drag-drop-supported":!i.disableLocalFiles&&vh(),"aria-hidden":i.inline?"false":i.isHidden,"aria-disabled":i.disabled,"aria-label":i.inline?i.i18n("dashboardTitle"):i.i18n("dashboardWindowTitle"),onPaste:i.handlePaste,onDragOver:i.handleDragOver,onDragLeave:i.handleDragLeave,onDrop:i.handleDrop,children:[c("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:i.handleClickOutside}),c("div",{className:"uppy-Dashboard-inner",role:i.inline?void 0:"dialog",style:{width:i.inline&&i.width?i.width:"",height:i.inline&&i.height?i.height:""},children:[i.inline?null:c("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":i.i18n("closeModal"),title:i.i18n("closeModal"),onClick:i.closeModal,children:c("span",{"aria-hidden":"true",children:"×"})}),c("div",{className:"uppy-Dashboard-innerWrap",children:[c("div",{className:"uppy-Dashboard-dropFilesHereHint",children:i.i18n("dropHint")}),a&&c(Jh,{...i}),l&&c("div",{className:"uppy-Dashboard-serviceMsg",children:[c("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:c("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[c("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),c("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),c("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),c("strong",{className:"uppy-Dashboard-serviceMsg-title",children:i.i18n("sessionRestored")}),c("div",{className:"uppy-Dashboard-serviceMsg-text",children:d()})]}),a?c(Xh,{id:i.id,i18n:i.i18n,uppy:i.uppy,files:i.files,resumableUploads:i.resumableUploads,hideRetryButton:i.hideRetryButton,hidePauseResumeButton:i.hidePauseResumeButton,hideCancelButton:i.hideCancelButton,showLinkToFileUploadResult:i.showLinkToFileUploadResult,showRemoveButtonAfterComplete:i.showRemoveButtonAfterComplete,metaFields:i.metaFields,toggleFileCard:i.toggleFileCard,handleRequestThumbnail:i.handleRequestThumbnail,handleCancelThumbnail:i.handleCancelThumbnail,recoveredState:i.recoveredState,individualCancellation:i.individualCancellation,openFileEditor:i.openFileEditor,canEditFile:i.canEditFile,toggleAddFilesPanel:i.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:o,containerWidth:i.containerWidth,containerHeight:i.containerHeight}):c(va,{i18n:i.i18n,i18nArray:i.i18nArray,acquirers:i.acquirers,handleInputChange:i.handleInputChange,maxNumberOfFiles:i.maxNumberOfFiles,allowedFileTypes:i.allowedFileTypes,showNativePhotoCameraButton:i.showNativePhotoCameraButton,showNativeVideoCameraButton:i.showNativeVideoCameraButton,nativeCameraFacingMode:i.nativeCameraFacingMode,showPanel:i.showPanel,activePickerPanel:i.activePickerPanel,disableLocalFiles:i.disableLocalFiles,fileManagerSelectionType:i.fileManagerSelectionType,note:i.note,proudlyDisplayPoweredByUppy:i.proudlyDisplayPoweredByUppy}),c(pi,{children:i.showAddFilesPanel?c(_h,{...i,isSizeMD:n},"AddFiles"):null}),c(pi,{children:i.fileCardFor?c(Uh,{...i},"FileCard"):null}),c(pi,{children:i.activePickerPanel?c(Yh,{...i},"Picker"):null}),c(pi,{children:i.showFileEditor?c(wh,{...i},"Editor"):null}),c("div",{className:"uppy-Dashboard-progressindicators",children:i.progressindicators.map(b=>i.uppy.getPlugin(b.id).render(i.state))})]})]})]})}const tp={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}},Fa=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];var ip=Xo();const np=Me(ip);function Pa(i,e){if(e){const t=i.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return i}function rp(){let i=!1;return np((t,n)=>{const r=Pa(t,n),s=r.contains(document.activeElement);if(s&&i)return;const o=r.querySelector("[data-uppy-super-focusable]");s&&!o||(o?(o.focus({preventScroll:!0}),i=!0):(r.querySelector(Fa)?.focus({preventScroll:!0}),i=!1))},260)}function Hs(i,e){const t=e[0];t&&(t.focus(),i.preventDefault())}function sp(i,e){const t=e[e.length-1];t&&(t.focus(),i.preventDefault())}function op(i){return i.contains(document.activeElement)}function Ta(i,e,t){const n=Pa(t,e),r=kt(n.querySelectorAll(Fa)),s=r.indexOf(document.activeElement);op(n)?i.shiftKey&&s===0?sp(i,r):!i.shiftKey&&s===r.length-1&&Hs(i,r):Hs(i,r)}function ap(i,e,t){e===null||Ta(i,e,t)}const Vs=9,lp=27;function Ws(){const i={};return i.promise=new Promise((e,t)=>{i.resolve=e,i.reject=t}),i}const up={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:yd,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};var ut,Ke,Kt,ct,Ii,Di,Ni,Xe,Bi,Li,dt,se,Kn,Xn,Ea,Yn,Qn,xa;class Ca extends gt{constructor(t,n){const r=n?.autoOpen??null;super(t,{...up,...n,autoOpen:r});L(this,se);L(this,ut);v(this,"modalName",`uppy-Dashboard-${yr()}`);v(this,"superFocus",rp());v(this,"ifFocusedOnUppyRecently",!1);v(this,"dashboardIsDisabled");v(this,"savedScrollPosition");v(this,"savedActiveElement");v(this,"resizeObserver");v(this,"darkModeMediaQuery");v(this,"makeDashboardInsidesVisibleAnywayTimeout");v(this,"removeTarget",t=>{const r=this.getPluginState().targets.filter(s=>s.id!==t.id);this.setPluginState({targets:r})});v(this,"addTarget",t=>{const n=t.id||t.constructor.name,r=t.title||n,s=t.type;if(s!=="acquirer"&&s!=="progressindicator"&&s!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const o={id:n,name:r,type:s},l=this.getPluginState().targets.slice();return l.push(o),this.setPluginState({targets:l}),this.el});v(this,"hideAllPanels",()=>{const t=this.getPluginState(),n={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};t.activePickerPanel===n.activePickerPanel&&t.showAddFilesPanel===n.showAddFilesPanel&&t.showFileEditor===n.showFileEditor&&t.activeOverlayType===n.activeOverlayType||(this.setPluginState(n),this.uppy.emit("dashboard:close-panel",t.activePickerPanel?.id))});v(this,"showPanel",t=>{const{targets:n}=this.getPluginState(),r=n.find(s=>s.type==="acquirer"&&s.id===t);this.setPluginState({activePickerPanel:r,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",t)});v(this,"canEditFile",t=>{const{targets:n}=this.getPluginState();return w(this,Xe).call(this,n).some(s=>this.uppy.getPlugin(s.id).canEditFile(t))});v(this,"openFileEditor",t=>{const{targets:n}=this.getPluginState(),r=w(this,Xe).call(this,n);this.setPluginState({showFileEditor:!0,fileCardFor:t.id||null,activeOverlayType:"FileEditor"}),r.forEach(s=>{this.uppy.getPlugin(s.id).selectFile(t)})});v(this,"closeFileEditor",()=>{const{metaFields:t}=this.getPluginState();t&&t.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})});v(this,"saveFileEditor",()=>{const{targets:t}=this.getPluginState();w(this,Xe).call(this,t).forEach(r=>{this.uppy.getPlugin(r.id).save()}),this.closeFileEditor()});v(this,"openModal",()=>{const{promise:t,resolve:n}=Ws();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const r=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",r,!1),n()};this.el.addEventListener("animationend",r,!1)}else this.setPluginState({isHidden:!1}),n();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),t});v(this,"closeModal",t=>{const n=t?.manualClose??!0,{isHidden:r,isClosing:s}=this.getPluginState();if(r||s)return;const{promise:o,resolve:a}=Ws();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const l=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",l,!1),a()};this.el.addEventListener("animationend",l,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),a();return document.removeEventListener("keydown",this.handleKeyDownInModal),n&&this.opts.browserBackButtonClose&&history.state?.[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),o});v(this,"isModalOpen",()=>!this.getPluginState().isHidden||!1);v(this,"requestCloseModal",()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal());v(this,"setDarkModeCapability",t=>{const{capabilities:n}=this.uppy.getState();this.uppy.setState({capabilities:{...n,darkMode:t}})});v(this,"handleSystemDarkModeChange",t=>{const n=t.matches;this.uppy.log(`[Dashboard] Dark mode is ${n?"on":"off"}`),this.setDarkModeCapability(n)});v(this,"toggleFileCard",(t,n)=>{const r=this.uppy.getFile(n);t?this.uppy.emit("dashboard:file-edit-start",r):this.uppy.emit("dashboard:file-edit-complete",r),this.setPluginState({fileCardFor:t?n:null,activeOverlayType:t?"FileCard":null})});v(this,"toggleAddFilesPanel",t=>{this.setPluginState({showAddFilesPanel:t,activeOverlayType:t?"AddFiles":null})});v(this,"addFiles",t=>{const n=t.map(r=>({source:this.id,name:r.name,type:r.type,data:r,meta:{relativePath:r.relativePath||r.webkitRelativePath||null}}));try{this.uppy.addFiles(n)}catch(r){this.uppy.log(r)}});v(this,"startListeningToResize",()=>{this.resizeObserver=new ResizeObserver(t=>{const n=t[0],{width:r,height:s}=n.contentRect;this.setPluginState({containerWidth:r,containerHeight:s,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const t=this.getPluginState(),n=!this.opts.inline&&t.isHidden;!t.areInsidesReadyToBeVisible&&!n&&(this.uppy.log("[Dashboard] resize event didn’t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)});v(this,"stopListeningToResize",()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)});v(this,"recordIfFocusedOnUppyRecently",t=>{this.el.contains(t.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())});v(this,"disableInteractiveElements",t=>{const n=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],r=w(this,ut)??kt(this.el.querySelectorAll(n)).filter(s=>!s.classList.contains("uppy-Dashboard-close"));for(const s of r)s.tagName==="A"?s.setAttribute("aria-disabled",t):s.disabled=t;t?j(this,ut,r):j(this,ut,null),this.dashboardIsDisabled=t});v(this,"updateBrowserHistory",()=>{history.state?.[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)});v(this,"handlePopState",t=>{this.isModalOpen()&&(!t.state||!t.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&t.state?.[this.modalName]&&history.back()});v(this,"handleKeyDownInModal",t=>{t.keyCode===lp&&this.requestCloseModal(),t.keyCode===Vs&&Ta(t,this.getPluginState().activeOverlayType,this.el)});v(this,"handleClickOutside",()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()});v(this,"handlePaste",t=>{this.uppy.iteratePlugins(r=>{r.type==="acquirer"&&r.handleRootPaste?.(t)});const n=kt(t.clipboardData.files);n.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(n))});v(this,"handleInputChange",t=>{t.preventDefault();const n=kt(t.currentTarget.files||[]);n.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(n))});v(this,"handleDragOver",t=>{t.preventDefault(),t.stopPropagation();const n=()=>{let a=!0;return this.uppy.iteratePlugins(l=>{l.canHandleRootDrop?.(t)&&(a=!0)}),a},r=()=>{const{types:a}=t.dataTransfer;return a.some(l=>l==="Files")},s=n(),o=r();if(!s&&!o||this.opts.disabled||this.opts.disableLocalFiles&&(o||!s)||!this.uppy.getState().allowNewUpload){t.dataTransfer.dropEffect="none";return}t.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(t)});v(this,"handleDragLeave",t=>{t.preventDefault(),t.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(t)});v(this,"handleDrop",async t=>{t.preventDefault(),t.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(o=>{o.type==="acquirer"&&o.handleRootDrop?.(t)});let n=!1;const r=o=>{this.uppy.log(o,"error"),n||(this.uppy.info(o.message,"error"),n=!0)};this.uppy.log("[Dashboard] Processing dropped files");const s=await gh(t.dataTransfer,{logDropError:r});s.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(s)),this.opts.onDrop(t)});v(this,"handleRequestThumbnail",t=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",t)});v(this,"handleCancelThumbnail",t=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",t)});v(this,"handleKeyDownInInline",t=>{t.keyCode===Vs&&ap(t,this.getPluginState().activeOverlayType,this.el)});v(this,"handlePasteOnBody",t=>{this.el.contains(document.activeElement)&&this.handlePaste(t)});v(this,"handleComplete",({failed:t})=>{this.opts.closeAfterFinish&&!t?.length&&this.requestCloseModal()});v(this,"handleCancelRestore",()=>{this.uppy.emit("restore-canceled")});L(this,Ke,()=>{if(this.opts.disableThumbnailGenerator)return;const t=600,n=this.uppy.getFiles();if(n.length===1){const r=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);r?.setOptions({thumbnailWidth:t});const s={...n[0],preview:void 0};r?.requestThumbnail(s).then(()=>{r?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}});L(this,Kt,t=>{const n=t[0],{metaFields:r}=this.getPluginState(),s=r&&r.length>0,o=this.canEditFile(n);s&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,n.id):o&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(n)});v(this,"initEvents",()=>{if(this.opts.trigger&&!this.opts.inline){const t=Ls(this.opts.trigger);t?t.forEach(n=>n.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",w(this,dt)),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",w(this,Ke)),this.uppy.on("file-removed",w(this,Ke)),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",w(this,Kt))});v(this,"removeEvents",()=>{const t=Ls(this.opts.trigger);!this.opts.inline&&t&&t.forEach(n=>n.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",w(this,dt)),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",w(this,Ke)),this.uppy.off("file-removed",w(this,Ke)),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",w(this,Kt))});v(this,"superFocusOnEachUpdate",()=>{const t=this.el.contains(document.activeElement),n=document.activeElement===document.body||document.activeElement===null,r=this.uppy.getState().info.length===0,s=!this.opts.inline;r&&(s||t||n&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()});v(this,"afterUpdate",()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()});v(this,"saveFileCard",(t,n)=>{this.uppy.setFileMeta(n,t),this.toggleFileCard(!1,n)});L(this,ct,t=>{const n=this.uppy.getPlugin(t.id);return{...t,icon:n.icon||this.opts.defaultPickerIcon,render:n.render}});L(this,Ii,t=>{const n=this.uppy.getPlugin(t.id);return typeof n.isSupported!="function"?!0:n.isSupported()});L(this,Di,t=>t.filter(n=>n.type==="acquirer"&&w(this,Ii).call(this,n)).map(w(this,ct)));L(this,Ni,t=>t.filter(n=>n.type==="progressindicator").map(w(this,ct)));L(this,Xe,t=>t.filter(n=>n.type==="editor").map(w(this,ct)));v(this,"render",t=>{const n=this.getPluginState(),{files:r,capabilities:s,allowNewUpload:o}=t,{newFiles:a,uploadStartedFiles:l,completeFiles:u,erroredFiles:d,inProgressFiles:h,inProgressNotPausedFiles:b,processingFiles:S,isUploadStarted:x,isAllComplete:T,isAllPaused:O}=this.uppy.getObjectOfFilesPerState(),A=w(this,Di).call(this,n.targets),m=w(this,Ni).call(this,n.targets),y=w(this,Xe).call(this,n.targets);let _;return this.opts.theme==="auto"?_=s.darkMode?"dark":"light":_=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),ep({state:t,isHidden:n.isHidden,files:r,newFiles:a,uploadStartedFiles:l,completeFiles:u,erroredFiles:d,inProgressFiles:h,inProgressNotPausedFiles:b,processingFiles:S,isUploadStarted:x,isAllComplete:T,isAllPaused:O,totalFileCount:Object.keys(r).length,totalProgress:t.totalProgress,allowNewUpload:o,acquirers:A,theme:_,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:n.activePickerPanel,showFileEditor:n.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:n.isClosing,progressindicators:m,editors:y,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:t.recoveredState,metaFields:n.metaFields,resumableUploads:s.resumableUploads||!1,individualCancellation:s.individualCancellation,isMobileDevice:s.isMobileDevice,fileCardFor:n.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:n.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:n.containerWidth,containerHeight:n.containerHeight,areInsidesReadyToBeVisible:n.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:n.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})});L(this,Bi,()=>{const{plugins:t}=this.opts;t.forEach(n=>{const r=this.uppy.getPlugin(n);r?r.mount(this,r):this.uppy.log(`[Uppy] Dashboard could not find plugin '${n}', make sure to uppy.use() the plugins you are specifying`,"warning")})});L(this,Li,()=>{this.uppy.iteratePlugins(w(this,dt))});L(this,dt,t=>{const n=["acquirer","editor"];t&&!t.opts?.target&&n.includes(t.type)&&(this.getPluginState().targets.some(s=>t.id===s.id)||t.mount(this,t))});v(this,"install",()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:t,closeAfterFinish:n}=this.opts;if(t&&n)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:r,allowMultipleUploadBatches:s}=this.uppy.opts;(r||s)&&n&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:o}=this.opts;o&&this.mount(o,this),this.opts.disableStatusBar||this.uppy.use(sa,{id:D(this,se,Yn).call(this),target:this,...D(this,se,Kn).call(this)}),this.opts.disableInformer||this.uppy.use(ia,{id:D(this,se,xa).call(this),target:this,...D(this,se,Ea).call(this)}),this.opts.disableThumbnailGenerator||this.uppy.use(ma,{id:D(this,se,Qn).call(this),...D(this,se,Xn).call(this)}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const a=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${a?"on":"off"}`),this.setDarkModeCapability(a),this.opts.theme==="auto"&&this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange),w(this,Bi).call(this),w(this,Li).call(this),this.initEvents()});v(this,"uninstall",()=>{if(!this.opts.disableInformer){const n=this.uppy.getPlugin(`${this.id}:Informer`);n&&this.uppy.removePlugin(n)}if(!this.opts.disableStatusBar){const n=this.uppy.getPlugin(`${this.id}:StatusBar`);n&&this.uppy.removePlugin(n)}if(!this.opts.disableThumbnailGenerator){const n=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);n&&this.uppy.removePlugin(n)}const{plugins:t}=this.opts;t.forEach(n=>{const r=this.uppy.getPlugin(n);r&&r.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()});this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=tp,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),this.opts.onRequestCloseModal??=()=>this.closeModal(),this.i18nInit()}setOptions(t){super.setOptions(t),this.uppy.getPlugin(D(this,se,Yn).call(this))?.setOptions(D(this,se,Kn).call(this)),this.uppy.getPlugin(D(this,se,Qn).call(this))?.setOptions(D(this,se,Xn).call(this))}}ut=new WeakMap,Ke=new WeakMap,Kt=new WeakMap,ct=new WeakMap,Ii=new WeakMap,Di=new WeakMap,Ni=new WeakMap,Xe=new WeakMap,Bi=new WeakMap,Li=new WeakMap,dt=new WeakMap,se=new WeakSet,Kn=function(){const{hideUploadButton:t,hideRetryButton:n,hidePauseResumeButton:r,hideCancelButton:s,showProgressDetails:o,hideProgressAfterFinish:a,locale:l,doneButtonHandler:u}=this.opts;return{hideUploadButton:t,hideRetryButton:n,hidePauseResumeButton:r,hideCancelButton:s,showProgressDetails:o,hideAfterFinish:a,locale:l,doneButtonHandler:u}},Xn=function(){const{thumbnailWidth:t,thumbnailHeight:n,thumbnailType:r,waitForThumbnailsBeforeUpload:s}=this.opts;return{thumbnailWidth:t,thumbnailHeight:n,thumbnailType:r,waitForThumbnailsBeforeUpload:s,lazy:!s}},Ea=function(){return{}},Yn=function(){return`${this.id}:StatusBar`},Qn=function(){return`${this.id}:ThumbnailGenerator`},xa=function(){return`${this.id}:Informer`},v(Ca,"VERSION",bh.version);var Te,Xt;class cp{constructor(e){L(this,Te);L(this,Xt,[]);j(this,Te,e)}on(e,t){return w(this,Xt).push([e,t]),w(this,Te).on(e,t)}remove(){for(const[e,t]of w(this,Xt).splice(0))w(this,Te).off(e,t)}onFilePause(e,t){this.on("upload-pause",(n,r)=>{e===n?.id&&t(r)})}onFileRemove(e,t){this.on("file-removed",n=>{e===n.id&&t(n.id)})}onPause(e,t){this.on("upload-pause",(n,r)=>{e===n?.id&&t(r)})}onRetry(e,t){this.on("upload-retry",n=>{e===n?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{w(this,Te).getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{w(this,Te).getFile(e)&&t()})}onCancelAll(e,t){this.on("cancel-all",(...n)=>{w(this,Te).getFile(e)&&t(...n)})}onResumeAll(e,t){this.on("resume-all",()=>{w(this,Te).getFile(e)&&t()})}}Te=new WeakMap,Xt=new WeakMap;function dp(i){const e=t=>"error"in t&&!!t.error;return i.filter(t=>!e(t))}function hp(i){return i.filter(e=>!e.progress?.uploadStarted||!e.isRestored)}function pp(i,e){return i===!0?Object.keys(e):Array.isArray(i)?i:[]}function Fn(i,e){return Object.hasOwn(i,e)}function fp(i){return i?i.readyState!==0&&i.readyState!==4||i.status===0:!1}class mp extends Error{constructor(t,n=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");v(this,"cause");v(this,"isNetworkError");v(this,"request");this.cause=t,this.isNetworkError=!0,this.request=n}}function gp(i){return new Error("Cancelled",{cause:i})}function Gs(i){if(i!=null){const e=()=>this.abort(i.reason);i.addEventListener("abort",e,{once:!0});const t=()=>{i.removeEventListener("abort",e)};this.then?.(t,t)}return this}var Ue,Ce,Oe,ht,Ee,pt,Ye,ce,Zn,Tt,ka,Ua,Oa,Mi,ft;class yp{constructor(e){L(this,ce);L(this,Ue,0);L(this,Ce,[]);L(this,Oe,!1);L(this,ht);L(this,Ee,1);L(this,pt);L(this,Ye);v(this,"limit");L(this,Mi,()=>this.resume());L(this,ft,()=>{if(w(this,Oe)){j(this,Ye,setTimeout(w(this,ft),0));return}j(this,Ee,this.limit),this.limit=Math.ceil((w(this,pt)+w(this,Ee))/2);for(let e=w(this,Ee);e<=this.limit;e++)D(this,ce,Tt).call(this);w(this,pt)-w(this,Ee)>3?j(this,Ye,setTimeout(w(this,ft),2e3)):j(this,Ee,Math.floor(w(this,Ee)/2))});typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!w(this,Oe)&&w(this,Ue)<this.limit?D(this,ce,Zn).call(this,e):D(this,ce,Ua).call(this,e,t)}wrapSyncFunction(e,t){return(...n)=>{const r=this.run(()=>(e(...n),queueMicrotask(()=>r.done()),()=>{}),t);return{abortOn:Gs,abort(){r.abort()}}}}wrapPromiseFunction(e,t){return(...n)=>{let r;const s=new Promise((o,a)=>{r=this.run(()=>{let l,u;try{u=Promise.resolve(e(...n))}catch(d){u=Promise.reject(d)}return u.then(d=>{l?a(l):(r.done(),o(d))},d=>{l?a(l):(r.done(),a(d))}),d=>{l=gp(d)}},t)});return s.abort=o=>{r.abort(o)},s.abortOn=Gs,s}}resume(){j(this,Oe,!1),clearTimeout(w(this,ht));for(let e=0;e<this.limit;e++)D(this,ce,Tt).call(this)}pause(e=null){j(this,Oe,!0),clearTimeout(w(this,ht)),e!=null&&j(this,ht,setTimeout(w(this,Mi),e))}rateLimit(e){clearTimeout(w(this,Ye)),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(j(this,pt,this.limit-1),this.limit=w(this,Ee),j(this,Ye,setTimeout(w(this,ft),e)))}get isPaused(){return w(this,Oe)}}Ue=new WeakMap,Ce=new WeakMap,Oe=new WeakMap,ht=new WeakMap,Ee=new WeakMap,pt=new WeakMap,Ye=new WeakMap,ce=new WeakSet,Zn=function(e){j(this,Ue,w(this,Ue)+1);let t=!1,n;try{n=e()}catch(r){throw j(this,Ue,w(this,Ue)-1),r}return{abort:r=>{t||(t=!0,j(this,Ue,w(this,Ue)-1),n?.(r),D(this,ce,Tt).call(this))},done:()=>{t||(t=!0,j(this,Ue,w(this,Ue)-1),D(this,ce,Tt).call(this))}}},Tt=function(){queueMicrotask(()=>D(this,ce,ka).call(this))},ka=function(){if(w(this,Oe)||w(this,Ue)>=this.limit||w(this,Ce).length===0)return;const e=w(this,Ce).shift();if(e==null)throw new Error("Invariant violation: next is null");const t=D(this,ce,Zn).call(this,e.fn);e.abort=t.abort,e.done=t.done},Ua=function(e,t){const n={fn:e,priority:t?.priority||0,abort:()=>{D(this,ce,Oa).call(this,n)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},r=w(this,Ce).findIndex(s=>n.priority>s.priority);return r===-1?w(this,Ce).push(n):w(this,Ce).splice(r,0,n),n},Oa=function(e){const t=w(this,Ce).indexOf(e);t!==-1&&w(this,Ce).splice(t,1)},Mi=new WeakMap,ft=new WeakMap;function Jn(i){"@babel/helpers - typeof";return Jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jn(i)}function bp(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function vp(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _p(i,e,t){return e=Nt(e),wp(i,Pr()?Reflect.construct(e,t||[],Nt(i).constructor):e.apply(i,t))}function wp(i,e){if(e&&(Jn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sp(i)}function Sp(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Fp(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Dt(i,e)}function er(i){var e=typeof Map=="function"?new Map:void 0;return er=function(n){if(n===null||!Tp(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return Pp(n,arguments,Nt(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Dt(r,n)},er(i)}function Pp(i,e,t){if(Pr())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return t&&Dt(r,t.prototype),r}function Pr(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pr=function(){return!!i})()}function Tp(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}function Dt(i,e){return Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Dt(i,e)}function Nt(i){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nt(i)}var fi=(function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(vp(this,e),n=_p(this,e,[t]),n.originalRequest=s,n.originalResponse=o,n.causingError=r,r!=null&&(t+=", caused by ".concat(r.toString())),s!=null){var a=s.getHeader("X-Request-ID")||"n/a",l=s.getMethod(),u=s.getURL(),d=o?o.getStatus():"n/a",h=o?o.getBody()||"":"n/a";t+=", originated from request (method: ".concat(l,", url: ").concat(u,", response code: ").concat(d,", response text: ").concat(h,", request id: ").concat(a,")")}return n.message=t,n}return Fp(e,i),bp(e)})(er(Error));function Bt(i){"@babel/helpers - typeof";return Bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(i)}function Cp(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Ep(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,kp(n.key),n)}}function xp(i,e,t){return e&&Ep(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function kp(i){var e=Up(i,"string");return Bt(e)=="symbol"?e:e+""}function Up(i,e){if(Bt(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(Bt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}var Op=(function(){function i(){Cp(this,i)}return xp(i,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,n){return Promise.resolve(null)}}])})();const Aa="3.7.8",Ap=Aa,bt=typeof Buffer=="function",Ks=typeof TextDecoder=="function"?new TextDecoder:void 0,Xs=typeof TextEncoder=="function"?new TextEncoder:void 0,Rp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ct=Array.prototype.slice.call(Rp),mi=(i=>{let e={};return i.forEach((t,n)=>e[t]=n),e})(Ct),Ip=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,oe=String.fromCharCode.bind(String),Ys=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):i=>new Uint8Array(Array.prototype.slice.call(i,0)),Ra=i=>i.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),Ia=i=>i.replace(/[^A-Za-z0-9\+\/]/g,""),Da=i=>{let e,t,n,r,s="";const o=i.length%3;for(let a=0;a<i.length;){if((t=i.charCodeAt(a++))>255||(n=i.charCodeAt(a++))>255||(r=i.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=t<<16|n<<8|r,s+=Ct[e>>18&63]+Ct[e>>12&63]+Ct[e>>6&63]+Ct[e&63]}return o?s.slice(0,o-3)+"===".substring(o):s},Tr=typeof btoa=="function"?i=>btoa(i):bt?i=>Buffer.from(i,"binary").toString("base64"):Da,tr=bt?i=>Buffer.from(i).toString("base64"):i=>{let t=[];for(let n=0,r=i.length;n<r;n+=4096)t.push(oe.apply(null,i.subarray(n,n+4096)));return Tr(t.join(""))},wi=(i,e=!1)=>e?Ra(tr(i)):tr(i),Dp=i=>{if(i.length<2){var e=i.charCodeAt(0);return e<128?i:e<2048?oe(192|e>>>6)+oe(128|e&63):oe(224|e>>>12&15)+oe(128|e>>>6&63)+oe(128|e&63)}else{var e=65536+(i.charCodeAt(0)-55296)*1024+(i.charCodeAt(1)-56320);return oe(240|e>>>18&7)+oe(128|e>>>12&63)+oe(128|e>>>6&63)+oe(128|e&63)}},Np=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Na=i=>i.replace(Np,Dp),Qs=bt?i=>Buffer.from(i,"utf8").toString("base64"):Xs?i=>tr(Xs.encode(i)):i=>Tr(Na(i)),st=(i,e=!1)=>e?Ra(Qs(i)):Qs(i),Zs=i=>st(i,!0),Bp=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Lp=i=>{switch(i.length){case 4:var e=(7&i.charCodeAt(0))<<18|(63&i.charCodeAt(1))<<12|(63&i.charCodeAt(2))<<6|63&i.charCodeAt(3),t=e-65536;return oe((t>>>10)+55296)+oe((t&1023)+56320);case 3:return oe((15&i.charCodeAt(0))<<12|(63&i.charCodeAt(1))<<6|63&i.charCodeAt(2));default:return oe((31&i.charCodeAt(0))<<6|63&i.charCodeAt(1))}},Ba=i=>i.replace(Bp,Lp),La=i=>{if(i=i.replace(/\s+/g,""),!Ip.test(i))throw new TypeError("malformed base64.");i+="==".slice(2-(i.length&3));let e,t,n,r=[];for(let s=0;s<i.length;)e=mi[i.charAt(s++)]<<18|mi[i.charAt(s++)]<<12|(t=mi[i.charAt(s++)])<<6|(n=mi[i.charAt(s++)]),t===64?r.push(oe(e>>16&255)):n===64?r.push(oe(e>>16&255,e>>8&255)):r.push(oe(e>>16&255,e>>8&255,e&255));return r.join("")},Cr=typeof atob=="function"?i=>atob(Ia(i)):bt?i=>Buffer.from(i,"base64").toString("binary"):La,Ma=bt?i=>Ys(Buffer.from(i,"base64")):i=>Ys(Cr(i).split("").map(e=>e.charCodeAt(0))),$a=i=>Ma(za(i)),Mp=bt?i=>Buffer.from(i,"base64").toString("utf8"):Ks?i=>Ks.decode(Ma(i)):i=>Ba(Cr(i)),za=i=>Ia(i.replace(/[-_]/g,e=>e=="-"?"+":"/")),ir=i=>Mp(za(i)),$p=i=>{if(typeof i!="string")return!1;const e=i.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},ja=i=>({value:i,enumerable:!1,writable:!0,configurable:!0}),qa=function(){const i=(e,t)=>Object.defineProperty(String.prototype,e,ja(t));i("fromBase64",function(){return ir(this)}),i("toBase64",function(e){return st(this,e)}),i("toBase64URI",function(){return st(this,!0)}),i("toBase64URL",function(){return st(this,!0)}),i("toUint8Array",function(){return $a(this)})},Ha=function(){const i=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,ja(t));i("toBase64",function(e){return wi(this,e)}),i("toBase64URI",function(){return wi(this,!0)}),i("toBase64URL",function(){return wi(this,!0)})},zp=()=>{qa(),Ha()},jp={version:Aa,VERSION:Ap,atob:Cr,atobPolyfill:La,btoa:Tr,btoaPolyfill:Da,fromBase64:ir,toBase64:st,encode:st,encodeURI:Zs,encodeURL:Zs,utob:Na,btou:Ba,decode:ir,isValid:$p,fromUint8Array:wi,toUint8Array:$a,extendString:qa,extendUint8Array:Ha,extendBuiltins:zp};var Pn,Js;function qp(){return Js||(Js=1,Pn=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}),Pn}var gi={},eo;function Hp(){if(eo)return gi;eo=1;var i=Object.prototype.hasOwnProperty,e;function t(o){try{return decodeURIComponent(o.replace(/\+/g," "))}catch{return null}}function n(o){try{return encodeURIComponent(o)}catch{return null}}function r(o){for(var a=/([^=?#&]+)=?([^&]*)/g,l={},u;u=a.exec(o);){var d=t(u[1]),h=t(u[2]);d===null||h===null||d in l||(l[d]=h)}return l}function s(o,a){a=a||"";var l=[],u,d;typeof a!="string"&&(a="?");for(d in o)if(i.call(o,d)){if(u=o[d],!u&&(u===null||u===e||isNaN(u))&&(u=""),d=n(d),u=n(u),d===null||u===null)continue;l.push(d+"="+u)}return l.length?a+l.join("&"):""}return gi.stringify=s,gi.parse=r,gi}var Tn,to;function Vp(){if(to)return Tn;to=1;var i=qp(),e=Hp(),t=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,n=/[\n\r\t]/g,r=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=/:\d+$/,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,a=/^[a-zA-Z]:/;function l(m){return(m||"").toString().replace(t,"")}var u=[["#","hash"],["?","query"],function(y,_){return b(_.protocol)?y.replace(/\\/g,"/"):y},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function h(m){var y;typeof window<"u"?y=window:typeof it<"u"?y=it:typeof self<"u"?y=self:y={};var _=y.location||{};m=m||_;var F={},R=typeof m,U;if(m.protocol==="blob:")F=new T(unescape(m.pathname),{});else if(R==="string"){F=new T(m,{});for(U in d)delete F[U]}else if(R==="object"){for(U in m)U in d||(F[U]=m[U]);F.slashes===void 0&&(F.slashes=r.test(m.href))}return F}function b(m){return m==="file:"||m==="ftp:"||m==="http:"||m==="https:"||m==="ws:"||m==="wss:"}function S(m,y){m=l(m),m=m.replace(n,""),y=y||{};var _=o.exec(m),F=_[1]?_[1].toLowerCase():"",R=!!_[2],U=!!_[3],M=0,N;return R?U?(N=_[2]+_[3]+_[4],M=_[2].length+_[3].length):(N=_[2]+_[4],M=_[2].length):U?(N=_[3]+_[4],M=_[3].length):N=_[4],F==="file:"?M>=2&&(N=N.slice(2)):b(F)?N=_[4]:F?R&&(N=N.slice(2)):M>=2&&b(y.protocol)&&(N=_[4]),{protocol:F,slashes:R||b(F),slashesCount:M,rest:N}}function x(m,y){if(m==="")return y;for(var _=(y||"/").split("/").slice(0,-1).concat(m.split("/")),F=_.length,R=_[F-1],U=!1,M=0;F--;)_[F]==="."?_.splice(F,1):_[F]===".."?(_.splice(F,1),M++):M&&(F===0&&(U=!0),_.splice(F,1),M--);return U&&_.unshift(""),(R==="."||R==="..")&&_.push(""),_.join("/")}function T(m,y,_){if(m=l(m),m=m.replace(n,""),!(this instanceof T))return new T(m,y,_);var F,R,U,M,N,K,W=u.slice(),Z=typeof y,k=this,Q=0;for(Z!=="object"&&Z!=="string"&&(_=y,y=null),_&&typeof _!="function"&&(_=e.parse),y=h(y),R=S(m||"",y),F=!R.protocol&&!R.slashes,k.slashes=R.slashes||F&&y.slashes,k.protocol=R.protocol||y.protocol||"",m=R.rest,(R.protocol==="file:"&&(R.slashesCount!==2||a.test(m))||!R.slashes&&(R.protocol||R.slashesCount<2||!b(k.protocol)))&&(W[3]=[/(.*)/,"pathname"]);Q<W.length;Q++){if(M=W[Q],typeof M=="function"){m=M(m,k);continue}U=M[0],K=M[1],U!==U?k[K]=m:typeof U=="string"?(N=U==="@"?m.lastIndexOf(U):m.indexOf(U),~N&&(typeof M[2]=="number"?(k[K]=m.slice(0,N),m=m.slice(N+M[2])):(k[K]=m.slice(N),m=m.slice(0,N)))):(N=U.exec(m))&&(k[K]=N[1],m=m.slice(0,N.index)),k[K]=k[K]||F&&M[3]&&y[K]||"",M[4]&&(k[K]=k[K].toLowerCase())}_&&(k.query=_(k.query)),F&&y.slashes&&k.pathname.charAt(0)!=="/"&&(k.pathname!==""||y.pathname!=="")&&(k.pathname=x(k.pathname,y.pathname)),k.pathname.charAt(0)!=="/"&&b(k.protocol)&&(k.pathname="/"+k.pathname),i(k.port,k.protocol)||(k.host=k.hostname,k.port=""),k.username=k.password="",k.auth&&(N=k.auth.indexOf(":"),~N?(k.username=k.auth.slice(0,N),k.username=encodeURIComponent(decodeURIComponent(k.username)),k.password=k.auth.slice(N+1),k.password=encodeURIComponent(decodeURIComponent(k.password))):k.username=encodeURIComponent(decodeURIComponent(k.auth)),k.auth=k.password?k.username+":"+k.password:k.username),k.origin=k.protocol!=="file:"&&b(k.protocol)&&k.host?k.protocol+"//"+k.host:"null",k.href=k.toString()}function O(m,y,_){var F=this;switch(m){case"query":typeof y=="string"&&y.length&&(y=(_||e.parse)(y)),F[m]=y;break;case"port":F[m]=y,i(y,F.protocol)?y&&(F.host=F.hostname+":"+y):(F.host=F.hostname,F[m]="");break;case"hostname":F[m]=y,F.port&&(y+=":"+F.port),F.host=y;break;case"host":F[m]=y,s.test(y)?(y=y.split(":"),F.port=y.pop(),F.hostname=y.join(":")):(F.hostname=y,F.port="");break;case"protocol":F.protocol=y.toLowerCase(),F.slashes=!_;break;case"pathname":case"hash":if(y){var R=m==="pathname"?"/":"#";F[m]=y.charAt(0)!==R?R+y:y}else F[m]=y;break;case"username":case"password":F[m]=encodeURIComponent(y);break;case"auth":var U=y.indexOf(":");~U?(F.username=y.slice(0,U),F.username=encodeURIComponent(decodeURIComponent(F.username)),F.password=y.slice(U+1),F.password=encodeURIComponent(decodeURIComponent(F.password))):F.username=encodeURIComponent(decodeURIComponent(y))}for(var M=0;M<u.length;M++){var N=u[M];N[4]&&(F[N[1]]=F[N[1]].toLowerCase())}return F.auth=F.password?F.username+":"+F.password:F.username,F.origin=F.protocol!=="file:"&&b(F.protocol)&&F.host?F.protocol+"//"+F.host:"null",F.href=F.toString(),F}function A(m){(!m||typeof m!="function")&&(m=e.stringify);var y,_=this,F=_.host,R=_.protocol;R&&R.charAt(R.length-1)!==":"&&(R+=":");var U=R+(_.protocol&&_.slashes||b(_.protocol)?"//":"");return _.username?(U+=_.username,_.password&&(U+=":"+_.password),U+="@"):_.password?(U+=":"+_.password,U+="@"):_.protocol!=="file:"&&b(_.protocol)&&!F&&_.pathname!=="/"&&(U+="@"),(F[F.length-1]===":"||s.test(_.hostname)&&!_.port)&&(F+=":"),U+=F+_.pathname,y=typeof _.query=="object"?m(_.query):_.query,y&&(U+=y.charAt(0)!=="?"?"?"+y:y),_.hash&&(U+=_.hash),U}return T.prototype={set:O,toString:A},T.extractProtocol=S,T.location=h,T.trimLeft=l,T.qs=e,Tn=T,Tn}var Wp=Vp();const Gp=Me(Wp);function Kp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var e=Math.random()*16|0,t=i==="x"?e:e&3|8;return t.toString(16)})}function nr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */nr=function(){return e};var i,e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(g,p,f){g[p]=f.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(g,p,f){return Object.defineProperty(g,p,{value:f,enumerable:!0,configurable:!0,writable:!0}),g[p]}try{u({},"")}catch{u=function(f,P,E){return f[P]=E}}function d(g,p,f,P){var E=p&&p.prototype instanceof A?p:A,C=Object.create(E.prototype),$=new Q(P||[]);return r(C,"_invoke",{value:K(g,f,$)}),C}function h(g,p,f){try{return{type:"normal",arg:g.call(p,f)}}catch(P){return{type:"throw",arg:P}}}e.wrap=d;var b="suspendedStart",S="suspendedYield",x="executing",T="completed",O={};function A(){}function m(){}function y(){}var _={};u(_,o,function(){return this});var F=Object.getPrototypeOf,R=F&&F(F(ae([])));R&&R!==t&&n.call(R,o)&&(_=R);var U=y.prototype=A.prototype=Object.create(_);function M(g){["next","throw","return"].forEach(function(p){u(g,p,function(f){return this._invoke(p,f)})})}function N(g,p){function f(E,C,$,q){var V=h(g[E],g,C);if(V.type!=="throw"){var le=V.arg,te=le.value;return te&&Qe(te)=="object"&&n.call(te,"__await")?p.resolve(te.__await).then(function(ue){f("next",ue,$,q)},function(ue){f("throw",ue,$,q)}):p.resolve(te).then(function(ue){le.value=ue,$(le)},function(ue){return f("throw",ue,$,q)})}q(V.arg)}var P;r(this,"_invoke",{value:function(C,$){function q(){return new p(function(V,le){f(C,$,V,le)})}return P=P?P.then(q,q):q()}})}function K(g,p,f){var P=b;return function(E,C){if(P===x)throw Error("Generator is already running");if(P===T){if(E==="throw")throw C;return{value:i,done:!0}}for(f.method=E,f.arg=C;;){var $=f.delegate;if($){var q=W($,f);if(q){if(q===O)continue;return q}}if(f.method==="next")f.sent=f._sent=f.arg;else if(f.method==="throw"){if(P===b)throw P=T,f.arg;f.dispatchException(f.arg)}else f.method==="return"&&f.abrupt("return",f.arg);P=x;var V=h(g,p,f);if(V.type==="normal"){if(P=f.done?T:S,V.arg===O)continue;return{value:V.arg,done:f.done}}V.type==="throw"&&(P=T,f.method="throw",f.arg=V.arg)}}}function W(g,p){var f=p.method,P=g.iterator[f];if(P===i)return p.delegate=null,f==="throw"&&g.iterator.return&&(p.method="return",p.arg=i,W(g,p),p.method==="throw")||f!=="return"&&(p.method="throw",p.arg=new TypeError("The iterator does not provide a '"+f+"' method")),O;var E=h(P,g.iterator,p.arg);if(E.type==="throw")return p.method="throw",p.arg=E.arg,p.delegate=null,O;var C=E.arg;return C?C.done?(p[g.resultName]=C.value,p.next=g.nextLoc,p.method!=="return"&&(p.method="next",p.arg=i),p.delegate=null,O):C:(p.method="throw",p.arg=new TypeError("iterator result is not an object"),p.delegate=null,O)}function Z(g){var p={tryLoc:g[0]};1 in g&&(p.catchLoc=g[1]),2 in g&&(p.finallyLoc=g[2],p.afterLoc=g[3]),this.tryEntries.push(p)}function k(g){var p=g.completion||{};p.type="normal",delete p.arg,g.completion=p}function Q(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(Z,this),this.reset(!0)}function ae(g){if(g||g===""){var p=g[o];if(p)return p.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var f=-1,P=function E(){for(;++f<g.length;)if(n.call(g,f))return E.value=g[f],E.done=!1,E;return E.value=i,E.done=!0,E};return P.next=P}}throw new TypeError(Qe(g)+" is not iterable")}return m.prototype=y,r(U,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(g){var p=typeof g=="function"&&g.constructor;return!!p&&(p===m||(p.displayName||p.name)==="GeneratorFunction")},e.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,y):(g.__proto__=y,u(g,l,"GeneratorFunction")),g.prototype=Object.create(U),g},e.awrap=function(g){return{__await:g}},M(N.prototype),u(N.prototype,a,function(){return this}),e.AsyncIterator=N,e.async=function(g,p,f,P,E){E===void 0&&(E=Promise);var C=new N(d(g,p,f,P),E);return e.isGeneratorFunction(p)?C:C.next().then(function($){return $.done?$.value:C.next()})},M(U),u(U,l,"Generator"),u(U,o,function(){return this}),u(U,"toString",function(){return"[object Generator]"}),e.keys=function(g){var p=Object(g),f=[];for(var P in p)f.push(P);return f.reverse(),function E(){for(;f.length;){var C=f.pop();if(C in p)return E.value=C,E.done=!1,E}return E.done=!0,E}},e.values=ae,Q.prototype={constructor:Q,reset:function(p){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(k),!p)for(var f in this)f.charAt(0)==="t"&&n.call(this,f)&&!isNaN(+f.slice(1))&&(this[f]=i)},stop:function(){this.done=!0;var p=this.tryEntries[0].completion;if(p.type==="throw")throw p.arg;return this.rval},dispatchException:function(p){if(this.done)throw p;var f=this;function P(le,te){return $.type="throw",$.arg=p,f.next=le,te&&(f.method="next",f.arg=i),!!te}for(var E=this.tryEntries.length-1;E>=0;--E){var C=this.tryEntries[E],$=C.completion;if(C.tryLoc==="root")return P("end");if(C.tryLoc<=this.prev){var q=n.call(C,"catchLoc"),V=n.call(C,"finallyLoc");if(q&&V){if(this.prev<C.catchLoc)return P(C.catchLoc,!0);if(this.prev<C.finallyLoc)return P(C.finallyLoc)}else if(q){if(this.prev<C.catchLoc)return P(C.catchLoc,!0)}else{if(!V)throw Error("try statement without catch or finally");if(this.prev<C.finallyLoc)return P(C.finallyLoc)}}}},abrupt:function(p,f){for(var P=this.tryEntries.length-1;P>=0;--P){var E=this.tryEntries[P];if(E.tryLoc<=this.prev&&n.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var C=E;break}}C&&(p==="break"||p==="continue")&&C.tryLoc<=f&&f<=C.finallyLoc&&(C=null);var $=C?C.completion:{};return $.type=p,$.arg=f,C?(this.method="next",this.next=C.finallyLoc,O):this.complete($)},complete:function(p,f){if(p.type==="throw")throw p.arg;return p.type==="break"||p.type==="continue"?this.next=p.arg:p.type==="return"?(this.rval=this.arg=p.arg,this.method="return",this.next="end"):p.type==="normal"&&f&&(this.next=f),O},finish:function(p){for(var f=this.tryEntries.length-1;f>=0;--f){var P=this.tryEntries[f];if(P.finallyLoc===p)return this.complete(P.completion,P.afterLoc),k(P),O}},catch:function(p){for(var f=this.tryEntries.length-1;f>=0;--f){var P=this.tryEntries[f];if(P.tryLoc===p){var E=P.completion;if(E.type==="throw"){var C=E.arg;k(P)}return C}}throw Error("illegal catch attempt")},delegateYield:function(p,f,P){return this.delegate={iterator:ae(p),resultName:f,nextLoc:P},this.method==="next"&&(this.arg=i),O}},e}function io(i,e,t,n,r,s,o){try{var a=i[s](o),l=a.value}catch(u){t(u);return}a.done?e(l):Promise.resolve(l).then(n,r)}function Xp(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(l){io(s,n,r,o,a,"next",l)}function a(l){io(s,n,r,o,a,"throw",l)}o(void 0)})}}function Va(i,e){return Zp(i)||Qp(i,e)||Wa(i,e)||Yp()}function Yp(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qp(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(d){u=!0,r=d}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function Zp(i){if(Array.isArray(i))return i}function Qe(i){"@babel/helpers - typeof";return Qe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(i)}function Jp(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=Wa(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Wa(i,e){if(i){if(typeof i=="string")return no(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return no(i,e)}}function no(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function ro(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function et(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ro(Object(t),!0).forEach(function(n){ef(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):ro(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function ef(i,e,t){return e=Ga(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function tf(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function so(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,Ga(n.key),n)}}function nf(i,e,t){return e&&so(i.prototype,e),t&&so(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function Ga(i){var e=rf(i,"string");return Qe(e)=="symbol"?e:e+""}function rf(i,e){if(Qe(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(Qe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}var Si="tus-v1",Fi="ietf-draft-03",Et="ietf-draft-05",sf={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:Ka,chunkSize:Number.POSITIVE_INFINITY,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:Si},Ei=(function(){function i(e,t){tf(this,i),"resume"in t&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=t,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return nf(i,[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then(function(n){return t._urlStorage.findUploadsByFingerprint(n)})}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,n=this.file;if(!n){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(![Si,Fi,Et].includes(this.options.protocol)){this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var r=this.options.retryDelays;if(r!=null&&Object.prototype.toString.call(r)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var s=0,o=["uploadUrl","uploadSize","uploadLengthDeferred"];s<o.length;s++){var a=o[s];if(this.options[a]){this._emitError(new Error("tus: cannot use the ".concat(a," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(n,this.options).then(function(l){return t._fingerprint=l,t._source?t._source:t.options.fileReader.openFile(n,t.options.chunkSize)}).then(function(l){if(t._source=l,t.options.uploadLengthDeferred)t._size=null;else if(t.options.uploadSize!=null){if(t._size=Number(t.options.uploadSize),Number.isNaN(t._size)){t._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(t._size=t._source.size,t._size==null){t._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}t.options.parallelUploads>1||t._parallelUploadUrls!=null?t._startParallelUpload():t._startSingleUpload()}).catch(function(l){t._emitError(l)})}},{key:"_startParallelUpload",value:function(){var t,n=this,r=this._size,s=0;this._parallelUploads=[];var o=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,a=(t=this.options.parallelUploadBoundaries)!==null&&t!==void 0?t:af(this._source.size,o);this._parallelUploadUrls&&a.forEach(function(d,h){d.uploadUrl=n._parallelUploadUrls[h]||null}),this._parallelUploadUrls=new Array(a.length);var l=a.map(function(d,h){var b=0;return n._source.slice(d.start,d.end).then(function(S){var x=S.value;return new Promise(function(T,O){var A=et(et({},n.options),{},{uploadUrl:d.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:n.options.metadataForPartialUploads,headers:et(et({},n.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:T,onError:O,onProgress:function(_){s=s-b+_,b=_,n._emitProgress(s,r)},onUploadUrlAvailable:function(){n._parallelUploadUrls[h]=m.url,n._parallelUploadUrls.filter(function(_){return!!_}).length===a.length&&n._saveUploadInUrlStorage()}}),m=new i(x,A);m.start(),n._parallelUploads.push(m)})})}),u;Promise.all(l).then(function(){u=n._openRequest("POST",n.options.endpoint),u.setHeader("Upload-Concat","final;".concat(n._parallelUploadUrls.join(" ")));var d=oo(n.options.metadata);return d!==""&&u.setHeader("Upload-Metadata",d),n._sendRequest(u,null)}).then(function(d){if(!tt(d.getStatus(),200)){n._emitHttpError(u,d,"tus: unexpected response while creating upload");return}var h=d.getHeader("Location");if(h==null){n._emitHttpError(u,d,"tus: invalid or missing Location header");return}n.url=co(n.options.endpoint,h),"Created upload at ".concat(n.url),n._emitSuccess(d)}).catch(function(d){n._emitError(d)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){"Resuming upload from previous URL: ".concat(this.url),this._resumeUpload();return}if(this.options.uploadUrl!=null){"Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,this._resumeUpload();return}this._createUpload()}},{key:"abort",value:function(t){var n=this;if(this._parallelUploads!=null){var r=Jp(this._parallelUploads),s;try{for(r.s();!(s=r.n()).done;){var o=s.value;o.abort(t)}}catch(a){r.e(a)}finally{r.f()}}return this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!t||this.url==null?Promise.resolve():i.terminate(this.url,this.options).then(function(){return n._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(t,n,r,s){this._emitError(new fi(r,s,t,n))}},{key:"_emitError",value:function(t){var n=this;if(!this._aborted){if(this.options.retryDelays!=null){var r=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(r&&(this._retryAttempt=0),uo(t,this._retryAttempt,this.options)){var s=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){n.start()},s);return}}if(typeof this.options.onError=="function")this.options.onError(t);else throw t}}},{key:"_emitSuccess",value:function(t){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess({lastResponse:t})}},{key:"_emitProgress",value:function(t,n){typeof this.options.onProgress=="function"&&this.options.onProgress(t,n)}},{key:"_emitChunkComplete",value:function(t,n,r){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(t,n,r)}},{key:"_createUpload",value:function(){var t=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var n=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?n.setHeader("Upload-Defer-Length","1"):n.setHeader("Upload-Length","".concat(this._size));var r=oo(this.options.metadata);r!==""&&n.setHeader("Upload-Metadata",r);var s;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,s=this._addChunkToRequest(n)):((this.options.protocol===Fi||this.options.protocol===Et)&&n.setHeader("Upload-Complete","?0"),s=this._sendRequest(n,null)),s.then(function(o){if(!tt(o.getStatus(),200)){t._emitHttpError(n,o,"tus: unexpected response while creating upload");return}var a=o.getHeader("Location");if(a==null){t._emitHttpError(n,o,"tus: invalid or missing Location header");return}if(t.url=co(t.options.endpoint,a),"Created upload at ".concat(t.url),typeof t.options.onUploadUrlAvailable=="function"&&t.options.onUploadUrlAvailable(),t._size===0){t._emitSuccess(o),t._source.close();return}t._saveUploadInUrlStorage().then(function(){t.options.uploadDataDuringCreation?t._handleUploadResponse(n,o):(t._offset=0,t._performUpload())})}).catch(function(o){t._emitHttpError(n,null,"tus: failed to create upload",o)})}},{key:"_resumeUpload",value:function(){var t=this,n=this._openRequest("HEAD",this.url),r=this._sendRequest(n,null);r.then(function(s){var o=s.getStatus();if(!tt(o,200)){if(o===423){t._emitHttpError(n,s,"tus: upload is currently locked; retry later");return}if(tt(o,400)&&t._removeFromUrlStorage(),!t.options.endpoint){t._emitHttpError(n,s,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}t.url=null,t._createUpload();return}var a=Number.parseInt(s.getHeader("Upload-Offset"),10);if(Number.isNaN(a)){t._emitHttpError(n,s,"tus: invalid or missing offset value");return}var l=Number.parseInt(s.getHeader("Upload-Length"),10);if(Number.isNaN(l)&&!t.options.uploadLengthDeferred&&t.options.protocol===Si){t._emitHttpError(n,s,"tus: invalid or missing length value");return}typeof t.options.onUploadUrlAvailable=="function"&&t.options.onUploadUrlAvailable(),t._saveUploadInUrlStorage().then(function(){if(a===l){t._emitProgress(l,l),t._emitSuccess(s);return}t._offset=a,t._performUpload()})}).catch(function(s){t._emitHttpError(n,null,"tus: failed to resume upload",s)})}},{key:"_performUpload",value:function(){var t=this;if(!this._aborted){var n;this.options.overridePatchMethod?(n=this._openRequest("POST",this.url),n.setHeader("X-HTTP-Method-Override","PATCH")):n=this._openRequest("PATCH",this.url),n.setHeader("Upload-Offset","".concat(this._offset));var r=this._addChunkToRequest(n);r.then(function(s){if(!tt(s.getStatus(),200)){t._emitHttpError(n,s,"tus: unexpected response while uploading chunk");return}t._handleUploadResponse(n,s)}).catch(function(s){t._aborted||t._emitHttpError(n,null,"tus: failed to upload chunk at offset ".concat(t._offset),s)})}}},{key:"_addChunkToRequest",value:function(t){var n=this,r=this._offset,s=this._offset+this.options.chunkSize;return t.setProgressHandler(function(o){n._emitProgress(r+o,n._size)}),this.options.protocol===Si?t.setHeader("Content-Type","application/offset+octet-stream"):this.options.protocol===Et&&t.setHeader("Content-Type","application/partial-upload"),(s===Number.POSITIVE_INFINITY||s>this._size)&&!this.options.uploadLengthDeferred&&(s=this._size),this._source.slice(r,s).then(function(o){var a=o.value,l=o.done,u=a!=null&&a.size?a.size:0;n.options.uploadLengthDeferred&&l&&(n._size=n._offset+u,t.setHeader("Upload-Length","".concat(n._size)));var d=n._offset+u;return!n.options.uploadLengthDeferred&&l&&d!==n._size?Promise.reject(new Error("upload was configured with a size of ".concat(n._size," bytes, but the source is done after ").concat(d," bytes"))):a===null?n._sendRequest(t):((n.options.protocol===Fi||n.options.protocol===Et)&&t.setHeader("Upload-Complete",l?"?1":"?0"),n._emitProgress(n._offset,n._size),n._sendRequest(t,a))})}},{key:"_handleUploadResponse",value:function(t,n){var r=Number.parseInt(n.getHeader("Upload-Offset"),10);if(Number.isNaN(r)){this._emitHttpError(t,n,"tus: invalid or missing offset value");return}if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r===this._size){this._emitSuccess(n),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(t,n){var r=ao(t,n,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(n){t._emitError(n)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var n={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?n.parallelUploadUrls=this._parallelUploadUrls:n.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,n).then(function(r){t._urlStorageKey=r})}},{key:"_sendRequest",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return lo(t,n,this.options)}}],[{key:"terminate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=ao("DELETE",t,n);return lo(r,null,n).then(function(s){if(s.getStatus()!==204)throw new fi("tus: unexpected response while terminating upload",null,r,s)}).catch(function(s){if(s instanceof fi||(s=new fi("tus: failed to terminate upload",s,r,null)),!uo(s,0,n))throw s;var o=n.retryDelays[0],a=n.retryDelays.slice(1),l=et(et({},n),{},{retryDelays:a});return new Promise(function(u){return setTimeout(u,o)}).then(function(){return i.terminate(t,l)})})}}])})();function oo(i){return Object.entries(i).map(function(e){var t=Va(e,2),n=t[0],r=t[1];return"".concat(n," ").concat(jp.encode(String(r)))}).join(",")}function tt(i,e){return i>=e&&i<e+100}function ao(i,e,t){var n=t.httpStack.createRequest(i,e);t.protocol===Fi?n.setHeader("Upload-Draft-Interop-Version","5"):t.protocol===Et?n.setHeader("Upload-Draft-Interop-Version","6"):n.setHeader("Tus-Resumable","1.0.0");for(var r=t.headers||{},s=0,o=Object.entries(r);s<o.length;s++){var a=Va(o[s],2),l=a[0],u=a[1];n.setHeader(l,u)}if(t.addRequestId){var d=Kp();n.setHeader("X-Request-ID",d)}return n}function lo(i,e,t){return rr.apply(this,arguments)}function rr(){return rr=Xp(nr().mark(function i(e,t,n){var r;return nr().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(typeof n.onBeforeRequest!="function"){o.next=3;break}return o.next=3,n.onBeforeRequest(e);case 3:return o.next=5,e.send(t);case 5:if(r=o.sent,typeof n.onAfterResponse!="function"){o.next=9;break}return o.next=9,n.onAfterResponse(e,r);case 9:return o.abrupt("return",r);case 10:case"end":return o.stop()}},i)})),rr.apply(this,arguments)}function of(){var i=!0;return typeof navigator<"u"&&navigator.onLine===!1&&(i=!1),i}function uo(i,e,t){return t.retryDelays==null||e>=t.retryDelays.length||i.originalRequest==null?!1:t&&typeof t.onShouldRetry=="function"?t.onShouldRetry(i,e,t):Ka(i)}function Ka(i){var e=i.originalResponse?i.originalResponse.getStatus():0;return(!tt(e,400)||e===409||e===423)&&of()}function co(i,e){return new Gp(e,i).toString()}function af(i,e){for(var t=Math.floor(i/e),n=[],r=0;r<e;r++)n.push({start:t*r,end:t*(r+1)});return n[e-1].end=i,n}Ei.defaultOptions=sf;var Xa=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};function lf(i){return new Promise(function(e,t){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var r=n.response;e(r)},n.onerror=function(r){t(r)},n.open("GET",i),n.send()})}var uf=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")};function cf(i){return new Promise(function(e,t){var n=new FileReader;n.onload=function(){var r=new Uint8Array(n.result);e({value:r})},n.onerror=function(r){t(r)},n.readAsArrayBuffer(i)})}function Lt(i){"@babel/helpers - typeof";return Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(i)}function df(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function hf(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,ff(n.key),n)}}function pf(i,e,t){return e&&hf(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function ff(i){var e=mf(i,"string");return Lt(e)=="symbol"?e:e+""}function mf(i,e){if(Lt(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(Lt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}var ho=(function(){function i(e){df(this,i),this._file=e,this.size=e.size}return pf(i,[{key:"slice",value:function(t,n){if(uf())return cf(this._file.slice(t,n));var r=this._file.slice(t,n),s=n>=this.size;return Promise.resolve({value:r,done:s})}},{key:"close",value:function(){}}])})();function Mt(i){"@babel/helpers - typeof";return Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(i)}function gf(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function yf(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,vf(n.key),n)}}function bf(i,e,t){return e&&yf(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function vf(i){var e=_f(i,"string");return Mt(e)=="symbol"?e:e+""}function _f(i,e){if(Mt(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(Mt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function po(i){return i===void 0?0:i.size!==void 0?i.size:i.length}function wf(i,e){if(i.concat)return i.concat(e);if(i instanceof Blob)return new Blob([i,e],{type:i.type});if(i.set){var t=new i.constructor(i.length+e.length);return t.set(i),t.set(e,i.length),t}throw new Error("Unknown data type")}var Sf=(function(){function i(e){gf(this,i),this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}return bf(i,[{key:"slice",value:function(t,n){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,n)}},{key:"_readUntilEnoughDataOrDone",value:function(t,n){var r=this,s=n<=this._bufferOffset+po(this._buffer);if(this._done||s){var o=this._getDataFromBuffer(t,n),a=o==null?this._done:!1;return Promise.resolve({value:o,done:a})}return this._reader.read().then(function(l){var u=l.value,d=l.done;return d?r._done=!0:r._buffer===void 0?r._buffer=u:r._buffer=wf(r._buffer,u),r._readUntilEnoughDataOrDone(t,n)})}},{key:"_getDataFromBuffer",value:function(t,n){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var r=po(this._buffer)===0;return this._done&&r?null:this._buffer.slice(0,n-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])})();function Ze(i){"@babel/helpers - typeof";return Ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(i)}function sr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */sr=function(){return e};var i,e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(g,p,f){g[p]=f.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(g,p,f){return Object.defineProperty(g,p,{value:f,enumerable:!0,configurable:!0,writable:!0}),g[p]}try{u({},"")}catch{u=function(f,P,E){return f[P]=E}}function d(g,p,f,P){var E=p&&p.prototype instanceof A?p:A,C=Object.create(E.prototype),$=new Q(P||[]);return r(C,"_invoke",{value:K(g,f,$)}),C}function h(g,p,f){try{return{type:"normal",arg:g.call(p,f)}}catch(P){return{type:"throw",arg:P}}}e.wrap=d;var b="suspendedStart",S="suspendedYield",x="executing",T="completed",O={};function A(){}function m(){}function y(){}var _={};u(_,o,function(){return this});var F=Object.getPrototypeOf,R=F&&F(F(ae([])));R&&R!==t&&n.call(R,o)&&(_=R);var U=y.prototype=A.prototype=Object.create(_);function M(g){["next","throw","return"].forEach(function(p){u(g,p,function(f){return this._invoke(p,f)})})}function N(g,p){function f(E,C,$,q){var V=h(g[E],g,C);if(V.type!=="throw"){var le=V.arg,te=le.value;return te&&Ze(te)=="object"&&n.call(te,"__await")?p.resolve(te.__await).then(function(ue){f("next",ue,$,q)},function(ue){f("throw",ue,$,q)}):p.resolve(te).then(function(ue){le.value=ue,$(le)},function(ue){return f("throw",ue,$,q)})}q(V.arg)}var P;r(this,"_invoke",{value:function(C,$){function q(){return new p(function(V,le){f(C,$,V,le)})}return P=P?P.then(q,q):q()}})}function K(g,p,f){var P=b;return function(E,C){if(P===x)throw Error("Generator is already running");if(P===T){if(E==="throw")throw C;return{value:i,done:!0}}for(f.method=E,f.arg=C;;){var $=f.delegate;if($){var q=W($,f);if(q){if(q===O)continue;return q}}if(f.method==="next")f.sent=f._sent=f.arg;else if(f.method==="throw"){if(P===b)throw P=T,f.arg;f.dispatchException(f.arg)}else f.method==="return"&&f.abrupt("return",f.arg);P=x;var V=h(g,p,f);if(V.type==="normal"){if(P=f.done?T:S,V.arg===O)continue;return{value:V.arg,done:f.done}}V.type==="throw"&&(P=T,f.method="throw",f.arg=V.arg)}}}function W(g,p){var f=p.method,P=g.iterator[f];if(P===i)return p.delegate=null,f==="throw"&&g.iterator.return&&(p.method="return",p.arg=i,W(g,p),p.method==="throw")||f!=="return"&&(p.method="throw",p.arg=new TypeError("The iterator does not provide a '"+f+"' method")),O;var E=h(P,g.iterator,p.arg);if(E.type==="throw")return p.method="throw",p.arg=E.arg,p.delegate=null,O;var C=E.arg;return C?C.done?(p[g.resultName]=C.value,p.next=g.nextLoc,p.method!=="return"&&(p.method="next",p.arg=i),p.delegate=null,O):C:(p.method="throw",p.arg=new TypeError("iterator result is not an object"),p.delegate=null,O)}function Z(g){var p={tryLoc:g[0]};1 in g&&(p.catchLoc=g[1]),2 in g&&(p.finallyLoc=g[2],p.afterLoc=g[3]),this.tryEntries.push(p)}function k(g){var p=g.completion||{};p.type="normal",delete p.arg,g.completion=p}function Q(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(Z,this),this.reset(!0)}function ae(g){if(g||g===""){var p=g[o];if(p)return p.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var f=-1,P=function E(){for(;++f<g.length;)if(n.call(g,f))return E.value=g[f],E.done=!1,E;return E.value=i,E.done=!0,E};return P.next=P}}throw new TypeError(Ze(g)+" is not iterable")}return m.prototype=y,r(U,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(g){var p=typeof g=="function"&&g.constructor;return!!p&&(p===m||(p.displayName||p.name)==="GeneratorFunction")},e.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,y):(g.__proto__=y,u(g,l,"GeneratorFunction")),g.prototype=Object.create(U),g},e.awrap=function(g){return{__await:g}},M(N.prototype),u(N.prototype,a,function(){return this}),e.AsyncIterator=N,e.async=function(g,p,f,P,E){E===void 0&&(E=Promise);var C=new N(d(g,p,f,P),E);return e.isGeneratorFunction(p)?C:C.next().then(function($){return $.done?$.value:C.next()})},M(U),u(U,l,"Generator"),u(U,o,function(){return this}),u(U,"toString",function(){return"[object Generator]"}),e.keys=function(g){var p=Object(g),f=[];for(var P in p)f.push(P);return f.reverse(),function E(){for(;f.length;){var C=f.pop();if(C in p)return E.value=C,E.done=!1,E}return E.done=!0,E}},e.values=ae,Q.prototype={constructor:Q,reset:function(p){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(k),!p)for(var f in this)f.charAt(0)==="t"&&n.call(this,f)&&!isNaN(+f.slice(1))&&(this[f]=i)},stop:function(){this.done=!0;var p=this.tryEntries[0].completion;if(p.type==="throw")throw p.arg;return this.rval},dispatchException:function(p){if(this.done)throw p;var f=this;function P(le,te){return $.type="throw",$.arg=p,f.next=le,te&&(f.method="next",f.arg=i),!!te}for(var E=this.tryEntries.length-1;E>=0;--E){var C=this.tryEntries[E],$=C.completion;if(C.tryLoc==="root")return P("end");if(C.tryLoc<=this.prev){var q=n.call(C,"catchLoc"),V=n.call(C,"finallyLoc");if(q&&V){if(this.prev<C.catchLoc)return P(C.catchLoc,!0);if(this.prev<C.finallyLoc)return P(C.finallyLoc)}else if(q){if(this.prev<C.catchLoc)return P(C.catchLoc,!0)}else{if(!V)throw Error("try statement without catch or finally");if(this.prev<C.finallyLoc)return P(C.finallyLoc)}}}},abrupt:function(p,f){for(var P=this.tryEntries.length-1;P>=0;--P){var E=this.tryEntries[P];if(E.tryLoc<=this.prev&&n.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var C=E;break}}C&&(p==="break"||p==="continue")&&C.tryLoc<=f&&f<=C.finallyLoc&&(C=null);var $=C?C.completion:{};return $.type=p,$.arg=f,C?(this.method="next",this.next=C.finallyLoc,O):this.complete($)},complete:function(p,f){if(p.type==="throw")throw p.arg;return p.type==="break"||p.type==="continue"?this.next=p.arg:p.type==="return"?(this.rval=this.arg=p.arg,this.method="return",this.next="end"):p.type==="normal"&&f&&(this.next=f),O},finish:function(p){for(var f=this.tryEntries.length-1;f>=0;--f){var P=this.tryEntries[f];if(P.finallyLoc===p)return this.complete(P.completion,P.afterLoc),k(P),O}},catch:function(p){for(var f=this.tryEntries.length-1;f>=0;--f){var P=this.tryEntries[f];if(P.tryLoc===p){var E=P.completion;if(E.type==="throw"){var C=E.arg;k(P)}return C}}throw Error("illegal catch attempt")},delegateYield:function(p,f,P){return this.delegate={iterator:ae(p),resultName:f,nextLoc:P},this.method==="next"&&(this.arg=i),O}},e}function fo(i,e,t,n,r,s,o){try{var a=i[s](o),l=a.value}catch(u){t(u);return}a.done?e(l):Promise.resolve(l).then(n,r)}function Ff(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(l){fo(s,n,r,o,a,"next",l)}function a(l){fo(s,n,r,o,a,"throw",l)}o(void 0)})}}function Pf(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Tf(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,Ef(n.key),n)}}function Cf(i,e,t){return e&&Tf(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Ef(i){var e=xf(i,"string");return Ze(e)=="symbol"?e:e+""}function xf(i,e){if(Ze(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(Ze(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}var kf=(function(){function i(){Pf(this,i)}return Cf(i,[{key:"openFile",value:(function(){var e=Ff(sr().mark(function n(r,s){var o;return sr().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(Xa()&&r&&typeof r.uri<"u")){l.next=11;break}return l.prev=1,l.next=4,lf(r.uri);case 4:return o=l.sent,l.abrupt("return",new ho(o));case 8:throw l.prev=8,l.t0=l.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(l.t0));case 11:if(!(typeof r.slice=="function"&&typeof r.size<"u")){l.next=13;break}return l.abrupt("return",Promise.resolve(new ho(r)));case 13:if(typeof r.read!="function"){l.next=18;break}if(s=Number(s),Number.isFinite(s)){l.next=17;break}return l.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return l.abrupt("return",Promise.resolve(new Sf(r,s)));case 18:return l.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return l.stop()}},n,null,[[1,8]])}));function t(n,r){return e.apply(this,arguments)}return t})()}])})();function Uf(i,e){return Xa()?Promise.resolve(Of(i,e)):Promise.resolve(["tus-br",i.name,i.type,i.size,i.lastModified,e.endpoint].join("-"))}function Of(i,e){var t=i.exif?Af(JSON.stringify(i.exif)):"noexif";return["tus-rn",i.name||"noname",i.size||"nosize",t,e.endpoint].join("/")}function Af(i){var e=0;if(i.length===0)return e;for(var t=0;t<i.length;t++){var n=i.charCodeAt(t);e=(e<<5)-e+n,e&=e}return e}function $t(i){"@babel/helpers - typeof";return $t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(i)}function Er(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Rf(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,If(n.key),n)}}function xr(i,e,t){return e&&Rf(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function If(i){var e=Df(i,"string");return $t(e)=="symbol"?e:e+""}function Df(i,e){if($t(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if($t(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}var Nf=(function(){function i(){Er(this,i)}return xr(i,[{key:"createRequest",value:function(t,n){return new Bf(t,n)}},{key:"getName",value:function(){return"XHRHttpStack"}}])})(),Bf=(function(){function i(e,t){Er(this,i),this._xhr=new XMLHttpRequest,this._xhr.open(e,t,!0),this._method=e,this._url=t,this._headers={}}return xr(i,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,n){this._xhr.setRequestHeader(t,n),this._headers[t]=n}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(n){n.lengthComputable&&t(n.loaded)})}},{key:"send",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(r,s){t._xhr.onload=function(){r(new Lf(t._xhr))},t._xhr.onerror=function(o){s(o)},t._xhr.send(n)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])})(),Lf=(function(){function i(e){Er(this,i),this._xhr=e}return xr(i,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])})();function zt(i){"@babel/helpers - typeof";return zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(i)}function Mf(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function $f(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,jf(n.key),n)}}function zf(i,e,t){return e&&$f(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function jf(i){var e=qf(i,"string");return zt(e)=="symbol"?e:e+""}function qf(i,e){if(zt(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(zt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}var or=!1;try{or="localStorage"in window;var Cn="tusSupport",mo=localStorage.getItem(Cn);localStorage.setItem(Cn,mo),mo===null&&localStorage.removeItem(Cn)}catch(i){if(i.code===i.SECURITY_ERR||i.code===i.QUOTA_EXCEEDED_ERR)or=!1;else throw i}var Hf=or,Vf=(function(){function i(){Mf(this,i)}return zf(i,[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var n=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(n)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,n){var r=Math.round(Math.random()*1e12),s="tus::".concat(t,"::").concat(r);return localStorage.setItem(s,JSON.stringify(n)),Promise.resolve(s)}},{key:"_findEntries",value:function(t){for(var n=[],r=0;r<localStorage.length;r++){var s=localStorage.key(r);if(s.indexOf(t)===0)try{var o=JSON.parse(localStorage.getItem(s));o.urlStorageKey=s,n.push(o)}catch{}}return n}}])})();function yt(i){"@babel/helpers - typeof";return yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(i)}function Wf(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Gf(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,Qa(n.key),n)}}function Kf(i,e,t){return t&&Gf(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function Xf(i,e,t){return e=xi(e),Yf(i,Ya()?Reflect.construct(e,t||[],xi(i).constructor):e.apply(i,t))}function Yf(i,e){if(e&&(yt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qf(i)}function Qf(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ya(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ya=function(){return!!i})()}function xi(i){return xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xi(i)}function Zf(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&ar(i,e)}function ar(i,e){return ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ar(i,e)}function go(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function rt(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?go(Object(t),!0).forEach(function(n){Jf(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):go(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Jf(i,e,t){return e=Qa(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Qa(i){var e=em(i,"string");return yt(e)=="symbol"?e:e+""}function em(i,e){if(yt(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(yt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var lr=rt(rt({},Ei.defaultOptions),{},{httpStack:new Nf,fileReader:new kf,urlStorage:Hf?new Vf:new Op,fingerprint:Uf}),tm=(function(i){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wf(this,e),n=rt(rt({},lr),n),Xf(this,e,[t,n])}return Zf(e,i),Kf(e,null,[{key:"terminate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r=rt(rt({},lr),r),Ei.terminate(n,r)}}])})(Ei);const im="4.3.2",nm={version:im};function rm(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")}function sm(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"}function om(i){return(e,t)=>{if(rm()||sm())return lr.fingerprint(e,t);const n=["tus",i.id,t.endpoint].join("-");return Promise.resolve(n)}}const Za={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},am={limit:20,retryDelays:Za.retryDelays,withCredentials:!1,allowedMetaFields:!0};var Yt,Le,el,tl,il,Qt;class Ja extends ur{constructor(t,n){super(t,{...am,...n});L(this,Le);L(this,Yt);v(this,"requests");v(this,"uploaders");v(this,"uploaderEvents");L(this,Qt,async t=>{if(t.length===0){this.uppy.log("[Tus] No files to upload");return}this.opts.limit===0&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");const n=this.uppy.getFilesByIds(t);await D(this,Le,il).call(this,n)});if(this.type="uploader",this.id=this.opts.id||"Tus",n?.allowedMetaFields===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in n)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=this.opts.rateLimitedQueue??new yp(this.opts.limit),j(this,Yt,this.opts.retryDelays?.values()),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}resetUploaderReferences(t,n){const r=this.uploaders[t];r&&(r.abort(),n?.abort&&r.abort(!0),this.uploaders[t]=null),this.uploaderEvents[t]&&(this.uploaderEvents[t].remove(),this.uploaderEvents[t]=null)}onReceiveUploadUrl(t,n){const r=this.uppy.getFile(t.id);r&&(!r.tus||r.tus.uploadUrl!==n)&&(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(r.id,{tus:{...r.tus,uploadUrl:n}}))}install(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!0}}),this.uppy.addUploader(w(this,Qt))}uninstall(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!1}}),this.uppy.removeUploader(w(this,Qt))}}Yt=new WeakMap,Le=new WeakSet,el=function(t){return this.resetUploaderReferences(t.id),new Promise((n,r)=>{let s,o,a;const l={...this.opts,...t.tus||{}};typeof l.headers=="function"&&(l.headers=l.headers(t));const{onShouldRetry:u,onBeforeRequest:d,...h}=l,b={...Za,...h};b.fingerprint=om(t),b.onBeforeRequest=async m=>{const y=m.getUnderlyingObject();y.withCredentials=!!l.withCredentials;let _;if(typeof d=="function"&&(_=d(m,t)),Fn(s,"shouldBeRequeued")){if(!s.shouldBeRequeued)return Promise.reject();let F;const R=new Promise(U=>{F=U});s=this.requests.run(()=>(t.isPaused&&s.abort(),F(),()=>{})),await Promise.all([R,_]);return}return _},b.onError=m=>{this.uppy.log(m);const y=m.originalRequest!=null?m.originalRequest.getUnderlyingObject():null;fp(y)&&(m=new mp(m,y)),this.resetUploaderReferences(t.id),s?.abort(),typeof l.onError=="function"&&l.onError(m),r(m)},b.onProgress=(m,y)=>{this.onReceiveUploadUrl(t,a.url),typeof l.onProgress=="function"&&l.onProgress(m,y);const _=this.uppy.getFile(t.id);this.uppy.emit("upload-progress",_,{uploadStarted:_.progress.uploadStarted??0,bytesUploaded:m,bytesTotal:y})},b.onSuccess=m=>{const y={uploadURL:a.url??void 0,status:200,body:{xhr:m.lastResponse.getUnderlyingObject()}};if(this.uppy.emit("upload-success",this.uppy.getFile(t.id),y),this.resetUploaderReferences(t.id),s.done(),a.url){const{name:_}=a.file;this.uppy.log(`Download ${_} from ${a.url}`)}typeof l.onSuccess=="function"&&l.onSuccess(m),n(a)};const S=m=>{const y=m?.originalResponse?.getStatus();if(y===429){if(!this.requests.isPaused){const _=w(this,Yt)?.next();if(_==null||_.done)return!1;this.requests.rateLimit(_.value)}}else{if(y!=null&&y>=400&&y<500&&y!==409&&y!==423)return!1;typeof navigator<"u"&&navigator.onLine===!1&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",()=>{this.requests.resume()},{once:!0})))}return s.abort(),s={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};u!=null?b.onShouldRetry=(m,y)=>u(m,y,l,S):b.onShouldRetry=S;const x=(m,y,_)=>{Fn(m,y)&&!Fn(m,_)&&(m[_]=m[y])},T={};pp(l.allowedMetaFields,t.meta).forEach(m=>{T[m]=String(t.meta[m])}),x(T,"type","filetype"),x(T,"name","filename"),b.metadata=T,a=new tm(t.data,b),this.uploaders[t.id]=a;const A=new cp(this.uppy);this.uploaderEvents[t.id]=A,o=()=>(t.isPaused||a.start(),()=>{}),a.findPreviousUploads().then(m=>{const y=m[0];y&&(this.uppy.log(`[Tus] Resuming upload of ${t.id} started at ${y.creationTime}`),a.resumeFromPreviousUpload(y)),s=this.requests.run(o)}),A.onFileRemove(t.id,m=>{s.abort(),this.resetUploaderReferences(t.id,{abort:!!a.url}),n(`upload ${m} was removed`)}),A.onPause(t.id,m=>{s.abort(),m?a.abort():s=this.requests.run(o)}),A.onPauseAll(t.id,()=>{s.abort(),a.abort()}),A.onCancelAll(t.id,()=>{s.abort(),this.resetUploaderReferences(t.id,{abort:!!a.url}),n(`upload ${t.id} was canceled`)}),A.onResumeAll(t.id,()=>{s.abort(),t.error&&a.abort(),s=this.requests.run(o)})}).catch(n=>{throw this.uppy.emit("upload-error",t,n),n})},tl=function(t){const n={...this.opts};return t.tus&&Object.assign(n,t.tus),typeof n.headers=="function"&&(n.headers=n.headers(t)),{...t.remote?.body,endpoint:n.endpoint,uploadUrl:n.uploadUrl,protocol:"tus",size:t.data.size,headers:n.headers,metadata:t.meta}},il=async function(t){const n=dp(t),r=hp(n);this.uppy.emit("upload-start",r),await Promise.allSettled(n.map(s=>{if(s.isRemote){const o=()=>this.requests,a=new AbortController,l=d=>{d.id===s.id&&a.abort()};this.uppy.on("file-removed",l);const u=this.uppy.getRequestClientForFile(s).uploadRemoteFile(s,D(this,Le,tl).call(this,s),{signal:a.signal,getQueue:o});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",l)},{priority:-1})(),u}return D(this,Le,el).call(this,s)}))},Qt=new WeakMap,v(Ja,"VERSION",nm.version);class lm extends ur{constructor(t,n){super(t,n);v(this,"prepareUpload",async t=>{const n=t.map(s=>{const o=this.uppy.getFile(s);return this.create(o).then(a=>{this.uppy.setFileMeta(s,{bunnyId:a})}).catch(a=>{this.uppy.log(a,"warning")})}),r=()=>{t.forEach(s=>{const o=this.uppy.getFile(s);this.uppy.emit("preprocess-complete",o)})};return await Promise.all(n),r()});this.id=this.opts.id||"UppyBunnyCreator",this.type="modifier"}async create(t){const n=await fetch(`https://video.bunnycdn.com/library/${this.opts.library}/videos`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/*+json",AccessKey:this.opts.access},body:JSON.stringify({title:t.meta.name,thumbnailTime:this.getMsFromTime(t.meta.thumbTime)})});if(!n.ok)throw new Error(`Failed to create video: ${n.status}`);return(await n.json()).guid}install(){this.uppy.addPreProcessor(this.prepareUpload)}uninstall(){this.uppy.removePreProcessor(this.prepareUpload)}getMsFromTime(t){if(typeof t>"u"||t==null||t=="")return 0;if(!this.validateTime(t))throw this.uppy.info("Falsches Zeitformat für die Thumbnailerstellung.","error",3e3),new Error("Wrong timestamp format for thumbnail creation.");let n=t.split(":");return(+n[0]*60*60+ +n[1]*60+ +n[2])*1e3}validateTime(t){if(!/^(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t))return!1;const[r,s,o]=t.split(":").map(Number);return!(r<0||r>23||s<0||s>59||o<0||o>59)}}const um={components:{PlusIcon:Vu},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary"],data(){return{expirationTime:0,uploader:null}},methods:{getExpirationTime(){const i=new Date;return i.setDate(i.getDate()+1),i.getTime()},async getAuthorizationSignature(i){const e=this.bunnyLibrary+this.bunnyApiKey+this.expirationTime+i,t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")},initializeUppy(){this.expirationTime=this.getExpirationTime(),this.uploader=new Dn().use(Ca,{inline:!1,trigger:"#bunny-upload",width:"auto",proudlyDisplayPoweredByUppy:!1,closeModalOnClickOutside:!0,closeAfterFinish:!0,metaFields:[{id:"name",name:__("Name"),placeholder:__("Filename")},{id:"thumbTime",name:__("Timestamp"),placeholder:__("hh:mm:ss e.g. 00:01:04 for minute 1, second 4")},{id:"bunnyId",name:__("Bunny ID"),render:({value:i},e)=>e("input",{type:"text",class:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input bg-gray-300",value:i,placeholder:__("Bunny ID"),disabled:!0},[])}]}).use(lm,{access:this.bunnyApiKey,library:this.bunnyLibrary}).use(Ja,{endpoint:"https://video.bunnycdn.com/tusupload",retryDelays:[0,30,50,3e3,5e3,1e4,6e4],onBeforeRequest:async(i,e)=>{const t=this.uploader.getFile(e.id).meta;if(t.bunnyId){const n=await this.getAuthorizationSignature(t.bunnyId);i.setHeader("AuthorizationSignature",n),i.setHeader("AuthorizationExpire",this.expirationTime),i.setHeader("VideoId",t.bunnyId),i.setHeader("LibraryId",this.bunnyLibrary)}else throw new Error("Missing Bunny video ID")}}),this.uploader.on("complete",i=>{if(i.successful.length>0){const e=i.successful.length===1?__("1 video uploaded successfully."):__(":count videos successfully uploaded.",{count:i.successful.length});console.log(e)}i.failed.length>0&&console.log("Failed files: ",i.failed),Ae.emit("load")})}},created(){Ae.on("upload",()=>document.getElementById("bunny-upload").click())},mounted(){this.initializeUppy()}},cm={class:"btn-primary",id:"bunny-upload"};function dm(i,e,t,n,r,s){const o=he("PlusIcon");return X(),Y("button",cm,[ne(o,{class:"h-6 w-6"}),Be(" "+H(i.__("Upload Video")),1)])}const hm=fe(um,[["render",dm]]),pm={},fm={class:"container w-100 lg:w-4/5 mx-auto"},mm={class:"flex flex-col items-center justify-center gap-2"},gm={class:"mb-2"},ym={class:"text-sm"},bm={class:"text-sm"},vm={href:"https://bunny.net?ref=uhvsqhaw0n",target:"_blank",class:"btn-primary my-2"},_m={class:"text-sm"},wm={class:"text-sm"};function Sm(i,e){return X(),Y("div",fm,[I("div",mm,[I("h1",gm,H(i.__("Bunny Account Required")),1),I("p",ym,H(i.__("To use this addon, you'll need a Bunny.net account. Make sure to add your credentials to the .env file.")),1),I("p",bm,H(i.__("If you don't have one yet, you can sign up using our affiliate link.")),1),I("a",vm,H(i.__("Sign Up Now")),1),I("p",_m,H(i.__("By doing so, you'll be supporting the development of this addon at no extra cost to you.")),1),I("p",wm,[I("b",null,H(i.__("Thank you for your support!")),1)])])])}const Fm=fe(pm,[["render",Sm]]),Pm={class:"flex gap-2 justify-between"},Tm={class:"flex-grow mb-4"},Cm={__name:"Overview",props:{title:String,addon:Object,bunny:Object},setup(i){const e=i;return zi("bunnyApiKey",e.bunny.apiKey),zi("bunnyHostname",e.bunny.hostname),zi("bunnyLibrary",e.bunny.library),(t,n)=>(X(),Y(En,null,[ne(xn(pl),{title:i.title},null,8,["title"]),i.bunny.apiKey&&i.bunny.hostname&&i.bunny.library?(X(),Y(En,{key:0},[I("div",Pm,[I("h1",Tm,H(i.title),1),ne(hm)]),ne(zu)],64)):(X(),yo(Fm,{key:1})),ne(xn(cl),{topic:i.addon.name,url:i.addon.url},null,8,["topic","url"])],64))}};Statamic.booting(()=>{Statamic.$inertia.register("BunnyOverview",Cm),Statamic.$components.register("bunny-fieldtype",hl)});
