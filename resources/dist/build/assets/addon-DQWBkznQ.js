var Wr=Object.defineProperty;var Pr=oe=>{throw TypeError(oe)};var Gr=(oe,Y,re)=>Y in oe?Wr(oe,Y,{enumerable:!0,configurable:!0,writable:!0,value:re}):oe[Y]=re;var Be=(oe,Y,re)=>Gr(oe,typeof Y!="symbol"?Y+"":Y,re),fr=(oe,Y,re)=>Y.has(oe)||Pr("Cannot "+re);var Me=(oe,Y,re)=>(fr(oe,Y,"read from private field"),re?re.call(oe):Y.get(oe)),Ze=(oe,Y,re)=>Y.has(oe)?Pr("Cannot add the same private member more than once"):Y instanceof WeakSet?Y.add(oe):Y.set(oe,re),rt=(oe,Y,re,le)=>(fr(oe,Y,"write to private field"),le?le.call(oe,re):Y.set(oe,re),re),Ke=(oe,Y,re)=>(fr(oe,Y,"access private method"),re);const Vue=window.Vue,{BaseTransition,BaseTransitionPropsValidators,Comment,DeprecationTypes,EffectScope,ErrorCodes,ErrorTypeStrings,Fragment,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text,TrackOpTypes,Transition,TransitionGroup:TransitionGroup$1,TriggerOpTypes,VueElement,__esModule,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,compile,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,devtools,effect,effectScope,getCurrentInstance,getCurrentScope,getCurrentWatcher,getTransitionRawChildren,guardReactiveProps,h:h$2,handleError,hasInjectionContext,hydrate,hydrateOnIdle,hydrateOnInteraction,hydrateOnMediaQuery,hydrateOnVisible,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,nodeOps,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,onWatcherCleanup,openBlock,patchProp,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,toValue,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useHost,useId,useModel,useSSRContext,useShadowRoot,useSlots,useTemplateRef,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$8,warn,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId}=Vue,{Fieldtype,IndexFieldtype,FieldtypeMixin,HasActionsMixin,HasInputOptionsMixin,HasPreferencesMixin,IndexFieldtypeMixin,InlineEditForm,DateFormatter,ItemActions,RelatedItem,RestoreRevision,RevisionHistory,RevisionPreview,SaveButtonOptions,SortableList,requireElevatedSession,requireElevatedSessionIf,clone,deepClone,resetValuesFromResponse}=__STATAMIC__.core,{Alert,AuthCard,Avatar,Badge,Button,ButtonGroup,Calendar,Card,CardList,CardListItem,CardPanel,CharacterCounter,Checkbox,CheckboxGroup,CodeEditor,Combobox,CommandPaletteItem,ConfirmationModal,Context,ContextFooter,ContextHeader,ContextItem,ContextLabel,ContextMenu,ContextSeparator,CreateForm,DatePicker,DateRangePicker,Description,DocsCallout,DragHandle,Dropdown,DropdownItem,DropdownLabel,DropdownMenu,DropdownSeparator,DropdownFooter,DropdownHeader,Editable,ErrorMessage,EmptyStateItem,EmptyStateMenu,Field,Header,Heading,HoverCard,Icon,Input,InputGroup,InputGroupAppend,InputGroupPrepend,Label,Listing,ListingCustomizeColumns,ListingFilters,ListingHeaderCell,ListingPagination,ListingPresets,ListingPresetTrigger,ListingRowActions,ListingSearch,ListingTable,ListingTableBody,ListingTableHead,ListingToggleAll,LivePreview,LivePreviewPopout,Modal,ModalClose,ModalTitle,Pagination,Panel,PanelFooter,PanelHeader,Popover,PublishComponents,PublishContainer,publishContextKey,injectPublishContext,PublishField,PublishFields,PublishFieldsProvider,PublishForm,PublishLocalizations,PublishSections,PublishTabs,Radio,RadioGroup,Select,Separator,Slider,Skeleton,SplitterGroup,SplitterPanel,SplitterResizeHandle,StatusIndicator,Subheading,Switch,TabContent,Stack,StackClose,StackHeader,StackFooter,StackContent,Table,TableCell,TableColumn,TableColumns,TableRow,TableRows,TabList,TabProvider,Tabs,TabTrigger,Textarea,TimePicker,ToggleGroup,ToggleItem,Widget,registerIconSet,registerIconSetFromStrings}=__STATAMIC__.ui;function bind(oe,Y){return function(){return oe.apply(Y,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(oe=>Y=>{const re=toString.call(Y);return oe[re]||(oe[re]=re.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=oe=>(oe=oe.toLowerCase(),Y=>kindOf(Y)===oe),typeOfTest=oe=>Y=>typeof Y===oe,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(oe){return oe!==null&&!isUndefined(oe)&&oe.constructor!==null&&!isUndefined(oe.constructor)&&isFunction$1(oe.constructor.isBuffer)&&oe.constructor.isBuffer(oe)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(oe){let Y;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?Y=ArrayBuffer.isView(oe):Y=oe&&oe.buffer&&isArrayBuffer(oe.buffer),Y}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=oe=>oe!==null&&typeof oe=="object",isBoolean=oe=>oe===!0||oe===!1,isPlainObject=oe=>{if(kindOf(oe)!=="object")return!1;const Y=getPrototypeOf(oe);return(Y===null||Y===Object.prototype||Object.getPrototypeOf(Y)===null)&&!(toStringTag in oe)&&!(iterator in oe)},isEmptyObject=oe=>{if(!isObject(oe)||isBuffer(oe))return!1;try{return Object.keys(oe).length===0&&Object.getPrototypeOf(oe)===Object.prototype}catch{return!1}},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=oe=>isObject(oe)&&isFunction$1(oe.pipe),isFormData=oe=>{let Y;return oe&&(typeof FormData=="function"&&oe instanceof FormData||isFunction$1(oe.append)&&((Y=kindOf(oe))==="formdata"||Y==="object"&&isFunction$1(oe.toString)&&oe.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=oe=>oe.trim?oe.trim():oe.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(oe,Y,{allOwnKeys:re=!1}={}){if(oe===null||typeof oe>"u")return;let le,ue;if(typeof oe!="object"&&(oe=[oe]),isArray(oe))for(le=0,ue=oe.length;le<ue;le++)Y.call(null,oe[le],le,oe);else{if(isBuffer(oe))return;const he=re?Object.getOwnPropertyNames(oe):Object.keys(oe),fe=he.length;let _e;for(le=0;le<fe;le++)_e=he[le],Y.call(null,oe[_e],_e,oe)}}function findKey(oe,Y){if(isBuffer(oe))return null;Y=Y.toLowerCase();const re=Object.keys(oe);let le=re.length,ue;for(;le-- >0;)if(ue=re[le],Y===ue.toLowerCase())return ue;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=oe=>!isUndefined(oe)&&oe!==_global;function merge(){const{caseless:oe,skipUndefined:Y}=isContextDefined(this)&&this||{},re={},le=(ue,he)=>{if(he==="__proto__"||he==="constructor"||he==="prototype")return;const fe=oe&&findKey(re,he)||he;isPlainObject(re[fe])&&isPlainObject(ue)?re[fe]=merge(re[fe],ue):isPlainObject(ue)?re[fe]=merge({},ue):isArray(ue)?re[fe]=ue.slice():(!Y||!isUndefined(ue))&&(re[fe]=ue)};for(let ue=0,he=arguments.length;ue<he;ue++)arguments[ue]&&forEach(arguments[ue],le);return re}const extend=(oe,Y,re,{allOwnKeys:le}={})=>(forEach(Y,(ue,he)=>{re&&isFunction$1(ue)?Object.defineProperty(oe,he,{value:bind(ue,re),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(oe,he,{value:ue,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:le}),oe),stripBOM=oe=>(oe.charCodeAt(0)===65279&&(oe=oe.slice(1)),oe),inherits=(oe,Y,re,le)=>{oe.prototype=Object.create(Y.prototype,le),Object.defineProperty(oe.prototype,"constructor",{value:oe,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(oe,"super",{value:Y.prototype}),re&&Object.assign(oe.prototype,re)},toFlatObject=(oe,Y,re,le)=>{let ue,he,fe;const _e={};if(Y=Y||{},oe==null)return Y;do{for(ue=Object.getOwnPropertyNames(oe),he=ue.length;he-- >0;)fe=ue[he],(!le||le(fe,oe,Y))&&!_e[fe]&&(Y[fe]=oe[fe],_e[fe]=!0);oe=re!==!1&&getPrototypeOf(oe)}while(oe&&(!re||re(oe,Y))&&oe!==Object.prototype);return Y},endsWith=(oe,Y,re)=>{oe=String(oe),(re===void 0||re>oe.length)&&(re=oe.length),re-=Y.length;const le=oe.indexOf(Y,re);return le!==-1&&le===re},toArray$1=oe=>{if(!oe)return null;if(isArray(oe))return oe;let Y=oe.length;if(!isNumber(Y))return null;const re=new Array(Y);for(;Y-- >0;)re[Y]=oe[Y];return re},isTypedArray=(oe=>Y=>oe&&Y instanceof oe)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(oe,Y)=>{const le=(oe&&oe[iterator]).call(oe);let ue;for(;(ue=le.next())&&!ue.done;){const he=ue.value;Y.call(oe,he[0],he[1])}},matchAll=(oe,Y)=>{let re;const le=[];for(;(re=oe.exec(Y))!==null;)le.push(re);return le},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=oe=>oe.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(re,le,ue){return le.toUpperCase()+ue}),hasOwnProperty=(({hasOwnProperty:oe})=>(Y,re)=>oe.call(Y,re))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(oe,Y)=>{const re=Object.getOwnPropertyDescriptors(oe),le={};forEach(re,(ue,he)=>{let fe;(fe=Y(ue,he,oe))!==!1&&(le[he]=fe||ue)}),Object.defineProperties(oe,le)},freezeMethods=oe=>{reduceDescriptors(oe,(Y,re)=>{if(isFunction$1(oe)&&["arguments","caller","callee"].indexOf(re)!==-1)return!1;const le=oe[re];if(isFunction$1(le)){if(Y.enumerable=!1,"writable"in Y){Y.writable=!1;return}Y.set||(Y.set=()=>{throw Error("Can not rewrite read-only method '"+re+"'")})}})},toObjectSet=(oe,Y)=>{const re={},le=ue=>{ue.forEach(he=>{re[he]=!0})};return isArray(oe)?le(oe):le(String(oe).split(Y)),re},noop=()=>{},toFiniteNumber=(oe,Y)=>oe!=null&&Number.isFinite(oe=+oe)?oe:Y;function isSpecCompliantForm(oe){return!!(oe&&isFunction$1(oe.append)&&oe[toStringTag]==="FormData"&&oe[iterator])}const toJSONObject=oe=>{const Y=new Array(10),re=(le,ue)=>{if(isObject(le)){if(Y.indexOf(le)>=0)return;if(isBuffer(le))return le;if(!("toJSON"in le)){Y[ue]=le;const he=isArray(le)?[]:{};return forEach(le,(fe,_e)=>{const ve=re(fe,ue+1);!isUndefined(ve)&&(he[_e]=ve)}),Y[ue]=void 0,he}}return le};return re(oe,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=oe=>oe&&(isObject(oe)||isFunction$1(oe))&&isFunction$1(oe.then)&&isFunction$1(oe.catch),_setImmediate=((oe,Y)=>oe?setImmediate:Y?((re,le)=>(_global.addEventListener("message",({source:ue,data:he})=>{ue===_global&&he===re&&le.length&&le.shift()()},!1),ue=>{le.push(ue),_global.postMessage(re,"*")}))(`axios@${Math.random()}`,[]):re=>setTimeout(re))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=oe=>oe!=null&&isFunction$1(oe[iterator]),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isEmptyObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};let AxiosError$1=class Cr extends Error{static from(Y,re,le,ue,he,fe){const _e=new Cr(Y.message,re||Y.code,le,ue,he);return _e.cause=Y,_e.name=Y.name,fe&&Object.assign(_e,fe),_e}constructor(Y,re,le,ue,he){super(Y),this.name="AxiosError",this.isAxiosError=!0,re&&(this.code=re),le&&(this.config=le),ue&&(this.request=ue),he&&(this.response=he,this.status=he.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}};AxiosError$1.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";AxiosError$1.ERR_BAD_OPTION="ERR_BAD_OPTION";AxiosError$1.ECONNABORTED="ECONNABORTED";AxiosError$1.ETIMEDOUT="ETIMEDOUT";AxiosError$1.ERR_NETWORK="ERR_NETWORK";AxiosError$1.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";AxiosError$1.ERR_DEPRECATED="ERR_DEPRECATED";AxiosError$1.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";AxiosError$1.ERR_BAD_REQUEST="ERR_BAD_REQUEST";AxiosError$1.ERR_CANCELED="ERR_CANCELED";AxiosError$1.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";AxiosError$1.ERR_INVALID_URL="ERR_INVALID_URL";const httpAdapter=null;function isVisitable(oe){return utils$1.isPlainObject(oe)||utils$1.isArray(oe)}function removeBrackets(oe){return utils$1.endsWith(oe,"[]")?oe.slice(0,-2):oe}function renderKey(oe,Y,re){return oe?oe.concat(Y).map(function(ue,he){return ue=removeBrackets(ue),!re&&he?"["+ue+"]":ue}).join(re?".":""):Y}function isFlatArray(oe){return utils$1.isArray(oe)&&!oe.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(Y){return/^is[A-Z]/.test(Y)});function toFormData$1(oe,Y,re){if(!utils$1.isObject(oe))throw new TypeError("target must be an object");Y=Y||new FormData,re=utils$1.toFlatObject(re,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ne,Ie){return!utils$1.isUndefined(Ie[Ne])});const le=re.metaTokens,ue=re.visitor||$e,he=re.dots,fe=re.indexes,ve=(re.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(Y);if(!utils$1.isFunction(ue))throw new TypeError("visitor must be a function");function Se(xe){if(xe===null)return"";if(utils$1.isDate(xe))return xe.toISOString();if(utils$1.isBoolean(xe))return xe.toString();if(!ve&&utils$1.isBlob(xe))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(xe)||utils$1.isTypedArray(xe)?ve&&typeof Blob=="function"?new Blob([xe]):Buffer.from(xe):xe}function $e(xe,Ne,Ie){let qe=xe;if(xe&&!Ie&&typeof xe=="object"){if(utils$1.endsWith(Ne,"{}"))Ne=le?Ne:Ne.slice(0,-2),xe=JSON.stringify(xe);else if(utils$1.isArray(xe)&&isFlatArray(xe)||(utils$1.isFileList(xe)||utils$1.endsWith(Ne,"[]"))&&(qe=utils$1.toArray(xe)))return Ne=removeBrackets(Ne),qe.forEach(function(Re,De){!(utils$1.isUndefined(Re)||Re===null)&&Y.append(fe===!0?renderKey([Ne],De,he):fe===null?Ne:Ne+"[]",Se(Re))}),!1}return isVisitable(xe)?!0:(Y.append(renderKey(Ie,Ne,he),Se(xe)),!1)}const Ee=[],Ce=Object.assign(predicates,{defaultVisitor:$e,convertValue:Se,isVisitable});function Ue(xe,Ne){if(!utils$1.isUndefined(xe)){if(Ee.indexOf(xe)!==-1)throw Error("Circular reference detected in "+Ne.join("."));Ee.push(xe),utils$1.forEach(xe,function(qe,Te){(!(utils$1.isUndefined(qe)||qe===null)&&ue.call(Y,qe,utils$1.isString(Te)?Te.trim():Te,Ne,Ce))===!0&&Ue(qe,Ne?Ne.concat(Te):[Te])}),Ee.pop()}}if(!utils$1.isObject(oe))throw new TypeError("data must be an object");return Ue(oe),Y}function encode$2(oe){const Y={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(oe).replace(/[!'()~]|%20|%00/g,function(le){return Y[le]})}function AxiosURLSearchParams(oe,Y){this._pairs=[],oe&&toFormData$1(oe,this,Y)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(Y,re){this._pairs.push([Y,re])};prototype.toString=function(Y){const re=Y?function(le){return Y.call(this,le,encode$2)}:encode$2;return this._pairs.map(function(ue){return re(ue[0])+"="+re(ue[1])},"").join("&")};function encode$1(oe){return encodeURIComponent(oe).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(oe,Y,re){if(!Y)return oe;const le=re&&re.encode||encode$1,ue=utils$1.isFunction(re)?{serialize:re}:re,he=ue&&ue.serialize;let fe;if(he?fe=he(Y,ue):fe=utils$1.isURLSearchParams(Y)?Y.toString():new AxiosURLSearchParams(Y,ue).toString(le),fe){const _e=oe.indexOf("#");_e!==-1&&(oe=oe.slice(0,_e)),oe+=(oe.indexOf("?")===-1?"?":"&")+fe}return oe}class InterceptorManager{constructor(){this.handlers=[]}use(Y,re,le){return this.handlers.push({fulfilled:Y,rejected:re,synchronous:le?le.synchronous:!1,runWhen:le?le.runWhen:null}),this.handlers.length-1}eject(Y){this.handlers[Y]&&(this.handlers[Y]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(Y){utils$1.forEach(this.handlers,function(le){le!==null&&Y(le)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(oe,Y){return toFormData$1(oe,new platform.classes.URLSearchParams,{visitor:function(re,le,ue,he){return platform.isNode&&utils$1.isBuffer(re)?(this.append(le,re.toString("base64")),!1):he.defaultVisitor.apply(this,arguments)},...Y})}function parsePropPath(oe){return utils$1.matchAll(/\w+|\[(\w*)]/g,oe).map(Y=>Y[0]==="[]"?"":Y[1]||Y[0])}function arrayToObject(oe){const Y={},re=Object.keys(oe);let le;const ue=re.length;let he;for(le=0;le<ue;le++)he=re[le],Y[he]=oe[he];return Y}function formDataToJSON(oe){function Y(re,le,ue,he){let fe=re[he++];if(fe==="__proto__")return!0;const _e=Number.isFinite(+fe),ve=he>=re.length;return fe=!fe&&utils$1.isArray(ue)?ue.length:fe,ve?(utils$1.hasOwnProp(ue,fe)?ue[fe]=[ue[fe],le]:ue[fe]=le,!_e):((!ue[fe]||!utils$1.isObject(ue[fe]))&&(ue[fe]=[]),Y(re,le,ue[fe],he)&&utils$1.isArray(ue[fe])&&(ue[fe]=arrayToObject(ue[fe])),!_e)}if(utils$1.isFormData(oe)&&utils$1.isFunction(oe.entries)){const re={};return utils$1.forEachEntry(oe,(le,ue)=>{Y(parsePropPath(le),ue,re,0)}),re}return null}function stringifySafely(oe,Y,re){if(utils$1.isString(oe))try{return(Y||JSON.parse)(oe),utils$1.trim(oe)}catch(le){if(le.name!=="SyntaxError")throw le}return(re||JSON.stringify)(oe)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(Y,re){const le=re.getContentType()||"",ue=le.indexOf("application/json")>-1,he=utils$1.isObject(Y);if(he&&utils$1.isHTMLForm(Y)&&(Y=new FormData(Y)),utils$1.isFormData(Y))return ue?JSON.stringify(formDataToJSON(Y)):Y;if(utils$1.isArrayBuffer(Y)||utils$1.isBuffer(Y)||utils$1.isStream(Y)||utils$1.isFile(Y)||utils$1.isBlob(Y)||utils$1.isReadableStream(Y))return Y;if(utils$1.isArrayBufferView(Y))return Y.buffer;if(utils$1.isURLSearchParams(Y))return re.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),Y.toString();let _e;if(he){if(le.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(Y,this.formSerializer).toString();if((_e=utils$1.isFileList(Y))||le.indexOf("multipart/form-data")>-1){const ve=this.env&&this.env.FormData;return toFormData$1(_e?{"files[]":Y}:Y,ve&&new ve,this.formSerializer)}}return he||ue?(re.setContentType("application/json",!1),stringifySafely(Y)):Y}],transformResponse:[function(Y){const re=this.transitional||defaults.transitional,le=re&&re.forcedJSONParsing,ue=this.responseType==="json";if(utils$1.isResponse(Y)||utils$1.isReadableStream(Y))return Y;if(Y&&utils$1.isString(Y)&&(le&&!this.responseType||ue)){const fe=!(re&&re.silentJSONParsing)&&ue;try{return JSON.parse(Y,this.parseReviver)}catch(_e){if(fe)throw _e.name==="SyntaxError"?AxiosError$1.from(_e,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):_e}}return Y}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(Y){return Y>=200&&Y<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],oe=>{defaults.headers[oe]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=oe=>{const Y={};let re,le,ue;return oe&&oe.split(`
`).forEach(function(fe){ue=fe.indexOf(":"),re=fe.substring(0,ue).trim().toLowerCase(),le=fe.substring(ue+1).trim(),!(!re||Y[re]&&ignoreDuplicateOf[re])&&(re==="set-cookie"?Y[re]?Y[re].push(le):Y[re]=[le]:Y[re]=Y[re]?Y[re]+", "+le:le)}),Y},$internals=Symbol("internals");function normalizeHeader(oe){return oe&&String(oe).trim().toLowerCase()}function normalizeValue(oe){return oe===!1||oe==null?oe:utils$1.isArray(oe)?oe.map(normalizeValue):String(oe)}function parseTokens(oe){const Y=Object.create(null),re=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let le;for(;le=re.exec(oe);)Y[le[1]]=le[2];return Y}const isValidHeaderName=oe=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(oe.trim());function matchHeaderValue(oe,Y,re,le,ue){if(utils$1.isFunction(le))return le.call(this,Y,re);if(ue&&(Y=re),!!utils$1.isString(Y)){if(utils$1.isString(le))return Y.indexOf(le)!==-1;if(utils$1.isRegExp(le))return le.test(Y)}}function formatHeader(oe){return oe.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(Y,re,le)=>re.toUpperCase()+le)}function buildAccessors(oe,Y){const re=utils$1.toCamelCase(" "+Y);["get","set","has"].forEach(le=>{Object.defineProperty(oe,le+re,{value:function(ue,he,fe){return this[le].call(this,Y,ue,he,fe)},configurable:!0})})}let AxiosHeaders$1=class{constructor(Y){Y&&this.set(Y)}set(Y,re,le){const ue=this;function he(_e,ve,Se){const $e=normalizeHeader(ve);if(!$e)throw new Error("header name must be a non-empty string");const Ee=utils$1.findKey(ue,$e);(!Ee||ue[Ee]===void 0||Se===!0||Se===void 0&&ue[Ee]!==!1)&&(ue[Ee||ve]=normalizeValue(_e))}const fe=(_e,ve)=>utils$1.forEach(_e,(Se,$e)=>he(Se,$e,ve));if(utils$1.isPlainObject(Y)||Y instanceof this.constructor)fe(Y,re);else if(utils$1.isString(Y)&&(Y=Y.trim())&&!isValidHeaderName(Y))fe(parseHeaders(Y),re);else if(utils$1.isObject(Y)&&utils$1.isIterable(Y)){let _e={},ve,Se;for(const $e of Y){if(!utils$1.isArray($e))throw TypeError("Object iterator must return a key-value pair");_e[Se=$e[0]]=(ve=_e[Se])?utils$1.isArray(ve)?[...ve,$e[1]]:[ve,$e[1]]:$e[1]}fe(_e,re)}else Y!=null&&he(re,Y,le);return this}get(Y,re){if(Y=normalizeHeader(Y),Y){const le=utils$1.findKey(this,Y);if(le){const ue=this[le];if(!re)return ue;if(re===!0)return parseTokens(ue);if(utils$1.isFunction(re))return re.call(this,ue,le);if(utils$1.isRegExp(re))return re.exec(ue);throw new TypeError("parser must be boolean|regexp|function")}}}has(Y,re){if(Y=normalizeHeader(Y),Y){const le=utils$1.findKey(this,Y);return!!(le&&this[le]!==void 0&&(!re||matchHeaderValue(this,this[le],le,re)))}return!1}delete(Y,re){const le=this;let ue=!1;function he(fe){if(fe=normalizeHeader(fe),fe){const _e=utils$1.findKey(le,fe);_e&&(!re||matchHeaderValue(le,le[_e],_e,re))&&(delete le[_e],ue=!0)}}return utils$1.isArray(Y)?Y.forEach(he):he(Y),ue}clear(Y){const re=Object.keys(this);let le=re.length,ue=!1;for(;le--;){const he=re[le];(!Y||matchHeaderValue(this,this[he],he,Y,!0))&&(delete this[he],ue=!0)}return ue}normalize(Y){const re=this,le={};return utils$1.forEach(this,(ue,he)=>{const fe=utils$1.findKey(le,he);if(fe){re[fe]=normalizeValue(ue),delete re[he];return}const _e=Y?formatHeader(he):String(he).trim();_e!==he&&delete re[he],re[_e]=normalizeValue(ue),le[_e]=!0}),this}concat(...Y){return this.constructor.concat(this,...Y)}toJSON(Y){const re=Object.create(null);return utils$1.forEach(this,(le,ue)=>{le!=null&&le!==!1&&(re[ue]=Y&&utils$1.isArray(le)?le.join(", "):le)}),re}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([Y,re])=>Y+": "+re).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(Y){return Y instanceof this?Y:new this(Y)}static concat(Y,...re){const le=new this(Y);return re.forEach(ue=>le.set(ue)),le}static accessor(Y){const le=(this[$internals]=this[$internals]={accessors:{}}).accessors,ue=this.prototype;function he(fe){const _e=normalizeHeader(fe);le[_e]||(buildAccessors(ue,fe),le[_e]=!0)}return utils$1.isArray(Y)?Y.forEach(he):he(Y),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:oe},Y)=>{let re=Y[0].toUpperCase()+Y.slice(1);return{get:()=>oe,set(le){this[re]=le}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(oe,Y){const re=this||defaults,le=Y||re,ue=AxiosHeaders$1.from(le.headers);let he=le.data;return utils$1.forEach(oe,function(_e){he=_e.call(re,he,ue.normalize(),Y?Y.status:void 0)}),ue.normalize(),he}function isCancel$1(oe){return!!(oe&&oe.__CANCEL__)}let CanceledError$1=class extends AxiosError$1{constructor(Y,re,le){super(Y??"canceled",AxiosError$1.ERR_CANCELED,re,le),this.name="CanceledError",this.__CANCEL__=!0}};function settle(oe,Y,re){const le=re.config.validateStatus;!re.status||!le||le(re.status)?oe(re):Y(new AxiosError$1("Request failed with status code "+re.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(re.status/100)-4],re.config,re.request,re))}function parseProtocol(oe){const Y=/^([-+\w]{1,25})(:?\/\/|:)/.exec(oe);return Y&&Y[1]||""}function speedometer(oe,Y){oe=oe||10;const re=new Array(oe),le=new Array(oe);let ue=0,he=0,fe;return Y=Y!==void 0?Y:1e3,function(ve){const Se=Date.now(),$e=le[he];fe||(fe=Se),re[ue]=ve,le[ue]=Se;let Ee=he,Ce=0;for(;Ee!==ue;)Ce+=re[Ee++],Ee=Ee%oe;if(ue=(ue+1)%oe,ue===he&&(he=(he+1)%oe),Se-fe<Y)return;const Ue=$e&&Se-$e;return Ue?Math.round(Ce*1e3/Ue):void 0}}function throttle$1(oe,Y){let re=0,le=1e3/Y,ue,he;const fe=(Se,$e=Date.now())=>{re=$e,ue=null,he&&(clearTimeout(he),he=null),oe(...Se)};return[(...Se)=>{const $e=Date.now(),Ee=$e-re;Ee>=le?fe(Se,$e):(ue=Se,he||(he=setTimeout(()=>{he=null,fe(ue)},le-Ee)))},()=>ue&&fe(ue)]}const progressEventReducer=(oe,Y,re=3)=>{let le=0;const ue=speedometer(50,250);return throttle$1(he=>{const fe=he.loaded,_e=he.lengthComputable?he.total:void 0,ve=fe-le,Se=ue(ve),$e=fe<=_e;le=fe;const Ee={loaded:fe,total:_e,progress:_e?fe/_e:void 0,bytes:ve,rate:Se||void 0,estimated:Se&&_e&&$e?(_e-fe)/Se:void 0,event:he,lengthComputable:_e!=null,[Y?"download":"upload"]:!0};oe(Ee)},re)},progressEventDecorator=(oe,Y)=>{const re=oe!=null;return[le=>Y[0]({lengthComputable:re,total:oe,loaded:le}),Y[1]]},asyncDecorator=oe=>(...Y)=>utils$1.asap(()=>oe(...Y)),isURLSameOrigin=platform.hasStandardBrowserEnv?((oe,Y)=>re=>(re=new URL(re,platform.origin),oe.protocol===re.protocol&&oe.host===re.host&&(Y||oe.port===re.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(oe,Y,re,le,ue,he,fe){if(typeof document>"u")return;const _e=[`${oe}=${encodeURIComponent(Y)}`];utils$1.isNumber(re)&&_e.push(`expires=${new Date(re).toUTCString()}`),utils$1.isString(le)&&_e.push(`path=${le}`),utils$1.isString(ue)&&_e.push(`domain=${ue}`),he===!0&&_e.push("secure"),utils$1.isString(fe)&&_e.push(`SameSite=${fe}`),document.cookie=_e.join("; ")},read(oe){if(typeof document>"u")return null;const Y=document.cookie.match(new RegExp("(?:^|; )"+oe+"=([^;]*)"));return Y?decodeURIComponent(Y[1]):null},remove(oe){this.write(oe,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(oe){return typeof oe!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(oe)}function combineURLs(oe,Y){return Y?oe.replace(/\/?\/$/,"")+"/"+Y.replace(/^\/+/,""):oe}function buildFullPath(oe,Y,re){let le=!isAbsoluteURL(Y);return oe&&(le||re==!1)?combineURLs(oe,Y):Y}const headersToObject=oe=>oe instanceof AxiosHeaders$1?{...oe}:oe;function mergeConfig$1(oe,Y){Y=Y||{};const re={};function le(Se,$e,Ee,Ce){return utils$1.isPlainObject(Se)&&utils$1.isPlainObject($e)?utils$1.merge.call({caseless:Ce},Se,$e):utils$1.isPlainObject($e)?utils$1.merge({},$e):utils$1.isArray($e)?$e.slice():$e}function ue(Se,$e,Ee,Ce){if(utils$1.isUndefined($e)){if(!utils$1.isUndefined(Se))return le(void 0,Se,Ee,Ce)}else return le(Se,$e,Ee,Ce)}function he(Se,$e){if(!utils$1.isUndefined($e))return le(void 0,$e)}function fe(Se,$e){if(utils$1.isUndefined($e)){if(!utils$1.isUndefined(Se))return le(void 0,Se)}else return le(void 0,$e)}function _e(Se,$e,Ee){if(Ee in Y)return le(Se,$e);if(Ee in oe)return le(void 0,Se)}const ve={url:he,method:he,data:he,baseURL:fe,transformRequest:fe,transformResponse:fe,paramsSerializer:fe,timeout:fe,timeoutMessage:fe,withCredentials:fe,withXSRFToken:fe,adapter:fe,responseType:fe,xsrfCookieName:fe,xsrfHeaderName:fe,onUploadProgress:fe,onDownloadProgress:fe,decompress:fe,maxContentLength:fe,maxBodyLength:fe,beforeRedirect:fe,transport:fe,httpAgent:fe,httpsAgent:fe,cancelToken:fe,socketPath:fe,responseEncoding:fe,validateStatus:_e,headers:(Se,$e,Ee)=>ue(headersToObject(Se),headersToObject($e),Ee,!0)};return utils$1.forEach(Object.keys({...oe,...Y}),function($e){if($e==="__proto__"||$e==="constructor"||$e==="prototype")return;const Ee=utils$1.hasOwnProp(ve,$e)?ve[$e]:ue,Ce=Ee(oe[$e],Y[$e],$e);utils$1.isUndefined(Ce)&&Ee!==_e||(re[$e]=Ce)}),re}const resolveConfig=oe=>{const Y=mergeConfig$1({},oe);let{data:re,withXSRFToken:le,xsrfHeaderName:ue,xsrfCookieName:he,headers:fe,auth:_e}=Y;if(Y.headers=fe=AxiosHeaders$1.from(fe),Y.url=buildURL(buildFullPath(Y.baseURL,Y.url,Y.allowAbsoluteUrls),oe.params,oe.paramsSerializer),_e&&fe.set("Authorization","Basic "+btoa((_e.username||"")+":"+(_e.password?unescape(encodeURIComponent(_e.password)):""))),utils$1.isFormData(re)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)fe.setContentType(void 0);else if(utils$1.isFunction(re.getHeaders)){const ve=re.getHeaders(),Se=["content-type","content-length"];Object.entries(ve).forEach(([$e,Ee])=>{Se.includes($e.toLowerCase())&&fe.set($e,Ee)})}}if(platform.hasStandardBrowserEnv&&(le&&utils$1.isFunction(le)&&(le=le(Y)),le||le!==!1&&isURLSameOrigin(Y.url))){const ve=ue&&he&&cookies.read(he);ve&&fe.set(ue,ve)}return Y},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(oe){return new Promise(function(re,le){const ue=resolveConfig(oe);let he=ue.data;const fe=AxiosHeaders$1.from(ue.headers).normalize();let{responseType:_e,onUploadProgress:ve,onDownloadProgress:Se}=ue,$e,Ee,Ce,Ue,xe;function Ne(){Ue&&Ue(),xe&&xe(),ue.cancelToken&&ue.cancelToken.unsubscribe($e),ue.signal&&ue.signal.removeEventListener("abort",$e)}let Ie=new XMLHttpRequest;Ie.open(ue.method.toUpperCase(),ue.url,!0),Ie.timeout=ue.timeout;function qe(){if(!Ie)return;const Re=AxiosHeaders$1.from("getAllResponseHeaders"in Ie&&Ie.getAllResponseHeaders()),Le={data:!_e||_e==="text"||_e==="json"?Ie.responseText:Ie.response,status:Ie.status,statusText:Ie.statusText,headers:Re,config:oe,request:Ie};settle(function(ze){re(ze),Ne()},function(ze){le(ze),Ne()},Le),Ie=null}"onloadend"in Ie?Ie.onloadend=qe:Ie.onreadystatechange=function(){!Ie||Ie.readyState!==4||Ie.status===0&&!(Ie.responseURL&&Ie.responseURL.indexOf("file:")===0)||setTimeout(qe)},Ie.onabort=function(){Ie&&(le(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,oe,Ie)),Ie=null)},Ie.onerror=function(De){const Le=De&&De.message?De.message:"Network Error",Ge=new AxiosError$1(Le,AxiosError$1.ERR_NETWORK,oe,Ie);Ge.event=De||null,le(Ge),Ie=null},Ie.ontimeout=function(){let De=ue.timeout?"timeout of "+ue.timeout+"ms exceeded":"timeout exceeded";const Le=ue.transitional||transitionalDefaults;ue.timeoutErrorMessage&&(De=ue.timeoutErrorMessage),le(new AxiosError$1(De,Le.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,oe,Ie)),Ie=null},he===void 0&&fe.setContentType(null),"setRequestHeader"in Ie&&utils$1.forEach(fe.toJSON(),function(De,Le){Ie.setRequestHeader(Le,De)}),utils$1.isUndefined(ue.withCredentials)||(Ie.withCredentials=!!ue.withCredentials),_e&&_e!=="json"&&(Ie.responseType=ue.responseType),Se&&([Ce,xe]=progressEventReducer(Se,!0),Ie.addEventListener("progress",Ce)),ve&&Ie.upload&&([Ee,Ue]=progressEventReducer(ve),Ie.upload.addEventListener("progress",Ee),Ie.upload.addEventListener("loadend",Ue)),(ue.cancelToken||ue.signal)&&($e=Re=>{Ie&&(le(!Re||Re.type?new CanceledError$1(null,oe,Ie):Re),Ie.abort(),Ie=null)},ue.cancelToken&&ue.cancelToken.subscribe($e),ue.signal&&(ue.signal.aborted?$e():ue.signal.addEventListener("abort",$e)));const Te=parseProtocol(ue.url);if(Te&&platform.protocols.indexOf(Te)===-1){le(new AxiosError$1("Unsupported protocol "+Te+":",AxiosError$1.ERR_BAD_REQUEST,oe));return}Ie.send(he||null)})},composeSignals=(oe,Y)=>{const{length:re}=oe=oe?oe.filter(Boolean):[];if(Y||re){let le=new AbortController,ue;const he=function(Se){if(!ue){ue=!0,_e();const $e=Se instanceof Error?Se:this.reason;le.abort($e instanceof AxiosError$1?$e:new CanceledError$1($e instanceof Error?$e.message:$e))}};let fe=Y&&setTimeout(()=>{fe=null,he(new AxiosError$1(`timeout of ${Y}ms exceeded`,AxiosError$1.ETIMEDOUT))},Y);const _e=()=>{oe&&(fe&&clearTimeout(fe),fe=null,oe.forEach(Se=>{Se.unsubscribe?Se.unsubscribe(he):Se.removeEventListener("abort",he)}),oe=null)};oe.forEach(Se=>Se.addEventListener("abort",he));const{signal:ve}=le;return ve.unsubscribe=()=>utils$1.asap(_e),ve}},streamChunk=function*(oe,Y){let re=oe.byteLength;if(re<Y){yield oe;return}let le=0,ue;for(;le<re;)ue=le+Y,yield oe.slice(le,ue),le=ue},readBytes=async function*(oe,Y){for await(const re of readStream(oe))yield*streamChunk(re,Y)},readStream=async function*(oe){if(oe[Symbol.asyncIterator]){yield*oe;return}const Y=oe.getReader();try{for(;;){const{done:re,value:le}=await Y.read();if(re)break;yield le}}finally{await Y.cancel()}},trackStream=(oe,Y,re,le)=>{const ue=readBytes(oe,Y);let he=0,fe,_e=ve=>{fe||(fe=!0,le&&le(ve))};return new ReadableStream({async pull(ve){try{const{done:Se,value:$e}=await ue.next();if(Se){_e(),ve.close();return}let Ee=$e.byteLength;if(re){let Ce=he+=Ee;re(Ce)}ve.enqueue(new Uint8Array($e))}catch(Se){throw _e(Se),Se}},cancel(ve){return _e(ve),ue.return()}},{highWaterMark:2})},DEFAULT_CHUNK_SIZE=64*1024,{isFunction}=utils$1,globalFetchAPI=(({Request:oe,Response:Y})=>({Request:oe,Response:Y}))(utils$1.global),{ReadableStream:ReadableStream$1,TextEncoder:TextEncoder$1}=utils$1.global,test=(oe,...Y)=>{try{return!!oe(...Y)}catch{return!1}},factory=oe=>{oe=utils$1.merge.call({skipUndefined:!0},globalFetchAPI,oe);const{fetch:Y,Request:re,Response:le}=oe,ue=Y?isFunction(Y):typeof fetch=="function",he=isFunction(re),fe=isFunction(le);if(!ue)return!1;const _e=ue&&isFunction(ReadableStream$1),ve=ue&&(typeof TextEncoder$1=="function"?(xe=>Ne=>xe.encode(Ne))(new TextEncoder$1):async xe=>new Uint8Array(await new re(xe).arrayBuffer())),Se=he&&_e&&test(()=>{let xe=!1;const Ne=new re(platform.origin,{body:new ReadableStream$1,method:"POST",get duplex(){return xe=!0,"half"}}).headers.has("Content-Type");return xe&&!Ne}),$e=fe&&_e&&test(()=>utils$1.isReadableStream(new le("").body)),Ee={stream:$e&&(xe=>xe.body)};ue&&["text","arrayBuffer","blob","formData","stream"].forEach(xe=>{!Ee[xe]&&(Ee[xe]=(Ne,Ie)=>{let qe=Ne&&Ne[xe];if(qe)return qe.call(Ne);throw new AxiosError$1(`Response type '${xe}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,Ie)})});const Ce=async xe=>{if(xe==null)return 0;if(utils$1.isBlob(xe))return xe.size;if(utils$1.isSpecCompliantForm(xe))return(await new re(platform.origin,{method:"POST",body:xe}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(xe)||utils$1.isArrayBuffer(xe))return xe.byteLength;if(utils$1.isURLSearchParams(xe)&&(xe=xe+""),utils$1.isString(xe))return(await ve(xe)).byteLength},Ue=async(xe,Ne)=>{const Ie=utils$1.toFiniteNumber(xe.getContentLength());return Ie??Ce(Ne)};return async xe=>{let{url:Ne,method:Ie,data:qe,signal:Te,cancelToken:Re,timeout:De,onDownloadProgress:Le,onUploadProgress:Ge,responseType:ze,headers:Ye,withCredentials:Xe="same-origin",fetchOptions:it}=resolveConfig(xe),nt=Y||fetch;ze=ze?(ze+"").toLowerCase():"text";let ot=composeSignals([Te,Re&&Re.toAbortSignal()],De),Ve=null;const st=ot&&ot.unsubscribe&&(()=>{ot.unsubscribe()});let at;try{if(Ge&&Se&&Ie!=="get"&&Ie!=="head"&&(at=await Ue(Ye,qe))!==0){let He=new re(Ne,{method:"POST",body:qe,duplex:"half"}),Qe;if(utils$1.isFormData(qe)&&(Qe=He.headers.get("content-type"))&&Ye.setContentType(Qe),He.body){const[et,tt]=progressEventDecorator(at,progressEventReducer(asyncDecorator(Ge)));qe=trackStream(He.body,DEFAULT_CHUNK_SIZE,et,tt)}}utils$1.isString(Xe)||(Xe=Xe?"include":"omit");const Ae=he&&"credentials"in re.prototype,Fe={...it,signal:ot,method:Ie.toUpperCase(),headers:Ye.normalize().toJSON(),body:qe,duplex:"half",credentials:Ae?Xe:void 0};Ve=he&&new re(Ne,Fe);let Pe=await(he?nt(Ve,it):nt(Ne,Fe));const je=$e&&(ze==="stream"||ze==="response");if($e&&(Le||je&&st)){const He={};["status","statusText","headers"].forEach(lt=>{He[lt]=Pe[lt]});const Qe=utils$1.toFiniteNumber(Pe.headers.get("content-length")),[et,tt]=Le&&progressEventDecorator(Qe,progressEventReducer(asyncDecorator(Le),!0))||[];Pe=new le(trackStream(Pe.body,DEFAULT_CHUNK_SIZE,et,()=>{tt&&tt(),st&&st()}),He)}ze=ze||"text";let We=await Ee[utils$1.findKey(Ee,ze)||"text"](Pe,xe);return!je&&st&&st(),await new Promise((He,Qe)=>{settle(He,Qe,{data:We,headers:AxiosHeaders$1.from(Pe.headers),status:Pe.status,statusText:Pe.statusText,config:xe,request:Ve})})}catch(Ae){throw st&&st(),Ae&&Ae.name==="TypeError"&&/Load failed|fetch/i.test(Ae.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,xe,Ve,Ae&&Ae.response),{cause:Ae.cause||Ae}):AxiosError$1.from(Ae,Ae&&Ae.code,xe,Ve,Ae&&Ae.response)}}},seedCache=new Map,getFetch=oe=>{let Y=oe&&oe.env||{};const{fetch:re,Request:le,Response:ue}=Y,he=[le,ue,re];let fe=he.length,_e=fe,ve,Se,$e=seedCache;for(;_e--;)ve=he[_e],Se=$e.get(ve),Se===void 0&&$e.set(ve,Se=_e?new Map:factory(Y)),$e=Se;return Se};getFetch();const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:{get:getFetch}};utils$1.forEach(knownAdapters,(oe,Y)=>{if(oe){try{Object.defineProperty(oe,"name",{value:Y})}catch{}Object.defineProperty(oe,"adapterName",{value:Y})}});const renderReason=oe=>`- ${oe}`,isResolvedHandle=oe=>utils$1.isFunction(oe)||oe===null||oe===!1;function getAdapter$1(oe,Y){oe=utils$1.isArray(oe)?oe:[oe];const{length:re}=oe;let le,ue;const he={};for(let fe=0;fe<re;fe++){le=oe[fe];let _e;if(ue=le,!isResolvedHandle(le)&&(ue=knownAdapters[(_e=String(le)).toLowerCase()],ue===void 0))throw new AxiosError$1(`Unknown adapter '${_e}'`);if(ue&&(utils$1.isFunction(ue)||(ue=ue.get(Y))))break;he[_e||"#"+fe]=ue}if(!ue){const fe=Object.entries(he).map(([ve,Se])=>`adapter ${ve} `+(Se===!1?"is not supported by the environment":"is not available in the build"));let _e=re?fe.length>1?`since :
`+fe.map(renderReason).join(`
`):" "+renderReason(fe[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+_e,"ERR_NOT_SUPPORT")}return ue}const adapters={getAdapter:getAdapter$1,adapters:knownAdapters};function throwIfCancellationRequested(oe){if(oe.cancelToken&&oe.cancelToken.throwIfRequested(),oe.signal&&oe.signal.aborted)throw new CanceledError$1(null,oe)}function dispatchRequest(oe){return throwIfCancellationRequested(oe),oe.headers=AxiosHeaders$1.from(oe.headers),oe.data=transformData.call(oe,oe.transformRequest),["post","put","patch"].indexOf(oe.method)!==-1&&oe.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(oe.adapter||defaults.adapter,oe)(oe).then(function(le){return throwIfCancellationRequested(oe),le.data=transformData.call(oe,oe.transformResponse,le),le.headers=AxiosHeaders$1.from(le.headers),le},function(le){return isCancel$1(le)||(throwIfCancellationRequested(oe),le&&le.response&&(le.response.data=transformData.call(oe,oe.transformResponse,le.response),le.response.headers=AxiosHeaders$1.from(le.response.headers))),Promise.reject(le)})}const VERSION$2="1.13.5",validators$1={};["object","boolean","number","function","string","symbol"].forEach((oe,Y)=>{validators$1[oe]=function(le){return typeof le===oe||"a"+(Y<1?"n ":" ")+oe}});const deprecatedWarnings={};validators$1.transitional=function(Y,re,le){function ue(he,fe){return"[Axios v"+VERSION$2+"] Transitional option '"+he+"'"+fe+(le?". "+le:"")}return(he,fe,_e)=>{if(Y===!1)throw new AxiosError$1(ue(fe," has been removed"+(re?" in "+re:"")),AxiosError$1.ERR_DEPRECATED);return re&&!deprecatedWarnings[fe]&&(deprecatedWarnings[fe]=!0,console.warn(ue(fe," has been deprecated since v"+re+" and will be removed in the near future"))),Y?Y(he,fe,_e):!0}};validators$1.spelling=function(Y){return(re,le)=>(console.warn(`${le} is likely a misspelling of ${Y}`),!0)};function assertOptions(oe,Y,re){if(typeof oe!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const le=Object.keys(oe);let ue=le.length;for(;ue-- >0;){const he=le[ue],fe=Y[he];if(fe){const _e=oe[he],ve=_e===void 0||fe(_e,he,oe);if(ve!==!0)throw new AxiosError$1("option "+he+" must be "+ve,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(re!==!0)throw new AxiosError$1("Unknown option "+he,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(Y){this.defaults=Y||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(Y,re){try{return await this._request(Y,re)}catch(le){if(le instanceof Error){let ue={};Error.captureStackTrace?Error.captureStackTrace(ue):ue=new Error;const he=ue.stack?ue.stack.replace(/^.+\n/,""):"";try{le.stack?he&&!String(le.stack).endsWith(he.replace(/^.+\n.+\n/,""))&&(le.stack+=`
`+he):le.stack=he}catch{}}throw le}}_request(Y,re){typeof Y=="string"?(re=re||{},re.url=Y):re=Y||{},re=mergeConfig$1(this.defaults,re);const{transitional:le,paramsSerializer:ue,headers:he}=re;le!==void 0&&validator.assertOptions(le,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean),legacyInterceptorReqResOrdering:validators.transitional(validators.boolean)},!1),ue!=null&&(utils$1.isFunction(ue)?re.paramsSerializer={serialize:ue}:validator.assertOptions(ue,{encode:validators.function,serialize:validators.function},!0)),re.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?re.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:re.allowAbsoluteUrls=!0),validator.assertOptions(re,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),re.method=(re.method||this.defaults.method||"get").toLowerCase();let fe=he&&utils$1.merge(he.common,he[re.method]);he&&utils$1.forEach(["delete","get","head","post","put","patch","common"],xe=>{delete he[xe]}),re.headers=AxiosHeaders$1.concat(fe,he);const _e=[];let ve=!0;this.interceptors.request.forEach(function(Ne){if(typeof Ne.runWhen=="function"&&Ne.runWhen(re)===!1)return;ve=ve&&Ne.synchronous;const Ie=re.transitional||transitionalDefaults;Ie&&Ie.legacyInterceptorReqResOrdering?_e.unshift(Ne.fulfilled,Ne.rejected):_e.push(Ne.fulfilled,Ne.rejected)});const Se=[];this.interceptors.response.forEach(function(Ne){Se.push(Ne.fulfilled,Ne.rejected)});let $e,Ee=0,Ce;if(!ve){const xe=[dispatchRequest.bind(this),void 0];for(xe.unshift(..._e),xe.push(...Se),Ce=xe.length,$e=Promise.resolve(re);Ee<Ce;)$e=$e.then(xe[Ee++],xe[Ee++]);return $e}Ce=_e.length;let Ue=re;for(;Ee<Ce;){const xe=_e[Ee++],Ne=_e[Ee++];try{Ue=xe(Ue)}catch(Ie){Ne.call(this,Ie);break}}try{$e=dispatchRequest.call(this,Ue)}catch(xe){return Promise.reject(xe)}for(Ee=0,Ce=Se.length;Ee<Ce;)$e=$e.then(Se[Ee++],Se[Ee++]);return $e}getUri(Y){Y=mergeConfig$1(this.defaults,Y);const re=buildFullPath(Y.baseURL,Y.url,Y.allowAbsoluteUrls);return buildURL(re,Y.params,Y.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(Y){Axios$1.prototype[Y]=function(re,le){return this.request(mergeConfig$1(le||{},{method:Y,url:re,data:(le||{}).data}))}});utils$1.forEach(["post","put","patch"],function(Y){function re(le){return function(he,fe,_e){return this.request(mergeConfig$1(_e||{},{method:Y,headers:le?{"Content-Type":"multipart/form-data"}:{},url:he,data:fe}))}}Axios$1.prototype[Y]=re(),Axios$1.prototype[Y+"Form"]=re(!0)});let CancelToken$1=class Rr{constructor(Y){if(typeof Y!="function")throw new TypeError("executor must be a function.");let re;this.promise=new Promise(function(he){re=he});const le=this;this.promise.then(ue=>{if(!le._listeners)return;let he=le._listeners.length;for(;he-- >0;)le._listeners[he](ue);le._listeners=null}),this.promise.then=ue=>{let he;const fe=new Promise(_e=>{le.subscribe(_e),he=_e}).then(ue);return fe.cancel=function(){le.unsubscribe(he)},fe},Y(function(he,fe,_e){le.reason||(le.reason=new CanceledError$1(he,fe,_e),re(le.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(Y){if(this.reason){Y(this.reason);return}this._listeners?this._listeners.push(Y):this._listeners=[Y]}unsubscribe(Y){if(!this._listeners)return;const re=this._listeners.indexOf(Y);re!==-1&&this._listeners.splice(re,1)}toAbortSignal(){const Y=new AbortController,re=le=>{Y.abort(le)};return this.subscribe(re),Y.signal.unsubscribe=()=>this.unsubscribe(re),Y.signal}static source(){let Y;return{token:new Rr(function(ue){Y=ue}),cancel:Y}}};function spread$1(oe){return function(re){return oe.apply(null,re)}}function isAxiosError$1(oe){return utils$1.isObject(oe)&&oe.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(HttpStatusCode$1).forEach(([oe,Y])=>{HttpStatusCode$1[Y]=oe});function createInstance(oe){const Y=new Axios$1(oe),re=bind(Axios$1.prototype.request,Y);return utils$1.extend(re,Axios$1.prototype,Y,{allOwnKeys:!0}),utils$1.extend(re,Y,null,{allOwnKeys:!0}),re.create=function(ue){return createInstance(mergeConfig$1(oe,ue))},re}const axios=createInstance(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(Y){return Promise.all(Y)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=oe=>formDataToJSON(utils$1.isHTMLForm(oe)?new FormData(oe):oe);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,_hoisted_1$e=["textContent"],_sfc_main$e={__name:"Bunny",props:Fieldtype.props,emits:Fieldtype.emits,setup(oe,{expose:Y,emit:re}){const le=re,ue=oe,{expose:he,update:fe}=Fieldtype.use(le,ue);Y(he);const _e=ref(null),ve=ref(!0),Se=ref([]),$e=ref([]),Ee=computed(()=>{let Ne=ue.value||[];return(typeof Ne=="string"||typeof Ne=="number")&&(Ne=[Ne]),Ne.map(Ie=>$e.value.find(qe=>qe.value===Ie)||{value:Ie,label:Ie})});function Ce(){axios.request({method:"GET",url:`https://video.bunnycdn.com/library/${ue.meta.library}/videos?page=1&itemsPerPage=100&orderBy=date`,headers:{accept:"application/json",AccessKey:ue.meta.api}}).then(Ne=>{Se.value=Ne.data,ve.value=!1,Ue()}).catch(Ne=>{console.error(Ne)})}function Ue(){Se.value.items.forEach(Ne=>{$e.value.push({value:Ne.guid,label:`${Ne.title} (${new Date(Ne.dateUploaded).toLocaleString()})`})})}function xe(Ne){fe(Ne?Ne.value:null)}return onMounted(()=>{Ce()}),(Ne,Ie)=>(openBlock(),createElementBlock("div",null,[createVNode(unref(Combobox),{ref_key:"input",ref:_e,class:"flex-1",clearable:!1,disabled:!1,options:$e.value,placeholder:Ne.__("Select Video..."),searchable:!0,multiple:!1,"close-on-select":!0,"model-value":Ee.value,"onUpdate:modelValue":xe,onFocus:Ie[0]||(Ie[0]=qe=>Ne.$emit("focus")),onBlur:Ie[1]||(Ie[1]=qe=>Ne.$emit("blur"))},{option:withCtx(({label:qe})=>[createTextVNode(toDisplayString(qe),1)]),"selected-option":withCtx(({label:qe})=>[createTextVNode(toDisplayString(qe),1)]),"no-options":withCtx(()=>[createElementVNode("div",{class:"text-sm text-gray-700 text-left py-2 px-4",textContent:toDisplayString(Ne.__("No options to choose from."))},null,8,_hoisted_1$e)]),_:1},8,["options","placeholder","model-value"])]))}},{Form,Head,Link,router,toggleArchitecturalBackground,useArchitecturalBackground,useForm,usePoll}=__STATAMIC__.inertia,_export_sfc=(oe,Y)=>{const re=oe.__vccOpts||oe;for(const[le,ue]of Y)re[le]=ue;return re},_sfc_main$d={},_hoisted_1$d={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function _sfc_render$c(oe,Y){return openBlock(),createElementBlock("svg",_hoisted_1$d,[...Y[0]||(Y[0]=[createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])}const PlusCircleIcon=_export_sfc(_sfc_main$d,[["render",_sfc_render$c]]),_sfc_main$c={},_hoisted_1$c={"aria-hidden":"true",viewBox:"0 0 100 101",style:{color:"#eef2f6"},fill:"#2D9EFC",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$b(oe,Y){return openBlock(),createElementBlock("svg",_hoisted_1$c,[...Y[0]||(Y[0]=[createElementVNode("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"},null,-1),createElementVNode("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"},null,-1)])])}const SpinnerIcon=_export_sfc(_sfc_main$c,[["render",_sfc_render$b]]),_sfc_main$b={},_hoisted_1$b={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"};function _sfc_render$a(oe,Y){return openBlock(),createElementBlock("svg",_hoisted_1$b,[...Y[0]||(Y[0]=[createElementVNode("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6 6 0 00-5.98 6.496A5.25 5.25 0 006.75 20.25H18a4.5 4.5 0 002.206-8.423 3.75 3.75 0 00-4.133-4.303A6.001 6.001 0 0010.5 3.75zm2.03 5.47a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.72-1.72v4.94a.75.75 0 001.5 0v-4.94l1.72 1.72a.75.75 0 101.06-1.06l-3-3z","clip-rule":"evenodd"},null,-1)])])}const CloudIcon=_export_sfc(_sfc_main$b,[["render",_sfc_render$a]]),_sfc_main$a={},_hoisted_1$a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"};function _sfc_render$9(oe,Y){return openBlock(),createElementBlock("svg",_hoisted_1$a,[...Y[0]||(Y[0]=[createElementVNode("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"},null,-1),createElementVNode("path",{"fill-rule":"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z","clip-rule":"evenodd"},null,-1)])])}const EyeIcon=_export_sfc(_sfc_main$a,[["render",_sfc_render$9]]),_sfc_main$9={},_hoisted_1$9={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"};function _sfc_render$8(oe,Y){return openBlock(),createElementBlock("svg",_hoisted_1$9,[...Y[0]||(Y[0]=[createElementVNode("path",{"fill-rule":"evenodd",d:"M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z","clip-rule":"evenodd"},null,-1),createElementVNode("path",{"fill-rule":"evenodd",d:"M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.194a.75.75 0 00-.053 1.06z","clip-rule":"evenodd"},null,-1)])])}const LinkIcon=_export_sfc(_sfc_main$9,[["render",_sfc_render$8]]),_sfc_main$8={},_hoisted_1$8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function _sfc_render$7(oe,Y){return openBlock(),createElementBlock("svg",_hoisted_1$8,[...Y[0]||(Y[0]=[createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1)])])}const TrashIcon=_export_sfc(_sfc_main$8,[["render",_sfc_render$7]]),_sfc_main$7={},_hoisted_1$7={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function _sfc_render$6(oe,Y){return openBlock(),createElementBlock("svg",_hoisted_1$7,[...Y[0]||(Y[0]=[createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"},null,-1),createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)])])}const CogIcon=_export_sfc(_sfc_main$7,[["render",_sfc_render$6]]);function mitt(oe){return{all:oe=oe||new Map,on:function(Y,re){var le=oe.get(Y);le?le.push(re):oe.set(Y,[re])},off:function(Y,re){var le=oe.get(Y);le&&(re?le.splice(le.indexOf(re)>>>0,1):oe.set(Y,[]))},emit:function(Y,re){var le=oe.get(Y);le&&le.slice().map(function(ue){ue(re)}),(le=oe.get("*"))&&le.slice().map(function(ue){ue(Y,re)})}}}const emitter=mitt(),_sfc_main$6={components:{CogIcon,Combobox},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary"],props:{id:String,title:String,assetOptions:[]},data(){return{isOpen:!1,videoTitle:this.title,selectedThumbnails:[]}},methods:{save(){this.title!==this.videoTitle&&(this.$progress.start("title"),this.changeTitle()),this.selectedThumbnails.length>0&&(this.$progress.start("thumbnail"),this.changeThumbnail()),this.isOpen=!1},changeTitle(){const oe={method:"POST",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.id}`,headers:{Accept:"application/json","content-type":"application/*+json",AccessKey:this.bunnyApiKey},data:'{"title":"'+this.videoTitle+'"}'};axios.request(oe).then(()=>{this.$toast.success(__("Video title has been updated!")),this.$progress.complete("title"),emitter.emit("load")}).catch(Y=>{this.$toast.error(__("An error occured while trying to update the video title.")),this.$progress.complete("title"),console.error(Y)})},changeThumbnail(){const oe={method:"POST",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.id}/thumbnail?thumbnailUrl=${this.selectedThumbnails[0].url}`,headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}};axios.request(oe).then(()=>{this.$toast.success(__("Thumbnail has been updated!")),this.thumbnailUrl=null,this.$progress.complete("thumbnail"),emitter.emit("load")}).catch(Y=>{this.$toast.error(__("An error occured while trying to update the thumbnail.")),this.$progress.complete("thumbnail"),console.error(Y)})},selectThumbnail(oe){this.selectedThumbnails=[oe]}}},_hoisted_1$6={class:"flex flex-col h-full"},_hoisted_2$4={class:"text-lg font-semibold px-5 py-3 bg-gray-200 rounded-t-lg flex items-center justify-between border-b"},_hoisted_3$3={class:"flex-1 px-5 py-6 text-gray"},_hoisted_4$3={class:"px-2 m-0 @container form-group publish-field text-fieldtype w-full"},_hoisted_5$3={for:"title",class:"block"},_hoisted_6$3={class:"input-group"},_hoisted_7$3={class:"px-2 m-0 @container form-group publish-field text-fieldtype w-full"},_hoisted_8$3={for:"thumbnail",class:"block"},_hoisted_9$2={class:"input-group"},_hoisted_10$2=["textContent"],_hoisted_11$2={class:"px-5 py-3 bg-gray-200 rounded-b-lg border-t flex items-center justify-end text-sm"},_hoisted_12$2=["textContent"],_hoisted_13$1=["textContent"];function _sfc_render$5(oe,Y,re,le,ue,he){const fe=resolveComponent("CogIcon"),_e=resolveComponent("Combobox"),ve=resolveComponent("modal");return openBlock(),createElementBlock("div",null,[createElementVNode("button",{onClick:Y[0]||(Y[0]=Se=>ue.isOpen=!0)},[createVNode(fe,{class:"size-5"})]),createVNode(ve,{open:ue.isOpen,"onUpdate:open":Y[4]||(Y[4]=Se=>ue.isOpen=Se),name:"settings"},{default:withCtx(()=>[createElementVNode("div",_hoisted_1$6,[createElementVNode("header",_hoisted_2$4,toDisplayString(oe.__("Video Settings")),1),createElementVNode("div",_hoisted_3$3,[createElementVNode("div",_hoisted_4$3,[createElementVNode("label",_hoisted_5$3,toDisplayString(oe.__("Title")),1),createElementVNode("div",_hoisted_6$3,[withDirectives(createElementVNode("input",{type:"text",id:"title",name:"title","onUpdate:modelValue":Y[1]||(Y[1]=Se=>ue.videoTitle=Se),class:"input-text"},null,512),[[vModelText,ue.videoTitle]])])]),createElementVNode("div",_hoisted_7$3,[createElementVNode("label",_hoisted_8$3,toDisplayString(oe.__("Thumbnail")),1),createElementVNode("div",_hoisted_9$2,[createVNode(_e,{ref:"input",class:"flex-1",clearable:!1,disabled:!1,options:re.assetOptions,placeholder:oe.__("Select new thumbnail"),searchable:!0,multiple:!1,"close-on-select":!0,"model-value":ue.selectedThumbnails,"onUpdate:modelValue":he.selectThumbnail},{option:withCtx(({label:Se})=>[createTextVNode(toDisplayString(Se),1)]),"selected-option":withCtx(({label:Se})=>[createTextVNode(toDisplayString(Se),1)]),"no-options":withCtx(()=>[createElementVNode("div",{class:"text-sm text-gray-700 text-left py-2 px-4",textContent:toDisplayString(oe.__("No options to choose from."))},null,8,_hoisted_10$2)]),_:1},8,["options","placeholder","model-value","onUpdate:modelValue"])])])]),createElementVNode("div",_hoisted_11$2,[createElementVNode("button",{class:"text-gray hover:text-gray-900",onClick:Y[2]||(Y[2]=Se=>ue.isOpen=!1),textContent:toDisplayString(oe.__("Cancel"))},null,8,_hoisted_12$2),createElementVNode("button",{class:"ml-4 btn-primary",textContent:toDisplayString(oe.__("Save")),onClick:Y[3]||(Y[3]=(...Se)=>he.save&&he.save(...Se))},null,8,_hoisted_13$1)])])]),_:1},8,["open"])])}const VideoSettings=_export_sfc(_sfc_main$6,[["render",_sfc_render$5]]),_sfc_main$5={components:{VideoSettings,CloudIcon,LinkIcon,TrashIcon,SpinnerIcon,EyeIcon},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary"],props:{video:Object,assetOptions:Array},data(){return{currentVideo:this.video,isLoading:!1,thumbnailUrl:`https://${this.bunnyHostname}/${this.video.guid}/${this.video.thumbnailFileName}`,videoUrl:`https://iframe.mediadelivery.net/play/${this.video.videoLibraryId}/${this.video.guid}`,triggerDeletion:!1}},mounted(){this.currentVideo.status<4&&(this.polling=setInterval(()=>{this.loadVideo()},5e3))},methods:{confirmDeletion(){this.triggerDeletion=!0},loadVideo(){this.isLoading=!0,axios.request({method:"GET",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.currentVideo.guid}`,headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}}).then(oe=>{this.currentVideo=oe.data,this.currentVideo.status>=4&&(clearInterval(this.polling),emitter.emit("load"))}).catch(function(oe){console.error(oe)}).finally(()=>{this.isLoading=!1})},deleteVideo(){this.isLoading=!0,axios.request({method:"DELETE",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.currentVideo.guid}`,headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}}).then(()=>{this.cancelDeletion(),clearInterval(this.polling),emitter.emit("load")}).catch(function(oe){console.error(oe)}).finally(()=>{this.isLoading=!1})},cancelDeletion(){this.triggerDeletion=!1}}},_hoisted_1$5={key:0,class:"sm:grid sm:grid-cols-3 overflow-hidden bg-white rounded shadow-xl w-full mb-4"},_hoisted_2$3=["href"],_hoisted_3$2=["src"],_hoisted_4$2={class:"sm:col-span-2 py-2 sm:py-4 px-2 sm:px-6 text-gray-800 flex flex-col justify-between gap-1 sm:shrink"},_hoisted_5$2={class:"flex sm:flex-grow items-start justify-between gap-4 w-full"},_hoisted_6$2=["href"],_hoisted_7$2={class:"flex gap-1"},_hoisted_8$2={class:"flex gap-2 md:gap-4 items-center justify-start text-xs md:text-sm whitespace-nowrap"},_hoisted_9$1=["href"],_hoisted_10$1={class:"text-xs md:text-sm text-gray-600 flex justify-between"},_hoisted_11$1={class:"flex gap-2 items-center"},_hoisted_12$1={class:"flex gap-2 items-center"},_hoisted_13={key:1,class:"flex flex-col overflow-hidden bg-white rounded shadow-xl w-full mb-4 p-6 items-center justify-center"},_hoisted_14={class:"text-lg"},_hoisted_15={class:"text-xs text-gray-600"},_hoisted_16={role:"status",class:"mt-4 mx-auto"},_hoisted_17={class:"sr-only"};function _sfc_render$4(oe,Y,re,le,ue,he){const fe=resolveComponent("VideoSettings"),_e=resolveComponent("TrashIcon"),ve=resolveComponent("LinkIcon"),Se=resolveComponent("CloudIcon"),$e=resolveComponent("EyeIcon"),Ee=resolveComponent("SpinnerIcon"),Ce=resolveComponent("ui-confirmation-modal");return openBlock(),createElementBlock("div",null,[ue.currentVideo.status>=4?(openBlock(),createElementBlock("div",_hoisted_1$5,[createElementVNode("a",{href:ue.videoUrl,target:"_blank",class:""},[createElementVNode("img",{src:ue.thumbnailUrl,class:"aspect-video inset-0 h-full object-cover w-full"},null,8,_hoisted_3$2)],8,_hoisted_2$3),createElementVNode("div",_hoisted_4$2,[createElementVNode("div",_hoisted_5$2,[createElementVNode("a",{href:ue.videoUrl,target:"_blank",class:"flex-grow font-semibold text-base sm:text-lg leading-tight truncate"},toDisplayString(ue.currentVideo.title),9,_hoisted_6$2),createElementVNode("div",_hoisted_7$2,[createVNode(fe,{id:ue.currentVideo.guid,title:ue.currentVideo.title,assetOptions:re.assetOptions,class:"size-5"},null,8,["id","title","assetOptions"]),createElementVNode("button",{class:"size-5",onClick:Y[0]||(Y[0]=Ue=>he.confirmDeletion())},[createVNode(_e,{class:"size-5"})])])]),createElementVNode("p",_hoisted_8$2,[createElementVNode("a",{href:ue.thumbnailUrl,target:"_blank",class:"flex gap-1 items-center"},[createTextVNode(toDisplayString(oe.__("Thumbnail"))+" ",1),createVNode(ve,{class:"size-4"})],8,_hoisted_9$1)]),createElementVNode("div",_hoisted_10$1,[createElementVNode("div",_hoisted_11$1,[createVNode(Se,{class:"text-gray-500 size-4"}),createTextVNode(" "+toDisplayString(new Date(ue.currentVideo.dateUploaded).toLocaleString()),1)]),createElementVNode("div",_hoisted_12$1,[createVNode($e,{class:"text-gray-500 size-4"}),createTextVNode(" "+toDisplayString(ue.currentVideo.views),1)])])])])):(openBlock(),createElementBlock("div",_hoisted_13,[createElementVNode("h2",_hoisted_14,toDisplayString(oe.__("Video is being processed"))+"  "+toDisplayString(ue.currentVideo.encodeProgress*2)+"% ",1),createElementVNode("p",_hoisted_15,toDisplayString(oe.__("This may take some time.")),1),createElementVNode("button",{class:"text-xs text-red-500",onClick:Y[1]||(Y[1]=Ue=>he.confirmDeletion())},toDisplayString(oe.__("Cancel and delete video")),1),createElementVNode("div",_hoisted_16,[createVNode(Ee,{class:"w-8 h-8 mr-2 animate-spin"}),createElementVNode("span",_hoisted_17,toDisplayString(oe.__("Loading...")),1)])])),createVNode(Ce,{open:ue.triggerDeletion,"onUpdate:open":Y[2]||(Y[2]=Ue=>ue.triggerDeletion=Ue),title:oe.__("Delete video :title",{title:ue.currentVideo.title}),onConfirm:he.deleteVideo,onCancel:he.cancelDeletion,danger:"true"},null,8,["open","title","onConfirm","onCancel"])])}const VideoCard=_export_sfc(_sfc_main$5,[["render",_sfc_render$4]]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(oe){return oe&&oe.__esModule&&Object.prototype.hasOwnProperty.call(oe,"default")?oe.default:oe}var debounce$3={exports:{}},hasRequiredDebounce$1;function requireDebounce$1(){if(hasRequiredDebounce$1)return debounce$3.exports;hasRequiredDebounce$1=1;function oe(Y,re=100,le={}){if(typeof Y!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof Y}\`.`);if(re<0)throw new RangeError("`wait` must not be negative.");const{immediate:ue}=typeof le=="boolean"?{immediate:le}:le;let he,fe,_e,ve,Se;function $e(){const Ue=he,xe=fe;return he=void 0,fe=void 0,Se=Y.apply(Ue,xe),Se}function Ee(){const Ue=Date.now()-ve;Ue<re&&Ue>=0?_e=setTimeout(Ee,re-Ue):(_e=void 0,ue||(Se=$e()))}const Ce=function(...Ue){if(he&&this!==he&&Object.getPrototypeOf(this)===Object.getPrototypeOf(he))throw new Error("Debounced method called with different contexts of the same prototype.");he=this,fe=Ue,ve=Date.now();const xe=ue&&!_e;return _e||(_e=setTimeout(Ee,re)),xe&&(Se=$e()),Se};return Object.defineProperty(Ce,"isPending",{get(){return _e!==void 0}}),Ce.clear=()=>{_e&&(clearTimeout(_e),_e=void 0)},Ce.flush=()=>{_e&&Ce.trigger()},Ce.trigger=()=>{Se=$e(),Ce.clear()},Ce}return debounce$3.exports.debounce=oe,debounce$3.exports=oe,debounce$3.exports}var debounceExports$1=requireDebounce$1();const debounce$2=getDefaultExportFromCjs(debounceExports$1),_sfc_main$4={components:{PlusCircleIcon,SpinnerIcon,VideoCard},inject:["bunnyApiKey","bunnyLibrary"],data(){return{search:"",loading:!0,polling:null,result:null,page:1,maxPage:1,itemsPerPage:10,assetOptions:[]}},created(){this.getVideos(),this.getAssets(),emitter.on("load",oe=>{oe&&oe.page&&(this.page=oe.page),this.getVideos()})},methods:{getAssets(){const oe={method:"GET",url:"/cp/bunny/assets/",headers:{Accept:"application/json"}};axios.request(oe).then(Y=>{this.assetOptions=Y.data.items}).catch(function(Y){console.error(Y)})},getVideos(){const oe={method:"GET",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos?page=${this.page}&itemsPerPage=${this.itemsPerPage}&orderBy=date`,headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}};this.search!==""&&(oe.url+="&search="+this.search),axios.request(oe).then(Y=>{this.maxPage=Math.ceil(Y.data.totalItems/this.itemsPerPage),this.result=Y.data,this.loading=!1}).catch(function(Y){console.error(Y)})},openUpload(){emitter.emit("upload")},debouncedSearch:debounce$2(()=>{emitter.emit("load",{page:1})},500),nextPage(){this.page++,this.page>this.maxPage&&(this.page=1),this.getVideos()},prevPage(){this.page--,this.page<=0&&(this.page=this.maxPage),this.getVideos()}}},_hoisted_1$4={class:"container w-100 lg:w-4/5 mx-auto input-group mb-4"},_hoisted_2$2=["placeholder"],_hoisted_3$1={key:0,class:"flex items-center"},_hoisted_4$1={role:"status",class:"mt-4 mx-auto"},_hoisted_5$1={class:"sr-only"},_hoisted_6$1={key:1},_hoisted_7$1={id:"card"},_hoisted_8$1={class:"container w-100 lg:w-4/5 mx-auto"},_hoisted_9={class:"flex flex-col"},_hoisted_10={key:0,class:"flex items-center justify-between"},_hoisted_11={key:2,class:"text-center text-sm"},_hoisted_12={class:"text-xl"};function _sfc_render$3(oe,Y,re,le,ue,he){const fe=resolveComponent("SpinnerIcon"),_e=resolveComponent("VideoCard"),ve=resolveComponent("PlusCircleIcon");return openBlock(),createElementBlock("div",null,[createElementVNode("div",_hoisted_1$4,[withDirectives(createElementVNode("input",{type:"text",placeholder:oe.__("Search videos"),onInput:Y[0]||(Y[0]=(...Se)=>he.debouncedSearch&&he.debouncedSearch(...Se)),"onUpdate:modelValue":Y[1]||(Y[1]=Se=>ue.search=Se),class:"input-text"},null,40,_hoisted_2$2),[[vModelText,ue.search]])]),ue.loading?(openBlock(),createElementBlock("div",_hoisted_3$1,[createElementVNode("div",_hoisted_4$1,[createVNode(fe,{class:"w-8 h-8 mr-2 animate-spin"}),createElementVNode("span",_hoisted_5$1,toDisplayString(oe.__("Loading...")),1)])])):!ue.loading&&ue.result.totalItems>=1?(openBlock(),createElementBlock("div",_hoisted_6$1,[createElementVNode("div",_hoisted_7$1,[createElementVNode("div",_hoisted_8$1,[createElementVNode("div",_hoisted_9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ue.result.items,Se=>(openBlock(),createBlock(_e,{key:Se.guid,video:Se,assetOptions:ue.assetOptions},null,8,["video","assetOptions"]))),128))]),ue.result.totalItems>ue.result.items.length?(openBlock(),createElementBlock("div",_hoisted_10,[createElementVNode("button",{class:"btn-primary",onClick:Y[2]||(Y[2]=(...Se)=>he.prevPage&&he.prevPage(...Se))},"  "),createElementVNode("div",null,toDisplayString(ue.page)+" / "+toDisplayString(ue.maxPage),1),createElementVNode("button",{class:"btn-primary",onClick:Y[3]||(Y[3]=(...Se)=>he.nextPage&&he.nextPage(...Se))},"  ")])):createCommentVNode("",!0)])])])):ue.search.length>0?(openBlock(),createElementBlock("div",_hoisted_11,toDisplayString(oe.__("No videos found.")),1)):(openBlock(),createElementBlock("button",{key:3,onClick:Y[4]||(Y[4]=Se=>he.openUpload()),class:"flex flex-col overflow-hidden border-gray-600 border-dashed border-2 rounded shadow-xl w-full mb-4 p-6 items-center justify-center"},[createElementVNode("h2",_hoisted_12,toDisplayString(oe.__("Upload Video")),1),createVNode(ve,{class:"h-10 w-10"})]))])}const VideoBrowser=_export_sfc(_sfc_main$4,[["render",_sfc_render$3]]),_sfc_main$3={},_hoisted_1$3={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"};function _sfc_render$2(oe,Y){return openBlock(),createElementBlock("svg",_hoisted_1$3,[...Y[0]||(Y[0]=[createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m6-6H6"},null,-1)])])}const PlusIcon=_export_sfc(_sfc_main$3,[["render",_sfc_render$2]]);function insertReplacement(oe,Y,re){const le=[];return oe.forEach(ue=>typeof ue!="string"?le.push(ue):Y[Symbol.split](ue).forEach((he,fe,_e)=>{he!==""&&le.push(he),fe<_e.length-1&&le.push(re)})),le}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function interpolate(oe,Y){const re=/\$/g,le="$$$$";let ue=[oe];if(Y==null)return ue;for(const he of Object.keys(Y))if(he!=="_"){let fe=Y[he];typeof fe=="string"&&(fe=re[Symbol.replace](fe,le)),ue=insertReplacement(ue,new RegExp(`%\\{${he}\\}`,"g"),fe)}return ue}const defaultOnMissingKey=oe=>{throw new Error(`missing string: ${oe}`)};var Vt,Wt,mr;class Translator{constructor(Y,{onMissingKey:re=defaultOnMissingKey}={}){Ze(this,Wt);Be(this,"locale");Ze(this,Vt);this.locale={strings:{},pluralize(le){return le===1?0:1}},Array.isArray(Y)?Y.forEach(Ke(this,Wt,mr),this):Ke(this,Wt,mr).call(this,Y),rt(this,Vt,re)}translate(Y,re){return this.translateArray(Y,re).join("")}translateArray(Y,re){let le=this.locale.strings[Y];if(le==null&&(Me(this,Vt).call(this,Y),le=Y),typeof le=="object"){if(re&&typeof re.smart_count<"u"){const he=this.locale.pluralize(re.smart_count);return interpolate(le[he],re)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof le!="string")throw new Error("string was not a string");return interpolate(le,re)}}Vt=new WeakMap,Wt=new WeakSet,mr=function(Y){if(!Y?.strings)return;const re=this.locale;Object.assign(this.locale,{strings:{...re.strings,...Y.strings},pluralize:Y.pluralize||re.pluralize})};class BasePlugin{constructor(Y,re){Be(this,"uppy");Be(this,"opts");Be(this,"id");Be(this,"defaultLocale");Be(this,"i18n");Be(this,"i18nArray");Be(this,"type");Be(this,"VERSION");this.uppy=Y,this.opts=re??{}}getPluginState(){const{plugins:Y}=this.uppy.getState();return Y?.[this.id]||{}}setPluginState(Y){const{plugins:re}=this.uppy.getState();this.uppy.setState({plugins:{...re,[this.id]:{...re[this.id],...Y}}})}setOptions(Y){this.opts={...this.opts,...Y},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const Y=new Translator([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=Y.translate.bind(Y),this.i18nArray=Y.translateArray.bind(Y),this.setPluginState(void 0)}addTarget(Y){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(Y){}afterUpdate(){}}function pad(oe){return oe<10?`0${oe}`:oe.toString()}function getTimeStamp(){const oe=new Date,Y=pad(oe.getHours()),re=pad(oe.getMinutes()),le=pad(oe.getSeconds());return`${Y}:${re}:${le}`}const justErrorsLogger={debug:()=>{},warn:()=>{},error:(...oe)=>console.error(`[Uppy] [${getTimeStamp()}]`,...oe)},debugLogger={debug:(...oe)=>console.debug(`[Uppy] [${getTimeStamp()}]`,...oe),warn:(...oe)=>console.warn(`[Uppy] [${getTimeStamp()}]`,...oe),error:(...oe)=>console.error(`[Uppy] [${getTimeStamp()}]`,...oe)};function isDOMElement(oe){return typeof oe!="object"||oe===null||!("nodeType"in oe)?!1:oe.nodeType===Node.ELEMENT_NODE}function findDOMElement(oe,Y=document){return typeof oe=="string"?Y.querySelector(oe):isDOMElement(oe)?oe:null}function getTextDirection(oe){for(;oe&&!oe.dir;)oe=oe.parentNode;return oe?.dir}var n$1,l$2,u$3,i$2,o$2,r$2,e$2,f$3,c$2,s$2,a$2,p$2={},v$2=[],y$2=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,d$2=Array.isArray;function w$2(oe,Y){for(var re in Y)oe[re]=Y[re];return oe}function g$2(oe){oe&&oe.parentNode&&oe.parentNode.removeChild(oe)}function _$1(oe,Y,re){var le,ue,he,fe={};for(he in Y)he=="key"?le=Y[he]:he=="ref"?ue=Y[he]:fe[he]=Y[he];if(arguments.length>2&&(fe.children=arguments.length>3?n$1.call(arguments,2):re),typeof oe=="function"&&oe.defaultProps!=null)for(he in oe.defaultProps)fe[he]===void 0&&(fe[he]=oe.defaultProps[he]);return m$2(oe,fe,le,ue,null)}function m$2(oe,Y,re,le,ue){var he={type:oe,props:Y,key:re,ref:le,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:ue??++u$3,__i:-1,__u:0};return ue==null&&l$2.vnode!=null&&l$2.vnode(he),he}function b$1(){return{current:null}}function k$2(oe){return oe.children}function x(oe,Y){this.props=oe,this.context=Y}function S$1(oe,Y){if(Y==null)return oe.__?S$1(oe.__,oe.__i+1):null;for(var re;Y<oe.__k.length;Y++)if((re=oe.__k[Y])!=null&&re.__e!=null)return re.__e;return typeof oe.type=="function"?S$1(oe):null}function C$1(oe){var Y,re;if((oe=oe.__)!=null&&oe.__c!=null){for(oe.__e=oe.__c.base=null,Y=0;Y<oe.__k.length;Y++)if((re=oe.__k[Y])!=null&&re.__e!=null){oe.__e=oe.__c.base=re.__e;break}return C$1(oe)}}function M$1(oe){(!oe.__d&&(oe.__d=!0)&&i$2.push(oe)&&!$$1.__r++||o$2!=l$2.debounceRendering)&&((o$2=l$2.debounceRendering)||r$2)($$1)}function $$1(){for(var oe,Y,re,le,ue,he,fe,_e=1;i$2.length;)i$2.length>_e&&i$2.sort(e$2),oe=i$2.shift(),_e=i$2.length,oe.__d&&(re=void 0,le=void 0,ue=(le=(Y=oe).__v).__e,he=[],fe=[],Y.__P&&((re=w$2({},le)).__v=le.__v+1,l$2.vnode&&l$2.vnode(re),O$1(Y.__P,re,le,Y.__n,Y.__P.namespaceURI,32&le.__u?[ue]:null,he,ue??S$1(le),!!(32&le.__u),fe),re.__v=le.__v,re.__.__k[re.__i]=re,N$2(he,re,fe),le.__e=le.__=null,re.__e!=ue&&C$1(re)));$$1.__r=0}function I$1(oe,Y,re,le,ue,he,fe,_e,ve,Se,$e){var Ee,Ce,Ue,xe,Ne,Ie,qe,Te=le&&le.__k||v$2,Re=Y.length;for(ve=P$2(re,Y,Te,ve,Re),Ee=0;Ee<Re;Ee++)(Ue=re.__k[Ee])!=null&&(Ce=Ue.__i==-1?p$2:Te[Ue.__i]||p$2,Ue.__i=Ee,Ie=O$1(oe,Ue,Ce,ue,he,fe,_e,ve,Se,$e),xe=Ue.__e,Ue.ref&&Ce.ref!=Ue.ref&&(Ce.ref&&B$3(Ce.ref,null,Ue),$e.push(Ue.ref,Ue.__c||xe,Ue)),Ne==null&&xe!=null&&(Ne=xe),(qe=!!(4&Ue.__u))||Ce.__k===Ue.__k?ve=A$2(Ue,ve,oe,qe):typeof Ue.type=="function"&&Ie!==void 0?ve=Ie:xe&&(ve=xe.nextSibling),Ue.__u&=-7);return re.__e=Ne,ve}function P$2(oe,Y,re,le,ue){var he,fe,_e,ve,Se,$e=re.length,Ee=$e,Ce=0;for(oe.__k=new Array(ue),he=0;he<ue;he++)(fe=Y[he])!=null&&typeof fe!="boolean"&&typeof fe!="function"?(typeof fe=="string"||typeof fe=="number"||typeof fe=="bigint"||fe.constructor==String?fe=oe.__k[he]=m$2(null,fe,null,null,null):d$2(fe)?fe=oe.__k[he]=m$2(k$2,{children:fe},null,null,null):fe.constructor===void 0&&fe.__b>0?fe=oe.__k[he]=m$2(fe.type,fe.props,fe.key,fe.ref?fe.ref:null,fe.__v):oe.__k[he]=fe,ve=he+Ce,fe.__=oe,fe.__b=oe.__b+1,_e=null,(Se=fe.__i=L$1(fe,re,ve,Ee))!=-1&&(Ee--,(_e=re[Se])&&(_e.__u|=2)),_e==null||_e.__v==null?(Se==-1&&(ue>$e?Ce--:ue<$e&&Ce++),typeof fe.type!="function"&&(fe.__u|=4)):Se!=ve&&(Se==ve-1?Ce--:Se==ve+1?Ce++:(Se>ve?Ce--:Ce++,fe.__u|=4))):oe.__k[he]=null;if(Ee)for(he=0;he<$e;he++)(_e=re[he])!=null&&(2&_e.__u)==0&&(_e.__e==le&&(le=S$1(_e)),D$2(_e,_e));return le}function A$2(oe,Y,re,le){var ue,he;if(typeof oe.type=="function"){for(ue=oe.__k,he=0;ue&&he<ue.length;he++)ue[he]&&(ue[he].__=oe,Y=A$2(ue[he],Y,re,le));return Y}oe.__e!=Y&&(le&&(Y&&oe.type&&!Y.parentNode&&(Y=S$1(oe)),re.insertBefore(oe.__e,Y||null)),Y=oe.__e);do Y=Y&&Y.nextSibling;while(Y!=null&&Y.nodeType==8);return Y}function H$2(oe,Y){return Y=Y||[],oe==null||typeof oe=="boolean"||(d$2(oe)?oe.some(function(re){H$2(re,Y)}):Y.push(oe)),Y}function L$1(oe,Y,re,le){var ue,he,fe,_e=oe.key,ve=oe.type,Se=Y[re],$e=Se!=null&&(2&Se.__u)==0;if(Se===null&&_e==null||$e&&_e==Se.key&&ve==Se.type)return re;if(le>($e?1:0)){for(ue=re-1,he=re+1;ue>=0||he<Y.length;)if((Se=Y[fe=ue>=0?ue--:he++])!=null&&(2&Se.__u)==0&&_e==Se.key&&ve==Se.type)return fe}return-1}function T$3(oe,Y,re){Y[0]=="-"?oe.setProperty(Y,re??""):oe[Y]=re==null?"":typeof re!="number"||y$2.test(Y)?re:re+"px"}function j$3(oe,Y,re,le,ue){var he,fe;e:if(Y=="style")if(typeof re=="string")oe.style.cssText=re;else{if(typeof le=="string"&&(oe.style.cssText=le=""),le)for(Y in le)re&&Y in re||T$3(oe.style,Y,"");if(re)for(Y in re)le&&re[Y]==le[Y]||T$3(oe.style,Y,re[Y])}else if(Y[0]=="o"&&Y[1]=="n")he=Y!=(Y=Y.replace(f$3,"$1")),fe=Y.toLowerCase(),Y=fe in oe||Y=="onFocusOut"||Y=="onFocusIn"?fe.slice(2):Y.slice(2),oe.l||(oe.l={}),oe.l[Y+he]=re,re?le?re.u=le.u:(re.u=c$2,oe.addEventListener(Y,he?a$2:s$2,he)):oe.removeEventListener(Y,he?a$2:s$2,he);else{if(ue=="http://www.w3.org/2000/svg")Y=Y.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(Y!="width"&&Y!="height"&&Y!="href"&&Y!="list"&&Y!="form"&&Y!="tabIndex"&&Y!="download"&&Y!="rowSpan"&&Y!="colSpan"&&Y!="role"&&Y!="popover"&&Y in oe)try{oe[Y]=re??"";break e}catch{}typeof re=="function"||(re==null||re===!1&&Y[4]!="-"?oe.removeAttribute(Y):oe.setAttribute(Y,Y=="popover"&&re==1?"":re))}}function F$2(oe){return function(Y){if(this.l){var re=this.l[Y.type+oe];if(Y.t==null)Y.t=c$2++;else if(Y.t<re.u)return;return re(l$2.event?l$2.event(Y):Y)}}}function O$1(oe,Y,re,le,ue,he,fe,_e,ve,Se){var $e,Ee,Ce,Ue,xe,Ne,Ie,qe,Te,Re,De,Le,Ge,ze,Ye,Xe,it,nt=Y.type;if(Y.constructor!==void 0)return null;128&re.__u&&(ve=!!(32&re.__u),he=[_e=Y.__e=re.__e]),($e=l$2.__b)&&$e(Y);e:if(typeof nt=="function")try{if(qe=Y.props,Te="prototype"in nt&&nt.prototype.render,Re=($e=nt.contextType)&&le[$e.__c],De=$e?Re?Re.props.value:$e.__:le,re.__c?Ie=(Ee=Y.__c=re.__c).__=Ee.__E:(Te?Y.__c=Ee=new nt(qe,De):(Y.__c=Ee=new x(qe,De),Ee.constructor=nt,Ee.render=E$2),Re&&Re.sub(Ee),Ee.state||(Ee.state={}),Ee.__n=le,Ce=Ee.__d=!0,Ee.__h=[],Ee._sb=[]),Te&&Ee.__s==null&&(Ee.__s=Ee.state),Te&&nt.getDerivedStateFromProps!=null&&(Ee.__s==Ee.state&&(Ee.__s=w$2({},Ee.__s)),w$2(Ee.__s,nt.getDerivedStateFromProps(qe,Ee.__s))),Ue=Ee.props,xe=Ee.state,Ee.__v=Y,Ce)Te&&nt.getDerivedStateFromProps==null&&Ee.componentWillMount!=null&&Ee.componentWillMount(),Te&&Ee.componentDidMount!=null&&Ee.__h.push(Ee.componentDidMount);else{if(Te&&nt.getDerivedStateFromProps==null&&qe!==Ue&&Ee.componentWillReceiveProps!=null&&Ee.componentWillReceiveProps(qe,De),Y.__v==re.__v||!Ee.__e&&Ee.shouldComponentUpdate!=null&&Ee.shouldComponentUpdate(qe,Ee.__s,De)===!1){for(Y.__v!=re.__v&&(Ee.props=qe,Ee.state=Ee.__s,Ee.__d=!1),Y.__e=re.__e,Y.__k=re.__k,Y.__k.some(function(ot){ot&&(ot.__=Y)}),Le=0;Le<Ee._sb.length;Le++)Ee.__h.push(Ee._sb[Le]);Ee._sb=[],Ee.__h.length&&fe.push(Ee);break e}Ee.componentWillUpdate!=null&&Ee.componentWillUpdate(qe,Ee.__s,De),Te&&Ee.componentDidUpdate!=null&&Ee.__h.push(function(){Ee.componentDidUpdate(Ue,xe,Ne)})}if(Ee.context=De,Ee.props=qe,Ee.__P=oe,Ee.__e=!1,Ge=l$2.__r,ze=0,Te){for(Ee.state=Ee.__s,Ee.__d=!1,Ge&&Ge(Y),$e=Ee.render(Ee.props,Ee.state,Ee.context),Ye=0;Ye<Ee._sb.length;Ye++)Ee.__h.push(Ee._sb[Ye]);Ee._sb=[]}else do Ee.__d=!1,Ge&&Ge(Y),$e=Ee.render(Ee.props,Ee.state,Ee.context),Ee.state=Ee.__s;while(Ee.__d&&++ze<25);Ee.state=Ee.__s,Ee.getChildContext!=null&&(le=w$2(w$2({},le),Ee.getChildContext())),Te&&!Ce&&Ee.getSnapshotBeforeUpdate!=null&&(Ne=Ee.getSnapshotBeforeUpdate(Ue,xe)),Xe=$e,$e!=null&&$e.type===k$2&&$e.key==null&&(Xe=V$2($e.props.children)),_e=I$1(oe,d$2(Xe)?Xe:[Xe],Y,re,le,ue,he,fe,_e,ve,Se),Ee.base=Y.__e,Y.__u&=-161,Ee.__h.length&&fe.push(Ee),Ie&&(Ee.__E=Ee.__=null)}catch(ot){if(Y.__v=null,ve||he!=null)if(ot.then){for(Y.__u|=ve?160:128;_e&&_e.nodeType==8&&_e.nextSibling;)_e=_e.nextSibling;he[he.indexOf(_e)]=null,Y.__e=_e}else{for(it=he.length;it--;)g$2(he[it]);z$2(Y)}else Y.__e=re.__e,Y.__k=re.__k,ot.then||z$2(Y);l$2.__e(ot,Y,re)}else he==null&&Y.__v==re.__v?(Y.__k=re.__k,Y.__e=re.__e):_e=Y.__e=q$3(re.__e,Y,re,le,ue,he,fe,ve,Se);return($e=l$2.diffed)&&$e(Y),128&Y.__u?void 0:_e}function z$2(oe){oe&&oe.__c&&(oe.__c.__e=!0),oe&&oe.__k&&oe.__k.forEach(z$2)}function N$2(oe,Y,re){for(var le=0;le<re.length;le++)B$3(re[le],re[++le],re[++le]);l$2.__c&&l$2.__c(Y,oe),oe.some(function(ue){try{oe=ue.__h,ue.__h=[],oe.some(function(he){he.call(ue)})}catch(he){l$2.__e(he,ue.__v)}})}function V$2(oe){return typeof oe!="object"||oe==null||oe.__b&&oe.__b>0?oe:d$2(oe)?oe.map(V$2):w$2({},oe)}function q$3(oe,Y,re,le,ue,he,fe,_e,ve){var Se,$e,Ee,Ce,Ue,xe,Ne,Ie=re.props||p$2,qe=Y.props,Te=Y.type;if(Te=="svg"?ue="http://www.w3.org/2000/svg":Te=="math"?ue="http://www.w3.org/1998/Math/MathML":ue||(ue="http://www.w3.org/1999/xhtml"),he!=null){for(Se=0;Se<he.length;Se++)if((Ue=he[Se])&&"setAttribute"in Ue==!!Te&&(Te?Ue.localName==Te:Ue.nodeType==3)){oe=Ue,he[Se]=null;break}}if(oe==null){if(Te==null)return document.createTextNode(qe);oe=document.createElementNS(ue,Te,qe.is&&qe),_e&&(l$2.__m&&l$2.__m(Y,he),_e=!1),he=null}if(Te==null)Ie===qe||_e&&oe.data==qe||(oe.data=qe);else{if(he=he&&n$1.call(oe.childNodes),!_e&&he!=null)for(Ie={},Se=0;Se<oe.attributes.length;Se++)Ie[(Ue=oe.attributes[Se]).name]=Ue.value;for(Se in Ie)if(Ue=Ie[Se],Se!="children"){if(Se=="dangerouslySetInnerHTML")Ee=Ue;else if(!(Se in qe)){if(Se=="value"&&"defaultValue"in qe||Se=="checked"&&"defaultChecked"in qe)continue;j$3(oe,Se,null,Ue,ue)}}for(Se in qe)Ue=qe[Se],Se=="children"?Ce=Ue:Se=="dangerouslySetInnerHTML"?$e=Ue:Se=="value"?xe=Ue:Se=="checked"?Ne=Ue:_e&&typeof Ue!="function"||Ie[Se]===Ue||j$3(oe,Se,Ue,Ie[Se],ue);if($e)_e||Ee&&($e.__html==Ee.__html||$e.__html==oe.innerHTML)||(oe.innerHTML=$e.__html),Y.__k=[];else if(Ee&&(oe.innerHTML=""),I$1(Y.type=="template"?oe.content:oe,d$2(Ce)?Ce:[Ce],Y,re,le,Te=="foreignObject"?"http://www.w3.org/1999/xhtml":ue,he,fe,he?he[0]:re.__k&&S$1(re,0),_e,ve),he!=null)for(Se=he.length;Se--;)g$2(he[Se]);_e||(Se="value",Te=="progress"&&xe==null?oe.removeAttribute("value"):xe!=null&&(xe!==oe[Se]||Te=="progress"&&!xe||Te=="option"&&xe!=Ie[Se])&&j$3(oe,Se,xe,Ie[Se],ue),Se="checked",Ne!=null&&Ne!=oe[Se]&&j$3(oe,Se,Ne,Ie[Se],ue))}return oe}function B$3(oe,Y,re){try{if(typeof oe=="function"){var le=typeof oe.__u=="function";le&&oe.__u(),le&&Y==null||(oe.__u=oe(Y))}else oe.current=Y}catch(ue){l$2.__e(ue,re)}}function D$2(oe,Y,re){var le,ue;if(l$2.unmount&&l$2.unmount(oe),(le=oe.ref)&&(le.current&&le.current!=oe.__e||B$3(le,null,Y)),(le=oe.__c)!=null){if(le.componentWillUnmount)try{le.componentWillUnmount()}catch(he){l$2.__e(he,Y)}le.base=le.__P=null}if(le=oe.__k)for(ue=0;ue<le.length;ue++)le[ue]&&D$2(le[ue],Y,re||typeof oe.type!="function");re||g$2(oe.__e),oe.__c=oe.__=oe.__e=void 0}function E$2(oe,Y,re){return this.constructor(oe,re)}function G$1(oe,Y,re){var le,ue,he,fe;Y==document&&(Y=document.documentElement),l$2.__&&l$2.__(oe,Y),ue=(le=!1)?null:Y.__k,he=[],fe=[],O$1(Y,oe=Y.__k=_$1(k$2,null,[oe]),ue||p$2,p$2,Y.namespaceURI,ue?null:Y.firstChild?n$1.call(Y.childNodes):null,he,ue?ue.__e:Y.firstChild,le,fe),N$2(he,oe,fe)}function K$2(oe,Y,re){var le,ue,he,fe,_e=w$2({},oe.props);for(he in oe.type&&oe.type.defaultProps&&(fe=oe.type.defaultProps),Y)he=="key"?le=Y[he]:he=="ref"?ue=Y[he]:_e[he]=Y[he]===void 0&&fe!=null?fe[he]:Y[he];return arguments.length>2&&(_e.children=arguments.length>3?n$1.call(arguments,2):re),m$2(oe.type,_e,le||oe.key,ue||oe.ref,null)}n$1=v$2.slice,l$2={__e:function(oe,Y,re,le){for(var ue,he,fe;Y=Y.__;)if((ue=Y.__c)&&!ue.__)try{if((he=ue.constructor)&&he.getDerivedStateFromError!=null&&(ue.setState(he.getDerivedStateFromError(oe)),fe=ue.__d),ue.componentDidCatch!=null&&(ue.componentDidCatch(oe,le||{}),fe=ue.__d),fe)return ue.__E=ue}catch(_e){oe=_e}throw oe}},u$3=0,x.prototype.setState=function(oe,Y){var re;re=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=w$2({},this.state),typeof oe=="function"&&(oe=oe(w$2({},re),this.props)),oe&&w$2(re,oe),oe!=null&&this.__v&&(Y&&this._sb.push(Y),M$1(this))},x.prototype.forceUpdate=function(oe){this.__v&&(this.__e=!0,oe&&this.__h.push(oe),M$1(this))},x.prototype.render=k$2,i$2=[],r$2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e$2=function(oe,Y){return oe.__v.__b-Y.__v.__b},$$1.__r=0,f$3=/(PointerCapture)$|Capture$/i,c$2=0,s$2=F$2(!1),a$2=F$2(!0);var t$1,r$1,u$2,i$1,o$1=0,f$2=[],c$1=l$2,e$1=c$1.__b,a$1=c$1.__r,v$1=c$1.diffed,l$1=c$1.__c,m$1=c$1.unmount,s$1=c$1.__;function p$1(oe,Y){c$1.__h&&c$1.__h(r$1,oe,o$1||Y),o$1=0;var re=r$1.__H||(r$1.__H={__:[],__h:[]});return oe>=re.__.length&&re.__.push({}),re.__[oe]}function d$1(oe){return o$1=1,h$1(D$1,oe)}function h$1(oe,Y,re){var le=p$1(t$1++,2);if(le.t=oe,!le.__c&&(le.__=[re?re(Y):D$1(void 0,Y),function(_e){var ve=le.__N?le.__N[0]:le.__[0],Se=le.t(ve,_e);ve!==Se&&(le.__N=[Se,le.__[1]],le.__c.setState({}))}],le.__c=r$1,!r$1.__f)){var ue=function(_e,ve,Se){if(!le.__c.__H)return!0;var $e=le.__c.__H.__.filter(function(Ce){return!!Ce.__c});if($e.every(function(Ce){return!Ce.__N}))return!he||he.call(this,_e,ve,Se);var Ee=le.__c.props!==_e;return $e.forEach(function(Ce){if(Ce.__N){var Ue=Ce.__[0];Ce.__=Ce.__N,Ce.__N=void 0,Ue!==Ce.__[0]&&(Ee=!0)}}),he&&he.call(this,_e,ve,Se)||Ee};r$1.__f=!0;var he=r$1.shouldComponentUpdate,fe=r$1.componentWillUpdate;r$1.componentWillUpdate=function(_e,ve,Se){if(this.__e){var $e=he;he=void 0,ue(_e,ve,Se),he=$e}fe&&fe.call(this,_e,ve,Se)},r$1.shouldComponentUpdate=ue}return le.__N||le.__}function y$1(oe,Y){var re=p$1(t$1++,3);!c$1.__s&&C(re.__H,Y)&&(re.__=oe,re.u=Y,r$1.__H.__h.push(re))}function A$1(oe){return o$1=5,T$2(function(){return{current:oe}},[])}function T$2(oe,Y){var re=p$1(t$1++,7);return C(re.__H,Y)&&(re.__=oe(),re.__H=Y,re.__h=oe),re.__}function q$2(oe,Y){return o$1=8,T$2(function(){return oe},Y)}function j$2(){for(var oe;oe=f$2.shift();)if(oe.__P&&oe.__H)try{oe.__H.__h.forEach(z$1),oe.__H.__h.forEach(B$2),oe.__H.__h=[]}catch(Y){oe.__H.__h=[],c$1.__e(Y,oe.__v)}}c$1.__b=function(oe){r$1=null,e$1&&e$1(oe)},c$1.__=function(oe,Y){oe&&Y.__k&&Y.__k.__m&&(oe.__m=Y.__k.__m),s$1&&s$1(oe,Y)},c$1.__r=function(oe){a$1&&a$1(oe),t$1=0;var Y=(r$1=oe.__c).__H;Y&&(u$2===r$1?(Y.__h=[],r$1.__h=[],Y.__.forEach(function(re){re.__N&&(re.__=re.__N),re.u=re.__N=void 0})):(Y.__h.forEach(z$1),Y.__h.forEach(B$2),Y.__h=[],t$1=0)),u$2=r$1},c$1.diffed=function(oe){v$1&&v$1(oe);var Y=oe.__c;Y&&Y.__H&&(Y.__H.__h.length&&(f$2.push(Y)!==1&&i$1===c$1.requestAnimationFrame||((i$1=c$1.requestAnimationFrame)||w$1)(j$2)),Y.__H.__.forEach(function(re){re.u&&(re.__H=re.u),re.u=void 0})),u$2=r$1=null},c$1.__c=function(oe,Y){Y.some(function(re){try{re.__h.forEach(z$1),re.__h=re.__h.filter(function(le){return!le.__||B$2(le)})}catch(le){Y.some(function(ue){ue.__h&&(ue.__h=[])}),Y=[],c$1.__e(le,re.__v)}}),l$1&&l$1(oe,Y)},c$1.unmount=function(oe){m$1&&m$1(oe);var Y,re=oe.__c;re&&re.__H&&(re.__H.__.forEach(function(le){try{z$1(le)}catch(ue){Y=ue}}),re.__H=void 0,Y&&c$1.__e(Y,re.__v))};var k$1=typeof requestAnimationFrame=="function";function w$1(oe){var Y,re=function(){clearTimeout(le),k$1&&cancelAnimationFrame(Y),setTimeout(oe)},le=setTimeout(re,35);k$1&&(Y=requestAnimationFrame(re))}function z$1(oe){var Y=r$1,re=oe.__c;typeof re=="function"&&(oe.__c=void 0,re()),r$1=Y}function B$2(oe){var Y=r$1;oe.__c=oe.__(),r$1=Y}function C(oe,Y){return!oe||oe.length!==Y.length||Y.some(function(re,le){return re!==oe[le]})}function D$1(oe,Y){return typeof Y=="function"?Y(oe):Y}function g$1(oe,Y){for(var re in Y)oe[re]=Y[re];return oe}function E$1(oe,Y){for(var re in oe)if(re!=="__source"&&!(re in Y))return!0;for(var le in Y)if(le!=="__source"&&oe[le]!==Y[le])return!0;return!1}function N$1(oe,Y){this.props=oe,this.context=Y}(N$1.prototype=new x).isPureReactComponent=!0,N$1.prototype.shouldComponentUpdate=function(oe,Y){return E$1(this.props,oe)||E$1(this.state,Y)};var T$1=l$2.__b;l$2.__b=function(oe){oe.type&&oe.type.__f&&oe.ref&&(oe.props.ref=oe.ref,oe.ref=null),T$1&&T$1(oe)};var U=l$2.__e;l$2.__e=function(oe,Y,re,le){if(oe.then){for(var ue,he=Y;he=he.__;)if((ue=he.__c)&&ue.__c)return Y.__e==null&&(Y.__e=re.__e,Y.__k=re.__k),ue.__c(oe,Y)}U(oe,Y,re,le)};var F$1=l$2.unmount;function V$1(oe,Y,re){return oe&&(oe.__c&&oe.__c.__H&&(oe.__c.__H.__.forEach(function(le){typeof le.__c=="function"&&le.__c()}),oe.__c.__H=null),(oe=g$1({},oe)).__c!=null&&(oe.__c.__P===re&&(oe.__c.__P=Y),oe.__c.__e=!0,oe.__c=null),oe.__k=oe.__k&&oe.__k.map(function(le){return V$1(le,Y,re)})),oe}function W$1(oe,Y,re){return oe&&re&&(oe.__v=null,oe.__k=oe.__k&&oe.__k.map(function(le){return W$1(le,Y,re)}),oe.__c&&oe.__c.__P===Y&&(oe.__e&&re.appendChild(oe.__e),oe.__c.__e=!0,oe.__c.__P=re)),oe}function P$1(){this.__u=0,this.o=null,this.__b=null}function j$1(oe){if(!oe.__)return null;var Y=oe.__.__c;return Y&&Y.__a&&Y.__a(oe)}function B$1(){this.i=null,this.l=null}l$2.unmount=function(oe){var Y=oe.__c;Y&&(Y.__z=!0),Y&&Y.__R&&Y.__R(),Y&&32&oe.__u&&(oe.type=null),F$1&&F$1(oe)},(P$1.prototype=new x).__c=function(oe,Y){var re=Y.__c,le=this;le.o==null&&(le.o=[]),le.o.push(re);var ue=j$1(le.__v),he=!1,fe=function(){he||le.__z||(he=!0,re.__R=null,ue?ue(ve):ve())};re.__R=fe;var _e=re.__P;re.__P=null;var ve=function(){if(!--le.__u){if(le.state.__a){var Se=le.state.__a;le.__v.__k[0]=W$1(Se,Se.__c.__P,Se.__c.__O)}var $e;for(le.setState({__a:le.__b=null});$e=le.o.pop();)$e.__P=_e,$e.forceUpdate()}};le.__u++||32&Y.__u||le.setState({__a:le.__b=le.__v.__k[0]}),oe.then(fe,fe)},P$1.prototype.componentWillUnmount=function(){this.o=[]},P$1.prototype.render=function(oe,Y){if(this.__b){if(this.__v.__k){var re=document.createElement("div"),le=this.__v.__k[0].__c;this.__v.__k[0]=V$1(this.__b,re,le.__O=le.__P)}this.__b=null}var ue=Y.__a&&_$1(k$2,null,oe.fallback);return ue&&(ue.__u&=-33),[_$1(k$2,null,Y.__a?null:oe.children),ue]};var H$1=function(oe,Y,re){if(++re[1]===re[0]&&oe.l.delete(Y),oe.props.revealOrder&&(oe.props.revealOrder[0]!=="t"||!oe.l.size))for(re=oe.i;re;){for(;re.length>3;)re.pop()();if(re[1]<re[0])break;oe.i=re=re[2]}};(B$1.prototype=new x).__a=function(oe){var Y=this,re=j$1(Y.__v),le=Y.l.get(oe);return le[0]++,function(ue){var he=function(){Y.props.revealOrder?(le.push(ue),H$1(Y,oe,le)):ue()};re?re(he):he()}},B$1.prototype.render=function(oe){this.i=null,this.l=new Map;var Y=H$2(oe.children);oe.revealOrder&&oe.revealOrder[0]==="b"&&Y.reverse();for(var re=Y.length;re--;)this.l.set(Y[re],this.i=[1,0,this.i]);return oe.children},B$1.prototype.componentDidUpdate=B$1.prototype.componentDidMount=function(){var oe=this;this.l.forEach(function(Y,re){H$1(oe,re,Y)})};var q$1=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,G=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,J$1=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,K$1=/[A-Z0-9]/g,Q$1=typeof document<"u",X$1=function(oe){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(oe)};function nn(oe,Y,re){return Y.__k==null&&(Y.textContent=""),G$1(oe,Y),typeof re=="function"&&re(),oe?oe.__c:null}x.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(oe){Object.defineProperty(x.prototype,oe,{configurable:!0,get:function(){return this["UNSAFE_"+oe]},set:function(Y){Object.defineProperty(this,oe,{configurable:!0,writable:!0,value:Y})}})});var en=l$2.event;function rn(){}function un(){return this.cancelBubble}function on(){return this.defaultPrevented}l$2.event=function(oe){return en&&(oe=en(oe)),oe.persist=rn,oe.isPropagationStopped=un,oe.isDefaultPrevented=on,oe.nativeEvent=oe};var cn={enumerable:!1,configurable:!0,get:function(){return this.class}},fn=l$2.vnode;l$2.vnode=function(oe){typeof oe.type=="string"&&(function(Y){var re=Y.props,le=Y.type,ue={},he=le.indexOf("-")===-1;for(var fe in re){var _e=re[fe];if(!(fe==="value"&&"defaultValue"in re&&_e==null||Q$1&&fe==="children"&&le==="noscript"||fe==="class"||fe==="className")){var ve=fe.toLowerCase();fe==="defaultValue"&&"value"in re&&re.value==null?fe="value":fe==="download"&&_e===!0?_e="":ve==="translate"&&_e==="no"?_e=!1:ve[0]==="o"&&ve[1]==="n"?ve==="ondoubleclick"?fe="ondblclick":ve!=="onchange"||le!=="input"&&le!=="textarea"||X$1(re.type)?ve==="onfocus"?fe="onfocusin":ve==="onblur"?fe="onfocusout":J$1.test(fe)&&(fe=ve):ve=fe="oninput":he&&G.test(fe)?fe=fe.replace(K$1,"-$&").toLowerCase():_e===null&&(_e=void 0),ve==="oninput"&&ue[fe=ve]&&(fe="oninputCapture"),ue[fe]=_e}}le=="select"&&ue.multiple&&Array.isArray(ue.value)&&(ue.value=H$2(re.children).forEach(function(Se){Se.props.selected=ue.value.indexOf(Se.props.value)!=-1})),le=="select"&&ue.defaultValue!=null&&(ue.value=H$2(re.children).forEach(function(Se){Se.props.selected=ue.multiple?ue.defaultValue.indexOf(Se.props.value)!=-1:ue.defaultValue==Se.props.value})),re.class&&!re.className?(ue.class=re.class,Object.defineProperty(ue,"className",cn)):(re.className&&!re.class||re.class&&re.className)&&(ue.class=ue.className=re.className),Y.props=ue})(oe),oe.$$typeof=q$1,fn&&fn(oe)};var an=l$2.__r;l$2.__r=function(oe){an&&an(oe),oe.__c};var sn=l$2.diffed;l$2.diffed=function(oe){sn&&sn(oe);var Y=oe.props,re=oe.__e;re!=null&&oe.type==="textarea"&&"value"in Y&&Y.value!==re.value&&(re.value=Y.value==null?"":Y.value)};function debounce$1(oe){let Y=null,re;return(...le)=>(re=le,Y||(Y=Promise.resolve().then(()=>(Y=null,oe(...re)))),Y)}var Gt;const nr=class nr extends BasePlugin{constructor(){super(...arguments);Ze(this,Gt);Be(this,"isTargetDOMEl");Be(this,"el");Be(this,"parent");Be(this,"title")}getTargetPlugin(re){let le;if(typeof re?.addTarget=="function")le=re,le instanceof nr||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:le,UIPlugin:nr}}));else if(typeof re=="function"){const ue=re;this.uppy.iteratePlugins(he=>{he instanceof ue&&(le=he)})}return le}mount(re,le){const ue=le.id,he=findDOMElement(re);if(he){this.isTargetDOMEl=!0;const ve=document.createElement("div");return ve.classList.add("uppy-Root"),rt(this,Gt,debounce$1(Se=>{this.uppy.getPlugin(this.id)&&(nn(this.render(Se,ve),ve),this.afterUpdate())})),this.uppy.log(`Installing ${ue} to a DOM element '${re}'`),this.opts.replaceTargetContent&&(he.innerHTML=""),nn(this.render(this.uppy.getState(),ve),ve),this.el=ve,he.appendChild(ve),ve.dir=this.opts.direction||getTextDirection(ve)||"ltr",this.onMount(),this.el}const fe=this.getTargetPlugin(re);if(fe)return this.uppy.log(`Installing ${ue} to ${fe.id}`),this.parent=fe,this.el=fe.addTarget(le),this.onMount(),this.el;this.uppy.log(`Not installing ${ue}`);let _e=`Invalid target option given to ${ue}.`;throw typeof re=="function"?_e+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":_e+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(_e)}render(re,le){throw new Error("Extend the render method to add your plugin to a DOM element")}update(re){var le;this.el!=null&&((le=Me(this,Gt))==null||le.call(this,re))}unmount(){this.isTargetDOMEl&&this.el?.remove(),this.onUnmount()}onMount(){}onUnmount(){}};Gt=new WeakMap;let UIPlugin=nr;const version$7="4.3.2",packageJson$6={version:version$7};var kt,ir,Ar;class DefaultStore{constructor(){Ze(this,ir);Be(this,"state",{});Ze(this,kt,new Set)}getState(){return this.state}setState(Y){const re={...this.state},le={...this.state,...Y};this.state=le,Ke(this,ir,Ar).call(this,re,le,Y)}subscribe(Y){return Me(this,kt).add(Y),()=>{Me(this,kt).delete(Y)}}}kt=new WeakMap,ir=new WeakSet,Ar=function(...Y){Me(this,kt).forEach(re=>{re(...Y)})},Be(DefaultStore,"VERSION",packageJson$6.version);function getFileNameAndExtension(oe){const Y=oe.lastIndexOf(".");return Y===-1||Y===oe.length-1?{name:oe,extension:void 0}:{name:oe.slice(0,Y),extension:oe.slice(Y+1)}}const mimeTypes={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function getFileType(oe){if(oe.type)return oe.type;const Y=oe.name?getFileNameAndExtension(oe.name).extension?.toLowerCase():null;return Y&&Y in mimeTypes?mimeTypes[Y]:"application/octet-stream"}function encodeCharacter(oe){return oe.charCodeAt(0).toString(32)}function encodeFilename(oe){let Y="";return oe.replace(/[^A-Z0-9]/gi,re=>(Y+=`-${encodeCharacter(re)}`,"/"))+Y}function generateFileID(oe,Y){let re=Y||"uppy";return typeof oe.name=="string"&&(re+=`-${encodeFilename(oe.name.toLowerCase())}`),oe.type!==void 0&&(re+=`-${oe.type}`),oe.meta&&typeof oe.meta.relativePath=="string"&&(re+=`-${encodeFilename(oe.meta.relativePath.toLowerCase())}`),oe.data.size!==void 0&&(re+=`-${oe.data.size}`),oe.data.lastModified!==void 0&&(re+=`-${oe.data.lastModified}`),re}function hasFileStableId(oe){return!oe.isRemote||!oe.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(oe.remote.provider)}function getSafeFileId(oe,Y){if(hasFileStableId(oe))return oe.id;const re=getFileType(oe);return generateFileID({...oe,type:re},Y)}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function oe(Y){var re=typeof Y;return Y!=null&&(re=="object"||re=="function")}return isObject_1=oe,isObject_1}var _freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var oe=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal=oe,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var oe=require_freeGlobal(),Y=typeof self=="object"&&self&&self.Object===Object&&self,re=oe||Y||Function("return this")();return _root=re,_root}var now_1,hasRequiredNow;function requireNow(){if(hasRequiredNow)return now_1;hasRequiredNow=1;var oe=require_root(),Y=function(){return oe.Date.now()};return now_1=Y,now_1}var _trimmedEndIndex,hasRequired_trimmedEndIndex;function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var oe=/\s/;function Y(re){for(var le=re.length;le--&&oe.test(re.charAt(le)););return le}return _trimmedEndIndex=Y,_trimmedEndIndex}var _baseTrim,hasRequired_baseTrim;function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var oe=require_trimmedEndIndex(),Y=/^\s+/;function re(le){return le&&le.slice(0,oe(le)+1).replace(Y,"")}return _baseTrim=re,_baseTrim}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var oe=require_root(),Y=oe.Symbol;return _Symbol=Y,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var oe=require_Symbol(),Y=Object.prototype,re=Y.hasOwnProperty,le=Y.toString,ue=oe?oe.toStringTag:void 0;function he(fe){var _e=re.call(fe,ue),ve=fe[ue];try{fe[ue]=void 0;var Se=!0}catch{}var $e=le.call(fe);return Se&&(_e?fe[ue]=ve:delete fe[ue]),$e}return _getRawTag=he,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var oe=Object.prototype,Y=oe.toString;function re(le){return Y.call(le)}return _objectToString=re,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var oe=require_Symbol(),Y=require_getRawTag(),re=require_objectToString(),le="[object Null]",ue="[object Undefined]",he=oe?oe.toStringTag:void 0;function fe(_e){return _e==null?_e===void 0?ue:le:he&&he in Object(_e)?Y(_e):re(_e)}return _baseGetTag=fe,_baseGetTag}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function oe(Y){return Y!=null&&typeof Y=="object"}return isObjectLike_1=oe,isObjectLike_1}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var oe=require_baseGetTag(),Y=requireIsObjectLike(),re="[object Symbol]";function le(ue){return typeof ue=="symbol"||Y(ue)&&oe(ue)==re}return isSymbol_1=le,isSymbol_1}var toNumber_1,hasRequiredToNumber;function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var oe=require_baseTrim(),Y=requireIsObject(),re=requireIsSymbol(),le=NaN,ue=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,fe=/^0o[0-7]+$/i,_e=parseInt;function ve(Se){if(typeof Se=="number")return Se;if(re(Se))return le;if(Y(Se)){var $e=typeof Se.valueOf=="function"?Se.valueOf():Se;Se=Y($e)?$e+"":$e}if(typeof Se!="string")return Se===0?Se:+Se;Se=oe(Se);var Ee=he.test(Se);return Ee||fe.test(Se)?_e(Se.slice(2),Ee?2:8):ue.test(Se)?le:+Se}return toNumber_1=ve,toNumber_1}var debounce_1,hasRequiredDebounce;function requireDebounce(){if(hasRequiredDebounce)return debounce_1;hasRequiredDebounce=1;var oe=requireIsObject(),Y=requireNow(),re=requireToNumber(),le="Expected a function",ue=Math.max,he=Math.min;function fe(_e,ve,Se){var $e,Ee,Ce,Ue,xe,Ne,Ie=0,qe=!1,Te=!1,Re=!0;if(typeof _e!="function")throw new TypeError(le);ve=re(ve)||0,oe(Se)&&(qe=!!Se.leading,Te="maxWait"in Se,Ce=Te?ue(re(Se.maxWait)||0,ve):Ce,Re="trailing"in Se?!!Se.trailing:Re);function De(Ve){var st=$e,at=Ee;return $e=Ee=void 0,Ie=Ve,Ue=_e.apply(at,st),Ue}function Le(Ve){return Ie=Ve,xe=setTimeout(Ye,ve),qe?De(Ve):Ue}function Ge(Ve){var st=Ve-Ne,at=Ve-Ie,Ae=ve-st;return Te?he(Ae,Ce-at):Ae}function ze(Ve){var st=Ve-Ne,at=Ve-Ie;return Ne===void 0||st>=ve||st<0||Te&&at>=Ce}function Ye(){var Ve=Y();if(ze(Ve))return Xe(Ve);xe=setTimeout(Ye,Ge(Ve))}function Xe(Ve){return xe=void 0,Re&&$e?De(Ve):($e=Ee=void 0,Ue)}function it(){xe!==void 0&&clearTimeout(xe),Ie=0,$e=Ne=Ee=xe=void 0}function nt(){return xe===void 0?Ue:Xe(Y())}function ot(){var Ve=Y(),st=ze(Ve);if($e=arguments,Ee=this,Ne=Ve,st){if(xe===void 0)return Le(Ne);if(Te)return clearTimeout(xe),xe=setTimeout(Ye,ve),De(Ne)}return xe===void 0&&(xe=setTimeout(Ye,ve)),Ue}return ot.cancel=it,ot.flush=nt,ot}return debounce_1=fe,debounce_1}var throttle_1,hasRequiredThrottle;function requireThrottle(){if(hasRequiredThrottle)return throttle_1;hasRequiredThrottle=1;var oe=requireDebounce(),Y=requireIsObject(),re="Expected a function";function le(ue,he,fe){var _e=!0,ve=!0;if(typeof ue!="function")throw new TypeError(re);return Y(fe)&&(_e="leading"in fe?!!fe.leading:_e,ve="trailing"in fe?!!fe.trailing:ve),oe(ue,he,{leading:_e,maxWait:he,trailing:ve})}return throttle_1=le,throttle_1}var throttleExports=requireThrottle();const throttle=getDefaultExportFromCjs(throttleExports);var namespaceEmitter,hasRequiredNamespaceEmitter;function requireNamespaceEmitter(){return hasRequiredNamespaceEmitter||(hasRequiredNamespaceEmitter=1,namespaceEmitter=function(){var Y={},re=Y._fns={};Y.emit=function(fe,_e,ve,Se,$e,Ee,Ce){var Ue=le(fe);Ue.length&&ue(fe,Ue,[_e,ve,Se,$e,Ee,Ce])},Y.on=function(fe,_e){re[fe]||(re[fe]=[]),re[fe].push(_e)},Y.once=function(fe,_e){function ve(){_e.apply(this,arguments),Y.off(fe,ve)}this.on(fe,ve)},Y.off=function(fe,_e){var ve=[];if(fe&&_e){var Se=this._fns[fe],$e=0,Ee=Se?Se.length:0;for($e;$e<Ee;$e++)Se[$e]!==_e&&ve.push(Se[$e])}ve.length?this._fns[fe]=ve:delete this._fns[fe]};function le(he){var fe=re[he]?re[he]:[],_e=he.indexOf(":"),ve=_e===-1?[he]:[he.substring(0,_e),he.substring(_e+1)],Se=Object.keys(re),$e=0,Ee=Se.length;for($e;$e<Ee;$e++){var Ce=Se[$e];if(Ce==="*"&&(fe=fe.concat(re[Ce])),ve.length===2&&ve[0]===Ce){fe=fe.concat(re[Ce]);break}}return fe}function ue(he,fe,_e){var ve=0,Se=fe.length;for(ve;ve<Se&&fe[ve];ve++)fe[ve].event=he,fe[ve].apply(fe[ve],_e)}return Y}),namespaceEmitter}var namespaceEmitterExports=requireNamespaceEmitter();const ee$1=getDefaultExportFromCjs(namespaceEmitterExports);let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",nanoid=(oe=21)=>{let Y="",re=oe|0;for(;re--;)Y+=urlAlphabet[Math.random()*64|0];return Y};const version$6="4.5.3",packageJson$5={version:version$6};function getFileName(oe,Y){return Y.name?Y.name:oe.split("/")[0]==="image"?`${oe.split("/")[0]}.${oe.split("/")[1]}`:"noname"}const locale$3={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var prettierBytes$1,hasRequiredPrettierBytes;function requirePrettierBytes(){return hasRequiredPrettierBytes||(hasRequiredPrettierBytes=1,prettierBytes$1=function(Y){if(typeof Y!="number"||Number.isNaN(Y))throw new TypeError(`Expected a number, got ${typeof Y}`);const re=Y<0;let le=Math.abs(Y);if(re&&(le=-le),le===0)return"0 B";const ue=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],he=Math.min(Math.floor(Math.log(le)/Math.log(1024)),ue.length-1),fe=Number(le/1024**he),_e=ue[he];return`${fe>=10||fe%1===0?Math.round(fe):fe.toFixed(1)} ${_e}`}),prettierBytes$1}var prettierBytesExports=requirePrettierBytes();const prettierBytes=getDefaultExportFromCjs(prettierBytesExports);var wildcard,hasRequiredWildcard;function requireWildcard(){if(hasRequiredWildcard)return wildcard;hasRequiredWildcard=1;function oe(Y,re){this.text=Y=Y||"",this.hasWild=~Y.indexOf("*"),this.separator=re,this.parts=Y.split(re)}return oe.prototype.match=function(Y){var re=!0,le=this.parts,ue,he=le.length,fe;if(typeof Y=="string"||Y instanceof String)if(!this.hasWild&&this.text!=Y)re=!1;else{for(fe=(Y||"").split(this.separator),ue=0;re&&ue<he;ue++)le[ue]!=="*"&&(ue<fe.length?re=le[ue]===fe[ue]:re=!1);re=re&&fe}else if(typeof Y.splice=="function")for(re=[],ue=Y.length;ue--;)this.match(Y[ue])&&(re[re.length]=Y[ue]);else if(typeof Y=="object"){re={};for(var _e in Y)this.match(_e)&&(re[_e]=Y[_e])}return re},wildcard=function(Y,re,le){var ue=new oe(Y,le||/[\/\.]/);return typeof re<"u"?ue.match(re):ue},wildcard}var mimeMatch,hasRequiredMimeMatch;function requireMimeMatch(){if(hasRequiredMimeMatch)return mimeMatch;hasRequiredMimeMatch=1;var oe=requireWildcard(),Y=/[\/\+\.]/;return mimeMatch=function(re,le){function ue(he){var fe=oe(he,re,Y);return fe&&fe.length>=2}return le?ue(le.split(";")[0]):ue},mimeMatch}var mimeMatchExports=requireMimeMatch();const match=getDefaultExportFromCjs(mimeMatchExports),defaultOptions$6={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class RestrictionError extends Error{constructor(re,le){super(re);Be(this,"isUserFacing");Be(this,"file");Be(this,"isRestriction",!0);this.isUserFacing=le?.isUserFacing??!0,le?.file&&(this.file=le.file)}}class Restricter{constructor(Y,re){Be(this,"getI18n");Be(this,"getOpts");this.getI18n=re,this.getOpts=()=>{const le=Y();if(le.restrictions?.allowedFileTypes!=null&&!Array.isArray(le.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return le}}validateAggregateRestrictions(Y,re){const{maxTotalFileSize:le,maxNumberOfFiles:ue}=this.getOpts().restrictions;if(ue&&Y.filter(fe=>!fe.isGhost).length+re.length>ue)throw new RestrictionError(`${this.getI18n()("youCanOnlyUploadX",{smart_count:ue})}`);if(le){const he=[...Y,...re].reduce((fe,_e)=>fe+(_e.size??0),0);if(he>le)throw new RestrictionError(this.getI18n()("aggregateExceedsSize",{sizeAllowed:prettierBytes(le),size:prettierBytes(he)}))}}validateSingleFile(Y){const{maxFileSize:re,minFileSize:le,allowedFileTypes:ue}=this.getOpts().restrictions;if(ue&&!ue.some(fe=>fe.includes("/")?Y.type?match(Y.type.replace(/;.*?$/,""),fe):!1:fe[0]==="."&&Y.extension?Y.extension.toLowerCase()===fe.slice(1).toLowerCase():!1)){const fe=ue.join(", ");throw new RestrictionError(this.getI18n()("youCanOnlyUploadFileTypes",{types:fe}),{file:Y})}if(re&&Y.size!=null&&Y.size>re)throw new RestrictionError(this.getI18n()("exceedsSize",{size:prettierBytes(re),file:Y.name??this.getI18n()("unnamed")}),{file:Y});if(le&&Y.size!=null&&Y.size<le)throw new RestrictionError(this.getI18n()("inferiorSize",{size:prettierBytes(le)}),{file:Y})}validate(Y,re){re.forEach(le=>{this.validateSingleFile(le)}),this.validateAggregateRestrictions(Y,re)}validateMinNumberOfFiles(Y){const{minNumberOfFiles:re}=this.getOpts().restrictions;if(re&&Object.keys(Y).length<re)throw new RestrictionError(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:re}))}getMissingRequiredMetaFields(Y){const re=new RestrictionError(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:Y.name??this.getI18n()("unnamed")})),{requiredMetaFields:le}=this.getOpts().restrictions,ue=[];for(const he of le)(!Object.hasOwn(Y.meta,he)||Y.meta[he]==="")&&ue.push(he);return{missingFields:ue,error:re}}}function supportsUploadProgress(oe){if(oe==null&&typeof navigator<"u"&&(oe=navigator.userAgent),!oe)return!0;const Y=/Edge\/(\d+\.\d+)/.exec(oe);if(!Y)return!0;const le=Y[1].split(".",2),ue=parseInt(le[0],10),he=parseInt(le[1],10);return ue<15||ue===15&&he<15063||ue>18||ue===18&&he>=18218}const defaultUploadState={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var pt,ft,Kt,xt,Ut,Nt,Tt,Je,Ft,gr,Or,yr,kr,br,_r,vr,wr,sr,Sr,Pt,Ur,Nr,wt,Xt,jt,Ir,rr,qt;const or=class or{constructor(Y){Ze(this,Je);Ze(this,pt,Object.create(null));Ze(this,ft);Ze(this,Kt);Ze(this,xt,ee$1());Ze(this,Ut,new Set);Ze(this,Nt,new Set);Ze(this,Tt,new Set);Be(this,"defaultLocale");Be(this,"locale");Be(this,"opts");Be(this,"store");Be(this,"i18n");Be(this,"i18nArray");Be(this,"scheduledAutoProceed",null);Be(this,"wasOffline",!1);Ze(this,sr,(Y,re)=>{const le=Y?this.getFile(Y.id):void 0;if(Y==null||!le){this.log(`Not setting progress for a file that has been removed: ${Y?.id}`);return}if(le.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${Y.id}`);return}const ue={bytesTotal:re.bytesTotal,percentage:re.bytesTotal!=null&&Number.isFinite(re.bytesTotal)&&re.bytesTotal>0?Math.round(re.bytesUploaded/re.bytesTotal*100):void 0};le.progress.uploadStarted!=null?this.setFileState(Y.id,{progress:{...le.progress,...ue,bytesUploaded:re.bytesUploaded}}):this.setFileState(Y.id,{progress:{...le.progress,...ue}}),Me(this,Pt).call(this)});Ze(this,Pt,throttle(()=>Ke(this,Je,Sr).call(this),500,{leading:!0,trailing:!0}));Ze(this,wt,this.updateOnlineStatus.bind(this));Ze(this,Xt,new Map);this.defaultLocale=locale$3;const re={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:defaultOptions$6,meta:{},onBeforeFileAdded:(ue,he)=>!Object.hasOwn(he,ue.id),onBeforeUpload:ue=>ue,store:new DefaultStore,logger:justErrorsLogger,infoTimeout:5e3},le={...re,...Y};this.opts={...le,restrictions:{...re.restrictions,...Y?.restrictions}},Y?.logger&&Y.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):Y?.debug&&(this.opts.logger=debugLogger),this.log(`Using Core v${or.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...defaultUploadState,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:supportsUploadProgress(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),rt(this,ft,new Restricter(()=>this.opts,()=>this.i18n)),rt(this,Kt,this.store.subscribe((ue,he,fe)=>{this.emit("state-update",ue,he,fe),this.updateAll(he)})),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),Ke(this,Je,Nr).call(this)}emit(Y,...re){Me(this,xt).emit(Y,...re)}on(Y,re){return Me(this,xt).on(Y,re),this}once(Y,re){return Me(this,xt).once(Y,re),this}off(Y,re){return Me(this,xt).off(Y,re),this}updateAll(Y){this.iteratePlugins(re=>{re.update(Y)})}setState(Y){this.store.setState(Y)}getState(){return this.store.getState()}patchFilesState(Y){const re=this.getState().files;this.setState({files:{...re,...Object.fromEntries(Object.entries(Y).map(([le,ue])=>[le,{...re[le],...ue}]))}})}setFileState(Y,re){if(!this.getState().files[Y])throw new Error(`Cant set state for ${Y} (the file could have been removed)`);this.patchFilesState({[Y]:re})}i18nInit(){const Y=le=>this.log(`Missing i18n string: ${le}`,"error"),re=new Translator([this.defaultLocale,this.opts.locale],{onMissingKey:Y});this.i18n=re.translate.bind(re),this.i18nArray=re.translateArray.bind(re),this.locale=re.locale}setOptions(Y){this.opts={...this.opts,...Y,restrictions:{...this.opts.restrictions,...Y?.restrictions}},Y.meta&&this.setMeta(Y.meta),this.i18nInit(),Y.locale&&this.iteratePlugins(re=>{re.setOptions(Y)}),this.setState(void 0)}resetProgress(){const Y={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},re={...this.getState().files},le=Object.create(null);Object.keys(re).forEach(ue=>{le[ue]={...re[ue],progress:{...re[ue].progress,...Y},tus:void 0,transloadit:void 0}}),this.setState({files:le,...defaultUploadState})}clear(){const{capabilities:Y,currentUploads:re}=this.getState();if(Object.keys(re).length>0&&!Y.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...defaultUploadState,files:{}})}addPreProcessor(Y){Me(this,Ut).add(Y)}removePreProcessor(Y){return Me(this,Ut).delete(Y)}addPostProcessor(Y){Me(this,Tt).add(Y)}removePostProcessor(Y){return Me(this,Tt).delete(Y)}addUploader(Y){Me(this,Nt).add(Y)}removeUploader(Y){return Me(this,Nt).delete(Y)}setMeta(Y){const re={...this.getState().meta,...Y},le={...this.getState().files};Object.keys(le).forEach(ue=>{le[ue]={...le[ue],meta:{...le[ue].meta,...Y}}}),this.log("Adding metadata:"),this.log(Y),this.setState({meta:re,files:le})}setFileMeta(Y,re){const le={...this.getState().files};if(!le[Y]){this.log(`Was trying to set metadata for a file that has been removed: ${Y}`);return}const ue={...le[Y].meta,...re};le[Y]={...le[Y],meta:ue},this.setState({files:le})}getFile(Y){return this.getState().files[Y]}getFiles(){const{files:Y}=this.getState();return Object.values(Y)}getFilesByIds(Y){return Y.map(re=>this.getFile(re))}getObjectOfFilesPerState(){const{files:Y,totalProgress:re,error:le}=this.getState(),ue=Object.values(Y),he=[],fe=[],_e=[],ve=[],Se=[],$e=[],Ee=[],Ce=[],Ue=[];for(const xe of ue){const{progress:Ne}=xe;!Ne.uploadComplete&&Ne.uploadStarted&&(he.push(xe),xe.isPaused||Ce.push(xe)),Ne.uploadStarted||fe.push(xe),(Ne.uploadStarted||Ne.preprocess||Ne.postprocess)&&_e.push(xe),Ne.uploadStarted&&ve.push(xe),xe.isPaused&&Se.push(xe),Ne.uploadComplete&&$e.push(xe),xe.error&&Ee.push(xe),(Ne.preprocess||Ne.postprocess)&&Ue.push(xe)}return{newFiles:fe,startedFiles:_e,uploadStartedFiles:ve,pausedFiles:Se,completeFiles:$e,erroredFiles:Ee,inProgressFiles:he,inProgressNotPausedFiles:Ce,processingFiles:Ue,isUploadStarted:ve.length>0,isAllComplete:re===100&&$e.length===ue.length&&Ue.length===0,isAllErrored:!!le&&Ee.length===ue.length,isAllPaused:he.length!==0&&Se.length===he.length,isUploadInProgress:he.length>0,isSomeGhost:ue.some(xe=>xe.isGhost)}}validateRestrictions(Y,re=this.getFiles()){try{Me(this,ft).validate(re,[Y])}catch(le){return le}return null}validateSingleFile(Y){try{Me(this,ft).validateSingleFile(Y)}catch(re){return re.message}return null}validateAggregateRestrictions(Y){const re=this.getFiles();try{Me(this,ft).validateAggregateRestrictions(re,Y)}catch(le){return le.message}return null}checkIfFileAlreadyExists(Y){const{files:re}=this.getState();return!!(re[Y]&&!re[Y].isGhost)}addFile(Y){Ke(this,Je,yr).call(this,Y);const{nextFilesState:re,validFilesToAdd:le,errors:ue}=Ke(this,Je,_r).call(this,[Y]),he=ue.filter(_e=>_e.isRestriction);if(Ke(this,Je,Ft).call(this,he),ue.length>0)throw ue[0];this.setState({files:re});const[fe]=le;return this.emit("file-added",fe),this.emit("files-added",le),this.log(`Added file: ${fe.name}, ${fe.id}, mime type: ${fe.type}`),Ke(this,Je,br).call(this),fe.id}addFiles(Y){Ke(this,Je,yr).call(this);const{nextFilesState:re,validFilesToAdd:le,errors:ue}=Ke(this,Je,_r).call(this,Y),he=ue.filter(_e=>_e.isRestriction);Ke(this,Je,Ft).call(this,he);const fe=ue.filter(_e=>!_e.isRestriction);if(fe.length>0){let _e=`Multiple errors occurred while adding files:
`;if(fe.forEach(ve=>{_e+=`
 * ${ve.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:fe.length}),details:_e},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(fe,_e);{const ve=new Error(_e);throw ve.errors=fe,ve}}this.setState({files:re}),le.forEach(_e=>{this.emit("file-added",_e)}),this.emit("files-added",le),le.length>5?this.log(`Added batch of ${le.length} files`):Object.values(le).forEach(_e=>{this.log(`Added file: ${_e.name}
 id: ${_e.id}
 type: ${_e.type}`)}),le.length>0&&Ke(this,Je,br).call(this)}removeFiles(Y){const{files:re,currentUploads:le}=this.getState(),ue={...re},he={...le},fe=Object.create(null);Y.forEach($e=>{re[$e]&&(fe[$e]=re[$e],delete ue[$e])});function _e($e){return fe[$e]===void 0}Object.keys(he).forEach($e=>{const Ee=le[$e].fileIDs.filter(_e);if(Ee.length===0){delete he[$e];return}const{capabilities:Ce}=this.getState();if(Ee.length!==le[$e].fileIDs.length&&!Ce.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");he[$e]={...le[$e],fileIDs:Ee}});const ve={currentUploads:he,files:ue};Object.keys(ue).length===0&&(ve.allowNewUpload=!0,ve.error=null,ve.recoveredState=null),this.setState(ve),Me(this,Pt).call(this);const Se=Object.keys(fe);Se.forEach($e=>{this.emit("file-removed",fe[$e])}),Se.length>5?this.log(`Removed ${Se.length} files`):this.log(`Removed files: ${Se.join(", ")}`)}removeFile(Y){this.removeFiles([Y])}pauseResume(Y){if(!this.getState().capabilities.resumableUploads||this.getFile(Y).progress.uploadComplete)return;const re=this.getFile(Y),ue=!(re.isPaused||!1);return this.setFileState(Y,{isPaused:ue}),this.emit("upload-pause",re,ue),ue}pauseAll(){const Y={...this.getState().files};Object.keys(Y).filter(le=>!Y[le].progress.uploadComplete&&Y[le].progress.uploadStarted).forEach(le=>{const ue={...Y[le],isPaused:!0};Y[le]=ue}),this.setState({files:Y}),this.emit("pause-all")}resumeAll(){const Y={...this.getState().files};Object.keys(Y).filter(le=>!Y[le].progress.uploadComplete&&Y[le].progress.uploadStarted).forEach(le=>{const ue={...Y[le],isPaused:!1,error:null};Y[le]=ue}),this.setState({files:Y}),this.emit("resume-all")}async retryAll(){const Y=await Ke(this,Je,wr).call(this);return this.emit("complete",Y),Y}cancelAll(){this.emit("cancel-all");const{files:Y}=this.getState(),re=Object.keys(Y);re.length&&this.removeFiles(re),this.setState(defaultUploadState)}retryUpload(Y){this.setFileState(Y,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(Y));const re=Ke(this,Je,jt).call(this,[Y],{forceAllowNewUpload:!0});return Ke(this,Je,qt).call(this,re)}logout(){this.iteratePlugins(Y=>{Y.provider?.logout?.()})}[Symbol.for("uppy test: updateTotalProgress")](){return Ke(this,Je,Sr).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(Y,...re){if(typeof Y!="function"){const fe=`Expected a plugin class, but got ${Y===null?"null":typeof Y}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(fe)}const le=new Y(this,...re),ue=le.id;if(!ue)throw new Error("Your plugin must have an id");if(!le.type)throw new Error("Your plugin must have a type");const he=this.getPlugin(ue);if(he){const fe=`Already found a plugin named '${he.id}'. Tried to use: '${ue}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(fe)}return Y.VERSION&&this.log(`Using ${ue} v${Y.VERSION}`),le.type in Me(this,pt)?Me(this,pt)[le.type].push(le):Me(this,pt)[le.type]=[le],le.install(),this.emit("plugin-added",le),this}getPlugin(Y){for(const re of Object.values(Me(this,pt))){const le=re.find(ue=>ue.id===Y);if(le!=null)return le}}[Symbol.for("uppy test: getPlugins")](Y){return Me(this,pt)[Y]}iteratePlugins(Y){Object.values(Me(this,pt)).flat(1).forEach(Y)}removePlugin(Y){this.log(`Removing plugin ${Y.id}`),this.emit("plugin-remove",Y),Y.uninstall&&Y.uninstall();const re=Me(this,pt)[Y.type],le=re.findIndex(fe=>fe.id===Y.id);le!==-1&&re.splice(le,1);const he={plugins:{...this.getState().plugins,[Y.id]:void 0}};this.setState(he)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),Me(this,Kt).call(this),this.iteratePlugins(Y=>{this.removePlugin(Y)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",Me(this,wt)),window.removeEventListener("offline",Me(this,wt)))}hideInfo(){const{info:Y}=this.getState();this.setState({info:Y.slice(1)}),this.emit("info-hidden")}info(Y,re="info",le=3e3){const ue=typeof Y=="object";this.setState({info:[...this.getState().info,{type:re,message:ue?Y.message:Y,details:ue?Y.details:null}]}),setTimeout(()=>this.hideInfo(),le),this.emit("info-visible")}log(Y,re){const{logger:le}=this.opts;switch(re){case"error":le.error(Y);break;case"warning":le.warn(Y);break;default:le.debug(Y);break}}registerRequestClient(Y,re){Me(this,Xt).set(Y,re)}getRequestClientForFile(Y){if(!Y.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${Y.id}`);const re=Me(this,Xt).get(Y.remote.requestClientId);if(re==null)throw new Error(`requestClientId "${Y.remote.requestClientId}" not registered for file "${Y.id}"`);return re}restore(Y){return this.log(`Core: attempting to restore upload "${Y}"`),this.getState().currentUploads[Y]?Ke(this,Je,qt).call(this,Y):(Ke(this,Je,rr).call(this,Y),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](...Y){return Ke(this,Je,jt).call(this,...Y)}addResultData(Y,re){if(!Ke(this,Je,Ir).call(this,Y)){this.log(`Not setting result for an upload that has been removed: ${Y}`);return}const{currentUploads:le}=this.getState(),ue={...le[Y],result:{...le[Y].result,...re}};this.setState({currentUploads:{...le,[Y]:ue}})}async upload(){Me(this,pt).uploader?.length||this.log("No uploader type plugins are used","warning");let{files:Y}=this.getState();if(Ke(this,Je,vr).call(this).length>0){const ue=await Ke(this,Je,wr).call(this);if(!(this.getFiles().filter(fe=>fe.progress.uploadStarted==null).length>0))return this.emit("complete",ue),ue;({files:Y}=this.getState())}const le=this.opts.onBeforeUpload(Y);return le===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(le&&typeof le=="object"&&(Y=le,this.setState({files:Y})),Promise.resolve().then(()=>Me(this,ft).validateMinNumberOfFiles(Y)).catch(ue=>{throw Ke(this,Je,Ft).call(this,[ue]),ue}).then(()=>{if(!Ke(this,Je,Or).call(this,Y))throw new RestrictionError(this.i18n("missingRequiredMetaField"))}).catch(ue=>{throw ue}).then(async()=>{const{currentUploads:ue}=this.getState(),he=Object.values(ue).flatMap(Se=>Se.fileIDs),fe=[];Object.keys(Y).forEach(Se=>{const $e=this.getFile(Se);!$e.progress.uploadStarted&&he.indexOf(Se)===-1&&fe.push($e.id)});const _e=Ke(this,Je,jt).call(this,fe),ve=await Ke(this,Je,qt).call(this,_e);return this.emit("complete",ve),ve}).catch(ue=>{throw this.emit("error",ue),this.log(ue,"error"),ue}))}};pt=new WeakMap,ft=new WeakMap,Kt=new WeakMap,xt=new WeakMap,Ut=new WeakMap,Nt=new WeakMap,Tt=new WeakMap,Je=new WeakSet,Ft=function(Y){for(const fe of Y)fe.isRestriction?this.emit("restriction-failed",fe.file,fe):this.emit("error",fe,fe.file),this.log(fe,"warning");const re=Y.filter(fe=>fe.isUserFacing),le=4,ue=re.slice(0,le),he=re.slice(le);ue.forEach(({message:fe,details:_e=""})=>{this.info({message:fe,details:_e},"error",this.opts.infoTimeout)}),he.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:he.length})})},gr=function(Y){const{missingFields:re,error:le}=Me(this,ft).getMissingRequiredMetaFields(Y);return re.length>0?(this.setFileState(Y.id,{missingRequiredMetaFields:re,error:le.message}),this.log(le.message),this.emit("restriction-failed",Y,le),!1):(re.length===0&&Y.missingRequiredMetaFields&&this.setFileState(Y.id,{missingRequiredMetaFields:[]}),!0)},Or=function(Y){let re=!0;for(const le of Object.values(Y))Ke(this,Je,gr).call(this,le)||(re=!1);return re},yr=function(Y){const{allowNewUpload:re}=this.getState();if(re===!1){const le=new RestrictionError(this.i18n("noMoreFilesAllowed"),{file:Y});throw Ke(this,Je,Ft).call(this,[le]),le}},kr=function(Y){const re=Y instanceof File?{name:Y.name,type:Y.type,size:Y.size,data:Y}:Y,le=getFileType(re),ue=getFileName(le,re),he=getFileNameAndExtension(ue).extension,fe=getSafeFileId(re,this.getID()),_e=re.meta||{};_e.name=ue,_e.type=le;const ve=Number.isFinite(re.data.size)?re.data.size:null;return{source:re.source||"",id:fe,name:ue,extension:he||"",meta:{...this.getState().meta,..._e},type:le,data:re.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:ve,uploadComplete:!1,uploadStarted:null},size:ve,isGhost:!1,isRemote:re.isRemote||!1,remote:re.remote,preview:re.preview}},br=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(Y=>{Y.isRestriction||this.log(Y.stack||Y.message||Y)})},4))},_r=function(Y){let{files:re}=this.getState(),le={...re};const ue=[],he=[];for(const fe of Y)try{let _e=Ke(this,Je,kr).call(this,fe);const ve=re[_e.id]?.isGhost;ve&&(_e={...re[_e.id],isGhost:!1,data:fe.data},this.log(`Replaced the blob in the restored ghost file: ${_e.name}, ${_e.id}`));const Se=this.opts.onBeforeFileAdded(_e,le);if(re=this.getState().files,le={...re,...le},!Se&&this.checkIfFileAlreadyExists(_e.id))throw new RestrictionError(this.i18n("noDuplicates",{fileName:_e.name??this.i18n("unnamed")}),{file:fe});if(Se===!1&&!ve)throw new RestrictionError("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:fe});typeof Se=="object"&&Se!==null&&(_e=Se),Me(this,ft).validateSingleFile(_e),le[_e.id]=_e,ue.push(_e)}catch(_e){he.push(_e)}try{Me(this,ft).validateAggregateRestrictions(Object.values(re),ue)}catch(fe){return he.push(fe),{nextFilesState:re,validFilesToAdd:[],errors:he}}return{nextFilesState:le,validFilesToAdd:ue,errors:he}},vr=function(){const{files:Y}=this.getState();return Object.keys(Y).filter(re=>{const le=Y[re];return le.error&&(!le.missingRequiredMetaFields||le.missingRequiredMetaFields.length===0)})},wr=async function(){const Y=Ke(this,Je,vr).call(this),re={...this.getState().files};if(Y.forEach(ue=>{re[ue]={...re[ue],isPaused:!1,error:null}}),this.setState({files:re,error:null}),this.emit("retry-all",this.getFilesByIds(Y)),Y.length===0)return{successful:[],failed:[]};const le=Ke(this,Je,jt).call(this,Y,{forceAllowNewUpload:!0});return Ke(this,Je,qt).call(this,le)},sr=new WeakMap,Sr=function(){const Y=Ke(this,Je,Ur).call(this);let re=null;Y!=null&&(re=Math.round(Y*100),re>100?re=100:re<0&&(re=0)),this.emit("progress",re??0),this.setState({totalProgress:re??0})},Pt=new WeakMap,Ur=function(){const re=this.getFiles().filter(ve=>ve.progress.uploadStarted||ve.progress.preprocess||ve.progress.postprocess);if(re.length===0)return 0;if(re.every(ve=>ve.progress.uploadComplete))return 1;const le=ve=>ve.progress.bytesTotal!=null&&ve.progress.bytesTotal!==0,ue=re.filter(le),he=re.filter(ve=>!le(ve));if(ue.every(ve=>ve.progress.uploadComplete)&&he.length>0&&!he.every(ve=>ve.progress.uploadComplete))return null;const fe=ue.reduce((ve,Se)=>ve+(Se.progress.bytesTotal??0),0),_e=ue.reduce((ve,Se)=>ve+(Se.progress.bytesUploaded||0),0);return fe===0?0:_e/fe},Nr=function(){const Y=(ue,he,fe)=>{let _e=ue.message||"Unknown error";ue.details&&(_e+=` ${ue.details}`),this.setState({error:_e}),he!=null&&he.id in this.getState().files&&this.setFileState(he.id,{error:_e,response:fe})};this.on("error",Y),this.on("upload-error",(ue,he,fe)=>{if(Y(he,ue,fe),typeof he=="object"&&he.message){this.log(he.message,"error");const _e=new Error(this.i18n("failedToUpload",{file:ue?.name??""}));_e.isUserFacing=!0,_e.details=he.message,he.details&&(_e.details+=` ${he.details}`),Ke(this,Je,Ft).call(this,[_e])}else Ke(this,Je,Ft).call(this,[he])});let re=null;this.on("upload-stalled",(ue,he)=>{const{message:fe}=ue,_e=he.map(ve=>ve.meta.name).join(", ");re||(this.info({message:fe,details:_e},"warning",this.opts.infoTimeout),re=setTimeout(()=>{re=null},this.opts.infoTimeout)),this.log(`${fe} ${_e}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const le=ue=>{const he=ue.filter(_e=>{const ve=_e!=null&&this.getFile(_e.id);return ve||this.log(`Not setting progress for a file that has been removed: ${_e?.id}`),ve}),fe=Object.fromEntries(he.map(_e=>[_e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:_e.size}}]));this.patchFilesState(fe)};this.on("upload-start",le),this.on("upload-progress",Me(this,sr)),this.on("upload-success",(ue,he)=>{if(ue==null||!this.getFile(ue.id)){this.log(`Not setting progress for a file that has been removed: ${ue?.id}`);return}const fe=this.getFile(ue.id).progress;this.setFileState(ue.id,{progress:{...fe,postprocess:Me(this,Tt).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:fe.bytesTotal},response:he,uploadURL:he.uploadURL,isPaused:!1}),ue.size==null&&this.setFileState(ue.id,{size:he.bytesUploaded||fe.bytesTotal}),Me(this,Pt).call(this)}),this.on("preprocess-progress",(ue,he)=>{if(ue==null||!this.getFile(ue.id)){this.log(`Not setting progress for a file that has been removed: ${ue?.id}`);return}this.setFileState(ue.id,{progress:{...this.getFile(ue.id).progress,preprocess:he}})}),this.on("preprocess-complete",ue=>{if(ue==null||!this.getFile(ue.id)){this.log(`Not setting progress for a file that has been removed: ${ue?.id}`);return}const he={...this.getState().files};he[ue.id]={...he[ue.id],progress:{...he[ue.id].progress}},delete he[ue.id].progress.preprocess,this.setState({files:he})}),this.on("postprocess-progress",(ue,he)=>{if(ue==null||!this.getFile(ue.id)){this.log(`Not setting progress for a file that has been removed: ${ue?.id}`);return}this.setFileState(ue.id,{progress:{...this.getState().files[ue.id].progress,postprocess:he}})}),this.on("postprocess-complete",ue=>{if(ue==null||!this.getFile(ue.id)){this.log(`Not setting progress for a file that has been removed: ${ue?.id}`);return}const he={...this.getState().files};he[ue.id]={...he[ue.id],progress:{...he[ue.id].progress}},delete he[ue.id].progress.postprocess,this.setState({files:he})}),this.on("restored",()=>{Me(this,Pt).call(this)}),this.on("dashboard:file-edit-complete",ue=>{ue&&Ke(this,Je,gr).call(this,ue)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",Me(this,wt)),window.addEventListener("offline",Me(this,wt)),setTimeout(Me(this,wt),3e3))},wt=new WeakMap,Xt=new WeakMap,jt=function(Y,re={}){const{forceAllowNewUpload:le=!1}=re,{allowNewUpload:ue,currentUploads:he}=this.getState();if(!ue&&!le)throw new Error("Cannot create a new upload: already uploading.");const fe=nanoid();return this.emit("upload",fe,this.getFilesByIds(Y)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...he,[fe]:{fileIDs:Y,step:0,result:{}}}}),fe},Ir=function(Y){const{currentUploads:re}=this.getState();return re[Y]},rr=function(Y){const re={...this.getState().currentUploads};delete re[Y],this.setState({currentUploads:re})},qt=async function(Y){const re=()=>{const{currentUploads:fe}=this.getState();return fe[Y]};let le=re();const ue=[...Me(this,Ut),...Me(this,Nt),...Me(this,Tt)];try{for(let fe=le.step||0;fe<ue.length&&le;fe++){const _e=ue[fe];this.setState({currentUploads:{...this.getState().currentUploads,[Y]:{...le,step:fe}}});const{fileIDs:ve}=le;await _e(ve,Y),le=re()}}catch(fe){throw Ke(this,Je,rr).call(this,Y),fe}if(le){le.fileIDs.forEach(Se=>{const $e=this.getFile(Se);$e?.progress.postprocess&&this.emit("postprocess-complete",$e)});const fe=le.fileIDs.map(Se=>this.getFile(Se)),_e=fe.filter(Se=>!Se.error),ve=fe.filter(Se=>Se.error);this.addResultData(Y,{successful:_e,failed:ve,uploadID:Y}),le=re()}let he;return le&&(he=le.result,Ke(this,Je,rr).call(this,Y)),he==null&&(this.log(`Not setting result for an upload that has been removed: ${Y}`),he={successful:[],failed:[],uploadID:Y}),he},Be(or,"VERSION",packageJson$5.version);let Uppy=or;var f$1=0;function u$1(oe,Y,re,le,ue,he){Y||(Y={});var fe,_e,ve=Y;if("ref"in ve)for(_e in ve={},Y)_e=="ref"?fe=Y[_e]:ve[_e]=Y[_e];var Se={type:oe,props:ve,key:re,ref:fe,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--f$1,__i:-1,__u:0,__source:ue,__self:he};if(typeof oe=="function"&&(fe=oe.defaultProps))for(_e in fe)ve[_e]===void 0&&(ve[_e]=fe[_e]);return l$2.vnode&&l$2.vnode(Se),Se}const version$5="4.3.2",packageJson$4={version:version$5},TRANSITION_MS=300;class FadeIn extends x{constructor(){super(...arguments);Be(this,"ref",b$1())}componentWillEnter(re){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(re,TRANSITION_MS)}componentWillLeave(re){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(re,TRANSITION_MS)}render(){const{children:re}=this.props;return u$1("div",{className:"uppy-Informer-animated",ref:this.ref,children:re})}}function assign(oe,Y){return Object.assign(oe,Y)}function getKey(oe,Y){return oe?.key??Y}function linkRef(oe,Y){const re=oe._ptgLinkedRefs||(oe._ptgLinkedRefs={});return re[Y]||(re[Y]=le=>{oe.refs[Y]=le})}function getChildMapping(oe){const Y={};for(let re=0;re<oe.length;re++)if(oe[re]!=null){const le=getKey(oe[re],re.toString(36));Y[le]=oe[re]}return Y}function mergeChildMappings(oe,Y){oe=oe||{},Y=Y||{};const re=fe=>Object.hasOwn(Y,fe)?Y[fe]:oe[fe],le={};let ue=[];for(const fe in oe)Object.hasOwn(Y,fe)?ue.length&&(le[fe]=ue,ue=[]):ue.push(fe);const he={};for(const fe in Y){if(Object.hasOwn(le,fe))for(let _e=0;_e<le[fe].length;_e++){const ve=le[fe][_e];he[le[fe][_e]]=re(ve)}he[fe]=re(fe)}for(let fe=0;fe<ue.length;fe++)he[ue[fe]]=re(ue[fe]);return he}const identity=oe=>oe;class TransitionGroup extends x{constructor(Y,re){super(Y,re),this.refs={},this.state={children:getChildMapping(H$2(H$2(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const Y=this.state.children;for(const re in Y)Y[re]&&this.performAppear(re)}componentWillReceiveProps(Y){const re=getChildMapping(H$2(Y.children)||[]),le=this.state.children;this.setState(he=>({children:mergeChildMappings(he.children,re)}));let ue;for(ue in re)if(Object.hasOwn(re,ue)){const he=le&&Object.hasOwn(le,ue);re[ue]&&he&&this.currentlyTransitioningKeys[ue]?(this.keysToEnter.push(ue),this.keysToAbortLeave.push(ue)):re[ue]&&!he&&!this.currentlyTransitioningKeys[ue]&&this.keysToEnter.push(ue)}for(ue in le)if(Object.hasOwn(le,ue)){const he=re&&Object.hasOwn(re,ue);le[ue]&&!he&&!this.currentlyTransitioningKeys[ue]&&this.keysToLeave.push(ue)}}componentDidUpdate(){const{keysToEnter:Y}=this;this.keysToEnter=[],Y.forEach(this.performEnter);const{keysToLeave:re}=this;this.keysToLeave=[],re.forEach(this.performLeave)}_finishAbort(Y){const re=this.keysToAbortLeave.indexOf(Y);re!==-1&&this.keysToAbortLeave.splice(re,1)}performAppear(Y){this.currentlyTransitioningKeys[Y]=!0;const re=this.refs[Y];re?.componentWillAppear?re.componentWillAppear(this._handleDoneAppearing.bind(this,Y)):this._handleDoneAppearing(Y)}_handleDoneAppearing(Y){const re=this.refs[Y];re?.componentDidAppear&&re.componentDidAppear(),delete this.currentlyTransitioningKeys[Y],this._finishAbort(Y);const le=getChildMapping(H$2(this.props.children)||[]);(!le||!Object.hasOwn(le,Y))&&this.performLeave(Y)}performEnter(Y){this.currentlyTransitioningKeys[Y]=!0;const re=this.refs[Y];re?.componentWillEnter?re.componentWillEnter(this._handleDoneEntering.bind(this,Y)):this._handleDoneEntering(Y)}_handleDoneEntering(Y){const re=this.refs[Y];re?.componentDidEnter&&re.componentDidEnter(),delete this.currentlyTransitioningKeys[Y],this._finishAbort(Y);const le=getChildMapping(H$2(this.props.children)||[]);(!le||!Object.hasOwn(le,Y))&&this.performLeave(Y)}performLeave(Y){if(this.keysToAbortLeave.indexOf(Y)!==-1)return;this.currentlyTransitioningKeys[Y]=!0;const le=this.refs[Y];le?.componentWillLeave?le.componentWillLeave(this._handleDoneLeaving.bind(this,Y)):this._handleDoneLeaving(Y)}_handleDoneLeaving(Y){if(this.keysToAbortLeave.indexOf(Y)!==-1)return;const le=this.refs[Y];le?.componentDidLeave&&le.componentDidLeave(),delete this.currentlyTransitioningKeys[Y];const ue=getChildMapping(H$2(this.props.children)||[]);if(ue&&Object.hasOwn(ue,Y))this.performEnter(Y);else{const he=assign({},this.state.children);delete he[Y],this.setState({children:he})}}render({childFactory:Y,transitionLeave:re,transitionName:le,transitionAppear:ue,transitionEnter:he,transitionLeaveTimeout:fe,transitionEnterTimeout:_e,transitionAppearTimeout:ve,component:Se,...$e},{children:Ee}){const Ce=Object.entries(Ee).map(([Ue,xe])=>{if(!xe)return;const Ne=linkRef(this,Ue);return K$2(Y(xe),{ref:Ne,key:Ue})}).filter(Boolean);return _$1(Se,$e,Ce)}}TransitionGroup.defaultProps={component:"span",childFactory:identity};class Informer extends UIPlugin{constructor(re,le){super(re,le);Be(this,"render",re=>u$1("div",{className:"uppy uppy-Informer",children:u$1(TransitionGroup,{children:re.info.map(le=>u$1(FadeIn,{children:u$1("p",{role:"alert",children:[le.message," ",le.details&&u$1("span",{"aria-label":le.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${le.message} 

 ${le.details}`),children:"?"})]})},le.message))})}));this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){const{target:re}=this.opts;re&&this.mount(re,this)}}Be(Informer,"VERSION",packageJson$4.version);var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var hasRequiredClassnames;function requireClassnames(){return hasRequiredClassnames||(hasRequiredClassnames=1,(function(oe){(function(){var Y={}.hasOwnProperty;function re(){for(var he="",fe=0;fe<arguments.length;fe++){var _e=arguments[fe];_e&&(he=ue(he,le(_e)))}return he}function le(he){if(typeof he=="string"||typeof he=="number")return he;if(typeof he!="object")return"";if(Array.isArray(he))return re.apply(null,he);if(he.toString!==Object.prototype.toString&&!he.toString.toString().includes("[native code]"))return he.toString();var fe="";for(var _e in he)Y.call(he,_e)&&he[_e]&&(fe=ue(fe,_e));return fe}function ue(he,fe){return fe?he?he+" "+fe:he+fe:he}oe.exports?(re.default=re,oe.exports=re):window.classNames=re})()})(classnames)),classnames.exports}var classnamesExports=requireClassnames();const classNames=getDefaultExportFromCjs(classnamesExports),STYLE_INNER={position:"relative",width:"100%",minHeight:"100%"},STYLE_CONTENT={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class VirtualList extends x{constructor(re){super(re);Be(this,"handleScroll",()=>{this.setState({offset:this.base.scrollTop})});Be(this,"handleResize",()=>{this.resize()});this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement?.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:re}=this.state;re!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render({data:re,rowHeight:le,renderRow:ue,overscanCount:he=10,...fe}){const{offset:_e,height:ve}=this.state;let Se=Math.floor(_e/le),$e=Math.floor(ve/le);he&&(Se=Math.max(0,Se-Se%he),$e+=he);const Ee=Se+$e+4,Ce=re.slice(Se,Ee),Ue={...STYLE_INNER,height:re.length*le},xe={...STYLE_CONTENT,top:Se*le};return u$1("div",{onScroll:this.handleScroll,...fe,children:u$1("div",{role:"presentation",style:Ue,children:u$1("div",{role:"presentation",style:xe,children:Ce.map(ue)})})})}}function defaultPickerIcon(){return u$1("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:u$1("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function emaFilter(oe,Y,re,le){return oe===Y?oe:le===0?Y:oe+(Y-oe)*2**(-le/re)}const version$4="4.2.3",packageJson$3={version:version$4},locale$2={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},statusBarStates={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function secondsToTime(oe){const Y=Math.floor(oe/3600)%24,re=Math.floor(oe/60)%60,le=Math.floor(oe%60);return{hours:Y,minutes:re,seconds:le}}function prettyETA(oe){const Y=secondsToTime(oe),re=Y.hours===0?"":`${Y.hours}h`,le=Y.minutes===0?"":`${Y.hours===0?Y.minutes:` ${Y.minutes.toString(10).padStart(2,"0")}`}m`,ue=Y.hours!==0?"":`${Y.minutes===0?Y.seconds:` ${Y.seconds.toString(10).padStart(2,"0")}`}s`;return`${re}${le}${ue}`}const DOT="",renderDot=()=>` ${DOT} `;function UploadBtn(oe){const{newFiles:Y,isUploadStarted:re,recoveredState:le,i18n:ue,uploadState:he,isSomeGhost:fe,startUpload:_e}=oe,ve=classNames("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":he===statusBarStates.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":fe}),Se=Y&&re&&!le?ue("uploadXNewFiles",{smart_count:Y}):ue("uploadXFiles",{smart_count:Y});return u$1("button",{type:"button",className:ve,"aria-label":ue("uploadXFiles",{smart_count:Y}),onClick:_e,disabled:fe,"data-uppy-super-focusable":!0,children:Se})}function RetryBtn(oe){const{i18n:Y,uppy:re}=oe;return u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":Y("retryUpload"),onClick:()=>re.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:u$1("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),Y("retry")]})}function CancelBtn(oe){const{i18n:Y,uppy:re}=oe;return u$1("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:Y("cancel"),"aria-label":Y("cancel"),onClick:()=>re.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:u$1("g",{fill:"none",fillRule:"evenodd",children:[u$1("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),u$1("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function PauseResumeButton(oe){const{isAllPaused:Y,i18n:re,isAllComplete:le,resumableUploads:ue,uppy:he}=oe,fe=re(Y?"resume":"pause");function _e(){if(!le){if(!ue){he.cancelAll();return}if(Y){he.resumeAll();return}he.pauseAll()}}return u$1("button",{title:fe,"aria-label":fe,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:_e,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:u$1("g",{fill:"none",fillRule:"evenodd",children:[u$1("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),u$1("path",{fill:"#FFF",d:Y?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function DoneBtn(oe){const{i18n:Y,doneButtonHandler:re}=oe;return u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:re,"data-uppy-super-focusable":!0,children:Y("done")})}function LoadingSpinner(){return u$1("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:u$1("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function ProgressBarProcessing(oe){const{progress:Y}=oe,{value:re,mode:le,message:ue}=Y;return u$1("div",{className:"uppy-StatusBar-content",children:[u$1(LoadingSpinner,{}),le==="determinate"?`${Math.round(re*100)}%  `:"",ue]})}function ProgressDetails(oe){const{numUploads:Y,complete:re,totalUploadedSize:le,totalSize:ue,totalETA:he,i18n:fe}=oe,_e=Y>1,ve=prettierBytes(le);return u$1("div",{className:"uppy-StatusBar-statusSecondary",children:[_e&&fe("filesUploadedOfTotal",{complete:re,smart_count:Y}),u$1("span",{className:"uppy-StatusBar-additionalInfo",children:[_e&&renderDot(),ue!=null?fe("dataUploadedOfTotal",{complete:ve,total:prettierBytes(ue)}):fe("dataUploadedOfUnknown",{complete:ve}),renderDot(),he!=null&&fe("xTimeLeft",{time:prettyETA(he)})]})]})}function FileUploadCount(oe){const{i18n:Y,complete:re,numUploads:le}=oe;return u$1("div",{className:"uppy-StatusBar-statusSecondary",children:Y("filesUploadedOfTotal",{complete:re,smart_count:le})})}function UploadNewlyAddedFiles(oe){const{i18n:Y,newFiles:re,startUpload:le}=oe,ue=classNames("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return u$1("div",{className:"uppy-StatusBar-statusSecondary",children:[u$1("div",{className:"uppy-StatusBar-statusSecondaryHint",children:Y("xMoreFilesAdded",{smart_count:re})}),u$1("button",{type:"button",className:ue,"aria-label":Y("uploadXFiles",{smart_count:re}),onClick:le,children:Y("upload")})]})}function ProgressBarUploading(oe){const{i18n:Y,supportsUploadProgress:re,totalProgress:le,showProgressDetails:ue,isUploadStarted:he,isAllComplete:fe,isAllPaused:_e,newFiles:ve,numUploads:Se,complete:$e,totalUploadedSize:Ee,totalSize:Ce,totalETA:Ue,startUpload:xe}=oe,Ne=ve&&he;if(!he||fe)return null;const Ie=Y(_e?"paused":"uploading");function qe(){return!_e&&!Ne&&ue?re?u$1(ProgressDetails,{numUploads:Se,complete:$e,totalUploadedSize:Ee,totalSize:Ce,totalETA:Ue,i18n:Y}):u$1(FileUploadCount,{i18n:Y,complete:$e,numUploads:Se}):null}return u$1("div",{className:"uppy-StatusBar-content",title:Ie,children:[_e?null:u$1(LoadingSpinner,{}),u$1("div",{className:"uppy-StatusBar-status",children:[u$1("div",{className:"uppy-StatusBar-statusPrimary",children:re&&le!==0?`${Ie}: ${le}%`:Ie}),qe(),Ne?u$1(UploadNewlyAddedFiles,{i18n:Y,newFiles:ve,startUpload:xe}):null]})]})}function ProgressBarComplete(oe){const{i18n:Y}=oe;return u$1("div",{className:"uppy-StatusBar-content",role:"status",title:Y("complete"),children:u$1("div",{className:"uppy-StatusBar-status",children:u$1("div",{className:"uppy-StatusBar-statusPrimary",children:[u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:u$1("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),Y("complete")]})})})}function ProgressBarError(oe){const{error:Y,i18n:re,complete:le,numUploads:ue}=oe;function he(){const fe=`${re("uploadFailed")} 

 ${Y}`;alert(fe)}return u$1("div",{className:"uppy-StatusBar-content",title:re("uploadFailed"),children:[u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:u$1("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),u$1("div",{className:"uppy-StatusBar-status",children:[u$1("div",{className:"uppy-StatusBar-statusPrimary",children:[re("uploadFailed"),u$1("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":re("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:he,type:"button",children:"?"})]}),u$1(FileUploadCount,{i18n:re,complete:le,numUploads:ue})]})]})}function calculateProcessingProgress(oe){const Y=[];let re="indeterminate",le;for(const{progress:he}of Object.values(oe)){const{preprocess:fe,postprocess:_e}=he;le==null&&(fe||_e)&&({mode:re,message:le}=fe||_e),fe?.mode==="determinate"&&Y.push(fe.value),_e?.mode==="determinate"&&Y.push(_e.value)}const ue=Y.reduce((he,fe)=>he+fe/Y.length,0);return{mode:re,message:le,value:ue}}const{STATE_ERROR,STATE_WAITING,STATE_PREPROCESSING,STATE_UPLOADING,STATE_POSTPROCESSING,STATE_COMPLETE}=statusBarStates;function StatusBarUI({newFiles:oe,allowNewUpload:Y,isUploadInProgress:re,isAllPaused:le,resumableUploads:ue,error:he,hideUploadButton:fe=void 0,hidePauseResumeButton:_e=!1,hideCancelButton:ve=!1,hideRetryButton:Se=!1,recoveredState:$e,uploadState:Ee,totalProgress:Ce,files:Ue,supportsUploadProgress:xe,hideAfterFinish:Ne=!1,isSomeGhost:Ie,doneButtonHandler:qe=void 0,isUploadStarted:Te,i18n:Re,startUpload:De,uppy:Le,isAllComplete:Ge,showProgressDetails:ze=void 0,numUploads:Ye,complete:Xe,totalSize:it,totalETA:nt,totalUploadedSize:ot}){function Ve(){switch(Ee){case STATE_POSTPROCESSING:case STATE_PREPROCESSING:{const tr=calculateProcessingProgress(Ue);return tr.mode==="determinate"?tr.value*100:Ce}case STATE_ERROR:return null;case STATE_UPLOADING:return xe?Ce:null;default:return Ce}}function st(){switch(Ee){case STATE_POSTPROCESSING:case STATE_PREPROCESSING:{const{mode:tr}=calculateProcessingProgress(Ue);return tr==="indeterminate"}case STATE_UPLOADING:return!xe;default:return!1}}const at=Ve(),Ae=at??100,Fe=!he&&oe&&(!re&&!le||$e)&&Y&&!fe,Pe=!ve&&Ee!==STATE_WAITING&&Ee!==STATE_COMPLETE,je=ue&&!_e&&Ee===STATE_UPLOADING,We=he&&!Ge&&!Se,He=qe&&Ee===STATE_COMPLETE,Qe=classNames("uppy-StatusBar-progress",{"is-indeterminate":st()}),et=classNames("uppy-StatusBar",`is-${Ee}`,{"has-ghosts":Ie}),tt=(()=>{switch(Ee){case STATE_PREPROCESSING:case STATE_POSTPROCESSING:return u$1(ProgressBarProcessing,{progress:calculateProcessingProgress(Ue)});case STATE_COMPLETE:return u$1(ProgressBarComplete,{i18n:Re});case STATE_ERROR:return u$1(ProgressBarError,{error:he,i18n:Re,numUploads:Ye,complete:Xe});case STATE_UPLOADING:return u$1(ProgressBarUploading,{i18n:Re,supportsUploadProgress:xe,totalProgress:Ce,showProgressDetails:ze,isUploadStarted:Te,isAllComplete:Ge,isAllPaused:le,newFiles:oe,numUploads:Ye,complete:Xe,totalUploadedSize:ot,totalSize:it,totalETA:nt,startUpload:De});default:return null}})();return!(Fe||We||je||Pe||He)&&!tt||Ee===STATE_COMPLETE&&Ne?null:u$1("div",{className:et,children:[u$1("div",{className:Qe,style:{width:`${Ae}%`},role:"progressbar","aria-label":`${Ae}%`,"aria-valuetext":`${Ae}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":at}),tt,u$1("div",{className:"uppy-StatusBar-actions",children:[Fe?u$1(UploadBtn,{newFiles:oe,isUploadStarted:Te,recoveredState:$e,i18n:Re,isSomeGhost:Ie,startUpload:De,uploadState:Ee}):null,We?u$1(RetryBtn,{i18n:Re,uppy:Le}):null,je?u$1(PauseResumeButton,{isAllPaused:le,i18n:Re,isAllComplete:Ge,resumableUploads:ue,uppy:Le}):null,Pe?u$1(CancelBtn,{i18n:Re,uppy:Le}):null,He?u$1(DoneBtn,{i18n:Re,doneButtonHandler:qe}):null]})]})}const speedFilterHalfLife=2e3,ETAFilterHalfLife=2e3;function getUploadingState$1(oe,Y,re,le){if(oe)return statusBarStates.STATE_ERROR;if(Y)return statusBarStates.STATE_COMPLETE;if(re)return statusBarStates.STATE_WAITING;let ue=statusBarStates.STATE_WAITING;const he=Object.keys(le);for(let fe=0;fe<he.length;fe++){const{progress:_e}=le[he[fe]];if(_e.uploadStarted&&!_e.uploadComplete)return statusBarStates.STATE_UPLOADING;_e.preprocess&&(ue=statusBarStates.STATE_PREPROCESSING),_e.postprocess&&ue!==statusBarStates.STATE_PREPROCESSING&&(ue=statusBarStates.STATE_POSTPROCESSING)}return ue}const defaultOptions$5={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var St,$t,Ct,bt,ar,Dr,Jt;class StatusBar extends UIPlugin{constructor(re,le){super(re,{...defaultOptions$5,...le});Ze(this,ar);Ze(this,St);Ze(this,$t);Ze(this,Ct);Ze(this,bt);Be(this,"startUpload",()=>this.uppy.upload().catch((()=>{})));Ze(this,Jt,()=>{const{recoveredState:re}=this.uppy.getState();if(rt(this,Ct,null),rt(this,bt,null),re){rt(this,$t,Object.values(re.files).reduce((le,{progress:ue})=>le+ue.bytesUploaded,0)),this.uppy.emit("restore-confirmed");return}rt(this,St,performance.now()),rt(this,$t,0)});this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=locale$2,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(re){const{capabilities:le,files:ue,allowNewUpload:he,totalProgress:fe,error:_e,recoveredState:ve}=re,{newFiles:Se,startedFiles:$e,completeFiles:Ee,isUploadStarted:Ce,isAllComplete:Ue,isAllPaused:xe,isUploadInProgress:Ne,isSomeGhost:Ie}=this.uppy.getObjectOfFilesPerState(),qe=ve?Object.values(ue):Se,Te=!!le.resumableUploads,Re=le.uploadProgress!==!1;let De=null,Le=0;$e.every(ze=>ze.progress.bytesTotal!=null&&ze.progress.bytesTotal!==0)?(De=0,$e.forEach(ze=>{De+=ze.progress.bytesTotal||0,Le+=ze.progress.bytesUploaded||0})):$e.forEach(ze=>{Le+=ze.progress.bytesUploaded||0});const Ge=Ke(this,ar,Dr).call(this,{uploaded:Le,total:De});return StatusBarUI({error:_e,uploadState:getUploadingState$1(_e,Ue,ve,re.files||{}),allowNewUpload:he,totalProgress:fe,totalSize:De,totalUploadedSize:Le,isAllComplete:!1,isAllPaused:xe,isUploadStarted:Ce,isUploadInProgress:Ne,isSomeGhost:Ie,recoveredState:ve,complete:Ee.length,newFiles:qe.length,numUploads:$e.length,totalETA:Ge,files:ue,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:Te,supportsUploadProgress:Re,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const re=this.el;getTextDirection(re)||(re.dir="ltr")}install(){const{target:re}=this.opts;re&&this.mount(re,this),this.uppy.on("upload",Me(this,Jt)),rt(this,St,performance.now()),rt(this,$t,this.uppy.getFiles().reduce((le,ue)=>le+ue.progress.bytesUploaded,0))}uninstall(){this.unmount(),this.uppy.off("upload",Me(this,Jt))}}St=new WeakMap,$t=new WeakMap,Ct=new WeakMap,bt=new WeakMap,ar=new WeakSet,Dr=function(re){if(re.total==null||re.total===0)return null;const le=re.total-re.uploaded;if(le<=0)return null;Me(this,St)??rt(this,St,performance.now());const ue=performance.now()-Me(this,St);if(ue===0)return Math.round((Me(this,bt)??0)/100)/10;const he=re.uploaded-Me(this,$t);if(rt(this,$t,re.uploaded),he<=0)return Math.round((Me(this,bt)??0)/100)/10;const fe=he/ue,_e=Me(this,Ct)==null?fe:emaFilter(fe,Me(this,Ct),speedFilterHalfLife,ue);rt(this,Ct,_e);const ve=le/_e,Se=Math.max(Me(this,bt)-ue,0),$e=Me(this,bt)==null?ve:emaFilter(ve,Se,ETAFilterHalfLife,ue);return rt(this,bt,$e),rt(this,St,performance.now()),Math.round($e/100)/10},Jt=new WeakMap,Be(StatusBar,"VERSION",packageJson$3.version);const DATA_URL_PATTERN=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function dataURItoBlob(oe,Y,re){const le=DATA_URL_PATTERN.exec(oe),ue=Y.mimeType??le?.[1]??"plain/text";let he;if(le?.[2]!=null){const fe=atob(decodeURIComponent(le[3])),_e=new Uint8Array(fe.length);for(let ve=0;ve<fe.length;ve++)_e[ve]=fe.charCodeAt(ve);he=[_e]}else le?.[3]!=null&&(he=[decodeURIComponent(le[3])]);return new Blob(he,{type:ue})}function isObjectURL(oe){return oe.startsWith("blob:")}function isPreviewSupported(oe){return oe?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(oe):!1}function e(oe,Y,re){return Y in oe?Object.defineProperty(oe,Y,{value:re,enumerable:!0,configurable:!0,writable:!0}):oe[Y]=re,oe}var t=typeof self<"u"?self:global;const s=typeof navigator<"u",i=s&&typeof HTMLImageElement>"u",n=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),r=t.Buffer,a=!!r,h=oe=>oe!==void 0;function f(oe){return oe===void 0||(oe instanceof Map?oe.size===0:Object.values(oe).filter(h).length===0)}function l(oe){let Y=new Error(oe);throw delete Y.stack,Y}function o(oe){let Y=(function(re){let le=0;return re.ifd0.enabled&&(le+=1024),re.exif.enabled&&(le+=2048),re.makerNote&&(le+=2048),re.userComment&&(le+=1024),re.gps.enabled&&(le+=512),re.interop.enabled&&(le+=100),re.ifd1.enabled&&(le+=1024),le+2048})(oe);return oe.jfif.enabled&&(Y+=50),oe.xmp.enabled&&(Y+=2e4),oe.iptc.enabled&&(Y+=14e3),oe.icc.enabled&&(Y+=6e3),Y}const u=oe=>String.fromCharCode.apply(null,oe),d=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class c{static from(Y,re){return Y instanceof this&&Y.le===re?Y:new c(Y,void 0,void 0,re)}constructor(Y,re=0,le,ue){if(typeof ue=="boolean"&&(this.le=ue),Array.isArray(Y)&&(Y=new Uint8Array(Y)),Y===0)this.byteOffset=0,this.byteLength=0;else if(Y instanceof ArrayBuffer){le===void 0&&(le=Y.byteLength-re);let he=new DataView(Y,re,le);this._swapDataView(he)}else if(Y instanceof Uint8Array||Y instanceof DataView||Y instanceof c){le===void 0&&(le=Y.byteLength-re),(re+=Y.byteOffset)+le>Y.byteOffset+Y.byteLength&&l("Creating view outside of available memory in ArrayBuffer");let he=new DataView(Y.buffer,re,le);this._swapDataView(he)}else if(typeof Y=="number"){let he=new DataView(new ArrayBuffer(Y));this._swapDataView(he)}else l("Invalid input argument for BufferView: "+Y)}_swapArrayBuffer(Y){this._swapDataView(new DataView(Y))}_swapBuffer(Y){this._swapDataView(new DataView(Y.buffer,Y.byteOffset,Y.byteLength))}_swapDataView(Y){this.dataView=Y,this.buffer=Y.buffer,this.byteOffset=Y.byteOffset,this.byteLength=Y.byteLength}_lengthToEnd(Y){return this.byteLength-Y}set(Y,re,le=c){return Y instanceof DataView||Y instanceof c?Y=new Uint8Array(Y.buffer,Y.byteOffset,Y.byteLength):Y instanceof ArrayBuffer&&(Y=new Uint8Array(Y)),Y instanceof Uint8Array||l("BufferView.set(): Invalid data argument."),this.toUint8().set(Y,re),new le(this,re,Y.byteLength)}subarray(Y,re){return re=re||this._lengthToEnd(Y),new c(this,Y,re)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(Y,re){return new Uint8Array(this.buffer,this.byteOffset+Y,re)}getString(Y=0,re=this.byteLength){return ue=this.getUint8Array(Y,re),d?d.decode(ue):a?Buffer.from(ue).toString("utf8"):decodeURIComponent(escape(u(ue)));var ue}getLatin1String(Y=0,re=this.byteLength){let le=this.getUint8Array(Y,re);return u(le)}getUnicodeString(Y=0,re=this.byteLength){const le=[];for(let ue=0;ue<re&&Y+ue<this.byteLength;ue+=2)le.push(this.getUint16(Y+ue));return u(le)}getInt8(Y){return this.dataView.getInt8(Y)}getUint8(Y){return this.dataView.getUint8(Y)}getInt16(Y,re=this.le){return this.dataView.getInt16(Y,re)}getInt32(Y,re=this.le){return this.dataView.getInt32(Y,re)}getUint16(Y,re=this.le){return this.dataView.getUint16(Y,re)}getUint32(Y,re=this.le){return this.dataView.getUint32(Y,re)}getFloat32(Y,re=this.le){return this.dataView.getFloat32(Y,re)}getFloat64(Y,re=this.le){return this.dataView.getFloat64(Y,re)}getFloat(Y,re=this.le){return this.dataView.getFloat32(Y,re)}getDouble(Y,re=this.le){return this.dataView.getFloat64(Y,re)}getUintBytes(Y,re,le){switch(re){case 1:return this.getUint8(Y,le);case 2:return this.getUint16(Y,le);case 4:return this.getUint32(Y,le);case 8:return this.getUint64&&this.getUint64(Y,le)}}getUint(Y,re,le){switch(re){case 8:return this.getUint8(Y,le);case 16:return this.getUint16(Y,le);case 32:return this.getUint32(Y,le);case 64:return this.getUint64&&this.getUint64(Y,le)}}toString(Y){return this.dataView.toString(Y,this.constructor.name)}ensureChunk(){}}function p(oe,Y){l(`${oe} '${Y}' was not loaded, try using full build of exifr.`)}class g extends Map{constructor(Y){super(),this.kind=Y}get(Y,re){return this.has(Y)||p(this.kind,Y),re&&(Y in re||(function(le,ue){l(`Unknown ${le} '${ue}'.`)})(this.kind,Y),re[Y].enabled||p(this.kind,Y)),super.get(Y)}keyList(){return Array.from(this.keys())}}var m=new g("file parser"),y=new g("segment parser"),b=new g("file reader");let w=t.fetch;function k(oe,Y){return(re=oe).startsWith("data:")||re.length>1e4?v(oe,Y,"base64"):n&&oe.includes("://")?O(oe,Y,"url",S):n?v(oe,Y,"fs"):s?O(oe,Y,"url",S):void l("Invalid input argument");var re}async function O(oe,Y,re,le){return b.has(re)?v(oe,Y,re):le?(async function(ue,he){let fe=await he(ue);return new c(fe)})(oe,le):void l(`Parser ${re} is not loaded`)}async function v(oe,Y,re){let le=new(b.get(re))(oe,Y);return await le.read(),le}const S=oe=>w(oe).then((Y=>Y.arrayBuffer())),A=oe=>new Promise(((Y,re)=>{let le=new FileReader;le.onloadend=()=>Y(le.result||new ArrayBuffer),le.onerror=re,le.readAsArrayBuffer(oe)})),B=new Map,V=new Map,I=new Map,L=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],T=["jfif","xmp","icc","iptc","ihdr"],z=["tiff",...T],P=["ifd0","ifd1","exif","gps","interop"],F=[...z,...P],j=["makerNote","userComment"],E=["translateKeys","translateValues","reviveValues","multiSegment"],M=[...E,"sanitize","mergeOutput","silentErrors"];class _{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class D extends _{get needed(){return this.enabled||this.deps.size>0}constructor(Y,re,le,ue){if(super(),e(this,"enabled",!1),e(this,"skip",new Set),e(this,"pick",new Set),e(this,"deps",new Set),e(this,"translateKeys",!1),e(this,"translateValues",!1),e(this,"reviveValues",!1),this.key=Y,this.enabled=re,this.parse=this.enabled,this.applyInheritables(ue),this.canBeFiltered=P.includes(Y),this.canBeFiltered&&(this.dict=B.get(Y)),le!==void 0)if(Array.isArray(le))this.parse=this.enabled=!0,this.canBeFiltered&&le.length>0&&this.translateTagSet(le,this.pick);else if(typeof le=="object"){if(this.enabled=!0,this.parse=le.parse!==!1,this.canBeFiltered){let{pick:he,skip:fe}=le;he&&he.length>0&&this.translateTagSet(he,this.pick),fe&&fe.length>0&&this.translateTagSet(fe,this.skip)}this.applyInheritables(le)}else le===!0||le===!1?this.parse=this.enabled=le:l(`Invalid options argument: ${le}`)}applyInheritables(Y){let re,le;for(re of E)le=Y[re],le!==void 0&&(this[re]=le)}translateTagSet(Y,re){if(this.dict){let le,ue,{tagKeys:he,tagValues:fe}=this.dict;for(le of Y)typeof le=="string"?(ue=fe.indexOf(le),ue===-1&&(ue=he.indexOf(Number(le))),ue!==-1&&re.add(Number(he[ue]))):re.add(le)}else for(let le of Y)re.add(le)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,X(this.pick,this.deps)):this.enabled&&this.pick.size>0&&X(this.pick,this.deps)}}var N={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},$=new Map;class R extends _{static useCached(Y){let re=$.get(Y);return re!==void 0||(re=new this(Y),$.set(Y,re)),re}constructor(Y){super(),Y===!0?this.setupFromTrue():Y===void 0?this.setupFromUndefined():Array.isArray(Y)?this.setupFromArray(Y):typeof Y=="object"?this.setupFromObject(Y):l(`Invalid options argument ${Y}`),this.firstChunkSize===void 0&&(this.firstChunkSize=s?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let Y;for(Y of L)this[Y]=N[Y];for(Y of M)this[Y]=N[Y];for(Y of j)this[Y]=N[Y];for(Y of F)this[Y]=new D(Y,N[Y],void 0,this)}setupFromTrue(){let Y;for(Y of L)this[Y]=N[Y];for(Y of M)this[Y]=N[Y];for(Y of j)this[Y]=!0;for(Y of F)this[Y]=new D(Y,!0,void 0,this)}setupFromArray(Y){let re;for(re of L)this[re]=N[re];for(re of M)this[re]=N[re];for(re of j)this[re]=N[re];for(re of F)this[re]=new D(re,!1,void 0,this);this.setupGlobalFilters(Y,void 0,P)}setupFromObject(Y){let re;for(re of(P.ifd0=P.ifd0||P.image,P.ifd1=P.ifd1||P.thumbnail,Object.assign(this,Y),L))this[re]=W(Y[re],N[re]);for(re of M)this[re]=W(Y[re],N[re]);for(re of j)this[re]=W(Y[re],N[re]);for(re of z)this[re]=new D(re,N[re],Y[re],this);for(re of P)this[re]=new D(re,N[re],Y[re],this.tiff);this.setupGlobalFilters(Y.pick,Y.skip,P,F),Y.tiff===!0?this.batchEnableWithBool(P,!0):Y.tiff===!1?this.batchEnableWithUserValue(P,Y):Array.isArray(Y.tiff)?this.setupGlobalFilters(Y.tiff,void 0,P):typeof Y.tiff=="object"&&this.setupGlobalFilters(Y.tiff.pick,Y.tiff.skip,P)}batchEnableWithBool(Y,re){for(let le of Y)this[le].enabled=re}batchEnableWithUserValue(Y,re){for(let le of Y){let ue=re[le];this[le].enabled=ue!==!1&&ue!==void 0}}setupGlobalFilters(Y,re,le,ue=le){if(Y&&Y.length){for(let fe of ue)this[fe].enabled=!1;let he=K(Y,le);for(let[fe,_e]of he)X(this[fe].pick,_e),this[fe].enabled=!0}else if(re&&re.length){let he=K(re,le);for(let[fe,_e]of he)X(this[fe].skip,_e)}}filterNestedSegmentTags(){let{ifd0:Y,exif:re,xmp:le,iptc:ue,icc:he}=this;this.makerNote?re.deps.add(37500):re.skip.add(37500),this.userComment?re.deps.add(37510):re.skip.add(37510),le.enabled||Y.skip.add(700),ue.enabled||Y.skip.add(33723),he.enabled||Y.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:Y,exif:re,gps:le,interop:ue}=this;ue.needed&&(re.deps.add(40965),Y.deps.add(40965)),re.needed&&Y.deps.add(34665),le.needed&&Y.deps.add(34853),this.tiff.enabled=P.some((he=>this[he].enabled===!0))||this.makerNote||this.userComment;for(let he of P)this[he].finalizeFilters()}get onlyTiff(){return!T.map((Y=>this[Y].enabled)).some((Y=>Y===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let Y of z)this[Y].enabled&&!y.has(Y)&&p("segment parser",Y)}}function K(oe,Y){let re,le,ue,he,fe=[];for(ue of Y){for(he of(re=B.get(ue),le=[],re))(oe.includes(he[0])||oe.includes(he[1]))&&le.push(he[0]);le.length&&fe.push([ue,le])}return fe}function W(oe,Y){return oe!==void 0?oe:Y!==void 0?Y:void 0}function X(oe,Y){for(let re of Y)oe.add(re)}e(R,"default",N);class H{constructor(Y){e(this,"parsers",{}),e(this,"output",{}),e(this,"errors",[]),e(this,"pushToErrors",(re=>this.errors.push(re))),this.options=R.useCached(Y)}async read(Y){this.file=await(function(re,le){return typeof re=="string"?k(re,le):s&&!i&&re instanceof HTMLImageElement?k(re.src,le):re instanceof Uint8Array||re instanceof ArrayBuffer||re instanceof DataView?new c(re):s&&re instanceof Blob?O(re,le,"blob",A):void l("Invalid input argument")})(Y,this.options)}setup(){if(this.fileParser)return;let{file:Y}=this,re=Y.getUint16(0);for(let[le,ue]of m)if(ue.canHandle(Y,re))return this.fileParser=new ue(this.options,this.file,this.parsers),Y[le]=!0;this.file.close&&this.file.close(),l("Unknown file format")}async parse(){let{output:Y,errors:re}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),re.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&re.length>0&&(Y.errors=re),f(le=Y)?void 0:le;var le}async executeParsers(){let{output:Y}=this;await this.fileParser.parse();let re=Object.values(this.parsers).map((async le=>{let ue=await le.parse();le.assignToOutput(Y,ue)}));this.options.silentErrors&&(re=re.map((le=>le.catch(this.pushToErrors)))),await Promise.all(re)}async extractThumbnail(){this.setup();let{options:Y,file:re}=this,le=y.get("tiff",Y);var ue;if(re.tiff?ue={start:0,type:"tiff"}:re.jpeg&&(ue=await this.fileParser.getOrFindSegment("tiff")),ue===void 0)return;let he=await this.fileParser.ensureSegmentChunk(ue),fe=this.parsers.tiff=new le(he,Y,re),_e=await fe.extractThumbnail();return re.close&&re.close(),_e}}class J{static findPosition(Y,re){let le=Y.getUint16(re+2)+2,ue=typeof this.headerLength=="function"?this.headerLength(Y,re,le):this.headerLength,he=re+ue,fe=le-ue;return{offset:re,length:le,headerLength:ue,start:he,size:fe,end:he+fe}}static parse(Y,re={}){return new this(Y,new R({[this.type]:re}),Y).parse()}normalizeInput(Y){return Y instanceof c?Y:new c(Y)}constructor(Y,re={},le){e(this,"errors",[]),e(this,"raw",new Map),e(this,"handleError",(ue=>{if(!this.options.silentErrors)throw ue;this.errors.push(ue.message)})),this.chunk=this.normalizeInput(Y),this.file=le,this.type=this.constructor.type,this.globalOptions=this.options=re,this.localOptions=re[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(Y,re){let le=I.get(re),ue=V.get(re),he=B.get(re),fe=this.options[re],_e=fe.reviveValues&&!!le,ve=fe.translateValues&&!!ue,Se=fe.translateKeys&&!!he,$e={};for(let[Ee,Ce]of Y)_e&&le.has(Ee)?Ce=le.get(Ee)(Ce):ve&&ue.has(Ee)&&(Ce=this.translateValue(Ce,ue.get(Ee))),Se&&he.has(Ee)&&(Ee=he.get(Ee)||Ee),$e[Ee]=Ce;return $e}translateValue(Y,re){return re[Y]||re.DEFAULT||Y}assignToOutput(Y,re){this.assignObjectToOutput(Y,this.constructor.type,re)}assignObjectToOutput(Y,re,le){if(this.globalOptions.mergeOutput)return Object.assign(Y,le);Y[re]?Object.assign(Y[re],le):Y[re]=le}}e(J,"headerLength",4),e(J,"type",void 0),e(J,"multiSegment",!1),e(J,"canHandle",(()=>!1));function q(oe){return oe===192||oe===194||oe===196||oe===219||oe===221||oe===218||oe===254}function Q(oe){return oe>=224&&oe<=239}function Z(oe,Y,re){for(let[le,ue]of y)if(ue.canHandle(oe,Y,re))return le}class ee extends class{constructor(Y,re,le){e(this,"errors",[]),e(this,"ensureSegmentChunk",(async ue=>{let he=ue.start,fe=ue.size||65536;if(this.file.chunked)if(this.file.available(he,fe))ue.chunk=this.file.subarray(he,fe);else try{ue.chunk=await this.file.readChunk(he,fe)}catch(_e){l(`Couldn't read segment: ${JSON.stringify(ue)}. ${_e.message}`)}else this.file.byteLength>he+fe?ue.chunk=this.file.subarray(he,fe):ue.size===void 0?ue.chunk=this.file.subarray(he):l("Segment unreachable: "+JSON.stringify(ue));return ue.chunk})),this.extendOptions&&this.extendOptions(Y),this.options=Y,this.file=re,this.parsers=le}injectSegment(Y,re){this.options[Y].enabled&&this.createParser(Y,re)}createParser(Y,re){let le=new(y.get(Y))(re,this.options,this.file);return this.parsers[Y]=le}createParsers(Y){for(let re of Y){let{type:le,chunk:ue}=re,he=this.options[le];if(he&&he.enabled){let fe=this.parsers[le];fe&&fe.append||fe||this.createParser(le,ue)}}}async readSegments(Y){let re=Y.map(this.ensureSegmentChunk);await Promise.all(re)}}{constructor(...Y){super(...Y),e(this,"appSegments",[]),e(this,"jpegSegments",[]),e(this,"unknownSegments",[])}static canHandle(Y,re){return re===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(Y){Y===!0?(this.findAll=!0,this.wanted=new Set(y.keyList())):(Y=Y===void 0?y.keyList().filter((re=>this.options[re].enabled)):Y.filter((re=>this.options[re].enabled&&y.has(re))),this.findAll=!1,this.remaining=new Set(Y),this.wanted=new Set(Y)),this.unfinishedMultiSegment=!1}async findAppSegments(Y=0,re){this.setupSegmentFinderArgs(re);let{file:le,findAll:ue,wanted:he,remaining:fe}=this;if(!ue&&this.file.chunked&&(ue=Array.from(he).some((_e=>{let ve=y.get(_e),Se=this.options[_e];return ve.multiSegment&&Se.multiSegment})),ue&&await this.file.readWhole()),Y=this.findAppSegmentsInRange(Y,le.byteLength),!this.options.onlyTiff&&le.chunked){let _e=!1;for(;fe.size>0&&!_e&&(le.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:ve}=le,Se=this.appSegments.some(($e=>!this.file.available($e.offset||$e.start,$e.length||$e.size)));if(_e=Y>ve&&!Se?!await le.readNextChunk(Y):!await le.readNextChunk(ve),(Y=this.findAppSegmentsInRange(Y,le.byteLength))===void 0)return}}}findAppSegmentsInRange(Y,re){re-=2;let le,ue,he,fe,_e,ve,{file:Se,findAll:$e,wanted:Ee,remaining:Ce,options:Ue}=this;for(;Y<re;Y++)if(Se.getUint8(Y)===255){if(le=Se.getUint8(Y+1),Q(le)){if(ue=Se.getUint16(Y+2),he=Z(Se,Y,ue),he&&Ee.has(he)&&(fe=y.get(he),_e=fe.findPosition(Se,Y),ve=Ue[he],_e.type=he,this.appSegments.push(_e),!$e&&(fe.multiSegment&&ve.multiSegment?(this.unfinishedMultiSegment=_e.chunkNumber<_e.chunkCount,this.unfinishedMultiSegment||Ce.delete(he)):Ce.delete(he),Ce.size===0)))break;Ue.recordUnknownSegments&&(_e=J.findPosition(Se,Y),_e.marker=le,this.unknownSegments.push(_e)),Y+=ue+1}else if(q(le)){if(ue=Se.getUint16(Y+2),le===218&&Ue.stopAfterSos!==!1)return;Ue.recordJpegSegments&&this.jpegSegments.push({offset:Y,length:ue,marker:le}),Y+=ue+1}}return Y}mergeMultiSegments(){if(!this.appSegments.some((re=>re.multiSegment)))return;let Y=(function(re,le){let ue,he,fe,_e=new Map;for(let ve=0;ve<re.length;ve++)ue=re[ve],he=ue[le],_e.has(he)?fe=_e.get(he):_e.set(he,fe=[]),fe.push(ue);return Array.from(_e)})(this.appSegments,"type");this.mergedAppSegments=Y.map((([re,le])=>{let ue=y.get(re,this.options);return ue.handleMultiSegments?{type:re,chunk:ue.handleMultiSegments(le)}:le[0]}))}getSegment(Y){return this.appSegments.find((re=>re.type===Y))}async getOrFindSegment(Y){let re=this.getSegment(Y);return re===void 0&&(await this.findAppSegments(0,[Y]),re=this.getSegment(Y)),re}}e(ee,"type","jpeg"),m.set("jpeg",ee);const te=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class se extends J{parseHeader(){var Y=this.chunk.getUint16();Y===18761?this.le=!0:Y===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(Y,re,le=new Map){let{pick:ue,skip:he}=this.options[re];ue=new Set(ue);let fe=ue.size>0,_e=he.size===0,ve=this.chunk.getUint16(Y);Y+=2;for(let Se=0;Se<ve;Se++){let $e=this.chunk.getUint16(Y);if(fe){if(ue.has($e)&&(le.set($e,this.parseTag(Y,$e,re)),ue.delete($e),ue.size===0))break}else!_e&&he.has($e)||le.set($e,this.parseTag(Y,$e,re));Y+=12}return le}parseTag(Y,re,le){let{chunk:ue}=this,he=ue.getUint16(Y+2),fe=ue.getUint32(Y+4),_e=te[he];if(_e*fe<=4?Y+=8:Y=ue.getUint32(Y+8),(he<1||he>13)&&l(`Invalid TIFF value type. block: ${le.toUpperCase()}, tag: ${re.toString(16)}, type: ${he}, offset ${Y}`),Y>ue.byteLength&&l(`Invalid TIFF value offset. block: ${le.toUpperCase()}, tag: ${re.toString(16)}, type: ${he}, offset ${Y} is outside of chunk size ${ue.byteLength}`),he===1)return ue.getUint8Array(Y,fe);if(he===2)return(ve=(function(Se){for(;Se.endsWith("\0");)Se=Se.slice(0,-1);return Se})(ve=ue.getString(Y,fe)).trim())===""?void 0:ve;var ve;if(he===7)return ue.getUint8Array(Y,fe);if(fe===1)return this.parseTagValue(he,Y);{let Se=new((function(Ee){switch(Ee){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(he))(fe),$e=_e;for(let Ee=0;Ee<fe;Ee++)Se[Ee]=this.parseTagValue(he,Y),Y+=$e;return Se}}parseTagValue(Y,re){let{chunk:le}=this;switch(Y){case 1:return le.getUint8(re);case 3:return le.getUint16(re);case 4:return le.getUint32(re);case 5:return le.getUint32(re)/le.getUint32(re+4);case 6:return le.getInt8(re);case 8:return le.getInt16(re);case 9:return le.getInt32(re);case 10:return le.getInt32(re)/le.getInt32(re+4);case 11:return le.getFloat(re);case 12:return le.getDouble(re);case 13:return le.getUint32(re);default:l(`Invalid tiff type ${Y}`)}}}class ie extends se{static canHandle(Y,re){return Y.getUint8(re+1)===225&&Y.getUint32(re+4)===1165519206&&Y.getUint16(re+8)===0}async parse(){this.parseHeader();let{options:Y}=this;return Y.ifd0.enabled&&await this.parseIfd0Block(),Y.exif.enabled&&await this.safeParse("parseExifBlock"),Y.gps.enabled&&await this.safeParse("parseGpsBlock"),Y.interop.enabled&&await this.safeParse("parseInteropBlock"),Y.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(Y){let re=this[Y]();return re.catch!==void 0&&(re=re.catch(this.handleError)),re}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let Y=this.chunk.getUint16(this.ifd0Offset),re=this.ifd0Offset+2+12*Y;this.ifd1Offset=this.chunk.getUint32(re)}}parseBlock(Y,re){let le=new Map;return this[re]=le,this.parseTags(Y,re,le),le}async parseIfd0Block(){if(this.ifd0)return;let{file:Y}=this;this.findIfd0Offset(),this.ifd0Offset<8&&l("Malformed EXIF data"),!Y.chunked&&this.ifd0Offset>Y.byteLength&&l(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${Y.byteLength}`),Y.tiff&&await Y.ensureChunk(this.ifd0Offset,o(this.options));let re=this.parseBlock(this.ifd0Offset,"ifd0");return re.size!==0?(this.exifOffset=re.get(34665),this.interopOffset=re.get(40965),this.gpsOffset=re.get(34853),this.xmp=re.get(700),this.iptc=re.get(33723),this.icc=re.get(34675),this.options.sanitize&&(re.delete(34665),re.delete(40965),re.delete(34853),re.delete(700),re.delete(33723),re.delete(34675)),re):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,o(this.options));let Y=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=Y.get(40965)),this.makerNote=Y.get(37500),this.userComment=Y.get(37510),this.options.sanitize&&(Y.delete(40965),Y.delete(37500),Y.delete(37510)),this.unpack(Y,41728),this.unpack(Y,41729),Y}unpack(Y,re){let le=Y.get(re);le&&le.length===1&&Y.set(re,le[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let Y=this.parseBlock(this.gpsOffset,"gps");return Y&&Y.has(2)&&Y.has(4)&&(Y.set("latitude",ne(...Y.get(2),Y.get(1))),Y.set("longitude",ne(...Y.get(4),Y.get(3)))),Y}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(Y=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||Y))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let Y=this.ifd1.get(513),re=this.ifd1.get(514);return this.chunk.getUint8Array(Y,re)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let Y,re,le,ue={};for(re of P)if(Y=this[re],!f(Y))if(le=this.canTranslate?this.translateBlock(Y,re):Object.fromEntries(Y),this.options.mergeOutput){if(re==="ifd1")continue;Object.assign(ue,le)}else ue[re]=le;return this.makerNote&&(ue.makerNote=this.makerNote),this.userComment&&(ue.userComment=this.userComment),ue}assignToOutput(Y,re){if(this.globalOptions.mergeOutput)Object.assign(Y,re);else for(let[le,ue]of Object.entries(re))this.assignObjectToOutput(Y,le,ue)}}function ne(oe,Y,re,le){var ue=oe+Y/60+re/3600;return le!=="S"&&le!=="W"||(ue*=-1),ue}e(ie,"type","tiff"),e(ie,"headerLength",10),y.set("tiff",ie);const ae={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},ae,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},ae,{tiff:!1,ifd1:!0,mergeOutput:!1});const de=Object.assign({},ae,{firstChunkSize:4e4,ifd0:[274]});async function ce(oe){let Y=new H(de);await Y.read(oe);let re=await Y.parse();if(re&&re.ifd0)return re.ifd0[274]}const pe=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let ge=!0,me=!0;if(typeof navigator=="object"){let oe=navigator.userAgent;if(oe.includes("iPad")||oe.includes("iPhone")){let Y=oe.match(/OS (\d+)_(\d+)/);if(Y){let[,re,le]=Y;ge=Number(re)+.1*Number(le)<13.4,me=!1}}else if(oe.includes("OS X 10")){let[,Y]=oe.match(/OS X 10[_.](\d+)/);ge=me=Number(Y)<15}if(oe.includes("Chrome/")){let[,Y]=oe.match(/Chrome\/(\d+)/);ge=me=Number(Y)<81}else if(oe.includes("Firefox/")){let[,Y]=oe.match(/Firefox\/(\d+)/);ge=me=Number(Y)<77}}async function ye(oe){let Y=await ce(oe);return Object.assign({canvas:ge,css:me},pe[Y])}class be extends c{constructor(...Y){super(...Y),e(this,"ranges",new we),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(Y,re,le){if(Y===0&&this.byteLength===0&&le){let ue=new DataView(le.buffer||le,le.byteOffset,le.byteLength);this._swapDataView(ue)}else{let ue=Y+re;if(ue>this.byteLength){let{dataView:he}=this._extend(ue);this._swapDataView(he)}}}_extend(Y){let re;re=a?r.allocUnsafe(Y):new Uint8Array(Y);let le=new DataView(re.buffer,re.byteOffset,re.byteLength);return re.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:re,dataView:le}}subarray(Y,re,le=!1){return re=re||this._lengthToEnd(Y),le&&this._tryExtend(Y,re),this.ranges.add(Y,re),super.subarray(Y,re)}set(Y,re,le=!1){le&&this._tryExtend(re,Y.byteLength,Y);let ue=super.set(Y,re);return this.ranges.add(re,ue.byteLength),ue}async ensureChunk(Y,re){this.chunked&&(this.ranges.available(Y,re)||await this.readChunk(Y,re))}available(Y,re){return this.ranges.available(Y,re)}}class we{constructor(){e(this,"list",[])}get length(){return this.list.length}add(Y,re,le=0){let ue=Y+re,he=this.list.filter((fe=>ke(Y,fe.offset,ue)||ke(Y,fe.end,ue)));if(he.length>0){Y=Math.min(Y,...he.map((_e=>_e.offset))),ue=Math.max(ue,...he.map((_e=>_e.end))),re=ue-Y;let fe=he.shift();fe.offset=Y,fe.length=re,fe.end=ue,this.list=this.list.filter((_e=>!he.includes(_e)))}else this.list.push({offset:Y,length:re,end:ue})}available(Y,re){let le=Y+re;return this.list.some((ue=>ue.offset<=Y&&le<=ue.end))}}function ke(oe,Y,re){return oe<=Y&&Y<=re}class Oe extends be{constructor(Y,re){super(0),e(this,"chunksRead",0),this.input=Y,this.options=re}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(Y=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let re=this.options.chunkSize,le=await this.readChunk(Y,re);return!!le&&le.byteLength===re}async readChunk(Y,re){if(this.chunksRead++,(re=this.safeWrapAddress(Y,re))!==0)return this._readChunk(Y,re)}safeWrapAddress(Y,re){return this.size!==void 0&&Y+re>this.size?Math.max(0,this.size-Y):re}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}b.set("blob",class extends Oe{async readWhole(){this.chunked=!1;let oe=await A(this.input);this._swapArrayBuffer(oe)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(oe,Y){let re=Y?oe+Y:void 0,le=this.input.slice(oe,re),ue=await A(le);return this.set(ue,oe,!0)}});const version$3="4.2.3",packageJson$2={version:version$3},locale$1={strings:{generatingThumbnails:"Generating thumbnails..."}};function canvasToBlob(oe,Y,re){try{oe.getContext("2d").getImageData(0,0,1,1)}catch(le){if(le.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return oe.toBlob?new Promise(le=>{oe.toBlob(le,Y,re)}).then(le=>{if(le===null)throw new Error("cannot read image, probably an svg with external resources");return le}):Promise.resolve().then(()=>dataURItoBlob(oe.toDataURL(Y,re),{})).then(le=>{if(le===null)throw new Error("could not extract blob, probably an old browser");return le})}function rotateImage(oe,Y){let re=oe.width,le=oe.height;(Y.deg===90||Y.deg===270)&&(re=oe.height,le=oe.width);const ue=document.createElement("canvas");ue.width=re,ue.height=le;const he=ue.getContext("2d");return he.translate(re/2,le/2),Y.canvas&&(he.rotate(Y.rad),he.scale(Y.scaleX,Y.scaleY)),he.drawImage(oe,-oe.width/2,-oe.height/2,oe.width,oe.height),ue}function protect(oe){const Y=oe.width/oe.height,re=5e6,le=4096;let ue=Math.floor(Math.sqrt(re*Y)),he=Math.floor(re/Math.sqrt(re*Y));if(ue>le&&(ue=le,he=Math.round(ue/Y)),he>le&&(he=le,ue=Math.round(Y*he)),oe.width>ue){const fe=document.createElement("canvas");return fe.width=ue,fe.height=he,fe.getContext("2d").drawImage(oe,0,0,ue,he),fe}return oe}const defaultOptions$4={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class ThumbnailGenerator extends UIPlugin{constructor(re,le){super(re,{...defaultOptions$4,...le});Be(this,"queue");Be(this,"queueProcessing");Be(this,"defaultThumbnailDimension");Be(this,"thumbnailType");Be(this,"onFileAdded",re=>{!re.preview&&re.data&&isPreviewSupported(re.type)&&!re.isRemote&&this.addToQueue(re.id)});Be(this,"onCancelRequest",re=>{const le=this.queue.indexOf(re.id);le!==-1&&this.queue.splice(le,1)});Be(this,"onFileRemoved",re=>{const le=this.queue.indexOf(re.id);le!==-1&&this.queue.splice(le,1),re.preview&&isObjectURL(re.preview)&&URL.revokeObjectURL(re.preview)});Be(this,"onRestored",()=>{this.uppy.getFiles().filter(le=>le.isRestored).forEach(le=>{(!le.preview||isObjectURL(le.preview))&&this.addToQueue(le.id)})});Be(this,"onAllFilesRemoved",()=>{this.queue=[]});Be(this,"waitUntilAllProcessed",re=>{re.forEach(ue=>{const he=this.uppy.getFile(ue);this.uppy.emit("preprocess-progress",he,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const le=()=>{re.forEach(ue=>{const he=this.uppy.getFile(ue);this.uppy.emit("preprocess-complete",he)})};return new Promise(ue=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{le(),ue()}):(le(),ue())})});if(this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=locale$1,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(re,le,ue){const he=URL.createObjectURL(re.data),fe=new Promise((ve,Se)=>{const $e=new Image;$e.src=he,$e.addEventListener("load",()=>{URL.revokeObjectURL(he),ve($e)}),$e.addEventListener("error",Ee=>{URL.revokeObjectURL(he),Se(Ee.error||new Error("Could not create thumbnail"))})}),_e=ye(re.data).catch(()=>1);return Promise.all([fe,_e]).then(([ve,Se])=>{const $e=this.getProportionalDimensions(ve,le,ue,Se.deg),Ee=rotateImage(ve,Se),Ce=this.resizeImage(Ee,$e.width,$e.height);return canvasToBlob(Ce,this.thumbnailType,80)}).then(ve=>URL.createObjectURL(ve))}getProportionalDimensions(re,le,ue,he){let fe=re.width/re.height;if((he===90||he===270)&&(fe=re.height/re.width),le!=null){let _e=le;return re.width<le&&(_e=re.width),{width:_e,height:Math.round(_e/fe)}}if(ue!=null){let _e=ue;return re.height<ue&&(_e=re.height),{width:Math.round(_e*fe),height:_e}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/fe)}}resizeImage(re,le,ue){let he=protect(re),fe=Math.ceil(Math.log2(he.width/le));fe<1&&(fe=1);let _e=le*2**(fe-1),ve=ue*2**(fe-1);const Se=2;for(;fe--;){const $e=document.createElement("canvas");$e.width=_e,$e.height=ve,$e.getContext("2d").drawImage(he,0,0,_e,ve),he=$e,_e=Math.round(_e/Se),ve=Math.round(ve/Se)}return he}setPreviewURL(re,le){this.uppy.setFileState(re,{preview:le})}addToQueue(re){this.queue.push(re),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const re=this.uppy.getFile(this.queue.shift());return re?this.requestThumbnail(re).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(re){return isPreviewSupported(re.type)&&!re.isRemote?this.createThumbnail(re,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(le=>{this.setPreviewURL(re.id,le),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${re.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(re.id),le)}).catch(le=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${re.id}:`,"warning"),this.uppy.log(le,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(re.id),le)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}Be(ThumbnailGenerator,"VERSION",packageJson$2.version);function findAllDOMElements(oe){if(typeof oe=="string"){const Y=document.querySelectorAll(oe);return Y.length===0?null:Array.from(Y)}return typeof oe=="object"&&isDOMElement(oe)?[oe]:null}const toArray=Array.from;function fallbackApi(oe){const Y=toArray(oe.files);return Promise.resolve(Y)}function getFilesAndDirectoriesFromDirectory(oe,Y,re,{onSuccess:le}){oe.readEntries(ue=>{const he=[...Y,...ue];ue.length?queueMicrotask(()=>{getFilesAndDirectoriesFromDirectory(oe,he,re,{onSuccess:le})}):le(he)},ue=>{re(ue),le(Y)})}function getAsFileSystemHandleFromEntry(oe,Y){return oe==null?oe:{kind:oe.isFile?"file":oe.isDirectory?"directory":void 0,name:oe.name,getFile(){return new Promise((re,le)=>oe.file(re,le))},async*values(){const re=oe.createReader();yield*await new Promise(ue=>{getFilesAndDirectoriesFromDirectory(re,[],Y,{onSuccess:he=>ue(he.map(fe=>getAsFileSystemHandleFromEntry(fe,Y)))})})},isSameEntry:void 0}}async function*createPromiseToAddFileOrParseDirectory(oe,Y,re=void 0){const le=()=>`${Y}/${oe.name}`;if(oe.kind==="file"){const ue=await oe.getFile();ue!=null?(ue.relativePath=Y?le():null,yield ue):re!=null&&(yield re)}else if(oe.kind==="directory")for await(const ue of oe.values())yield*createPromiseToAddFileOrParseDirectory(ue,Y?le():oe.name);else re!=null&&(yield re)}async function*getFilesFromDataTransfer(oe,Y){const re=await Promise.all(Array.from(oe.items,async le=>{let ue;return ue??=getAsFileSystemHandleFromEntry(typeof le.getAsEntry=="function"?le.getAsEntry():le.webkitGetAsEntry(),Y),{fileSystemHandle:ue,lastResortFile:le.getAsFile()}}));for(const{lastResortFile:le,fileSystemHandle:ue}of re)if(ue!=null)try{yield*createPromiseToAddFileOrParseDirectory(ue,"",le)}catch(he){le!=null?yield le:Y(he)}else le!=null&&(yield le)}async function getDroppedFiles(oe,Y){const re=Y?.logDropError??Function.prototype;try{const le=[];for await(const ue of getFilesFromDataTransfer(oe,re))le.push(ue);return le}catch{return fallbackApi(oe)}}const version$2="4.4.3",packageJson$1={version:version$2};function isDragDropSupported(){const oe=document.body;return!(!("draggable"in oe)||!("ondragstart"in oe&&"ondrop"in oe)||!("FormData"in window)||!("FileReader"in window))}class AddFiles extends x{constructor(){super(...arguments);Be(this,"fileInput",null);Be(this,"folderInput",null);Be(this,"mobilePhotoFileInput",null);Be(this,"mobileVideoFileInput",null);Be(this,"triggerFileInputClick",()=>{this.fileInput?.click()});Be(this,"triggerFolderInputClick",()=>{this.folderInput?.click()});Be(this,"triggerVideoCameraInputClick",()=>{this.mobileVideoFileInput?.click()});Be(this,"triggerPhotoCameraInputClick",()=>{this.mobilePhotoFileInput?.click()});Be(this,"onFileInputChange",re=>{this.props.handleInputChange(re),re.currentTarget.value=""});Be(this,"renderHiddenInput",(re,le)=>u$1("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:re,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes?.join(", "),ref:le}));Be(this,"renderHiddenCameraInput",(re,le,ue)=>{const fe={photo:"image/*",video:"video/*"}[re];return u$1("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${re}`,onChange:this.onFileInputChange,capture:le===""?"environment":le,accept:fe,ref:ue})});Be(this,"renderMyDeviceAcquirer",()=>u$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[u$1("div",{className:"uppy-DashboardTab-inner",children:u$1("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:u$1("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),u$1("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})}));Be(this,"renderPhotoCamera",()=>u$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[u$1("div",{className:"uppy-DashboardTab-inner",children:u$1("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:u$1("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),u$1("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})}));Be(this,"renderVideoCamera",()=>u$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[u$1("div",{className:"uppy-DashboardTab-inner",children:u$1("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:u$1("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),u$1("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})}));Be(this,"renderBrowseButton",(re,le)=>{const ue=this.props.acquirers.length;return u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:le,"data-uppy-super-focusable":ue===0,children:re})});Be(this,"renderDropPasteBrowseTagline",re=>{const le=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),ue=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),he=this.props.fileManagerSelectionType,fe=he.charAt(0).toUpperCase()+he.slice(1);return u$1("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):re>0?this.props.i18nArray(`dropPasteImport${fe}`,{browseFiles:le,browseFolders:ue,browse:le}):this.props.i18nArray(`dropPaste${fe}`,{browseFiles:le,browseFolders:ue,browse:le})})});Be(this,"renderAcquirer",re=>u$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":re.id,children:u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":re.id,"aria-controls":`uppy-DashboardContent-panel--${re.id}`,"aria-selected":this.props.activePickerPanel?.id===re.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(re.id),children:[u$1("div",{className:"uppy-DashboardTab-inner",children:re.icon()}),u$1("div",{className:"uppy-DashboardTab-name",children:re.name})]})}));Be(this,"renderAcquirers",re=>{const le=[...re],ue=le.splice(re.length-2,re.length);return u$1(k$2,{children:[le.map(he=>this.renderAcquirer(he)),u$1("span",{role:"presentation",style:{"white-space":"nowrap"},children:ue.map(he=>this.renderAcquirer(he))})]})});Be(this,"renderSourcesList",(re,le)=>{const{showNativePhotoCameraButton:ue,showNativeVideoCameraButton:he}=this.props;let fe=[];const _e="myDevice";le||fe.push({key:_e,elements:this.renderMyDeviceAcquirer()}),ue&&fe.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),he&&fe.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),fe.push(...re.map(Ee=>({key:Ee.id,elements:this.renderAcquirer(Ee)}))),fe.length===1&&fe[0].key===_e&&(fe=[]);const Se=[...fe],$e=Se.splice(fe.length-2,fe.length);return u$1(k$2,{children:[this.renderDropPasteBrowseTagline(fe.length),u$1("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[Se.map(({key:Ee,elements:Ce})=>u$1(k$2,{children:Ce},Ee)),u$1("span",{role:"presentation",style:{"white-space":"nowrap"},children:$e.map(({key:Ee,elements:Ce})=>u$1(k$2,{children:Ce},Ee))})]})]})})}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:re}=this.props,le=u$1("span",{children:[u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:u$1("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),u$1("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),ue=re("poweredBy",{uppy:le});return u$1("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:ue})}render(){const{showNativePhotoCameraButton:re,showNativeVideoCameraButton:le,nativeCameraFacingMode:ue}=this.props;return u$1("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,he=>{this.fileInput=he}),this.renderHiddenInput(!0,he=>{this.folderInput=he}),re&&this.renderHiddenCameraInput("photo",ue,he=>{this.mobilePhotoFileInput=he}),le&&this.renderHiddenCameraInput("video",ue,he=>{this.mobileVideoFileInput=he}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),u$1("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&u$1("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const AddFilesPanel=oe=>u$1("div",{className:classNames("uppy-Dashboard-AddFilesPanel",oe.className),"data-uppy-panelType":"AddFiles","aria-hidden":!oe.showAddFilesPanel,children:[u$1("div",{className:"uppy-DashboardContent-bar",children:[u$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:oe.i18n("addingMoreFiles")}),u$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>oe.toggleAddFilesPanel(!1),children:oe.i18n("back")})]}),u$1(AddFiles,{...oe})]});function EditorPanel(oe){const Y=oe.files[oe.fileCardFor],re=()=>{oe.uppy.emit("file-editor:cancel",Y),oe.closeFileEditor()};return u$1("div",{className:classNames("uppy-DashboardContent-panel",oe.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[u$1("div",{className:"uppy-DashboardContent-bar",children:[u$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:oe.i18nArray("editing",{file:u$1("span",{className:"uppy-DashboardContent-titleFile",children:Y.meta?Y.meta.name:Y.name})})}),u$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:re,children:oe.i18n("cancel")}),u$1("button",{className:"uppy-DashboardContent-save",type:"button",onClick:oe.saveFileEditor,children:oe.i18n("save")})]}),u$1("div",{className:"uppy-DashboardContent-panelBody",children:oe.editors.map(le=>oe.uppy.getPlugin(le.id).render(oe.state))})]})}function iconImage(){return u$1("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("g",{fill:"#686DE0",fillRule:"evenodd",children:[u$1("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),u$1("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),u$1("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function iconAudio(){return u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function iconVideo(){return u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function iconPDF(){return u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function iconArchive(){return u$1("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function iconFile(){return u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[u$1("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),u$1("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function iconText(){return u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function getIconByMime(oe){const Y={color:"#838999",icon:iconFile()};if(!oe)return Y;const re=oe.split("/")[0],le=oe.split("/")[1];return re==="text"?{color:"#5a5e69",icon:iconText()}:re==="image"?{color:"#686de0",icon:iconImage()}:re==="audio"?{color:"#068dbb",icon:iconAudio()}:re==="video"?{color:"#19af67",icon:iconVideo()}:re==="application"&&le==="pdf"?{color:"#e25149",icon:iconPDF()}:re==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(le)!==-1?{color:"#00C469",icon:iconArchive()}:Y}function ignoreEvent(oe){const{tagName:Y}=oe.target;if(Y==="INPUT"||Y==="TEXTAREA"){oe.stopPropagation();return}oe.preventDefault(),oe.stopPropagation()}function FilePreview(oe){const{file:Y}=oe;if(Y.preview)return u$1("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:Y.name,src:Y.preview});const{color:re,icon:le}=getIconByMime(Y.type);return u$1("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[u$1("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:re},children:le}),u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:u$1("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function RenderMetaFields(oe){const{computedMetaFields:Y,requiredMetaFields:re,updateMeta:le,form:ue,formState:he}=oe,fe={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return Y.map(_e=>{const ve=`uppy-Dashboard-FileCard-input-${_e.id}`,Se=re.includes(_e.id);return u$1("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[u$1("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:ve,children:_e.name}),_e.render!==void 0?_e.render({value:he[_e.id],onChange:$e=>le($e,_e.id),fieldCSSClasses:fe,required:Se,form:ue.id},_$1):u$1("input",{className:fe.text,id:ve,form:ue.id,type:_e.type||"text",required:Se,value:he[_e.id],placeholder:_e.placeholder,onInput:$e=>le($e.target.value,_e.id),"data-uppy-super-focusable":!0})]},_e.id)})}function FileCard(oe){const{files:Y,fileCardFor:re,toggleFileCard:le,saveFileCard:ue,metaFields:he,requiredMetaFields:fe,openFileEditor:_e,i18n:ve,i18nArray:Se,className:$e,canEditFile:Ee}=oe,Ce=()=>typeof he=="function"?he(Y[re]):he,Ue=Y[re],xe=Ce()??[],Ne=Ee(Ue),Ie={};xe.forEach(ze=>{Ie[ze.id]=Ue.meta[ze.id]??""});const[qe,Te]=d$1(Ie),Re=q$2(ze=>{ze.preventDefault(),ue(qe,re)},[ue,qe,re]),De=(ze,Ye)=>{Te({...qe,[Ye]:ze})},Le=()=>{le(!1)},[Ge]=d$1(()=>{const ze=document.createElement("form");return ze.setAttribute("tabindex","-1"),ze.id=nanoid(),ze});return y$1(()=>(document.body.appendChild(Ge),Ge.addEventListener("submit",Re),()=>{Ge.removeEventListener("submit",Re),document.body.removeChild(Ge)}),[Ge,Re]),u$1("div",{className:classNames("uppy-Dashboard-FileCard",$e),"data-uppy-panelType":"FileCard",onDragOver:ignoreEvent,onDragLeave:ignoreEvent,onDrop:ignoreEvent,onPaste:ignoreEvent,children:[u$1("div",{className:"uppy-DashboardContent-bar",children:[u$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:Se("editing",{file:u$1("span",{className:"uppy-DashboardContent-titleFile",children:Ue.meta?Ue.meta.name:Ue.name})})}),u$1("button",{className:"uppy-DashboardContent-back",type:"button",form:Ge.id,title:ve("finishEditingFile"),onClick:Le,children:ve("cancel")})]}),u$1("div",{className:"uppy-Dashboard-FileCard-inner",children:[u$1("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:getIconByMime(Ue.type).color},children:[u$1(FilePreview,{file:Ue}),Ne&&u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:ze=>{Re(ze),_e(Ue)},children:ve("editImage")})]}),u$1("div",{className:"uppy-Dashboard-FileCard-info",children:u$1(RenderMetaFields,{computedMetaFields:xe,requiredMetaFields:fe,updateMeta:De,form:Ge,formState:qe})}),u$1("div",{className:"uppy-Dashboard-FileCard-actions",children:[u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:Ge.id,children:ve("saveChanges")}),u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:Le,form:Ge.id,children:ve("cancel")})]})]})]})}function shallowEqualObjects(oe,Y){if(oe===Y)return!0;if(!oe||!Y)return!1;const re=Object.keys(oe),le=Object.keys(Y),ue=re.length;if(le.length!==ue)return!1;for(let he=0;he<ue;he++){const fe=re[he];if(oe[fe]!==Y[fe]||!Object.prototype.hasOwnProperty.call(Y,fe))return!1}return!0}function copyToClipboard(oe,Y="Copy the URL below"){return new Promise(re=>{const le=document.createElement("textarea");le.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),le.value=oe,document.body.appendChild(le),le.select();const ue=()=>{document.body.removeChild(le),window.prompt(Y,oe),re()};try{return document.execCommand("copy")?(document.body.removeChild(le),re()):ue()}catch{return document.body.removeChild(le),ue()}})}function EditButton({file:oe,uploadInProgressOrComplete:Y,metaFields:re,canEditFile:le,i18n:ue,onClick:he}){return!Y&&re&&re.length>0||!Y&&le(oe)?u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":ue("editFileWithFilename",{file:oe.meta.name}),title:ue("editFileWithFilename",{file:oe.meta.name}),onClick:()=>he(),children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:u$1("g",{fillRule:"evenodd",children:[u$1("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),u$1("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),u$1("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function RemoveButton({i18n:oe,onClick:Y,file:re}){return u$1("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":oe("removeFile",{file:re.meta.name}),title:oe("removeFile",{file:re.meta.name}),onClick:()=>Y(),children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[u$1("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),u$1("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function CopyLinkButton({file:oe,uppy:Y,i18n:re}){const le=ue=>{copyToClipboard(oe.uploadURL,re("copyLinkToClipboardFallback")).then(()=>{Y.log("Link copied to clipboard."),Y.info(re("copyLinkToClipboardSuccess"),"info",3e3)}).catch(Y.log).then(()=>ue.target.focus({preventScroll:!0}))};return u$1("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":re("copyLink"),title:re("copyLink"),onClick:ue=>le(ue),children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:u$1("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function Buttons(oe){const{uppy:Y,file:re,uploadInProgressOrComplete:le,canEditFile:ue,metaFields:he,showLinkToFileUploadResult:fe,showRemoveButton:_e,i18n:ve,toggleFileCard:Se,openFileEditor:$e}=oe;return u$1("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[u$1(EditButton,{i18n:ve,file:re,uploadInProgressOrComplete:le,canEditFile:ue,metaFields:he,onClick:()=>{he&&he.length>0?Se(!0,re.id):$e(re)}}),fe&&re.uploadURL?u$1(CopyLinkButton,{file:re,uppy:Y,i18n:ve}):null,_e?u$1(RemoveButton,{i18n:ve,file:re,onClick:()=>Y.removeFile(re.id)}):null]})}const separator="...";function truncateString(oe,Y){if(Y===0)return"";if(oe.length<=Y)return oe;if(Y<=separator.length+1)return`${oe.slice(0,Y-1)}`;const re=Y-separator.length,le=Math.ceil(re/2),ue=Math.floor(re/2);return oe.slice(0,le)+separator+oe.slice(-ue)}const metaFieldIdToName=(oe,Y)=>(typeof Y=="function"?Y():Y).filter(ue=>ue.id===oe)[0].name;function MetaErrorMessage(oe){const{file:Y,toggleFileCard:re,i18n:le,metaFields:ue}=oe,{missingRequiredMetaFields:he}=Y;if(!he?.length)return null;const fe=he.map(_e=>metaFieldIdToName(_e,ue)).join(", ");return u$1("div",{className:"uppy-Dashboard-Item-errorMessage",children:[le("missingRequiredMetaFields",{smart_count:he.length,fields:fe})," ",u$1("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>re(!0,Y.id),children:le("editFile")})]})}const renderFileName=oe=>{const{author:Y,name:re}=oe.file.meta;function le(){return oe.isSingleFile&&oe.containerHeight>=350?90:oe.containerWidth<=352?35:oe.containerWidth<=576?60:Y?20:30}return u$1("div",{className:"uppy-Dashboard-Item-name",title:re,children:truncateString(re,le())})},renderAuthor=oe=>{const{author:Y}=oe.file.meta,re=oe.file.remote?.providerName,le="";return Y?u$1("div",{className:"uppy-Dashboard-Item-author",children:[u$1("a",{href:`${Y.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:truncateString(Y.name,13)}),re?u$1(k$2,{children:[` ${le} `,re,` ${le} `]}):null]}):null},renderFileSize=oe=>oe.file.size&&u$1("div",{className:"uppy-Dashboard-Item-statusSize",children:prettierBytes(oe.file.size)}),ReSelectButton=oe=>oe.file.isGhost&&u$1("span",{children:["  ",u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>oe.toggleAddFilesPanel(!0),children:oe.i18n("reSelect")})]}),ErrorButton=({file:oe,onClick:Y})=>oe.error?u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":oe.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:Y,type:"button",children:"?"}):null;function FileInfo(oe){const{file:Y,i18n:re,toggleFileCard:le,metaFields:ue,toggleAddFilesPanel:he,isSingleFile:fe,containerHeight:_e,containerWidth:ve}=oe;return u$1("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":Y.source,children:[u$1("div",{className:"uppy-Dashboard-Item-fileName",children:[renderFileName({file:Y,isSingleFile:fe,containerHeight:_e,containerWidth:ve}),u$1(ErrorButton,{file:Y,onClick:()=>alert(Y.error)})]}),u$1("div",{className:"uppy-Dashboard-Item-status",children:[renderAuthor({file:Y}),renderFileSize({file:Y}),ReSelectButton({file:Y,toggleAddFilesPanel:he,i18n:re})]}),u$1(MetaErrorMessage,{file:Y,i18n:re,toggleFileCard:le,metaFields:ue})]})}function FilePreviewAndLink(oe){const{file:Y,i18n:re,toggleFileCard:le,metaFields:ue,showLinkToFileUploadResult:he}=oe,_e=Y.preview?"rgba(255, 255, 255, 0.5)":getIconByMime(Y.type).color;return u$1("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:_e},children:[he&&Y.uploadURL&&u$1("a",{className:"uppy-Dashboard-Item-previewLink",href:Y.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":Y.meta.name,children:u$1("span",{hidden:!0,children:Y.meta.name})}),u$1(FilePreview,{file:Y}),u$1(MetaErrorMessage,{file:Y,i18n:re,toggleFileCard:le,metaFields:ue})]})}function onPauseResumeCancelRetry(oe){if(!oe.isUploaded){if(oe.error&&!oe.hideRetryButton){oe.uppy.retryUpload(oe.file.id);return}oe.resumableUploads&&!oe.hidePauseResumeButton?oe.uppy.pauseResume(oe.file.id):oe.individualCancellation&&!oe.hideCancelButton&&oe.uppy.removeFile(oe.file.id)}}function progressIndicatorTitle(oe){return oe.isUploaded?oe.i18n("uploadComplete"):oe.error?oe.i18n("retryUpload"):oe.resumableUploads?oe.file.isPaused?oe.i18n("resumeUpload"):oe.i18n("pauseUpload"):oe.individualCancellation?oe.i18n("cancelUpload"):""}function ProgressIndicatorButton(oe){return u$1("div",{className:"uppy-Dashboard-Item-progress",children:u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":progressIndicatorTitle(oe),title:progressIndicatorTitle(oe),onClick:()=>onPauseResumeCancelRetry(oe),children:oe.children})})}function ProgressCircleContainer({children:oe}){return u$1("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:oe})}function ProgressCircle({progress:oe}){const Y=2*Math.PI*15;return u$1("g",{children:[u$1("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),u$1("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":Y,"stroke-dashoffset":Y-Y/100*oe})]})}function FileProgress(oe){return!oe.file.progress.uploadStarted||oe.file.progress.percentage===void 0?null:oe.isUploaded?u$1("div",{className:"uppy-Dashboard-Item-progress",children:u$1("div",{className:"uppy-Dashboard-Item-progressIndicator",children:u$1(ProgressCircleContainer,{children:[u$1("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),u$1("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):oe.recoveredState?null:oe.error&&!oe.hideRetryButton?u$1(ProgressIndicatorButton,{...oe,children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[u$1("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),u$1("path",{d:"M7.9 3H10v2H7.9z"}),u$1("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),u$1("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):oe.resumableUploads&&!oe.hidePauseResumeButton?u$1(ProgressIndicatorButton,{...oe,children:u$1(ProgressCircleContainer,{children:[u$1(ProgressCircle,{progress:oe.file.progress.percentage}),oe.file.isPaused?u$1("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):u$1("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[u$1("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),u$1("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!oe.resumableUploads&&oe.individualCancellation&&!oe.hideCancelButton?u$1(ProgressIndicatorButton,{...oe,children:u$1(ProgressCircleContainer,{children:[u$1(ProgressCircle,{progress:oe.file.progress.percentage}),u$1("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):u$1("div",{className:"uppy-Dashboard-Item-progress",children:u$1("div",{className:"uppy-Dashboard-Item-progressIndicator",children:u$1(ProgressCircleContainer,{children:u$1(ProgressCircle,{progress:oe.file.progress.percentage})})})})}class FileItem extends x{componentDidMount(){const{file:Y}=this.props;Y.preview||this.props.handleRequestThumbnail(Y)}shouldComponentUpdate(Y){return!shallowEqualObjects(this.props,Y)}componentDidUpdate(){const{file:Y}=this.props;Y.preview||this.props.handleRequestThumbnail(Y)}componentWillUnmount(){const{file:Y}=this.props;Y.preview||this.props.handleCancelThumbnail(Y)}render(){const{file:Y}=this.props,re=Y.progress.preprocess||Y.progress.postprocess,le=!!Y.progress.uploadComplete&&!re&&!Y.error,ue=!!Y.progress.uploadStarted||!!re,he=Y.progress.uploadStarted&&!Y.progress.uploadComplete||re,fe=Y.error||!1,{isGhost:_e}=Y;let ve=(this.props.individualCancellation||!he)&&!le;le&&this.props.showRemoveButtonAfterComplete&&(ve=!0);const Se=classNames({"uppy-Dashboard-Item":!0,"is-inprogress":he&&!this.props.recoveredState,"is-processing":re,"is-complete":le,"is-error":!!fe,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":_e});return u$1("div",{className:Se,id:`uppy_${Y.id}`,role:this.props.role,children:[u$1("div",{className:"uppy-Dashboard-Item-preview",children:[u$1(FilePreviewAndLink,{file:Y,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),u$1(FileProgress,{uppy:this.props.uppy,file:Y,error:fe,isUploaded:le,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),u$1("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[u$1(FileInfo,{file:Y,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),u$1(Buttons,{file:Y,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:ve,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:ue,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function chunks(oe,Y){const re=[];let le=[];return oe.forEach(ue=>{le.length<Y?le.push(ue):(re.push(le),le=[ue])}),le.length&&re.push(le),re}function FileList({id:oe,i18n:Y,uppy:re,files:le,resumableUploads:ue,hideRetryButton:he,hidePauseResumeButton:fe,hideCancelButton:_e,showLinkToFileUploadResult:ve,showRemoveButtonAfterComplete:Se,metaFields:$e,isSingleFile:Ee,toggleFileCard:Ce,handleRequestThumbnail:Ue,handleCancelThumbnail:xe,recoveredState:Ne,individualCancellation:Ie,itemsPerRow:qe,openFileEditor:Te,canEditFile:Re,toggleAddFilesPanel:De,containerWidth:Le,containerHeight:Ge}){const ze=qe===1?71:200,Ye=T$2(()=>{const it=(ot,Ve)=>Number(le[Ve].isGhost)-Number(le[ot].isGhost),nt=Object.keys(le);return Ne&&nt.sort(it),chunks(nt,qe)},[le,qe,Ne]),Xe=it=>u$1("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:it.map(nt=>u$1(FileItem,{uppy:re,id:oe,i18n:Y,resumableUploads:ue,individualCancellation:Ie,hideRetryButton:he,hidePauseResumeButton:fe,hideCancelButton:_e,showLinkToFileUploadResult:ve,showRemoveButtonAfterComplete:Se,metaFields:$e,recoveredState:Ne,isSingleFile:Ee,containerWidth:Le,containerHeight:Ge,toggleFileCard:Ce,handleRequestThumbnail:Ue,handleCancelThumbnail:xe,role:"listitem",openFileEditor:Te,canEditFile:Re,toggleAddFilesPanel:De,file:le[nt]},nt))},it[0]);return Ee?u$1("div",{class:"uppy-Dashboard-files",children:Xe(Ye[0])}):u$1(VirtualList,{class:"uppy-Dashboard-files",role:"list",data:Ye,renderRow:Xe,rowHeight:ze})}function PickerPanelContent({activePickerPanel:oe,className:Y,hideAllPanels:re,i18n:le,state:ue,uppy:he}){const fe=A$1(null);return u$1("div",{className:classNames("uppy-DashboardContent-panel",Y),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${oe.id}`,onDragOver:ignoreEvent,onDragLeave:ignoreEvent,onDrop:ignoreEvent,onPaste:ignoreEvent,children:[u$1("div",{className:"uppy-DashboardContent-bar",children:[u$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:le("importFrom",{name:oe.name})}),u$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:re,children:le("cancel")})]}),u$1("div",{ref:fe,className:"uppy-DashboardContent-panelBody",children:he.getPlugin(oe.id).render(ue,fe.current)})]})}const uploadStates={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function getUploadingState(oe,Y,re,le={}){if(oe)return uploadStates.STATE_ERROR;if(Y)return uploadStates.STATE_COMPLETE;if(re)return uploadStates.STATE_PAUSED;let ue=uploadStates.STATE_WAITING;const he=Object.keys(le);for(let fe=0;fe<he.length;fe++){const{progress:_e}=le[he[fe]];if(_e.uploadStarted&&!_e.uploadComplete)return uploadStates.STATE_UPLOADING;_e.preprocess&&ue!==uploadStates.STATE_UPLOADING&&(ue=uploadStates.STATE_PREPROCESSING),_e.postprocess&&ue!==uploadStates.STATE_UPLOADING&&ue!==uploadStates.STATE_PREPROCESSING&&(ue=uploadStates.STATE_POSTPROCESSING)}return ue}function UploadStatus({files:oe,i18n:Y,isAllComplete:re,isAllErrored:le,isAllPaused:ue,inProgressNotPausedFiles:he,newFiles:fe,processingFiles:_e}){switch(getUploadingState(le,re,ue,oe)){case"uploading":return Y("uploadingXFiles",{smart_count:he.length});case"preprocessing":case"postprocessing":return Y("processingXFiles",{smart_count:_e.length});case"paused":return Y("uploadPaused");case"waiting":return Y("xFilesSelected",{smart_count:fe.length});case"complete":return Y("uploadComplete");case"error":return Y("error")}}function PanelTopBar(oe){const{i18n:Y,isAllComplete:re,hideCancelButton:le,maxNumberOfFiles:ue,toggleAddFilesPanel:he,uppy:fe}=oe;let{allowNewUpload:_e}=oe;return _e&&ue&&(_e=oe.totalFileCount<oe.maxNumberOfFiles),u$1("div",{className:"uppy-DashboardContent-bar",children:[!re&&!le?u$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>fe.cancelAll(),children:Y("cancel")}):u$1("div",{}),u$1("div",{className:"uppy-DashboardContent-title",children:u$1(UploadStatus,{...oe})}),_e?u$1("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":Y("addMoreFiles"),title:Y("addMoreFiles"),onClick:()=>he(!0),children:[u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:u$1("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),u$1("span",{className:"uppy-DashboardContent-addMoreCaption",children:Y("addMore")})]}):u$1("div",{})]})}const transitionName="uppy-transition-slideDownUp",duration=250;function Slide({children:oe}){const[Y,re]=d$1(null),[le,ue]=d$1(""),he=A$1(),fe=A$1(),_e=A$1(),ve=()=>{ue(`${transitionName}-enter`),cancelAnimationFrame(_e.current),clearTimeout(fe.current),fe.current=void 0,_e.current=requestAnimationFrame(()=>{ue(`${transitionName}-enter ${transitionName}-enter-active`),he.current=setTimeout(()=>{ue("")},duration)})},Se=()=>{ue(`${transitionName}-leave`),cancelAnimationFrame(_e.current),clearTimeout(he.current),he.current=void 0,_e.current=requestAnimationFrame(()=>{ue(`${transitionName}-leave ${transitionName}-leave-active`),fe.current=setTimeout(()=>{re(null),ue("")},duration)})};return y$1(()=>{const $e=H$2(oe)[0];Y!==$e&&($e&&!Y?ve():Y&&!$e&&!fe.current&&Se(),re($e))},[oe,Y]),y$1(()=>()=>{clearTimeout(he.current),clearTimeout(fe.current),cancelAnimationFrame(_e.current)},[]),Y?K$2(Y,{className:classNames(le,Y.props.className)}):null}const WIDTH_XL=900,WIDTH_LG=700,WIDTH_MD=576,HEIGHT_MD=330;function Dashboard$1(oe){const Y=oe.totalFileCount===0,re=oe.totalFileCount===1,le=oe.containerWidth>WIDTH_MD,ue=oe.containerHeight>HEIGHT_MD,he=classNames({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":oe.disabled,"uppy-Dashboard--animateOpenClose":oe.animateOpenClose,"uppy-Dashboard--isClosing":oe.isClosing,"uppy-Dashboard--isDraggingOver":oe.isDraggingOver,"uppy-Dashboard--modal":!oe.inline,"uppy-size--md":oe.containerWidth>WIDTH_MD,"uppy-size--lg":oe.containerWidth>WIDTH_LG,"uppy-size--xl":oe.containerWidth>WIDTH_XL,"uppy-size--height-md":oe.containerHeight>HEIGHT_MD,"uppy-Dashboard--isAddFilesPanelVisible":oe.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":oe.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":oe.singleFileFullScreen&&re&&ue});let fe=1;oe.containerWidth>WIDTH_XL?fe=5:oe.containerWidth>WIDTH_LG?fe=4:oe.containerWidth>WIDTH_MD&&(fe=3);const _e=oe.showSelectedFiles&&!Y,ve=oe.recoveredState?Object.keys(oe.recoveredState.files).length:null,Se=oe.files?Object.keys(oe.files).filter(Ce=>oe.files[Ce].isGhost).length:0,$e=()=>Se>0?oe.i18n("recoveredXFiles",{smart_count:Se}):oe.i18n("recoveredAllFiles");return u$1("div",{className:he,"data-uppy-theme":oe.theme,"data-uppy-num-acquirers":oe.acquirers.length,"data-uppy-drag-drop-supported":!oe.disableLocalFiles&&isDragDropSupported(),"aria-hidden":oe.inline?"false":oe.isHidden,"aria-disabled":oe.disabled,"aria-label":oe.inline?oe.i18n("dashboardTitle"):oe.i18n("dashboardWindowTitle"),onPaste:oe.handlePaste,onDragOver:oe.handleDragOver,onDragLeave:oe.handleDragLeave,onDrop:oe.handleDrop,children:[u$1("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:oe.handleClickOutside}),u$1("div",{className:"uppy-Dashboard-inner",role:oe.inline?void 0:"dialog",style:{width:oe.inline&&oe.width?oe.width:"",height:oe.inline&&oe.height?oe.height:""},children:[oe.inline?null:u$1("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":oe.i18n("closeModal"),title:oe.i18n("closeModal"),onClick:oe.closeModal,children:u$1("span",{"aria-hidden":"true",children:""})}),u$1("div",{className:"uppy-Dashboard-innerWrap",children:[u$1("div",{className:"uppy-Dashboard-dropFilesHereHint",children:oe.i18n("dropHint")}),_e&&u$1(PanelTopBar,{...oe}),ve&&u$1("div",{className:"uppy-Dashboard-serviceMsg",children:[u$1("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:u$1("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[u$1("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),u$1("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),u$1("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),u$1("strong",{className:"uppy-Dashboard-serviceMsg-title",children:oe.i18n("sessionRestored")}),u$1("div",{className:"uppy-Dashboard-serviceMsg-text",children:$e()})]}),_e?u$1(FileList,{id:oe.id,i18n:oe.i18n,uppy:oe.uppy,files:oe.files,resumableUploads:oe.resumableUploads,hideRetryButton:oe.hideRetryButton,hidePauseResumeButton:oe.hidePauseResumeButton,hideCancelButton:oe.hideCancelButton,showLinkToFileUploadResult:oe.showLinkToFileUploadResult,showRemoveButtonAfterComplete:oe.showRemoveButtonAfterComplete,metaFields:oe.metaFields,toggleFileCard:oe.toggleFileCard,handleRequestThumbnail:oe.handleRequestThumbnail,handleCancelThumbnail:oe.handleCancelThumbnail,recoveredState:oe.recoveredState,individualCancellation:oe.individualCancellation,openFileEditor:oe.openFileEditor,canEditFile:oe.canEditFile,toggleAddFilesPanel:oe.toggleAddFilesPanel,isSingleFile:re,itemsPerRow:fe,containerWidth:oe.containerWidth,containerHeight:oe.containerHeight}):u$1(AddFiles,{i18n:oe.i18n,i18nArray:oe.i18nArray,acquirers:oe.acquirers,handleInputChange:oe.handleInputChange,maxNumberOfFiles:oe.maxNumberOfFiles,allowedFileTypes:oe.allowedFileTypes,showNativePhotoCameraButton:oe.showNativePhotoCameraButton,showNativeVideoCameraButton:oe.showNativeVideoCameraButton,nativeCameraFacingMode:oe.nativeCameraFacingMode,showPanel:oe.showPanel,activePickerPanel:oe.activePickerPanel,disableLocalFiles:oe.disableLocalFiles,fileManagerSelectionType:oe.fileManagerSelectionType,note:oe.note,proudlyDisplayPoweredByUppy:oe.proudlyDisplayPoweredByUppy}),u$1(Slide,{children:oe.showAddFilesPanel?u$1(AddFilesPanel,{...oe,isSizeMD:le},"AddFiles"):null}),u$1(Slide,{children:oe.fileCardFor?u$1(FileCard,{...oe},"FileCard"):null}),u$1(Slide,{children:oe.activePickerPanel?u$1(PickerPanelContent,{...oe},"Picker"):null}),u$1(Slide,{children:oe.showFileEditor?u$1(EditorPanel,{...oe},"Editor"):null}),u$1("div",{className:"uppy-Dashboard-progressindicators",children:oe.progressindicators.map(Ce=>oe.uppy.getPlugin(Ce.id).render(oe.state))})]})]})]})}const locale={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}},FOCUSABLE_ELEMENTS=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];var debounceExports=requireDebounce();const debounce=getDefaultExportFromCjs(debounceExports);function getActiveOverlayEl(oe,Y){if(Y){const re=oe.querySelector(`[data-uppy-paneltype="${Y}"]`);if(re)return re}return oe}function createSuperFocus(){let oe=!1;return debounce((re,le)=>{const ue=getActiveOverlayEl(re,le),he=ue.contains(document.activeElement);if(he&&oe)return;const fe=ue.querySelector("[data-uppy-super-focusable]");he&&!fe||(fe?(fe.focus({preventScroll:!0}),oe=!0):(ue.querySelector(FOCUSABLE_ELEMENTS)?.focus({preventScroll:!0}),oe=!1))},260)}function focusOnFirstNode(oe,Y){const re=Y[0];re&&(re.focus(),oe.preventDefault())}function focusOnLastNode(oe,Y){const re=Y[Y.length-1];re&&(re.focus(),oe.preventDefault())}function isFocusInOverlay(oe){return oe.contains(document.activeElement)}function trapFocus(oe,Y,re){const le=getActiveOverlayEl(re,Y),ue=toArray(le.querySelectorAll(FOCUSABLE_ELEMENTS)),he=ue.indexOf(document.activeElement);isFocusInOverlay(le)?oe.shiftKey&&he===0?focusOnLastNode(oe,ue):!oe.shiftKey&&he===ue.length-1&&focusOnFirstNode(oe,ue):focusOnFirstNode(oe,ue)}function forInline(oe,Y,re){Y===null||trapFocus(oe,Y,re)}const TAB_KEY=9,ESC_KEY=27;function createPromise(){const oe={};return oe.promise=new Promise((Y,re)=>{oe.resolve=Y,oe.reject=re}),oe}const defaultOptions$3={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};var It,Rt,Yt,Dt,lr,ur,cr,At,dr,hr,Bt,ct,$r,Er,Br,Fr,xr,Lr;class Dashboard extends UIPlugin{constructor(re,le){const ue=le?.autoOpen??null;super(re,{...defaultOptions$3,...le,autoOpen:ue});Ze(this,ct);Ze(this,It);Be(this,"modalName",`uppy-Dashboard-${nanoid()}`);Be(this,"superFocus",createSuperFocus());Be(this,"ifFocusedOnUppyRecently",!1);Be(this,"dashboardIsDisabled");Be(this,"savedScrollPosition");Be(this,"savedActiveElement");Be(this,"resizeObserver");Be(this,"darkModeMediaQuery");Be(this,"makeDashboardInsidesVisibleAnywayTimeout");Be(this,"removeTarget",re=>{const ue=this.getPluginState().targets.filter(he=>he.id!==re.id);this.setPluginState({targets:ue})});Be(this,"addTarget",re=>{const le=re.id||re.constructor.name,ue=re.title||le,he=re.type;if(he!=="acquirer"&&he!=="progressindicator"&&he!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const fe={id:le,name:ue,type:he},ve=this.getPluginState().targets.slice();return ve.push(fe),this.setPluginState({targets:ve}),this.el});Be(this,"hideAllPanels",()=>{const re=this.getPluginState(),le={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};re.activePickerPanel===le.activePickerPanel&&re.showAddFilesPanel===le.showAddFilesPanel&&re.showFileEditor===le.showFileEditor&&re.activeOverlayType===le.activeOverlayType||(this.setPluginState(le),this.uppy.emit("dashboard:close-panel",re.activePickerPanel?.id))});Be(this,"showPanel",re=>{const{targets:le}=this.getPluginState(),ue=le.find(he=>he.type==="acquirer"&&he.id===re);this.setPluginState({activePickerPanel:ue,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",re)});Be(this,"canEditFile",re=>{const{targets:le}=this.getPluginState();return Me(this,At).call(this,le).some(he=>this.uppy.getPlugin(he.id).canEditFile(re))});Be(this,"openFileEditor",re=>{const{targets:le}=this.getPluginState(),ue=Me(this,At).call(this,le);this.setPluginState({showFileEditor:!0,fileCardFor:re.id||null,activeOverlayType:"FileEditor"}),ue.forEach(he=>{this.uppy.getPlugin(he.id).selectFile(re)})});Be(this,"closeFileEditor",()=>{const{metaFields:re}=this.getPluginState();re&&re.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})});Be(this,"saveFileEditor",()=>{const{targets:re}=this.getPluginState();Me(this,At).call(this,re).forEach(ue=>{this.uppy.getPlugin(ue.id).save()}),this.closeFileEditor()});Be(this,"openModal",()=>{const{promise:re,resolve:le}=createPromise();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const ue=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",ue,!1),le()};this.el.addEventListener("animationend",ue,!1)}else this.setPluginState({isHidden:!1}),le();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),re});Be(this,"closeModal",re=>{const le=re?.manualClose??!0,{isHidden:ue,isClosing:he}=this.getPluginState();if(ue||he)return;const{promise:fe,resolve:_e}=createPromise();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const ve=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",ve,!1),_e()};this.el.addEventListener("animationend",ve,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),_e();return document.removeEventListener("keydown",this.handleKeyDownInModal),le&&this.opts.browserBackButtonClose&&history.state?.[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),fe});Be(this,"isModalOpen",()=>!this.getPluginState().isHidden||!1);Be(this,"requestCloseModal",()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal());Be(this,"setDarkModeCapability",re=>{const{capabilities:le}=this.uppy.getState();this.uppy.setState({capabilities:{...le,darkMode:re}})});Be(this,"handleSystemDarkModeChange",re=>{const le=re.matches;this.uppy.log(`[Dashboard] Dark mode is ${le?"on":"off"}`),this.setDarkModeCapability(le)});Be(this,"toggleFileCard",(re,le)=>{const ue=this.uppy.getFile(le);re?this.uppy.emit("dashboard:file-edit-start",ue):this.uppy.emit("dashboard:file-edit-complete",ue),this.setPluginState({fileCardFor:re?le:null,activeOverlayType:re?"FileCard":null})});Be(this,"toggleAddFilesPanel",re=>{this.setPluginState({showAddFilesPanel:re,activeOverlayType:re?"AddFiles":null})});Be(this,"addFiles",re=>{const le=re.map(ue=>({source:this.id,name:ue.name,type:ue.type,data:ue,meta:{relativePath:ue.relativePath||ue.webkitRelativePath||null}}));try{this.uppy.addFiles(le)}catch(ue){this.uppy.log(ue)}});Be(this,"startListeningToResize",()=>{this.resizeObserver=new ResizeObserver(re=>{const le=re[0],{width:ue,height:he}=le.contentRect;this.setPluginState({containerWidth:ue,containerHeight:he,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const re=this.getPluginState(),le=!this.opts.inline&&re.isHidden;!re.areInsidesReadyToBeVisible&&!le&&(this.uppy.log("[Dashboard] resize event didnt fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)});Be(this,"stopListeningToResize",()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)});Be(this,"recordIfFocusedOnUppyRecently",re=>{this.el.contains(re.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())});Be(this,"disableInteractiveElements",re=>{const le=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],ue=Me(this,It)??toArray(this.el.querySelectorAll(le)).filter(he=>!he.classList.contains("uppy-Dashboard-close"));for(const he of ue)he.tagName==="A"?he.setAttribute("aria-disabled",re):he.disabled=re;re?rt(this,It,ue):rt(this,It,null),this.dashboardIsDisabled=re});Be(this,"updateBrowserHistory",()=>{history.state?.[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)});Be(this,"handlePopState",re=>{this.isModalOpen()&&(!re.state||!re.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&re.state?.[this.modalName]&&history.back()});Be(this,"handleKeyDownInModal",re=>{re.keyCode===ESC_KEY&&this.requestCloseModal(),re.keyCode===TAB_KEY&&trapFocus(re,this.getPluginState().activeOverlayType,this.el)});Be(this,"handleClickOutside",()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()});Be(this,"handlePaste",re=>{this.uppy.iteratePlugins(ue=>{ue.type==="acquirer"&&ue.handleRootPaste?.(re)});const le=toArray(re.clipboardData.files);le.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(le))});Be(this,"handleInputChange",re=>{re.preventDefault();const le=toArray(re.currentTarget.files||[]);le.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(le))});Be(this,"handleDragOver",re=>{re.preventDefault(),re.stopPropagation();const le=()=>{let _e=!0;return this.uppy.iteratePlugins(ve=>{ve.canHandleRootDrop?.(re)&&(_e=!0)}),_e},ue=()=>{const{types:_e}=re.dataTransfer;return _e.some(ve=>ve==="Files")},he=le(),fe=ue();if(!he&&!fe||this.opts.disabled||this.opts.disableLocalFiles&&(fe||!he)||!this.uppy.getState().allowNewUpload){re.dataTransfer.dropEffect="none";return}re.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(re)});Be(this,"handleDragLeave",re=>{re.preventDefault(),re.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(re)});Be(this,"handleDrop",async re=>{re.preventDefault(),re.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(fe=>{fe.type==="acquirer"&&fe.handleRootDrop?.(re)});let le=!1;const ue=fe=>{this.uppy.log(fe,"error"),le||(this.uppy.info(fe.message,"error"),le=!0)};this.uppy.log("[Dashboard] Processing dropped files");const he=await getDroppedFiles(re.dataTransfer,{logDropError:ue});he.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(he)),this.opts.onDrop(re)});Be(this,"handleRequestThumbnail",re=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",re)});Be(this,"handleCancelThumbnail",re=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",re)});Be(this,"handleKeyDownInInline",re=>{re.keyCode===TAB_KEY&&forInline(re,this.getPluginState().activeOverlayType,this.el)});Be(this,"handlePasteOnBody",re=>{this.el.contains(document.activeElement)&&this.handlePaste(re)});Be(this,"handleComplete",({failed:re})=>{this.opts.closeAfterFinish&&!re?.length&&this.requestCloseModal()});Be(this,"handleCancelRestore",()=>{this.uppy.emit("restore-canceled")});Ze(this,Rt,()=>{if(this.opts.disableThumbnailGenerator)return;const re=600,le=this.uppy.getFiles();if(le.length===1){const ue=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);ue?.setOptions({thumbnailWidth:re});const he={...le[0],preview:void 0};ue?.requestThumbnail(he).then(()=>{ue?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}});Ze(this,Yt,re=>{const le=re[0],{metaFields:ue}=this.getPluginState(),he=ue&&ue.length>0,fe=this.canEditFile(le);he&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,le.id):fe&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(le)});Be(this,"initEvents",()=>{if(this.opts.trigger&&!this.opts.inline){const re=findAllDOMElements(this.opts.trigger);re?re.forEach(le=>le.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",Me(this,Bt)),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",Me(this,Rt)),this.uppy.on("file-removed",Me(this,Rt)),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",Me(this,Yt))});Be(this,"removeEvents",()=>{const re=findAllDOMElements(this.opts.trigger);!this.opts.inline&&re&&re.forEach(le=>le.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",Me(this,Bt)),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",Me(this,Rt)),this.uppy.off("file-removed",Me(this,Rt)),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",Me(this,Yt))});Be(this,"superFocusOnEachUpdate",()=>{const re=this.el.contains(document.activeElement),le=document.activeElement===document.body||document.activeElement===null,ue=this.uppy.getState().info.length===0,he=!this.opts.inline;ue&&(he||re||le&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()});Be(this,"afterUpdate",()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()});Be(this,"saveFileCard",(re,le)=>{this.uppy.setFileMeta(le,re),this.toggleFileCard(!1,le)});Ze(this,Dt,re=>{const le=this.uppy.getPlugin(re.id);return{...re,icon:le.icon||this.opts.defaultPickerIcon,render:le.render}});Ze(this,lr,re=>{const le=this.uppy.getPlugin(re.id);return typeof le.isSupported!="function"?!0:le.isSupported()});Ze(this,ur,re=>re.filter(le=>le.type==="acquirer"&&Me(this,lr).call(this,le)).map(Me(this,Dt)));Ze(this,cr,re=>re.filter(le=>le.type==="progressindicator").map(Me(this,Dt)));Ze(this,At,re=>re.filter(le=>le.type==="editor").map(Me(this,Dt)));Be(this,"render",re=>{const le=this.getPluginState(),{files:ue,capabilities:he,allowNewUpload:fe}=re,{newFiles:_e,uploadStartedFiles:ve,completeFiles:Se,erroredFiles:$e,inProgressFiles:Ee,inProgressNotPausedFiles:Ce,processingFiles:Ue,isUploadStarted:xe,isAllComplete:Ne,isAllPaused:Ie}=this.uppy.getObjectOfFilesPerState(),qe=Me(this,ur).call(this,le.targets),Te=Me(this,cr).call(this,le.targets),Re=Me(this,At).call(this,le.targets);let De;return this.opts.theme==="auto"?De=he.darkMode?"dark":"light":De=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),Dashboard$1({state:re,isHidden:le.isHidden,files:ue,newFiles:_e,uploadStartedFiles:ve,completeFiles:Se,erroredFiles:$e,inProgressFiles:Ee,inProgressNotPausedFiles:Ce,processingFiles:Ue,isUploadStarted:xe,isAllComplete:Ne,isAllPaused:Ie,totalFileCount:Object.keys(ue).length,totalProgress:re.totalProgress,allowNewUpload:fe,acquirers:qe,theme:De,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:le.activePickerPanel,showFileEditor:le.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:le.isClosing,progressindicators:Te,editors:Re,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:re.recoveredState,metaFields:le.metaFields,resumableUploads:he.resumableUploads||!1,individualCancellation:he.individualCancellation,isMobileDevice:he.isMobileDevice,fileCardFor:le.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:le.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:le.containerWidth,containerHeight:le.containerHeight,areInsidesReadyToBeVisible:le.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:le.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})});Ze(this,dr,()=>{const{plugins:re}=this.opts;re.forEach(le=>{const ue=this.uppy.getPlugin(le);ue?ue.mount(this,ue):this.uppy.log(`[Uppy] Dashboard could not find plugin '${le}', make sure to uppy.use() the plugins you are specifying`,"warning")})});Ze(this,hr,()=>{this.uppy.iteratePlugins(Me(this,Bt))});Ze(this,Bt,re=>{const le=["acquirer","editor"];re&&!re.opts?.target&&le.includes(re.type)&&(this.getPluginState().targets.some(he=>re.id===he.id)||re.mount(this,re))});Be(this,"install",()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:re,closeAfterFinish:le}=this.opts;if(re&&le)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:ue,allowMultipleUploadBatches:he}=this.uppy.opts;(ue||he)&&le&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:fe}=this.opts;fe&&this.mount(fe,this),this.opts.disableStatusBar||this.uppy.use(StatusBar,{id:Ke(this,ct,Fr).call(this),target:this,...Ke(this,ct,$r).call(this)}),this.opts.disableInformer||this.uppy.use(Informer,{id:Ke(this,ct,Lr).call(this),target:this,...Ke(this,ct,Br).call(this)}),this.opts.disableThumbnailGenerator||this.uppy.use(ThumbnailGenerator,{id:Ke(this,ct,xr).call(this),...Ke(this,ct,Er).call(this)}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const _e=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${_e?"on":"off"}`),this.setDarkModeCapability(_e),this.opts.theme==="auto"&&this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange),Me(this,dr).call(this),Me(this,hr).call(this),this.initEvents()});Be(this,"uninstall",()=>{if(!this.opts.disableInformer){const le=this.uppy.getPlugin(`${this.id}:Informer`);le&&this.uppy.removePlugin(le)}if(!this.opts.disableStatusBar){const le=this.uppy.getPlugin(`${this.id}:StatusBar`);le&&this.uppy.removePlugin(le)}if(!this.opts.disableThumbnailGenerator){const le=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);le&&this.uppy.removePlugin(le)}const{plugins:re}=this.opts;re.forEach(le=>{const ue=this.uppy.getPlugin(le);ue&&ue.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()});this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=locale,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),this.opts.onRequestCloseModal??=()=>this.closeModal(),this.i18nInit()}setOptions(re){super.setOptions(re),this.uppy.getPlugin(Ke(this,ct,Fr).call(this))?.setOptions(Ke(this,ct,$r).call(this)),this.uppy.getPlugin(Ke(this,ct,xr).call(this))?.setOptions(Ke(this,ct,Er).call(this))}}It=new WeakMap,Rt=new WeakMap,Yt=new WeakMap,Dt=new WeakMap,lr=new WeakMap,ur=new WeakMap,cr=new WeakMap,At=new WeakMap,dr=new WeakMap,hr=new WeakMap,Bt=new WeakMap,ct=new WeakSet,$r=function(){const{hideUploadButton:re,hideRetryButton:le,hidePauseResumeButton:ue,hideCancelButton:he,showProgressDetails:fe,hideProgressAfterFinish:_e,locale:ve,doneButtonHandler:Se}=this.opts;return{hideUploadButton:re,hideRetryButton:le,hidePauseResumeButton:ue,hideCancelButton:he,showProgressDetails:fe,hideAfterFinish:_e,locale:ve,doneButtonHandler:Se}},Er=function(){const{thumbnailWidth:re,thumbnailHeight:le,thumbnailType:ue,waitForThumbnailsBeforeUpload:he}=this.opts;return{thumbnailWidth:re,thumbnailHeight:le,thumbnailType:ue,waitForThumbnailsBeforeUpload:he,lazy:!he}},Br=function(){return{}},Fr=function(){return`${this.id}:StatusBar`},xr=function(){return`${this.id}:ThumbnailGenerator`},Lr=function(){return`${this.id}:Informer`},Be(Dashboard,"VERSION",packageJson$1.version);var mt,Qt;class EventManager{constructor(Y){Ze(this,mt);Ze(this,Qt,[]);rt(this,mt,Y)}on(Y,re){return Me(this,Qt).push([Y,re]),Me(this,mt).on(Y,re)}remove(){for(const[Y,re]of Me(this,Qt).splice(0))Me(this,mt).off(Y,re)}onFilePause(Y,re){this.on("upload-pause",(le,ue)=>{Y===le?.id&&re(ue)})}onFileRemove(Y,re){this.on("file-removed",le=>{Y===le.id&&re(le.id)})}onPause(Y,re){this.on("upload-pause",(le,ue)=>{Y===le?.id&&re(ue)})}onRetry(Y,re){this.on("upload-retry",le=>{Y===le?.id&&re()})}onRetryAll(Y,re){this.on("retry-all",()=>{Me(this,mt).getFile(Y)&&re()})}onPauseAll(Y,re){this.on("pause-all",()=>{Me(this,mt).getFile(Y)&&re()})}onCancelAll(Y,re){this.on("cancel-all",(...le)=>{Me(this,mt).getFile(Y)&&re(...le)})}onResumeAll(Y,re){this.on("resume-all",()=>{Me(this,mt).getFile(Y)&&re()})}}mt=new WeakMap,Qt=new WeakMap;function filterNonFailedFiles(oe){const Y=re=>"error"in re&&!!re.error;return oe.filter(re=>!Y(re))}function filterFilesToEmitUploadStarted(oe){return oe.filter(Y=>!Y.progress?.uploadStarted||!Y.isRestored)}function getAllowedMetaFields(oe,Y){return oe===!0?Object.keys(Y):Array.isArray(oe)?oe:[]}function hasProperty(oe,Y){return Object.hasOwn(oe,Y)}function isNetworkError(oe){return oe?oe.readyState!==0&&oe.readyState!==4||oe.status===0:!1}class NetworkError extends Error{constructor(re,le=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");Be(this,"cause");Be(this,"isNetworkError");Be(this,"request");this.cause=re,this.isNetworkError=!0,this.request=le}}function createCancelError(oe){return new Error("Cancelled",{cause:oe})}function abortOn(oe){if(oe!=null){const Y=()=>this.abort(oe.reason);oe.addEventListener("abort",Y,{once:!0});const re=()=>{oe.removeEventListener("abort",Y)};this.then?.(re,re)}return this}var _t,gt,vt,Lt,yt,Mt,Ot,ht,Tr,zt,Mr,Hr,jr,pr,Ht;class RateLimitedQueue{constructor(Y){Ze(this,ht);Ze(this,_t,0);Ze(this,gt,[]);Ze(this,vt,!1);Ze(this,Lt);Ze(this,yt,1);Ze(this,Mt);Ze(this,Ot);Be(this,"limit");Ze(this,pr,()=>this.resume());Ze(this,Ht,()=>{if(Me(this,vt)){rt(this,Ot,setTimeout(Me(this,Ht),0));return}rt(this,yt,this.limit),this.limit=Math.ceil((Me(this,Mt)+Me(this,yt))/2);for(let Y=Me(this,yt);Y<=this.limit;Y++)Ke(this,ht,zt).call(this);Me(this,Mt)-Me(this,yt)>3?rt(this,Ot,setTimeout(Me(this,Ht),2e3)):rt(this,yt,Math.floor(Me(this,yt)/2))});typeof Y!="number"||Y===0?this.limit=1/0:this.limit=Y}run(Y,re){return!Me(this,vt)&&Me(this,_t)<this.limit?Ke(this,ht,Tr).call(this,Y):Ke(this,ht,Hr).call(this,Y,re)}wrapSyncFunction(Y,re){return(...le)=>{const ue=this.run(()=>(Y(...le),queueMicrotask(()=>ue.done()),()=>{}),re);return{abortOn,abort(){ue.abort()}}}}wrapPromiseFunction(Y,re){return(...le)=>{let ue;const he=new Promise((fe,_e)=>{ue=this.run(()=>{let ve,Se;try{Se=Promise.resolve(Y(...le))}catch($e){Se=Promise.reject($e)}return Se.then($e=>{ve?_e(ve):(ue.done(),fe($e))},$e=>{ve?_e(ve):(ue.done(),_e($e))}),$e=>{ve=createCancelError($e)}},re)});return he.abort=fe=>{ue.abort(fe)},he.abortOn=abortOn,he}}resume(){rt(this,vt,!1),clearTimeout(Me(this,Lt));for(let Y=0;Y<this.limit;Y++)Ke(this,ht,zt).call(this)}pause(Y=null){rt(this,vt,!0),clearTimeout(Me(this,Lt)),Y!=null&&rt(this,Lt,setTimeout(Me(this,pr),Y))}rateLimit(Y){clearTimeout(Me(this,Ot)),this.pause(Y),this.limit>1&&Number.isFinite(this.limit)&&(rt(this,Mt,this.limit-1),this.limit=Me(this,yt),rt(this,Ot,setTimeout(Me(this,Ht),Y)))}get isPaused(){return Me(this,vt)}}_t=new WeakMap,gt=new WeakMap,vt=new WeakMap,Lt=new WeakMap,yt=new WeakMap,Mt=new WeakMap,Ot=new WeakMap,ht=new WeakSet,Tr=function(Y){rt(this,_t,Me(this,_t)+1);let re=!1,le;try{le=Y()}catch(ue){throw rt(this,_t,Me(this,_t)-1),ue}return{abort:ue=>{re||(re=!0,rt(this,_t,Me(this,_t)-1),le?.(ue),Ke(this,ht,zt).call(this))},done:()=>{re||(re=!0,rt(this,_t,Me(this,_t)-1),Ke(this,ht,zt).call(this))}}},zt=function(){queueMicrotask(()=>Ke(this,ht,Mr).call(this))},Mr=function(){if(Me(this,vt)||Me(this,_t)>=this.limit||Me(this,gt).length===0)return;const Y=Me(this,gt).shift();if(Y==null)throw new Error("Invariant violation: next is null");const re=Ke(this,ht,Tr).call(this,Y.fn);Y.abort=re.abort,Y.done=re.done},Hr=function(Y,re){const le={fn:Y,priority:re?.priority||0,abort:()=>{Ke(this,ht,jr).call(this,le)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},ue=Me(this,gt).findIndex(he=>le.priority>he.priority);return ue===-1?Me(this,gt).push(le):Me(this,gt).splice(ue,0,le),le},jr=function(Y){const re=Me(this,gt).indexOf(Y);re!==-1&&Me(this,gt).splice(re,1)},pr=new WeakMap,Ht=new WeakMap;function _typeof$8(oe){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$8(oe)}function _createClass$8(oe,Y,re){return Object.defineProperty(oe,"prototype",{writable:!1}),oe}function _classCallCheck$8(oe,Y){if(!(oe instanceof Y))throw new TypeError("Cannot call a class as a function")}function _callSuper$1(oe,Y,re){return Y=_getPrototypeOf$1(Y),_possibleConstructorReturn$1(oe,_isNativeReflectConstruct$1()?Reflect.construct(Y,re||[],_getPrototypeOf$1(oe).constructor):Y.apply(oe,re))}function _possibleConstructorReturn$1(oe,Y){if(Y&&(_typeof$8(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(oe)}function _assertThisInitialized$1(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function _inherits$1(oe,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(Y&&Y.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),Y&&_setPrototypeOf$1(oe,Y)}function _wrapNativeSuper(oe){var Y=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(le){if(le===null||!_isNativeFunction(le))return le;if(typeof le!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Y<"u"){if(Y.has(le))return Y.get(le);Y.set(le,ue)}function ue(){return _construct(le,arguments,_getPrototypeOf$1(this).constructor)}return ue.prototype=Object.create(le.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf$1(ue,le)},_wrapNativeSuper(oe)}function _construct(oe,Y,re){if(_isNativeReflectConstruct$1())return Reflect.construct.apply(null,arguments);var le=[null];le.push.apply(le,Y);var ue=new(oe.bind.apply(oe,le));return re&&_setPrototypeOf$1(ue,re.prototype),ue}function _isNativeReflectConstruct$1(){try{var oe=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$1=function(){return!!oe})()}function _isNativeFunction(oe){try{return Function.toString.call(oe).indexOf("[native code]")!==-1}catch{return typeof oe=="function"}}function _setPrototypeOf$1(oe,Y){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(le,ue){return le.__proto__=ue,le},_setPrototypeOf$1(oe,Y)}function _getPrototypeOf$1(oe){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(re){return re.__proto__||Object.getPrototypeOf(re)},_getPrototypeOf$1(oe)}var DetailedError=(function(oe){function Y(re){var le,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(_classCallCheck$8(this,Y),le=_callSuper$1(this,Y,[re]),le.originalRequest=he,le.originalResponse=fe,le.causingError=ue,ue!=null&&(re+=", caused by ".concat(ue.toString())),he!=null){var _e=he.getHeader("X-Request-ID")||"n/a",ve=he.getMethod(),Se=he.getURL(),$e=fe?fe.getStatus():"n/a",Ee=fe?fe.getBody()||"":"n/a";re+=", originated from request (method: ".concat(ve,", url: ").concat(Se,", response code: ").concat($e,", response text: ").concat(Ee,", request id: ").concat(_e,")")}return le.message=re,le}return _inherits$1(Y,oe),_createClass$8(Y)})(_wrapNativeSuper(Error));function log(oe){}function _typeof$7(oe){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$7(oe)}function _classCallCheck$7(oe,Y){if(!(oe instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(oe,Y){for(var re=0;re<Y.length;re++){var le=Y[re];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(oe,_toPropertyKey$7(le.key),le)}}function _createClass$7(oe,Y,re){return Y&&_defineProperties$7(oe.prototype,Y),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function _toPropertyKey$7(oe){var Y=_toPrimitive$7(oe,"string");return _typeof$7(Y)=="symbol"?Y:Y+""}function _toPrimitive$7(oe,Y){if(_typeof$7(oe)!="object"||!oe)return oe;var re=oe[Symbol.toPrimitive];if(re!==void 0){var le=re.call(oe,Y);if(_typeof$7(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}var NoopUrlStorage=(function(){function oe(){_classCallCheck$7(this,oe)}return _createClass$7(oe,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(re){return Promise.resolve([])}},{key:"removeUpload",value:function(re){return Promise.resolve()}},{key:"addUpload",value:function(re,le){return Promise.resolve(null)}}])})();const version$1="3.7.8",VERSION=version$1,_hasBuffer=typeof Buffer=="function",_TD=typeof TextDecoder=="function"?new TextDecoder:void 0,_TE=typeof TextEncoder=="function"?new TextEncoder:void 0,b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64chs=Array.prototype.slice.call(b64ch),b64tab=(oe=>{let Y={};return oe.forEach((re,le)=>Y[re]=le),Y})(b64chs),b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_fromCC=String.fromCharCode.bind(String),_U8Afrom=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):oe=>new Uint8Array(Array.prototype.slice.call(oe,0)),_mkUriSafe=oe=>oe.replace(/=/g,"").replace(/[+\/]/g,Y=>Y=="+"?"-":"_"),_tidyB64=oe=>oe.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=oe=>{let Y,re,le,ue,he="";const fe=oe.length%3;for(let _e=0;_e<oe.length;){if((re=oe.charCodeAt(_e++))>255||(le=oe.charCodeAt(_e++))>255||(ue=oe.charCodeAt(_e++))>255)throw new TypeError("invalid character found");Y=re<<16|le<<8|ue,he+=b64chs[Y>>18&63]+b64chs[Y>>12&63]+b64chs[Y>>6&63]+b64chs[Y&63]}return fe?he.slice(0,fe-3)+"===".substring(fe):he},_btoa=typeof btoa=="function"?oe=>btoa(oe):_hasBuffer?oe=>Buffer.from(oe,"binary").toString("base64"):btoaPolyfill,_fromUint8Array=_hasBuffer?oe=>Buffer.from(oe).toString("base64"):oe=>{let re=[];for(let le=0,ue=oe.length;le<ue;le+=4096)re.push(_fromCC.apply(null,oe.subarray(le,le+4096)));return _btoa(re.join(""))},fromUint8Array=(oe,Y=!1)=>Y?_mkUriSafe(_fromUint8Array(oe)):_fromUint8Array(oe),cb_utob=oe=>{if(oe.length<2){var Y=oe.charCodeAt(0);return Y<128?oe:Y<2048?_fromCC(192|Y>>>6)+_fromCC(128|Y&63):_fromCC(224|Y>>>12&15)+_fromCC(128|Y>>>6&63)+_fromCC(128|Y&63)}else{var Y=65536+(oe.charCodeAt(0)-55296)*1024+(oe.charCodeAt(1)-56320);return _fromCC(240|Y>>>18&7)+_fromCC(128|Y>>>12&63)+_fromCC(128|Y>>>6&63)+_fromCC(128|Y&63)}},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=oe=>oe.replace(re_utob,cb_utob),_encode=_hasBuffer?oe=>Buffer.from(oe,"utf8").toString("base64"):_TE?oe=>_fromUint8Array(_TE.encode(oe)):oe=>_btoa(utob(oe)),encode=(oe,Y=!1)=>Y?_mkUriSafe(_encode(oe)):_encode(oe),encodeURI=oe=>encode(oe,!0),re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=oe=>{switch(oe.length){case 4:var Y=(7&oe.charCodeAt(0))<<18|(63&oe.charCodeAt(1))<<12|(63&oe.charCodeAt(2))<<6|63&oe.charCodeAt(3),re=Y-65536;return _fromCC((re>>>10)+55296)+_fromCC((re&1023)+56320);case 3:return _fromCC((15&oe.charCodeAt(0))<<12|(63&oe.charCodeAt(1))<<6|63&oe.charCodeAt(2));default:return _fromCC((31&oe.charCodeAt(0))<<6|63&oe.charCodeAt(1))}},btou=oe=>oe.replace(re_btou,cb_btou),atobPolyfill=oe=>{if(oe=oe.replace(/\s+/g,""),!b64re.test(oe))throw new TypeError("malformed base64.");oe+="==".slice(2-(oe.length&3));let Y,re,le,ue=[];for(let he=0;he<oe.length;)Y=b64tab[oe.charAt(he++)]<<18|b64tab[oe.charAt(he++)]<<12|(re=b64tab[oe.charAt(he++)])<<6|(le=b64tab[oe.charAt(he++)]),re===64?ue.push(_fromCC(Y>>16&255)):le===64?ue.push(_fromCC(Y>>16&255,Y>>8&255)):ue.push(_fromCC(Y>>16&255,Y>>8&255,Y&255));return ue.join("")},_atob=typeof atob=="function"?oe=>atob(_tidyB64(oe)):_hasBuffer?oe=>Buffer.from(oe,"base64").toString("binary"):atobPolyfill,_toUint8Array=_hasBuffer?oe=>_U8Afrom(Buffer.from(oe,"base64")):oe=>_U8Afrom(_atob(oe).split("").map(Y=>Y.charCodeAt(0))),toUint8Array=oe=>_toUint8Array(_unURI(oe)),_decode=_hasBuffer?oe=>Buffer.from(oe,"base64").toString("utf8"):_TD?oe=>_TD.decode(_toUint8Array(oe)):oe=>btou(_atob(oe)),_unURI=oe=>_tidyB64(oe.replace(/[-_]/g,Y=>Y=="-"?"+":"/")),decode=oe=>_decode(_unURI(oe)),isValid=oe=>{if(typeof oe!="string")return!1;const Y=oe.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(Y)||!/[^\s0-9a-zA-Z\-_]/.test(Y)},_noEnum=oe=>({value:oe,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){const oe=(Y,re)=>Object.defineProperty(String.prototype,Y,_noEnum(re));oe("fromBase64",function(){return decode(this)}),oe("toBase64",function(Y){return encode(this,Y)}),oe("toBase64URI",function(){return encode(this,!0)}),oe("toBase64URL",function(){return encode(this,!0)}),oe("toUint8Array",function(){return toUint8Array(this)})},extendUint8Array=function(){const oe=(Y,re)=>Object.defineProperty(Uint8Array.prototype,Y,_noEnum(re));oe("toBase64",function(Y){return fromUint8Array(this,Y)}),oe("toBase64URI",function(){return fromUint8Array(this,!0)}),oe("toBase64URL",function(){return fromUint8Array(this,!0)})},extendBuiltins=()=>{extendString(),extendUint8Array()},gBase64={version:version$1,VERSION,atob:_atob,atobPolyfill,btoa:_btoa,btoaPolyfill,fromBase64:decode,toBase64:encode,encode,encodeURI,encodeURL:encodeURI,utob,btou,decode,isValid,fromUint8Array,toUint8Array,extendString,extendUint8Array,extendBuiltins};var requiresPort,hasRequiredRequiresPort;function requireRequiresPort(){return hasRequiredRequiresPort||(hasRequiredRequiresPort=1,requiresPort=function(Y,re){if(re=re.split(":")[0],Y=+Y,!Y)return!1;switch(re){case"http":case"ws":return Y!==80;case"https":case"wss":return Y!==443;case"ftp":return Y!==21;case"gopher":return Y!==70;case"file":return!1}return Y!==0}),requiresPort}var querystringify={},hasRequiredQuerystringify;function requireQuerystringify(){if(hasRequiredQuerystringify)return querystringify;hasRequiredQuerystringify=1;var oe=Object.prototype.hasOwnProperty,Y;function re(fe){try{return decodeURIComponent(fe.replace(/\+/g," "))}catch{return null}}function le(fe){try{return encodeURIComponent(fe)}catch{return null}}function ue(fe){for(var _e=/([^=?#&]+)=?([^&]*)/g,ve={},Se;Se=_e.exec(fe);){var $e=re(Se[1]),Ee=re(Se[2]);$e===null||Ee===null||$e in ve||(ve[$e]=Ee)}return ve}function he(fe,_e){_e=_e||"";var ve=[],Se,$e;typeof _e!="string"&&(_e="?");for($e in fe)if(oe.call(fe,$e)){if(Se=fe[$e],!Se&&(Se===null||Se===Y||isNaN(Se))&&(Se=""),$e=le($e),Se=le(Se),$e===null||Se===null)continue;ve.push($e+"="+Se)}return ve.length?_e+ve.join("&"):""}return querystringify.stringify=he,querystringify.parse=ue,querystringify}var urlParse,hasRequiredUrlParse;function requireUrlParse(){if(hasRequiredUrlParse)return urlParse;hasRequiredUrlParse=1;var oe=requireRequiresPort(),Y=requireQuerystringify(),re=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,le=/[\n\r\t]/g,ue=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,he=/:\d+$/,fe=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,_e=/^[a-zA-Z]:/;function ve(Te){return(Te||"").toString().replace(re,"")}var Se=[["#","hash"],["?","query"],function(Re,De){return Ce(De.protocol)?Re.replace(/\\/g,"/"):Re},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],$e={hash:1,query:1};function Ee(Te){var Re;typeof window<"u"?Re=window:typeof commonjsGlobal<"u"?Re=commonjsGlobal:typeof self<"u"?Re=self:Re={};var De=Re.location||{};Te=Te||De;var Le={},Ge=typeof Te,ze;if(Te.protocol==="blob:")Le=new Ne(unescape(Te.pathname),{});else if(Ge==="string"){Le=new Ne(Te,{});for(ze in $e)delete Le[ze]}else if(Ge==="object"){for(ze in Te)ze in $e||(Le[ze]=Te[ze]);Le.slashes===void 0&&(Le.slashes=ue.test(Te.href))}return Le}function Ce(Te){return Te==="file:"||Te==="ftp:"||Te==="http:"||Te==="https:"||Te==="ws:"||Te==="wss:"}function Ue(Te,Re){Te=ve(Te),Te=Te.replace(le,""),Re=Re||{};var De=fe.exec(Te),Le=De[1]?De[1].toLowerCase():"",Ge=!!De[2],ze=!!De[3],Ye=0,Xe;return Ge?ze?(Xe=De[2]+De[3]+De[4],Ye=De[2].length+De[3].length):(Xe=De[2]+De[4],Ye=De[2].length):ze?(Xe=De[3]+De[4],Ye=De[3].length):Xe=De[4],Le==="file:"?Ye>=2&&(Xe=Xe.slice(2)):Ce(Le)?Xe=De[4]:Le?Ge&&(Xe=Xe.slice(2)):Ye>=2&&Ce(Re.protocol)&&(Xe=De[4]),{protocol:Le,slashes:Ge||Ce(Le),slashesCount:Ye,rest:Xe}}function xe(Te,Re){if(Te==="")return Re;for(var De=(Re||"/").split("/").slice(0,-1).concat(Te.split("/")),Le=De.length,Ge=De[Le-1],ze=!1,Ye=0;Le--;)De[Le]==="."?De.splice(Le,1):De[Le]===".."?(De.splice(Le,1),Ye++):Ye&&(Le===0&&(ze=!0),De.splice(Le,1),Ye--);return ze&&De.unshift(""),(Ge==="."||Ge==="..")&&De.push(""),De.join("/")}function Ne(Te,Re,De){if(Te=ve(Te),Te=Te.replace(le,""),!(this instanceof Ne))return new Ne(Te,Re,De);var Le,Ge,ze,Ye,Xe,it,nt=Se.slice(),ot=typeof Re,Ve=this,st=0;for(ot!=="object"&&ot!=="string"&&(De=Re,Re=null),De&&typeof De!="function"&&(De=Y.parse),Re=Ee(Re),Ge=Ue(Te||"",Re),Le=!Ge.protocol&&!Ge.slashes,Ve.slashes=Ge.slashes||Le&&Re.slashes,Ve.protocol=Ge.protocol||Re.protocol||"",Te=Ge.rest,(Ge.protocol==="file:"&&(Ge.slashesCount!==2||_e.test(Te))||!Ge.slashes&&(Ge.protocol||Ge.slashesCount<2||!Ce(Ve.protocol)))&&(nt[3]=[/(.*)/,"pathname"]);st<nt.length;st++){if(Ye=nt[st],typeof Ye=="function"){Te=Ye(Te,Ve);continue}ze=Ye[0],it=Ye[1],ze!==ze?Ve[it]=Te:typeof ze=="string"?(Xe=ze==="@"?Te.lastIndexOf(ze):Te.indexOf(ze),~Xe&&(typeof Ye[2]=="number"?(Ve[it]=Te.slice(0,Xe),Te=Te.slice(Xe+Ye[2])):(Ve[it]=Te.slice(Xe),Te=Te.slice(0,Xe)))):(Xe=ze.exec(Te))&&(Ve[it]=Xe[1],Te=Te.slice(0,Xe.index)),Ve[it]=Ve[it]||Le&&Ye[3]&&Re[it]||"",Ye[4]&&(Ve[it]=Ve[it].toLowerCase())}De&&(Ve.query=De(Ve.query)),Le&&Re.slashes&&Ve.pathname.charAt(0)!=="/"&&(Ve.pathname!==""||Re.pathname!=="")&&(Ve.pathname=xe(Ve.pathname,Re.pathname)),Ve.pathname.charAt(0)!=="/"&&Ce(Ve.protocol)&&(Ve.pathname="/"+Ve.pathname),oe(Ve.port,Ve.protocol)||(Ve.host=Ve.hostname,Ve.port=""),Ve.username=Ve.password="",Ve.auth&&(Xe=Ve.auth.indexOf(":"),~Xe?(Ve.username=Ve.auth.slice(0,Xe),Ve.username=encodeURIComponent(decodeURIComponent(Ve.username)),Ve.password=Ve.auth.slice(Xe+1),Ve.password=encodeURIComponent(decodeURIComponent(Ve.password))):Ve.username=encodeURIComponent(decodeURIComponent(Ve.auth)),Ve.auth=Ve.password?Ve.username+":"+Ve.password:Ve.username),Ve.origin=Ve.protocol!=="file:"&&Ce(Ve.protocol)&&Ve.host?Ve.protocol+"//"+Ve.host:"null",Ve.href=Ve.toString()}function Ie(Te,Re,De){var Le=this;switch(Te){case"query":typeof Re=="string"&&Re.length&&(Re=(De||Y.parse)(Re)),Le[Te]=Re;break;case"port":Le[Te]=Re,oe(Re,Le.protocol)?Re&&(Le.host=Le.hostname+":"+Re):(Le.host=Le.hostname,Le[Te]="");break;case"hostname":Le[Te]=Re,Le.port&&(Re+=":"+Le.port),Le.host=Re;break;case"host":Le[Te]=Re,he.test(Re)?(Re=Re.split(":"),Le.port=Re.pop(),Le.hostname=Re.join(":")):(Le.hostname=Re,Le.port="");break;case"protocol":Le.protocol=Re.toLowerCase(),Le.slashes=!De;break;case"pathname":case"hash":if(Re){var Ge=Te==="pathname"?"/":"#";Le[Te]=Re.charAt(0)!==Ge?Ge+Re:Re}else Le[Te]=Re;break;case"username":case"password":Le[Te]=encodeURIComponent(Re);break;case"auth":var ze=Re.indexOf(":");~ze?(Le.username=Re.slice(0,ze),Le.username=encodeURIComponent(decodeURIComponent(Le.username)),Le.password=Re.slice(ze+1),Le.password=encodeURIComponent(decodeURIComponent(Le.password))):Le.username=encodeURIComponent(decodeURIComponent(Re))}for(var Ye=0;Ye<Se.length;Ye++){var Xe=Se[Ye];Xe[4]&&(Le[Xe[1]]=Le[Xe[1]].toLowerCase())}return Le.auth=Le.password?Le.username+":"+Le.password:Le.username,Le.origin=Le.protocol!=="file:"&&Ce(Le.protocol)&&Le.host?Le.protocol+"//"+Le.host:"null",Le.href=Le.toString(),Le}function qe(Te){(!Te||typeof Te!="function")&&(Te=Y.stringify);var Re,De=this,Le=De.host,Ge=De.protocol;Ge&&Ge.charAt(Ge.length-1)!==":"&&(Ge+=":");var ze=Ge+(De.protocol&&De.slashes||Ce(De.protocol)?"//":"");return De.username?(ze+=De.username,De.password&&(ze+=":"+De.password),ze+="@"):De.password?(ze+=":"+De.password,ze+="@"):De.protocol!=="file:"&&Ce(De.protocol)&&!Le&&De.pathname!=="/"&&(ze+="@"),(Le[Le.length-1]===":"||he.test(De.hostname)&&!De.port)&&(Le+=":"),ze+=Le+De.pathname,Re=typeof De.query=="object"?Te(De.query):De.query,Re&&(ze+=Re.charAt(0)!=="?"?"?"+Re:Re),De.hash&&(ze+=De.hash),ze}return Ne.prototype={set:Ie,toString:qe},Ne.extractProtocol=Ue,Ne.location=Ee,Ne.trimLeft=ve,Ne.qs=Y,urlParse=Ne,urlParse}var urlParseExports=requireUrlParse();const URL$1=getDefaultExportFromCjs(urlParseExports);function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(oe){var Y=Math.random()*16|0,re=oe==="x"?Y:Y&3|8;return re.toString(16)})}function _regeneratorRuntime$1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime$1=function(){return Y};var oe,Y={},re=Object.prototype,le=re.hasOwnProperty,ue=Object.defineProperty||function(Ae,Fe,Pe){Ae[Fe]=Pe.value},he=typeof Symbol=="function"?Symbol:{},fe=he.iterator||"@@iterator",_e=he.asyncIterator||"@@asyncIterator",ve=he.toStringTag||"@@toStringTag";function Se(Ae,Fe,Pe){return Object.defineProperty(Ae,Fe,{value:Pe,enumerable:!0,configurable:!0,writable:!0}),Ae[Fe]}try{Se({},"")}catch{Se=function(Pe,je,We){return Pe[je]=We}}function $e(Ae,Fe,Pe,je){var We=Fe&&Fe.prototype instanceof qe?Fe:qe,He=Object.create(We.prototype),Qe=new st(je||[]);return ue(He,"_invoke",{value:it(Ae,Pe,Qe)}),He}function Ee(Ae,Fe,Pe){try{return{type:"normal",arg:Ae.call(Fe,Pe)}}catch(je){return{type:"throw",arg:je}}}Y.wrap=$e;var Ce="suspendedStart",Ue="suspendedYield",xe="executing",Ne="completed",Ie={};function qe(){}function Te(){}function Re(){}var De={};Se(De,fe,function(){return this});var Le=Object.getPrototypeOf,Ge=Le&&Le(Le(at([])));Ge&&Ge!==re&&le.call(Ge,fe)&&(De=Ge);var ze=Re.prototype=qe.prototype=Object.create(De);function Ye(Ae){["next","throw","return"].forEach(function(Fe){Se(Ae,Fe,function(Pe){return this._invoke(Fe,Pe)})})}function Xe(Ae,Fe){function Pe(We,He,Qe,et){var tt=Ee(Ae[We],Ae,He);if(tt.type!=="throw"){var lt=tt.arg,ut=lt.value;return ut&&_typeof$6(ut)=="object"&&le.call(ut,"__await")?Fe.resolve(ut.__await).then(function(dt){Pe("next",dt,Qe,et)},function(dt){Pe("throw",dt,Qe,et)}):Fe.resolve(ut).then(function(dt){lt.value=dt,Qe(lt)},function(dt){return Pe("throw",dt,Qe,et)})}et(tt.arg)}var je;ue(this,"_invoke",{value:function(He,Qe){function et(){return new Fe(function(tt,lt){Pe(He,Qe,tt,lt)})}return je=je?je.then(et,et):et()}})}function it(Ae,Fe,Pe){var je=Ce;return function(We,He){if(je===xe)throw Error("Generator is already running");if(je===Ne){if(We==="throw")throw He;return{value:oe,done:!0}}for(Pe.method=We,Pe.arg=He;;){var Qe=Pe.delegate;if(Qe){var et=nt(Qe,Pe);if(et){if(et===Ie)continue;return et}}if(Pe.method==="next")Pe.sent=Pe._sent=Pe.arg;else if(Pe.method==="throw"){if(je===Ce)throw je=Ne,Pe.arg;Pe.dispatchException(Pe.arg)}else Pe.method==="return"&&Pe.abrupt("return",Pe.arg);je=xe;var tt=Ee(Ae,Fe,Pe);if(tt.type==="normal"){if(je=Pe.done?Ne:Ue,tt.arg===Ie)continue;return{value:tt.arg,done:Pe.done}}tt.type==="throw"&&(je=Ne,Pe.method="throw",Pe.arg=tt.arg)}}}function nt(Ae,Fe){var Pe=Fe.method,je=Ae.iterator[Pe];if(je===oe)return Fe.delegate=null,Pe==="throw"&&Ae.iterator.return&&(Fe.method="return",Fe.arg=oe,nt(Ae,Fe),Fe.method==="throw")||Pe!=="return"&&(Fe.method="throw",Fe.arg=new TypeError("The iterator does not provide a '"+Pe+"' method")),Ie;var We=Ee(je,Ae.iterator,Fe.arg);if(We.type==="throw")return Fe.method="throw",Fe.arg=We.arg,Fe.delegate=null,Ie;var He=We.arg;return He?He.done?(Fe[Ae.resultName]=He.value,Fe.next=Ae.nextLoc,Fe.method!=="return"&&(Fe.method="next",Fe.arg=oe),Fe.delegate=null,Ie):He:(Fe.method="throw",Fe.arg=new TypeError("iterator result is not an object"),Fe.delegate=null,Ie)}function ot(Ae){var Fe={tryLoc:Ae[0]};1 in Ae&&(Fe.catchLoc=Ae[1]),2 in Ae&&(Fe.finallyLoc=Ae[2],Fe.afterLoc=Ae[3]),this.tryEntries.push(Fe)}function Ve(Ae){var Fe=Ae.completion||{};Fe.type="normal",delete Fe.arg,Ae.completion=Fe}function st(Ae){this.tryEntries=[{tryLoc:"root"}],Ae.forEach(ot,this),this.reset(!0)}function at(Ae){if(Ae||Ae===""){var Fe=Ae[fe];if(Fe)return Fe.call(Ae);if(typeof Ae.next=="function")return Ae;if(!isNaN(Ae.length)){var Pe=-1,je=function We(){for(;++Pe<Ae.length;)if(le.call(Ae,Pe))return We.value=Ae[Pe],We.done=!1,We;return We.value=oe,We.done=!0,We};return je.next=je}}throw new TypeError(_typeof$6(Ae)+" is not iterable")}return Te.prototype=Re,ue(ze,"constructor",{value:Re,configurable:!0}),ue(Re,"constructor",{value:Te,configurable:!0}),Te.displayName=Se(Re,ve,"GeneratorFunction"),Y.isGeneratorFunction=function(Ae){var Fe=typeof Ae=="function"&&Ae.constructor;return!!Fe&&(Fe===Te||(Fe.displayName||Fe.name)==="GeneratorFunction")},Y.mark=function(Ae){return Object.setPrototypeOf?Object.setPrototypeOf(Ae,Re):(Ae.__proto__=Re,Se(Ae,ve,"GeneratorFunction")),Ae.prototype=Object.create(ze),Ae},Y.awrap=function(Ae){return{__await:Ae}},Ye(Xe.prototype),Se(Xe.prototype,_e,function(){return this}),Y.AsyncIterator=Xe,Y.async=function(Ae,Fe,Pe,je,We){We===void 0&&(We=Promise);var He=new Xe($e(Ae,Fe,Pe,je),We);return Y.isGeneratorFunction(Fe)?He:He.next().then(function(Qe){return Qe.done?Qe.value:He.next()})},Ye(ze),Se(ze,ve,"Generator"),Se(ze,fe,function(){return this}),Se(ze,"toString",function(){return"[object Generator]"}),Y.keys=function(Ae){var Fe=Object(Ae),Pe=[];for(var je in Fe)Pe.push(je);return Pe.reverse(),function We(){for(;Pe.length;){var He=Pe.pop();if(He in Fe)return We.value=He,We.done=!1,We}return We.done=!0,We}},Y.values=at,st.prototype={constructor:st,reset:function(Fe){if(this.prev=0,this.next=0,this.sent=this._sent=oe,this.done=!1,this.delegate=null,this.method="next",this.arg=oe,this.tryEntries.forEach(Ve),!Fe)for(var Pe in this)Pe.charAt(0)==="t"&&le.call(this,Pe)&&!isNaN(+Pe.slice(1))&&(this[Pe]=oe)},stop:function(){this.done=!0;var Fe=this.tryEntries[0].completion;if(Fe.type==="throw")throw Fe.arg;return this.rval},dispatchException:function(Fe){if(this.done)throw Fe;var Pe=this;function je(lt,ut){return Qe.type="throw",Qe.arg=Fe,Pe.next=lt,ut&&(Pe.method="next",Pe.arg=oe),!!ut}for(var We=this.tryEntries.length-1;We>=0;--We){var He=this.tryEntries[We],Qe=He.completion;if(He.tryLoc==="root")return je("end");if(He.tryLoc<=this.prev){var et=le.call(He,"catchLoc"),tt=le.call(He,"finallyLoc");if(et&&tt){if(this.prev<He.catchLoc)return je(He.catchLoc,!0);if(this.prev<He.finallyLoc)return je(He.finallyLoc)}else if(et){if(this.prev<He.catchLoc)return je(He.catchLoc,!0)}else{if(!tt)throw Error("try statement without catch or finally");if(this.prev<He.finallyLoc)return je(He.finallyLoc)}}}},abrupt:function(Fe,Pe){for(var je=this.tryEntries.length-1;je>=0;--je){var We=this.tryEntries[je];if(We.tryLoc<=this.prev&&le.call(We,"finallyLoc")&&this.prev<We.finallyLoc){var He=We;break}}He&&(Fe==="break"||Fe==="continue")&&He.tryLoc<=Pe&&Pe<=He.finallyLoc&&(He=null);var Qe=He?He.completion:{};return Qe.type=Fe,Qe.arg=Pe,He?(this.method="next",this.next=He.finallyLoc,Ie):this.complete(Qe)},complete:function(Fe,Pe){if(Fe.type==="throw")throw Fe.arg;return Fe.type==="break"||Fe.type==="continue"?this.next=Fe.arg:Fe.type==="return"?(this.rval=this.arg=Fe.arg,this.method="return",this.next="end"):Fe.type==="normal"&&Pe&&(this.next=Pe),Ie},finish:function(Fe){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var je=this.tryEntries[Pe];if(je.finallyLoc===Fe)return this.complete(je.completion,je.afterLoc),Ve(je),Ie}},catch:function(Fe){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var je=this.tryEntries[Pe];if(je.tryLoc===Fe){var We=je.completion;if(We.type==="throw"){var He=We.arg;Ve(je)}return He}}throw Error("illegal catch attempt")},delegateYield:function(Fe,Pe,je){return this.delegate={iterator:at(Fe),resultName:Pe,nextLoc:je},this.method==="next"&&(this.arg=oe),Ie}},Y}function asyncGeneratorStep$1(oe,Y,re,le,ue,he,fe){try{var _e=oe[he](fe),ve=_e.value}catch(Se){re(Se);return}_e.done?Y(ve):Promise.resolve(ve).then(le,ue)}function _asyncToGenerator$1(oe){return function(){var Y=this,re=arguments;return new Promise(function(le,ue){var he=oe.apply(Y,re);function fe(ve){asyncGeneratorStep$1(he,le,ue,fe,_e,"next",ve)}function _e(ve){asyncGeneratorStep$1(he,le,ue,fe,_e,"throw",ve)}fe(void 0)})}}function _slicedToArray(oe,Y){return _arrayWithHoles(oe)||_iterableToArrayLimit(oe,Y)||_unsupportedIterableToArray(oe,Y)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit(oe,Y){var re=oe==null?null:typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(re!=null){var le,ue,he,fe,_e=[],ve=!0,Se=!1;try{if(he=(re=re.call(oe)).next,Y!==0)for(;!(ve=(le=he.call(re)).done)&&(_e.push(le.value),_e.length!==Y);ve=!0);}catch($e){Se=!0,ue=$e}finally{try{if(!ve&&re.return!=null&&(fe=re.return(),Object(fe)!==fe))return}finally{if(Se)throw ue}}return _e}}function _arrayWithHoles(oe){if(Array.isArray(oe))return oe}function _typeof$6(oe){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$6(oe)}function _createForOfIteratorHelper(oe,Y){var re=typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(!re){if(Array.isArray(oe)||(re=_unsupportedIterableToArray(oe))||Y){re&&(oe=re);var le=0,ue=function(){};return{s:ue,n:function(){return le>=oe.length?{done:!0}:{done:!1,value:oe[le++]}},e:function(Se){throw Se},f:ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var he=!0,fe=!1,_e;return{s:function(){re=re.call(oe)},n:function(){var Se=re.next();return he=Se.done,Se},e:function(Se){fe=!0,_e=Se},f:function(){try{!he&&re.return!=null&&re.return()}finally{if(fe)throw _e}}}}function _unsupportedIterableToArray(oe,Y){if(oe){if(typeof oe=="string")return _arrayLikeToArray(oe,Y);var re=Object.prototype.toString.call(oe).slice(8,-1);if(re==="Object"&&oe.constructor&&(re=oe.constructor.name),re==="Map"||re==="Set")return Array.from(oe);if(re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(re))return _arrayLikeToArray(oe,Y)}}function _arrayLikeToArray(oe,Y){(Y==null||Y>oe.length)&&(Y=oe.length);for(var re=0,le=new Array(Y);re<Y;re++)le[re]=oe[re];return le}function ownKeys$1(oe,Y){var re=Object.keys(oe);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(oe);Y&&(le=le.filter(function(ue){return Object.getOwnPropertyDescriptor(oe,ue).enumerable})),re.push.apply(re,le)}return re}function _objectSpread$1(oe){for(var Y=1;Y<arguments.length;Y++){var re=arguments[Y]!=null?arguments[Y]:{};Y%2?ownKeys$1(Object(re),!0).forEach(function(le){_defineProperty$1(oe,le,re[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(re)):ownKeys$1(Object(re)).forEach(function(le){Object.defineProperty(oe,le,Object.getOwnPropertyDescriptor(re,le))})}return oe}function _defineProperty$1(oe,Y,re){return Y=_toPropertyKey$6(Y),Y in oe?Object.defineProperty(oe,Y,{value:re,enumerable:!0,configurable:!0,writable:!0}):oe[Y]=re,oe}function _classCallCheck$6(oe,Y){if(!(oe instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(oe,Y){for(var re=0;re<Y.length;re++){var le=Y[re];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(oe,_toPropertyKey$6(le.key),le)}}function _createClass$6(oe,Y,re){return Y&&_defineProperties$6(oe.prototype,Y),re&&_defineProperties$6(oe,re),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function _toPropertyKey$6(oe){var Y=_toPrimitive$6(oe,"string");return _typeof$6(Y)=="symbol"?Y:Y+""}function _toPrimitive$6(oe,Y){if(_typeof$6(oe)!="object"||!oe)return oe;var re=oe[Symbol.toPrimitive];if(re!==void 0){var le=re.call(oe,Y);if(_typeof$6(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}var PROTOCOL_TUS_V1="tus-v1",PROTOCOL_IETF_DRAFT_03="ietf-draft-03",PROTOCOL_IETF_DRAFT_05="ietf-draft-05",defaultOptions$2={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:defaultOnShouldRetry,chunkSize:Number.POSITIVE_INFINITY,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:PROTOCOL_TUS_V1},BaseUpload=(function(){function oe(Y,re){_classCallCheck$6(this,oe),"resume"in re&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=re,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=Y,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return _createClass$6(oe,[{key:"findPreviousUploads",value:function(){var re=this;return this.options.fingerprint(this.file,this.options).then(function(le){return re._urlStorage.findUploadsByFingerprint(le)})}},{key:"resumeFromPreviousUpload",value:function(re){this.url=re.uploadUrl||null,this._parallelUploadUrls=re.parallelUploadUrls||null,this._urlStorageKey=re.urlStorageKey}},{key:"start",value:function(){var re=this,le=this.file;if(!le){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(![PROTOCOL_TUS_V1,PROTOCOL_IETF_DRAFT_03,PROTOCOL_IETF_DRAFT_05].includes(this.options.protocol)){this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var ue=this.options.retryDelays;if(ue!=null&&Object.prototype.toString.call(ue)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var he=0,fe=["uploadUrl","uploadSize","uploadLengthDeferred"];he<fe.length;he++){var _e=fe[he];if(this.options[_e]){this._emitError(new Error("tus: cannot use the ".concat(_e," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(le,this.options).then(function(ve){return re._fingerprint=ve,re._source?re._source:re.options.fileReader.openFile(le,re.options.chunkSize)}).then(function(ve){if(re._source=ve,re.options.uploadLengthDeferred)re._size=null;else if(re.options.uploadSize!=null){if(re._size=Number(re.options.uploadSize),Number.isNaN(re._size)){re._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(re._size=re._source.size,re._size==null){re._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}re.options.parallelUploads>1||re._parallelUploadUrls!=null?re._startParallelUpload():re._startSingleUpload()}).catch(function(ve){re._emitError(ve)})}},{key:"_startParallelUpload",value:function(){var re,le=this,ue=this._size,he=0;this._parallelUploads=[];var fe=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,_e=(re=this.options.parallelUploadBoundaries)!==null&&re!==void 0?re:splitSizeIntoParts(this._source.size,fe);this._parallelUploadUrls&&_e.forEach(function($e,Ee){$e.uploadUrl=le._parallelUploadUrls[Ee]||null}),this._parallelUploadUrls=new Array(_e.length);var ve=_e.map(function($e,Ee){var Ce=0;return le._source.slice($e.start,$e.end).then(function(Ue){var xe=Ue.value;return new Promise(function(Ne,Ie){var qe=_objectSpread$1(_objectSpread$1({},le.options),{},{uploadUrl:$e.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:le.options.metadataForPartialUploads,headers:_objectSpread$1(_objectSpread$1({},le.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:Ne,onError:Ie,onProgress:function(De){he=he-Ce+De,Ce=De,le._emitProgress(he,ue)},onUploadUrlAvailable:function(){le._parallelUploadUrls[Ee]=Te.url,le._parallelUploadUrls.filter(function(De){return!!De}).length===_e.length&&le._saveUploadInUrlStorage()}}),Te=new oe(xe,qe);Te.start(),le._parallelUploads.push(Te)})})}),Se;Promise.all(ve).then(function(){Se=le._openRequest("POST",le.options.endpoint),Se.setHeader("Upload-Concat","final;".concat(le._parallelUploadUrls.join(" ")));var $e=encodeMetadata(le.options.metadata);return $e!==""&&Se.setHeader("Upload-Metadata",$e),le._sendRequest(Se,null)}).then(function($e){if(!inStatusCategory($e.getStatus(),200)){le._emitHttpError(Se,$e,"tus: unexpected response while creating upload");return}var Ee=$e.getHeader("Location");if(Ee==null){le._emitHttpError(Se,$e,"tus: invalid or missing Location header");return}le.url=resolveUrl(le.options.endpoint,Ee),"Created upload at ".concat(le.url),le._emitSuccess($e)}).catch(function($e){le._emitError($e)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){"Resuming upload from previous URL: ".concat(this.url),this._resumeUpload();return}if(this.options.uploadUrl!=null){"Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,this._resumeUpload();return}this._createUpload()}},{key:"abort",value:function(re){var le=this;if(this._parallelUploads!=null){var ue=_createForOfIteratorHelper(this._parallelUploads),he;try{for(ue.s();!(he=ue.n()).done;){var fe=he.value;fe.abort(re)}}catch(_e){ue.e(_e)}finally{ue.f()}}return this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!re||this.url==null?Promise.resolve():oe.terminate(this.url,this.options).then(function(){return le._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(re,le,ue,he){this._emitError(new DetailedError(ue,he,re,le))}},{key:"_emitError",value:function(re){var le=this;if(!this._aborted){if(this.options.retryDelays!=null){var ue=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(ue&&(this._retryAttempt=0),shouldRetry(re,this._retryAttempt,this.options)){var he=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){le.start()},he);return}}if(typeof this.options.onError=="function")this.options.onError(re);else throw re}}},{key:"_emitSuccess",value:function(re){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess({lastResponse:re})}},{key:"_emitProgress",value:function(re,le){typeof this.options.onProgress=="function"&&this.options.onProgress(re,le)}},{key:"_emitChunkComplete",value:function(re,le,ue){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(re,le,ue)}},{key:"_createUpload",value:function(){var re=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var le=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?le.setHeader("Upload-Defer-Length","1"):le.setHeader("Upload-Length","".concat(this._size));var ue=encodeMetadata(this.options.metadata);ue!==""&&le.setHeader("Upload-Metadata",ue);var he;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,he=this._addChunkToRequest(le)):((this.options.protocol===PROTOCOL_IETF_DRAFT_03||this.options.protocol===PROTOCOL_IETF_DRAFT_05)&&le.setHeader("Upload-Complete","?0"),he=this._sendRequest(le,null)),he.then(function(fe){if(!inStatusCategory(fe.getStatus(),200)){re._emitHttpError(le,fe,"tus: unexpected response while creating upload");return}var _e=fe.getHeader("Location");if(_e==null){re._emitHttpError(le,fe,"tus: invalid or missing Location header");return}if(re.url=resolveUrl(re.options.endpoint,_e),"Created upload at ".concat(re.url),typeof re.options.onUploadUrlAvailable=="function"&&re.options.onUploadUrlAvailable(),re._size===0){re._emitSuccess(fe),re._source.close();return}re._saveUploadInUrlStorage().then(function(){re.options.uploadDataDuringCreation?re._handleUploadResponse(le,fe):(re._offset=0,re._performUpload())})}).catch(function(fe){re._emitHttpError(le,null,"tus: failed to create upload",fe)})}},{key:"_resumeUpload",value:function(){var re=this,le=this._openRequest("HEAD",this.url),ue=this._sendRequest(le,null);ue.then(function(he){var fe=he.getStatus();if(!inStatusCategory(fe,200)){if(fe===423){re._emitHttpError(le,he,"tus: upload is currently locked; retry later");return}if(inStatusCategory(fe,400)&&re._removeFromUrlStorage(),!re.options.endpoint){re._emitHttpError(le,he,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}re.url=null,re._createUpload();return}var _e=Number.parseInt(he.getHeader("Upload-Offset"),10);if(Number.isNaN(_e)){re._emitHttpError(le,he,"tus: invalid or missing offset value");return}var ve=Number.parseInt(he.getHeader("Upload-Length"),10);if(Number.isNaN(ve)&&!re.options.uploadLengthDeferred&&re.options.protocol===PROTOCOL_TUS_V1){re._emitHttpError(le,he,"tus: invalid or missing length value");return}typeof re.options.onUploadUrlAvailable=="function"&&re.options.onUploadUrlAvailable(),re._saveUploadInUrlStorage().then(function(){if(_e===ve){re._emitProgress(ve,ve),re._emitSuccess(he);return}re._offset=_e,re._performUpload()})}).catch(function(he){re._emitHttpError(le,null,"tus: failed to resume upload",he)})}},{key:"_performUpload",value:function(){var re=this;if(!this._aborted){var le;this.options.overridePatchMethod?(le=this._openRequest("POST",this.url),le.setHeader("X-HTTP-Method-Override","PATCH")):le=this._openRequest("PATCH",this.url),le.setHeader("Upload-Offset","".concat(this._offset));var ue=this._addChunkToRequest(le);ue.then(function(he){if(!inStatusCategory(he.getStatus(),200)){re._emitHttpError(le,he,"tus: unexpected response while uploading chunk");return}re._handleUploadResponse(le,he)}).catch(function(he){re._aborted||re._emitHttpError(le,null,"tus: failed to upload chunk at offset ".concat(re._offset),he)})}}},{key:"_addChunkToRequest",value:function(re){var le=this,ue=this._offset,he=this._offset+this.options.chunkSize;return re.setProgressHandler(function(fe){le._emitProgress(ue+fe,le._size)}),this.options.protocol===PROTOCOL_TUS_V1?re.setHeader("Content-Type","application/offset+octet-stream"):this.options.protocol===PROTOCOL_IETF_DRAFT_05&&re.setHeader("Content-Type","application/partial-upload"),(he===Number.POSITIVE_INFINITY||he>this._size)&&!this.options.uploadLengthDeferred&&(he=this._size),this._source.slice(ue,he).then(function(fe){var _e=fe.value,ve=fe.done,Se=_e!=null&&_e.size?_e.size:0;le.options.uploadLengthDeferred&&ve&&(le._size=le._offset+Se,re.setHeader("Upload-Length","".concat(le._size)));var $e=le._offset+Se;return!le.options.uploadLengthDeferred&&ve&&$e!==le._size?Promise.reject(new Error("upload was configured with a size of ".concat(le._size," bytes, but the source is done after ").concat($e," bytes"))):_e===null?le._sendRequest(re):((le.options.protocol===PROTOCOL_IETF_DRAFT_03||le.options.protocol===PROTOCOL_IETF_DRAFT_05)&&re.setHeader("Upload-Complete",ve?"?1":"?0"),le._emitProgress(le._offset,le._size),le._sendRequest(re,_e))})}},{key:"_handleUploadResponse",value:function(re,le){var ue=Number.parseInt(le.getHeader("Upload-Offset"),10);if(Number.isNaN(ue)){this._emitHttpError(re,le,"tus: invalid or missing offset value");return}if(this._emitProgress(ue,this._size),this._emitChunkComplete(ue-this._offset,ue,this._size),this._offset=ue,ue===this._size){this._emitSuccess(le),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(re,le){var ue=openRequest(re,le,this.options);return this._req=ue,ue}},{key:"_removeFromUrlStorage",value:function(){var re=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(le){re._emitError(le)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var re=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var le={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?le.parallelUploadUrls=this._parallelUploadUrls:le.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,le).then(function(ue){re._urlStorageKey=ue})}},{key:"_sendRequest",value:function(re){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return sendRequest(re,le,this.options)}}],[{key:"terminate",value:function(re){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=openRequest("DELETE",re,le);return sendRequest(ue,null,le).then(function(he){if(he.getStatus()!==204)throw new DetailedError("tus: unexpected response while terminating upload",null,ue,he)}).catch(function(he){if(he instanceof DetailedError||(he=new DetailedError("tus: failed to terminate upload",he,ue,null)),!shouldRetry(he,0,le))throw he;var fe=le.retryDelays[0],_e=le.retryDelays.slice(1),ve=_objectSpread$1(_objectSpread$1({},le),{},{retryDelays:_e});return new Promise(function(Se){return setTimeout(Se,fe)}).then(function(){return oe.terminate(re,ve)})})}}])})();function encodeMetadata(oe){return Object.entries(oe).map(function(Y){var re=_slicedToArray(Y,2),le=re[0],ue=re[1];return"".concat(le," ").concat(gBase64.encode(String(ue)))}).join(",")}function inStatusCategory(oe,Y){return oe>=Y&&oe<Y+100}function openRequest(oe,Y,re){var le=re.httpStack.createRequest(oe,Y);re.protocol===PROTOCOL_IETF_DRAFT_03?le.setHeader("Upload-Draft-Interop-Version","5"):re.protocol===PROTOCOL_IETF_DRAFT_05?le.setHeader("Upload-Draft-Interop-Version","6"):le.setHeader("Tus-Resumable","1.0.0");for(var ue=re.headers||{},he=0,fe=Object.entries(ue);he<fe.length;he++){var _e=_slicedToArray(fe[he],2),ve=_e[0],Se=_e[1];le.setHeader(ve,Se)}if(re.addRequestId){var $e=uuid();le.setHeader("X-Request-ID",$e)}return le}function sendRequest(oe,Y,re){return _sendRequest2.apply(this,arguments)}function _sendRequest2(){return _sendRequest2=_asyncToGenerator$1(_regeneratorRuntime$1().mark(function oe(Y,re,le){var ue;return _regeneratorRuntime$1().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(typeof le.onBeforeRequest!="function"){fe.next=3;break}return fe.next=3,le.onBeforeRequest(Y);case 3:return fe.next=5,Y.send(re);case 5:if(ue=fe.sent,typeof le.onAfterResponse!="function"){fe.next=9;break}return fe.next=9,le.onAfterResponse(Y,ue);case 9:return fe.abrupt("return",ue);case 10:case"end":return fe.stop()}},oe)})),_sendRequest2.apply(this,arguments)}function isOnline(){var oe=!0;return typeof navigator<"u"&&navigator.onLine===!1&&(oe=!1),oe}function shouldRetry(oe,Y,re){return re.retryDelays==null||Y>=re.retryDelays.length||oe.originalRequest==null?!1:re&&typeof re.onShouldRetry=="function"?re.onShouldRetry(oe,Y,re):defaultOnShouldRetry(oe)}function defaultOnShouldRetry(oe){var Y=oe.originalResponse?oe.originalResponse.getStatus():0;return(!inStatusCategory(Y,400)||Y===409||Y===423)&&isOnline()}function resolveUrl(oe,Y){return new URL$1(Y,oe).toString()}function splitSizeIntoParts(oe,Y){for(var re=Math.floor(oe/Y),le=[],ue=0;ue<Y;ue++)le.push({start:re*ue,end:re*(ue+1)});return le[Y-1].end=oe,le}BaseUpload.defaultOptions=defaultOptions$2;var isReactNative$1=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};function uriToBlob(oe){return new Promise(function(Y,re){var le=new XMLHttpRequest;le.responseType="blob",le.onload=function(){var ue=le.response;Y(ue)},le.onerror=function(ue){re(ue)},le.open("GET",oe),le.send()})}var isCordova$1=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")};function readAsByteArray(oe){return new Promise(function(Y,re){var le=new FileReader;le.onload=function(){var ue=new Uint8Array(le.result);Y({value:ue})},le.onerror=function(ue){re(ue)},le.readAsArrayBuffer(oe)})}function _typeof$5(oe){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$5(oe)}function _classCallCheck$5(oe,Y){if(!(oe instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(oe,Y){for(var re=0;re<Y.length;re++){var le=Y[re];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(oe,_toPropertyKey$5(le.key),le)}}function _createClass$5(oe,Y,re){return Y&&_defineProperties$5(oe.prototype,Y),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function _toPropertyKey$5(oe){var Y=_toPrimitive$5(oe,"string");return _typeof$5(Y)=="symbol"?Y:Y+""}function _toPrimitive$5(oe,Y){if(_typeof$5(oe)!="object"||!oe)return oe;var re=oe[Symbol.toPrimitive];if(re!==void 0){var le=re.call(oe,Y);if(_typeof$5(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}var FileSource=(function(){function oe(Y){_classCallCheck$5(this,oe),this._file=Y,this.size=Y.size}return _createClass$5(oe,[{key:"slice",value:function(re,le){if(isCordova$1())return readAsByteArray(this._file.slice(re,le));var ue=this._file.slice(re,le),he=le>=this.size;return Promise.resolve({value:ue,done:he})}},{key:"close",value:function(){}}])})();function _typeof$4(oe){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$4(oe)}function _classCallCheck$4(oe,Y){if(!(oe instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(oe,Y){for(var re=0;re<Y.length;re++){var le=Y[re];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(oe,_toPropertyKey$4(le.key),le)}}function _createClass$4(oe,Y,re){return Y&&_defineProperties$4(oe.prototype,Y),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function _toPropertyKey$4(oe){var Y=_toPrimitive$4(oe,"string");return _typeof$4(Y)=="symbol"?Y:Y+""}function _toPrimitive$4(oe,Y){if(_typeof$4(oe)!="object"||!oe)return oe;var re=oe[Symbol.toPrimitive];if(re!==void 0){var le=re.call(oe,Y);if(_typeof$4(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}function len(oe){return oe===void 0?0:oe.size!==void 0?oe.size:oe.length}function concat(oe,Y){if(oe.concat)return oe.concat(Y);if(oe instanceof Blob)return new Blob([oe,Y],{type:oe.type});if(oe.set){var re=new oe.constructor(oe.length+Y.length);return re.set(oe),re.set(Y,oe.length),re}throw new Error("Unknown data type")}var StreamSource=(function(){function oe(Y){_classCallCheck$4(this,oe),this._buffer=void 0,this._bufferOffset=0,this._reader=Y,this._done=!1}return _createClass$4(oe,[{key:"slice",value:function(re,le){return re<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(re,le)}},{key:"_readUntilEnoughDataOrDone",value:function(re,le){var ue=this,he=le<=this._bufferOffset+len(this._buffer);if(this._done||he){var fe=this._getDataFromBuffer(re,le),_e=fe==null?this._done:!1;return Promise.resolve({value:fe,done:_e})}return this._reader.read().then(function(ve){var Se=ve.value,$e=ve.done;return $e?ue._done=!0:ue._buffer===void 0?ue._buffer=Se:ue._buffer=concat(ue._buffer,Se),ue._readUntilEnoughDataOrDone(re,le)})}},{key:"_getDataFromBuffer",value:function(re,le){re>this._bufferOffset&&(this._buffer=this._buffer.slice(re-this._bufferOffset),this._bufferOffset=re);var ue=len(this._buffer)===0;return this._done&&ue?null:this._buffer.slice(0,le-re)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])})();function _typeof$3(oe){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$3(oe)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return Y};var oe,Y={},re=Object.prototype,le=re.hasOwnProperty,ue=Object.defineProperty||function(Ae,Fe,Pe){Ae[Fe]=Pe.value},he=typeof Symbol=="function"?Symbol:{},fe=he.iterator||"@@iterator",_e=he.asyncIterator||"@@asyncIterator",ve=he.toStringTag||"@@toStringTag";function Se(Ae,Fe,Pe){return Object.defineProperty(Ae,Fe,{value:Pe,enumerable:!0,configurable:!0,writable:!0}),Ae[Fe]}try{Se({},"")}catch{Se=function(Pe,je,We){return Pe[je]=We}}function $e(Ae,Fe,Pe,je){var We=Fe&&Fe.prototype instanceof qe?Fe:qe,He=Object.create(We.prototype),Qe=new st(je||[]);return ue(He,"_invoke",{value:it(Ae,Pe,Qe)}),He}function Ee(Ae,Fe,Pe){try{return{type:"normal",arg:Ae.call(Fe,Pe)}}catch(je){return{type:"throw",arg:je}}}Y.wrap=$e;var Ce="suspendedStart",Ue="suspendedYield",xe="executing",Ne="completed",Ie={};function qe(){}function Te(){}function Re(){}var De={};Se(De,fe,function(){return this});var Le=Object.getPrototypeOf,Ge=Le&&Le(Le(at([])));Ge&&Ge!==re&&le.call(Ge,fe)&&(De=Ge);var ze=Re.prototype=qe.prototype=Object.create(De);function Ye(Ae){["next","throw","return"].forEach(function(Fe){Se(Ae,Fe,function(Pe){return this._invoke(Fe,Pe)})})}function Xe(Ae,Fe){function Pe(We,He,Qe,et){var tt=Ee(Ae[We],Ae,He);if(tt.type!=="throw"){var lt=tt.arg,ut=lt.value;return ut&&_typeof$3(ut)=="object"&&le.call(ut,"__await")?Fe.resolve(ut.__await).then(function(dt){Pe("next",dt,Qe,et)},function(dt){Pe("throw",dt,Qe,et)}):Fe.resolve(ut).then(function(dt){lt.value=dt,Qe(lt)},function(dt){return Pe("throw",dt,Qe,et)})}et(tt.arg)}var je;ue(this,"_invoke",{value:function(He,Qe){function et(){return new Fe(function(tt,lt){Pe(He,Qe,tt,lt)})}return je=je?je.then(et,et):et()}})}function it(Ae,Fe,Pe){var je=Ce;return function(We,He){if(je===xe)throw Error("Generator is already running");if(je===Ne){if(We==="throw")throw He;return{value:oe,done:!0}}for(Pe.method=We,Pe.arg=He;;){var Qe=Pe.delegate;if(Qe){var et=nt(Qe,Pe);if(et){if(et===Ie)continue;return et}}if(Pe.method==="next")Pe.sent=Pe._sent=Pe.arg;else if(Pe.method==="throw"){if(je===Ce)throw je=Ne,Pe.arg;Pe.dispatchException(Pe.arg)}else Pe.method==="return"&&Pe.abrupt("return",Pe.arg);je=xe;var tt=Ee(Ae,Fe,Pe);if(tt.type==="normal"){if(je=Pe.done?Ne:Ue,tt.arg===Ie)continue;return{value:tt.arg,done:Pe.done}}tt.type==="throw"&&(je=Ne,Pe.method="throw",Pe.arg=tt.arg)}}}function nt(Ae,Fe){var Pe=Fe.method,je=Ae.iterator[Pe];if(je===oe)return Fe.delegate=null,Pe==="throw"&&Ae.iterator.return&&(Fe.method="return",Fe.arg=oe,nt(Ae,Fe),Fe.method==="throw")||Pe!=="return"&&(Fe.method="throw",Fe.arg=new TypeError("The iterator does not provide a '"+Pe+"' method")),Ie;var We=Ee(je,Ae.iterator,Fe.arg);if(We.type==="throw")return Fe.method="throw",Fe.arg=We.arg,Fe.delegate=null,Ie;var He=We.arg;return He?He.done?(Fe[Ae.resultName]=He.value,Fe.next=Ae.nextLoc,Fe.method!=="return"&&(Fe.method="next",Fe.arg=oe),Fe.delegate=null,Ie):He:(Fe.method="throw",Fe.arg=new TypeError("iterator result is not an object"),Fe.delegate=null,Ie)}function ot(Ae){var Fe={tryLoc:Ae[0]};1 in Ae&&(Fe.catchLoc=Ae[1]),2 in Ae&&(Fe.finallyLoc=Ae[2],Fe.afterLoc=Ae[3]),this.tryEntries.push(Fe)}function Ve(Ae){var Fe=Ae.completion||{};Fe.type="normal",delete Fe.arg,Ae.completion=Fe}function st(Ae){this.tryEntries=[{tryLoc:"root"}],Ae.forEach(ot,this),this.reset(!0)}function at(Ae){if(Ae||Ae===""){var Fe=Ae[fe];if(Fe)return Fe.call(Ae);if(typeof Ae.next=="function")return Ae;if(!isNaN(Ae.length)){var Pe=-1,je=function We(){for(;++Pe<Ae.length;)if(le.call(Ae,Pe))return We.value=Ae[Pe],We.done=!1,We;return We.value=oe,We.done=!0,We};return je.next=je}}throw new TypeError(_typeof$3(Ae)+" is not iterable")}return Te.prototype=Re,ue(ze,"constructor",{value:Re,configurable:!0}),ue(Re,"constructor",{value:Te,configurable:!0}),Te.displayName=Se(Re,ve,"GeneratorFunction"),Y.isGeneratorFunction=function(Ae){var Fe=typeof Ae=="function"&&Ae.constructor;return!!Fe&&(Fe===Te||(Fe.displayName||Fe.name)==="GeneratorFunction")},Y.mark=function(Ae){return Object.setPrototypeOf?Object.setPrototypeOf(Ae,Re):(Ae.__proto__=Re,Se(Ae,ve,"GeneratorFunction")),Ae.prototype=Object.create(ze),Ae},Y.awrap=function(Ae){return{__await:Ae}},Ye(Xe.prototype),Se(Xe.prototype,_e,function(){return this}),Y.AsyncIterator=Xe,Y.async=function(Ae,Fe,Pe,je,We){We===void 0&&(We=Promise);var He=new Xe($e(Ae,Fe,Pe,je),We);return Y.isGeneratorFunction(Fe)?He:He.next().then(function(Qe){return Qe.done?Qe.value:He.next()})},Ye(ze),Se(ze,ve,"Generator"),Se(ze,fe,function(){return this}),Se(ze,"toString",function(){return"[object Generator]"}),Y.keys=function(Ae){var Fe=Object(Ae),Pe=[];for(var je in Fe)Pe.push(je);return Pe.reverse(),function We(){for(;Pe.length;){var He=Pe.pop();if(He in Fe)return We.value=He,We.done=!1,We}return We.done=!0,We}},Y.values=at,st.prototype={constructor:st,reset:function(Fe){if(this.prev=0,this.next=0,this.sent=this._sent=oe,this.done=!1,this.delegate=null,this.method="next",this.arg=oe,this.tryEntries.forEach(Ve),!Fe)for(var Pe in this)Pe.charAt(0)==="t"&&le.call(this,Pe)&&!isNaN(+Pe.slice(1))&&(this[Pe]=oe)},stop:function(){this.done=!0;var Fe=this.tryEntries[0].completion;if(Fe.type==="throw")throw Fe.arg;return this.rval},dispatchException:function(Fe){if(this.done)throw Fe;var Pe=this;function je(lt,ut){return Qe.type="throw",Qe.arg=Fe,Pe.next=lt,ut&&(Pe.method="next",Pe.arg=oe),!!ut}for(var We=this.tryEntries.length-1;We>=0;--We){var He=this.tryEntries[We],Qe=He.completion;if(He.tryLoc==="root")return je("end");if(He.tryLoc<=this.prev){var et=le.call(He,"catchLoc"),tt=le.call(He,"finallyLoc");if(et&&tt){if(this.prev<He.catchLoc)return je(He.catchLoc,!0);if(this.prev<He.finallyLoc)return je(He.finallyLoc)}else if(et){if(this.prev<He.catchLoc)return je(He.catchLoc,!0)}else{if(!tt)throw Error("try statement without catch or finally");if(this.prev<He.finallyLoc)return je(He.finallyLoc)}}}},abrupt:function(Fe,Pe){for(var je=this.tryEntries.length-1;je>=0;--je){var We=this.tryEntries[je];if(We.tryLoc<=this.prev&&le.call(We,"finallyLoc")&&this.prev<We.finallyLoc){var He=We;break}}He&&(Fe==="break"||Fe==="continue")&&He.tryLoc<=Pe&&Pe<=He.finallyLoc&&(He=null);var Qe=He?He.completion:{};return Qe.type=Fe,Qe.arg=Pe,He?(this.method="next",this.next=He.finallyLoc,Ie):this.complete(Qe)},complete:function(Fe,Pe){if(Fe.type==="throw")throw Fe.arg;return Fe.type==="break"||Fe.type==="continue"?this.next=Fe.arg:Fe.type==="return"?(this.rval=this.arg=Fe.arg,this.method="return",this.next="end"):Fe.type==="normal"&&Pe&&(this.next=Pe),Ie},finish:function(Fe){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var je=this.tryEntries[Pe];if(je.finallyLoc===Fe)return this.complete(je.completion,je.afterLoc),Ve(je),Ie}},catch:function(Fe){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var je=this.tryEntries[Pe];if(je.tryLoc===Fe){var We=je.completion;if(We.type==="throw"){var He=We.arg;Ve(je)}return He}}throw Error("illegal catch attempt")},delegateYield:function(Fe,Pe,je){return this.delegate={iterator:at(Fe),resultName:Pe,nextLoc:je},this.method==="next"&&(this.arg=oe),Ie}},Y}function asyncGeneratorStep(oe,Y,re,le,ue,he,fe){try{var _e=oe[he](fe),ve=_e.value}catch(Se){re(Se);return}_e.done?Y(ve):Promise.resolve(ve).then(le,ue)}function _asyncToGenerator(oe){return function(){var Y=this,re=arguments;return new Promise(function(le,ue){var he=oe.apply(Y,re);function fe(ve){asyncGeneratorStep(he,le,ue,fe,_e,"next",ve)}function _e(ve){asyncGeneratorStep(he,le,ue,fe,_e,"throw",ve)}fe(void 0)})}}function _classCallCheck$3(oe,Y){if(!(oe instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(oe,Y){for(var re=0;re<Y.length;re++){var le=Y[re];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(oe,_toPropertyKey$3(le.key),le)}}function _createClass$3(oe,Y,re){return Y&&_defineProperties$3(oe.prototype,Y),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function _toPropertyKey$3(oe){var Y=_toPrimitive$3(oe,"string");return _typeof$3(Y)=="symbol"?Y:Y+""}function _toPrimitive$3(oe,Y){if(_typeof$3(oe)!="object"||!oe)return oe;var re=oe[Symbol.toPrimitive];if(re!==void 0){var le=re.call(oe,Y);if(_typeof$3(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}var FileReader$1=(function(){function oe(){_classCallCheck$3(this,oe)}return _createClass$3(oe,[{key:"openFile",value:(function(){var Y=_asyncToGenerator(_regeneratorRuntime().mark(function le(ue,he){var fe;return _regeneratorRuntime().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(!(isReactNative$1()&&ue&&typeof ue.uri<"u")){ve.next=11;break}return ve.prev=1,ve.next=4,uriToBlob(ue.uri);case 4:return fe=ve.sent,ve.abrupt("return",new FileSource(fe));case 8:throw ve.prev=8,ve.t0=ve.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(ve.t0));case 11:if(!(typeof ue.slice=="function"&&typeof ue.size<"u")){ve.next=13;break}return ve.abrupt("return",Promise.resolve(new FileSource(ue)));case 13:if(typeof ue.read!="function"){ve.next=18;break}if(he=Number(he),Number.isFinite(he)){ve.next=17;break}return ve.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return ve.abrupt("return",Promise.resolve(new StreamSource(ue,he)));case 18:return ve.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return ve.stop()}},le,null,[[1,8]])}));function re(le,ue){return Y.apply(this,arguments)}return re})()}])})();function fingerprint(oe,Y){return isReactNative$1()?Promise.resolve(reactNativeFingerprint(oe,Y)):Promise.resolve(["tus-br",oe.name,oe.type,oe.size,oe.lastModified,Y.endpoint].join("-"))}function reactNativeFingerprint(oe,Y){var re=oe.exif?hashCode(JSON.stringify(oe.exif)):"noexif";return["tus-rn",oe.name||"noname",oe.size||"nosize",re,Y.endpoint].join("/")}function hashCode(oe){var Y=0;if(oe.length===0)return Y;for(var re=0;re<oe.length;re++){var le=oe.charCodeAt(re);Y=(Y<<5)-Y+le,Y&=Y}return Y}function _typeof$2(oe){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$2(oe)}function _classCallCheck$2(oe,Y){if(!(oe instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(oe,Y){for(var re=0;re<Y.length;re++){var le=Y[re];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(oe,_toPropertyKey$2(le.key),le)}}function _createClass$2(oe,Y,re){return Y&&_defineProperties$2(oe.prototype,Y),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function _toPropertyKey$2(oe){var Y=_toPrimitive$2(oe,"string");return _typeof$2(Y)=="symbol"?Y:Y+""}function _toPrimitive$2(oe,Y){if(_typeof$2(oe)!="object"||!oe)return oe;var re=oe[Symbol.toPrimitive];if(re!==void 0){var le=re.call(oe,Y);if(_typeof$2(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}var XHRHttpStack=(function(){function oe(){_classCallCheck$2(this,oe)}return _createClass$2(oe,[{key:"createRequest",value:function(re,le){return new Request(re,le)}},{key:"getName",value:function(){return"XHRHttpStack"}}])})(),Request=(function(){function oe(Y,re){_classCallCheck$2(this,oe),this._xhr=new XMLHttpRequest,this._xhr.open(Y,re,!0),this._method=Y,this._url=re,this._headers={}}return _createClass$2(oe,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(re,le){this._xhr.setRequestHeader(re,le),this._headers[re]=le}},{key:"getHeader",value:function(re){return this._headers[re]}},{key:"setProgressHandler",value:function(re){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(le){le.lengthComputable&&re(le.loaded)})}},{key:"send",value:function(){var re=this,le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(ue,he){re._xhr.onload=function(){ue(new Response(re._xhr))},re._xhr.onerror=function(fe){he(fe)},re._xhr.send(le)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])})(),Response=(function(){function oe(Y){_classCallCheck$2(this,oe),this._xhr=Y}return _createClass$2(oe,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(re){return this._xhr.getResponseHeader(re)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])})();function _typeof$1(oe){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$1(oe)}function _classCallCheck$1(oe,Y){if(!(oe instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(oe,Y){for(var re=0;re<Y.length;re++){var le=Y[re];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(oe,_toPropertyKey$1(le.key),le)}}function _createClass$1(oe,Y,re){return Y&&_defineProperties$1(oe.prototype,Y),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function _toPropertyKey$1(oe){var Y=_toPrimitive$1(oe,"string");return _typeof$1(Y)=="symbol"?Y:Y+""}function _toPrimitive$1(oe,Y){if(_typeof$1(oe)!="object"||!oe)return oe;var re=oe[Symbol.toPrimitive];if(re!==void 0){var le=re.call(oe,Y);if(_typeof$1(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}var hasStorage=!1;try{hasStorage="localStorage"in window;var key="tusSupport",originalValue=localStorage.getItem(key);localStorage.setItem(key,originalValue),originalValue===null&&localStorage.removeItem(key)}catch(oe){if(oe.code===oe.SECURITY_ERR||oe.code===oe.QUOTA_EXCEEDED_ERR)hasStorage=!1;else throw oe}var canStoreURLs=hasStorage,WebStorageUrlStorage=(function(){function oe(){_classCallCheck$1(this,oe)}return _createClass$1(oe,[{key:"findAllUploads",value:function(){var re=this._findEntries("tus::");return Promise.resolve(re)}},{key:"findUploadsByFingerprint",value:function(re){var le=this._findEntries("tus::".concat(re,"::"));return Promise.resolve(le)}},{key:"removeUpload",value:function(re){return localStorage.removeItem(re),Promise.resolve()}},{key:"addUpload",value:function(re,le){var ue=Math.round(Math.random()*1e12),he="tus::".concat(re,"::").concat(ue);return localStorage.setItem(he,JSON.stringify(le)),Promise.resolve(he)}},{key:"_findEntries",value:function(re){for(var le=[],ue=0;ue<localStorage.length;ue++){var he=localStorage.key(ue);if(he.indexOf(re)===0)try{var fe=JSON.parse(localStorage.getItem(he));fe.urlStorageKey=he,le.push(fe)}catch{}}return le}}])})();function _typeof(oe){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof(oe)}function _classCallCheck(oe,Y){if(!(oe instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties(oe,Y){for(var re=0;re<Y.length;re++){var le=Y[re];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(oe,_toPropertyKey(le.key),le)}}function _createClass(oe,Y,re){return re&&_defineProperties(oe,re),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function _callSuper(oe,Y,re){return Y=_getPrototypeOf(Y),_possibleConstructorReturn(oe,_isNativeReflectConstruct()?Reflect.construct(Y,re||[],_getPrototypeOf(oe).constructor):Y.apply(oe,re))}function _possibleConstructorReturn(oe,Y){if(Y&&(_typeof(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(oe)}function _assertThisInitialized(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function _isNativeReflectConstruct(){try{var oe=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!oe})()}function _getPrototypeOf(oe){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(re){return re.__proto__||Object.getPrototypeOf(re)},_getPrototypeOf(oe)}function _inherits(oe,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(Y&&Y.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),Y&&_setPrototypeOf(oe,Y)}function _setPrototypeOf(oe,Y){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(le,ue){return le.__proto__=ue,le},_setPrototypeOf(oe,Y)}function ownKeys(oe,Y){var re=Object.keys(oe);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(oe);Y&&(le=le.filter(function(ue){return Object.getOwnPropertyDescriptor(oe,ue).enumerable})),re.push.apply(re,le)}return re}function _objectSpread(oe){for(var Y=1;Y<arguments.length;Y++){var re=arguments[Y]!=null?arguments[Y]:{};Y%2?ownKeys(Object(re),!0).forEach(function(le){_defineProperty(oe,le,re[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(re)):ownKeys(Object(re)).forEach(function(le){Object.defineProperty(oe,le,Object.getOwnPropertyDescriptor(re,le))})}return oe}function _defineProperty(oe,Y,re){return Y=_toPropertyKey(Y),Y in oe?Object.defineProperty(oe,Y,{value:re,enumerable:!0,configurable:!0,writable:!0}):oe[Y]=re,oe}function _toPropertyKey(oe){var Y=_toPrimitive(oe,"string");return _typeof(Y)=="symbol"?Y:Y+""}function _toPrimitive(oe,Y){if(_typeof(oe)!="object"||!oe)return oe;var re=oe[Symbol.toPrimitive];if(re!==void 0){var le=re.call(oe,Y);if(_typeof(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Y==="string"?String:Number)(oe)}var defaultOptions$1=_objectSpread(_objectSpread({},BaseUpload.defaultOptions),{},{httpStack:new XHRHttpStack,fileReader:new FileReader$1,urlStorage:canStoreURLs?new WebStorageUrlStorage:new NoopUrlStorage,fingerprint}),Upload=(function(oe){function Y(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _classCallCheck(this,Y),le=_objectSpread(_objectSpread({},defaultOptions$1),le),_callSuper(this,Y,[re,le])}return _inherits(Y,oe),_createClass(Y,null,[{key:"terminate",value:function(le){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ue=_objectSpread(_objectSpread({},defaultOptions$1),ue),BaseUpload.terminate(le,ue)}}])})(BaseUpload);const version="4.3.2",packageJson={version};function isCordova(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")}function isReactNative(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"}function getFingerprint(oe){return(Y,re)=>{if(isCordova()||isReactNative())return defaultOptions$1.fingerprint(Y,re);const le=["tus",oe.id,re.endpoint].join("-");return Promise.resolve(le)}}const tusDefaultOptions={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},defaultOptions={limit:20,retryDelays:tusDefaultOptions.retryDelays,withCredentials:!1,allowedMetaFields:!0};var Zt,Et,qr,zr,Vr,er;class Tus extends BasePlugin{constructor(re,le){super(re,{...defaultOptions,...le});Ze(this,Et);Ze(this,Zt);Be(this,"requests");Be(this,"uploaders");Be(this,"uploaderEvents");Ze(this,er,async re=>{if(re.length===0){this.uppy.log("[Tus] No files to upload");return}this.opts.limit===0&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");const le=this.uppy.getFilesByIds(re);await Ke(this,Et,Vr).call(this,le)});if(this.type="uploader",this.id=this.opts.id||"Tus",le?.allowedMetaFields===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in le)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=this.opts.rateLimitedQueue??new RateLimitedQueue(this.opts.limit),rt(this,Zt,this.opts.retryDelays?.values()),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}resetUploaderReferences(re,le){const ue=this.uploaders[re];ue&&(ue.abort(),le?.abort&&ue.abort(!0),this.uploaders[re]=null),this.uploaderEvents[re]&&(this.uploaderEvents[re].remove(),this.uploaderEvents[re]=null)}onReceiveUploadUrl(re,le){const ue=this.uppy.getFile(re.id);ue&&(!ue.tus||ue.tus.uploadUrl!==le)&&(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(ue.id,{tus:{...ue.tus,uploadUrl:le}}))}install(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!0}}),this.uppy.addUploader(Me(this,er))}uninstall(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!1}}),this.uppy.removeUploader(Me(this,er))}}Zt=new WeakMap,Et=new WeakSet,qr=function(re){return this.resetUploaderReferences(re.id),new Promise((le,ue)=>{let he,fe,_e;const ve={...this.opts,...re.tus||{}};typeof ve.headers=="function"&&(ve.headers=ve.headers(re));const{onShouldRetry:Se,onBeforeRequest:$e,...Ee}=ve,Ce={...tusDefaultOptions,...Ee};Ce.fingerprint=getFingerprint(re),Ce.onBeforeRequest=async Te=>{const Re=Te.getUnderlyingObject();Re.withCredentials=!!ve.withCredentials;let De;if(typeof $e=="function"&&(De=$e(Te,re)),hasProperty(he,"shouldBeRequeued")){if(!he.shouldBeRequeued)return Promise.reject();let Le;const Ge=new Promise(ze=>{Le=ze});he=this.requests.run(()=>(re.isPaused&&he.abort(),Le(),()=>{})),await Promise.all([Ge,De]);return}return De},Ce.onError=Te=>{this.uppy.log(Te);const Re=Te.originalRequest!=null?Te.originalRequest.getUnderlyingObject():null;isNetworkError(Re)&&(Te=new NetworkError(Te,Re)),this.resetUploaderReferences(re.id),he?.abort(),typeof ve.onError=="function"&&ve.onError(Te),ue(Te)},Ce.onProgress=(Te,Re)=>{this.onReceiveUploadUrl(re,_e.url),typeof ve.onProgress=="function"&&ve.onProgress(Te,Re);const De=this.uppy.getFile(re.id);this.uppy.emit("upload-progress",De,{uploadStarted:De.progress.uploadStarted??0,bytesUploaded:Te,bytesTotal:Re})},Ce.onSuccess=Te=>{const Re={uploadURL:_e.url??void 0,status:200,body:{xhr:Te.lastResponse.getUnderlyingObject()}};if(this.uppy.emit("upload-success",this.uppy.getFile(re.id),Re),this.resetUploaderReferences(re.id),he.done(),_e.url){const{name:De}=_e.file;this.uppy.log(`Download ${De} from ${_e.url}`)}typeof ve.onSuccess=="function"&&ve.onSuccess(Te),le(_e)};const Ue=Te=>{const Re=Te?.originalResponse?.getStatus();if(Re===429){if(!this.requests.isPaused){const De=Me(this,Zt)?.next();if(De==null||De.done)return!1;this.requests.rateLimit(De.value)}}else{if(Re!=null&&Re>=400&&Re<500&&Re!==409&&Re!==423)return!1;typeof navigator<"u"&&navigator.onLine===!1&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",()=>{this.requests.resume()},{once:!0})))}return he.abort(),he={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};Se!=null?Ce.onShouldRetry=(Te,Re)=>Se(Te,Re,ve,Ue):Ce.onShouldRetry=Ue;const xe=(Te,Re,De)=>{hasProperty(Te,Re)&&!hasProperty(Te,De)&&(Te[De]=Te[Re])},Ne={};getAllowedMetaFields(ve.allowedMetaFields,re.meta).forEach(Te=>{Ne[Te]=String(re.meta[Te])}),xe(Ne,"type","filetype"),xe(Ne,"name","filename"),Ce.metadata=Ne,_e=new Upload(re.data,Ce),this.uploaders[re.id]=_e;const qe=new EventManager(this.uppy);this.uploaderEvents[re.id]=qe,fe=()=>(re.isPaused||_e.start(),()=>{}),_e.findPreviousUploads().then(Te=>{const Re=Te[0];Re&&(this.uppy.log(`[Tus] Resuming upload of ${re.id} started at ${Re.creationTime}`),_e.resumeFromPreviousUpload(Re)),he=this.requests.run(fe)}),qe.onFileRemove(re.id,Te=>{he.abort(),this.resetUploaderReferences(re.id,{abort:!!_e.url}),le(`upload ${Te} was removed`)}),qe.onPause(re.id,Te=>{he.abort(),Te?_e.abort():he=this.requests.run(fe)}),qe.onPauseAll(re.id,()=>{he.abort(),_e.abort()}),qe.onCancelAll(re.id,()=>{he.abort(),this.resetUploaderReferences(re.id,{abort:!!_e.url}),le(`upload ${re.id} was canceled`)}),qe.onResumeAll(re.id,()=>{he.abort(),re.error&&_e.abort(),he=this.requests.run(fe)})}).catch(le=>{throw this.uppy.emit("upload-error",re,le),le})},zr=function(re){const le={...this.opts};return re.tus&&Object.assign(le,re.tus),typeof le.headers=="function"&&(le.headers=le.headers(re)),{...re.remote?.body,endpoint:le.endpoint,uploadUrl:le.uploadUrl,protocol:"tus",size:re.data.size,headers:le.headers,metadata:re.meta}},Vr=async function(re){const le=filterNonFailedFiles(re),ue=filterFilesToEmitUploadStarted(le);this.uppy.emit("upload-start",ue),await Promise.allSettled(le.map(he=>{if(he.isRemote){const fe=()=>this.requests,_e=new AbortController,ve=$e=>{$e.id===he.id&&_e.abort()};this.uppy.on("file-removed",ve);const Se=this.uppy.getRequestClientForFile(he).uploadRemoteFile(he,Ke(this,Et,zr).call(this,he),{signal:_e.signal,getQueue:fe});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",ve)},{priority:-1})(),Se}return Ke(this,Et,qr).call(this,he)}))},er=new WeakMap,Be(Tus,"VERSION",packageJson.version);var sha256={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(oe){return Object.prototype.toString.call(oe)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(oe){return typeof oe=="object"&&oe.buffer&&oe.buffer.constructor===ArrayBuffer});var createOutputMethod=function(oe,Y){return function(re){return new Sha256(Y,!0).update(re)[oe]()}},createMethod=function(oe){var Y=createOutputMethod("hex",oe);NODE_JS&&(Y=nodeWrap(Y,oe)),Y.create=function(){return new Sha256(oe)},Y.update=function(ue){return Y.create().update(ue)};for(var re=0;re<OUTPUT_TYPES.length;++re){var le=OUTPUT_TYPES[re];Y[le]=createOutputMethod(le,oe)}return Y},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(oe){if(typeof oe=="string")return crypto.createHash(algorithm).update(oe,"utf8").digest("hex");if(oe==null)throw new Error(ERROR);return oe.constructor===ArrayBuffer&&(oe=new Uint8Array(oe)),Array.isArray(oe)||ArrayBuffer.isView(oe)||oe.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(oe)).digest("hex"):method(oe)};return nodeMethod},createHmacOutputMethod=function(oe,Y){return function(re,le){return new HmacSha256(re,Y,!0).update(le)[oe]()}},createHmacMethod=function(oe){var Y=createHmacOutputMethod("hex",oe);Y.create=function(ue){return new HmacSha256(ue,oe)},Y.update=function(ue,he){return Y.create(ue).update(he)};for(var re=0;re<OUTPUT_TYPES.length;++re){var le=OUTPUT_TYPES[re];Y[le]=createHmacOutputMethod(le,oe)}return Y};function Sha256(oe,Y){Y?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],oe?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=oe}Sha256.prototype.update=function(oe){if(!this.finalized){var Y,re=typeof oe;if(re!=="string"){if(re==="object"){if(oe===null)throw new Error(ERROR);if(ARRAY_BUFFER&&oe.constructor===ArrayBuffer)oe=new Uint8Array(oe);else if(!Array.isArray(oe)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(oe)))throw new Error(ERROR)}else throw new Error(ERROR);Y=!0}for(var le,ue=0,he,fe=oe.length,_e=this.blocks;ue<fe;){if(this.hashed&&(this.hashed=!1,_e[0]=this.block,_e[16]=_e[1]=_e[2]=_e[3]=_e[4]=_e[5]=_e[6]=_e[7]=_e[8]=_e[9]=_e[10]=_e[11]=_e[12]=_e[13]=_e[14]=_e[15]=0),Y)for(he=this.start;ue<fe&&he<64;++ue)_e[he>>2]|=oe[ue]<<SHIFT[he++&3];else for(he=this.start;ue<fe&&he<64;++ue)le=oe.charCodeAt(ue),le<128?_e[he>>2]|=le<<SHIFT[he++&3]:le<2048?(_e[he>>2]|=(192|le>>6)<<SHIFT[he++&3],_e[he>>2]|=(128|le&63)<<SHIFT[he++&3]):le<55296||le>=57344?(_e[he>>2]|=(224|le>>12)<<SHIFT[he++&3],_e[he>>2]|=(128|le>>6&63)<<SHIFT[he++&3],_e[he>>2]|=(128|le&63)<<SHIFT[he++&3]):(le=65536+((le&1023)<<10|oe.charCodeAt(++ue)&1023),_e[he>>2]|=(240|le>>18)<<SHIFT[he++&3],_e[he>>2]|=(128|le>>12&63)<<SHIFT[he++&3],_e[he>>2]|=(128|le>>6&63)<<SHIFT[he++&3],_e[he>>2]|=(128|le&63)<<SHIFT[he++&3]);this.lastByteIndex=he,this.bytes+=he-this.start,he>=64?(this.block=_e[16],this.start=he-64,this.hash(),this.hashed=!0):this.start=he}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var oe=this.blocks,Y=this.lastByteIndex;oe[16]=this.block,oe[Y>>2]|=EXTRA[Y&3],this.block=oe[16],Y>=56&&(this.hashed||this.hash(),oe[0]=this.block,oe[16]=oe[1]=oe[2]=oe[3]=oe[4]=oe[5]=oe[6]=oe[7]=oe[8]=oe[9]=oe[10]=oe[11]=oe[12]=oe[13]=oe[14]=oe[15]=0),oe[14]=this.hBytes<<3|this.bytes>>>29,oe[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var oe=this.h0,Y=this.h1,re=this.h2,le=this.h3,ue=this.h4,he=this.h5,fe=this.h6,_e=this.h7,ve=this.blocks,Se,$e,Ee,Ce,Ue,xe,Ne,Ie,qe,Te,Re;for(Se=16;Se<64;++Se)Ue=ve[Se-15],$e=(Ue>>>7|Ue<<25)^(Ue>>>18|Ue<<14)^Ue>>>3,Ue=ve[Se-2],Ee=(Ue>>>17|Ue<<15)^(Ue>>>19|Ue<<13)^Ue>>>10,ve[Se]=ve[Se-16]+$e+ve[Se-7]+Ee<<0;for(Re=Y&re,Se=0;Se<64;Se+=4)this.first?(this.is224?(Ie=300032,Ue=ve[0]-1413257819,_e=Ue-150054599<<0,le=Ue+24177077<<0):(Ie=704751109,Ue=ve[0]-210244248,_e=Ue-1521486534<<0,le=Ue+143694565<<0),this.first=!1):($e=(oe>>>2|oe<<30)^(oe>>>13|oe<<19)^(oe>>>22|oe<<10),Ee=(ue>>>6|ue<<26)^(ue>>>11|ue<<21)^(ue>>>25|ue<<7),Ie=oe&Y,Ce=Ie^oe&re^Re,Ne=ue&he^~ue&fe,Ue=_e+Ee+Ne+K[Se]+ve[Se],xe=$e+Ce,_e=le+Ue<<0,le=Ue+xe<<0),$e=(le>>>2|le<<30)^(le>>>13|le<<19)^(le>>>22|le<<10),Ee=(_e>>>6|_e<<26)^(_e>>>11|_e<<21)^(_e>>>25|_e<<7),qe=le&oe,Ce=qe^le&Y^Ie,Ne=_e&ue^~_e&he,Ue=fe+Ee+Ne+K[Se+1]+ve[Se+1],xe=$e+Ce,fe=re+Ue<<0,re=Ue+xe<<0,$e=(re>>>2|re<<30)^(re>>>13|re<<19)^(re>>>22|re<<10),Ee=(fe>>>6|fe<<26)^(fe>>>11|fe<<21)^(fe>>>25|fe<<7),Te=re&le,Ce=Te^re&oe^qe,Ne=fe&_e^~fe&ue,Ue=he+Ee+Ne+K[Se+2]+ve[Se+2],xe=$e+Ce,he=Y+Ue<<0,Y=Ue+xe<<0,$e=(Y>>>2|Y<<30)^(Y>>>13|Y<<19)^(Y>>>22|Y<<10),Ee=(he>>>6|he<<26)^(he>>>11|he<<21)^(he>>>25|he<<7),Re=Y&re,Ce=Re^Y&le^Te,Ne=he&fe^~he&_e,Ue=ue+Ee+Ne+K[Se+3]+ve[Se+3],xe=$e+Ce,ue=oe+Ue<<0,oe=Ue+xe<<0;this.h0=this.h0+oe<<0,this.h1=this.h1+Y<<0,this.h2=this.h2+re<<0,this.h3=this.h3+le<<0,this.h4=this.h4+ue<<0,this.h5=this.h5+he<<0,this.h6=this.h6+fe<<0,this.h7=this.h7+_e<<0},Sha256.prototype.hex=function(){this.finalize();var oe=this.h0,Y=this.h1,re=this.h2,le=this.h3,ue=this.h4,he=this.h5,fe=this.h6,_e=this.h7,ve=HEX_CHARS[oe>>28&15]+HEX_CHARS[oe>>24&15]+HEX_CHARS[oe>>20&15]+HEX_CHARS[oe>>16&15]+HEX_CHARS[oe>>12&15]+HEX_CHARS[oe>>8&15]+HEX_CHARS[oe>>4&15]+HEX_CHARS[oe&15]+HEX_CHARS[Y>>28&15]+HEX_CHARS[Y>>24&15]+HEX_CHARS[Y>>20&15]+HEX_CHARS[Y>>16&15]+HEX_CHARS[Y>>12&15]+HEX_CHARS[Y>>8&15]+HEX_CHARS[Y>>4&15]+HEX_CHARS[Y&15]+HEX_CHARS[re>>28&15]+HEX_CHARS[re>>24&15]+HEX_CHARS[re>>20&15]+HEX_CHARS[re>>16&15]+HEX_CHARS[re>>12&15]+HEX_CHARS[re>>8&15]+HEX_CHARS[re>>4&15]+HEX_CHARS[re&15]+HEX_CHARS[le>>28&15]+HEX_CHARS[le>>24&15]+HEX_CHARS[le>>20&15]+HEX_CHARS[le>>16&15]+HEX_CHARS[le>>12&15]+HEX_CHARS[le>>8&15]+HEX_CHARS[le>>4&15]+HEX_CHARS[le&15]+HEX_CHARS[ue>>28&15]+HEX_CHARS[ue>>24&15]+HEX_CHARS[ue>>20&15]+HEX_CHARS[ue>>16&15]+HEX_CHARS[ue>>12&15]+HEX_CHARS[ue>>8&15]+HEX_CHARS[ue>>4&15]+HEX_CHARS[ue&15]+HEX_CHARS[he>>28&15]+HEX_CHARS[he>>24&15]+HEX_CHARS[he>>20&15]+HEX_CHARS[he>>16&15]+HEX_CHARS[he>>12&15]+HEX_CHARS[he>>8&15]+HEX_CHARS[he>>4&15]+HEX_CHARS[he&15]+HEX_CHARS[fe>>28&15]+HEX_CHARS[fe>>24&15]+HEX_CHARS[fe>>20&15]+HEX_CHARS[fe>>16&15]+HEX_CHARS[fe>>12&15]+HEX_CHARS[fe>>8&15]+HEX_CHARS[fe>>4&15]+HEX_CHARS[fe&15];return this.is224||(ve+=HEX_CHARS[_e>>28&15]+HEX_CHARS[_e>>24&15]+HEX_CHARS[_e>>20&15]+HEX_CHARS[_e>>16&15]+HEX_CHARS[_e>>12&15]+HEX_CHARS[_e>>8&15]+HEX_CHARS[_e>>4&15]+HEX_CHARS[_e&15]),ve},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var oe=this.h0,Y=this.h1,re=this.h2,le=this.h3,ue=this.h4,he=this.h5,fe=this.h6,_e=this.h7,ve=[oe>>24&255,oe>>16&255,oe>>8&255,oe&255,Y>>24&255,Y>>16&255,Y>>8&255,Y&255,re>>24&255,re>>16&255,re>>8&255,re&255,le>>24&255,le>>16&255,le>>8&255,le&255,ue>>24&255,ue>>16&255,ue>>8&255,ue&255,he>>24&255,he>>16&255,he>>8&255,he&255,fe>>24&255,fe>>16&255,fe>>8&255,fe&255];return this.is224||ve.push(_e>>24&255,_e>>16&255,_e>>8&255,_e&255),ve},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var oe=new ArrayBuffer(this.is224?28:32),Y=new DataView(oe);return Y.setUint32(0,this.h0),Y.setUint32(4,this.h1),Y.setUint32(8,this.h2),Y.setUint32(12,this.h3),Y.setUint32(16,this.h4),Y.setUint32(20,this.h5),Y.setUint32(24,this.h6),this.is224||Y.setUint32(28,this.h7),oe};function HmacSha256(oe,Y,re){var le,ue=typeof oe;if(ue==="string"){var he=[],fe=oe.length,_e=0,ve;for(le=0;le<fe;++le)ve=oe.charCodeAt(le),ve<128?he[_e++]=ve:ve<2048?(he[_e++]=192|ve>>6,he[_e++]=128|ve&63):ve<55296||ve>=57344?(he[_e++]=224|ve>>12,he[_e++]=128|ve>>6&63,he[_e++]=128|ve&63):(ve=65536+((ve&1023)<<10|oe.charCodeAt(++le)&1023),he[_e++]=240|ve>>18,he[_e++]=128|ve>>12&63,he[_e++]=128|ve>>6&63,he[_e++]=128|ve&63);oe=he}else if(ue==="object"){if(oe===null)throw new Error(ERROR);if(ARRAY_BUFFER&&oe.constructor===ArrayBuffer)oe=new Uint8Array(oe);else if(!Array.isArray(oe)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(oe)))throw new Error(ERROR)}else throw new Error(ERROR);oe.length>64&&(oe=new Sha256(Y,!0).update(oe).array());var Se=[],$e=[];for(le=0;le<64;++le){var Ee=oe[le]||0;Se[le]=92^Ee,$e[le]=54^Ee}Sha256.call(this,Y,re),this.update($e),this.oKeyPad=Se,this.inner=!0,this.sharedMemory=re}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var oe=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(oe),Sha256.prototype.finalize.call(this)}};var exports$1=createMethod();exports$1.sha256=exports$1,exports$1.sha224=createMethod(!0),exports$1.sha256.hmac=createHmacMethod(),exports$1.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports$1:(root.sha256=exports$1.sha256,root.sha224=exports$1.sha224)})()})(sha256)),sha256.exports}var sha256Exports=requireSha256();class UppyBunnyCreator extends BasePlugin{constructor(re,le){super(re,le);Be(this,"prepareUpload",async re=>{const le=re.map(he=>{const fe=this.uppy.getFile(he);return this.create(fe).then(_e=>{this.uppy.setFileMeta(he,{bunnyId:_e})}).catch(_e=>{this.uppy.log(_e,"warning")})}),ue=()=>{re.forEach(he=>{const fe=this.uppy.getFile(he);this.uppy.emit("preprocess-complete",fe)})};return await Promise.all(le),ue()});this.id=this.opts.id||"UppyBunnyCreator",this.type="modifier"}create(re){let le={method:"POST",url:"https://video.bunnycdn.com/library/"+this.opts.library+"/videos",headers:{accept:"application/json","content-type":"application/*+json",AccessKey:this.opts.access},data:'{"title": "'+re.meta.name+'", "thumbnailTime": "'+this.getMsFromTime(re.meta.thumbTime)+'"}'};return axios.request(le).then(ue=>ue.data.guid).catch(ue=>console.error(ue))}install(){this.uppy.addPreProcessor(this.prepareUpload)}uninstall(){this.uppy.removePreProcessor(this.prepareUpload)}getMsFromTime(re){if(typeof re>"u"||re==null||re=="")return 0;if(!this.validateTime(re))throw this.uppy.info("Falsches Zeitformat fr die Thumbnailerstellung.","error",3e3),new Error("Wrong timestamp format for thumbnail creation.");let le=re.split(":");return(+le[0]*60*60+ +le[1]*60+ +le[2])*1e3}validateTime(re){if(!/^(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(re))return!1;const[ue,he,fe]=re.split(":").map(Number);return!(ue<0||ue>23||he<0||he>59||fe<0||fe>59)}}const _sfc_main$2={components:{PlusIcon},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary"],data(){return{expirationTime:0,uploader:null}},methods:{getExpirationTime(){const oe=new Date;return oe.setDate(oe.getDate()+1),oe.getTime()},getAuthorizationSignature(oe){const Y=this.bunnyLibrary+this.bunnyApiKey+this.expirationTime+oe;return sha256Exports.sha256(Y)},initializeUppy(){this.expirationTime=this.getExpirationTime(),this.uploader=new Uppy().use(Dashboard,{inline:!1,trigger:"#bunny-upload",width:"auto",proudlyDisplayPoweredByUppy:!1,closeModalOnClickOutside:!0,closeAfterFinish:!0,metaFields:[{id:"name",name:__("Name"),placeholder:__("Filename")},{id:"thumbTime",name:__("Timestamp"),placeholder:__("hh:mm:ss e.g. 00:01:04 for minute 1, second 4")},{id:"bunnyId",name:__("Bunny ID"),render:({value:oe},Y)=>Y("input",{type:"text",class:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input bg-gray-300",value:oe,placeholder:__("Bunny ID"),disabled:!0},[])}]}).use(UppyBunnyCreator,{access:this.bunnyApiKey,library:this.bunnyLibrary}).use(Tus,{endpoint:"https://video.bunnycdn.com/tusupload",retryDelays:[0,30,50,3e3,5e3,1e4,6e4],onBeforeRequest:(oe,Y)=>{const re=this.uploader.getFile(Y.id).meta;if(re.bunnyId)oe.setHeader("AuthorizationSignature",this.getAuthorizationSignature(re.bunnyId)),oe.setHeader("AuthorizationExpire",this.expirationTime),oe.setHeader("VideoId",re.bunnyId),oe.setHeader("LibraryId",this.bunnyLibrary);else throw""}}),this.uploader.on("complete",oe=>{if(oe.successful.length>0){const Y=oe.successful.length===1?__("1 video uploaded successfully."):__(":count videos successfully uploaded.",{count:oe.successful.length});console.log(Y)}oe.failed.length>0&&console.log("Failed files: ",oe.failed),emitter.emit("load")})}},created(){emitter.on("upload",()=>document.getElementById("bunny-upload").click())},mounted(){this.initializeUppy()}},_hoisted_1$2={class:"btn-primary",id:"bunny-upload"};function _sfc_render$1(oe,Y,re,le,ue,he){const fe=resolveComponent("PlusIcon");return openBlock(),createElementBlock("button",_hoisted_1$2,[createVNode(fe,{class:"h-6 w-6"}),createTextVNode(" "+toDisplayString(oe.__("Upload Video")),1)])}const Uploader=_export_sfc(_sfc_main$2,[["render",_sfc_render$1]]),_sfc_main$1={},_hoisted_1$1={class:"container w-100 lg:w-4/5 mx-auto"},_hoisted_2$1={class:"flex flex-col items-center justify-center gap-2"},_hoisted_3={class:"mb-2"},_hoisted_4={class:"text-sm"},_hoisted_5={class:"text-sm"},_hoisted_6={href:"https://bunny.net?ref=uhvsqhaw0n",target:"_blank",class:"btn-primary my-2"},_hoisted_7={class:"text-sm"},_hoisted_8={class:"text-sm"};function _sfc_render(oe,Y){return openBlock(),createElementBlock("div",_hoisted_1$1,[createElementVNode("div",_hoisted_2$1,[createElementVNode("h1",_hoisted_3,toDisplayString(oe.__("Bunny Account Required")),1),createElementVNode("p",_hoisted_4,toDisplayString(oe.__("To use this addon, you'll need a Bunny.net account. Make sure to add your credentials to the .env file.")),1),createElementVNode("p",_hoisted_5,toDisplayString(oe.__("If you don't have one yet, you can sign up using our affiliate link.")),1),createElementVNode("a",_hoisted_6,toDisplayString(oe.__("Sign Up Now")),1),createElementVNode("p",_hoisted_7,toDisplayString(oe.__("By doing so, you'll be supporting the development of this addon at no extra cost to you.")),1),createElementVNode("p",_hoisted_8,[createElementVNode("b",null,toDisplayString(oe.__("Thank you for your support!")),1)])])])}const Affiliate=_export_sfc(_sfc_main$1,[["render",_sfc_render]]),_hoisted_1={class:"flex gap-2 justify-between"},_hoisted_2={class:"flex-grow mb-4"},_sfc_main={__name:"Overview",props:{title:String,addon:Object,bunny:Object},setup(oe){const Y=oe;return provide("bunnyApiKey",Y.bunny.apiKey),provide("bunnyHostname",Y.bunny.hostname),provide("bunnyLibrary",Y.bunny.library),(re,le)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(unref(Head),{title:oe.title},null,8,["title"]),oe.bunny.apiKey&&oe.bunny.hostname&&oe.bunny.library?(openBlock(),createElementBlock(Fragment,{key:0},[createElementVNode("div",_hoisted_1,[createElementVNode("h1",_hoisted_2,toDisplayString(oe.title),1),createVNode(Uploader)]),createVNode(VideoBrowser)],64)):(openBlock(),createBlock(Affiliate,{key:1})),createVNode(unref(DocsCallout),{topic:oe.addon.name,url:oe.addon.url},null,8,["topic","url"])],64))}};Statamic.booting(()=>{Statamic.$inertia.register("BunnyOverview",_sfc_main),Statamic.$components.register("bunny-fieldtype",_sfc_main$e)});
