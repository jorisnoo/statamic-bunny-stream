const Vue=window.Vue,{BaseTransition,BaseTransitionPropsValidators,Comment,DeprecationTypes,EffectScope,ErrorCodes,ErrorTypeStrings,Fragment,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text,TrackOpTypes,Transition,TransitionGroup:TransitionGroup$1,TriggerOpTypes,VueElement,__esModule,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,compile,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,devtools,effect,effectScope,getCurrentInstance,getCurrentScope,getCurrentWatcher,getTransitionRawChildren,guardReactiveProps,h:h$2,handleError,hasInjectionContext,hydrate,hydrateOnIdle,hydrateOnInteraction,hydrateOnMediaQuery,hydrateOnVisible,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,nodeOps,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,onWatcherCleanup,openBlock,patchProp,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,toValue,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useHost,useId,useModel,useSSRContext,useShadowRoot,useSlots,useTemplateRef,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$8,warn,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId}=Vue,{Fieldtype,IndexFieldtype,FieldtypeMixin,HasActionsMixin,HasInputOptionsMixin,HasPreferencesMixin,IndexFieldtypeMixin,InlineEditForm,DateFormatter,ItemActions,RelatedItem,RestoreRevision,RevisionHistory,RevisionPreview,SaveButtonOptions,SortableList,requireElevatedSession,requireElevatedSessionIf,clone,deepClone,resetValuesFromResponse}=__STATAMIC__.core,{Alert,AuthCard,Avatar,Badge,Button,ButtonGroup,Calendar,Card,CardList,CardListItem,CardPanel,CharacterCounter,Checkbox,CheckboxGroup,CodeEditor,Combobox,CommandPaletteItem,ConfirmationModal,Context,ContextFooter,ContextHeader,ContextItem,ContextLabel,ContextMenu,ContextSeparator,CreateForm,DatePicker,DateRangePicker,Description,DocsCallout,DragHandle,Dropdown,DropdownItem,DropdownLabel,DropdownMenu,DropdownSeparator,DropdownFooter,DropdownHeader,Editable,ErrorMessage,EmptyStateItem,EmptyStateMenu,Field,Header,Heading,HoverCard,Icon,Input,InputGroup,InputGroupAppend,InputGroupPrepend,Label,Listing,ListingCustomizeColumns,ListingFilters,ListingHeaderCell,ListingPagination,ListingPresets,ListingPresetTrigger,ListingRowActions,ListingSearch,ListingTable,ListingTableBody,ListingTableHead,ListingToggleAll,LivePreview,LivePreviewPopout,Modal,ModalClose,ModalTitle,Pagination,Panel,PanelFooter,PanelHeader,Popover,PublishComponents,PublishContainer,publishContextKey,injectPublishContext,PublishField,PublishFields,PublishFieldsProvider,PublishForm,PublishLocalizations,PublishSections,PublishTabs,Radio,RadioGroup,Select,Separator,Slider,Skeleton,SplitterGroup,SplitterPanel,SplitterResizeHandle,StatusIndicator,Subheading,Switch,TabContent,Stack,StackClose,StackHeader,StackFooter,StackContent,Table,TableCell,TableColumn,TableColumns,TableRow,TableRows,TabList,TabProvider,Tabs,TabTrigger,Textarea,TimePicker,ToggleGroup,ToggleItem,Widget,registerIconSet,registerIconSetFromStrings}=__STATAMIC__.ui;function bind(re,Y){return function(){return re.apply(Y,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(re=>Y=>{const oe=toString.call(Y);return re[oe]||(re[oe]=oe.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=re=>(re=re.toLowerCase(),Y=>kindOf(Y)===re),typeOfTest=re=>Y=>typeof Y===re,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(re){return re!==null&&!isUndefined(re)&&re.constructor!==null&&!isUndefined(re.constructor)&&isFunction$1(re.constructor.isBuffer)&&re.constructor.isBuffer(re)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(re){let Y;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?Y=ArrayBuffer.isView(re):Y=re&&re.buffer&&isArrayBuffer(re.buffer),Y}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=re=>re!==null&&typeof re=="object",isBoolean=re=>re===!0||re===!1,isPlainObject=re=>{if(kindOf(re)!=="object")return!1;const Y=getPrototypeOf(re);return(Y===null||Y===Object.prototype||Object.getPrototypeOf(Y)===null)&&!(toStringTag in re)&&!(iterator in re)},isEmptyObject=re=>{if(!isObject(re)||isBuffer(re))return!1;try{return Object.keys(re).length===0&&Object.getPrototypeOf(re)===Object.prototype}catch{return!1}},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=re=>isObject(re)&&isFunction$1(re.pipe),isFormData=re=>{let Y;return re&&(typeof FormData=="function"&&re instanceof FormData||isFunction$1(re.append)&&((Y=kindOf(re))==="formdata"||Y==="object"&&isFunction$1(re.toString)&&re.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=re=>re.trim?re.trim():re.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(re,Y,{allOwnKeys:oe=!1}={}){if(re===null||typeof re>"u")return;let le,ue;if(typeof re!="object"&&(re=[re]),isArray(re))for(le=0,ue=re.length;le<ue;le++)Y.call(null,re[le],le,re);else{if(isBuffer(re))return;const he=oe?Object.getOwnPropertyNames(re):Object.keys(re),fe=he.length;let _e;for(le=0;le<fe;le++)_e=he[le],Y.call(null,re[_e],_e,re)}}function findKey(re,Y){if(isBuffer(re))return null;Y=Y.toLowerCase();const oe=Object.keys(re);let le=oe.length,ue;for(;le-- >0;)if(ue=oe[le],Y===ue.toLowerCase())return ue;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=re=>!isUndefined(re)&&re!==_global;function merge(){const{caseless:re,skipUndefined:Y}=isContextDefined(this)&&this||{},oe={},le=(ue,he)=>{if(he==="__proto__"||he==="constructor"||he==="prototype")return;const fe=re&&findKey(oe,he)||he;isPlainObject(oe[fe])&&isPlainObject(ue)?oe[fe]=merge(oe[fe],ue):isPlainObject(ue)?oe[fe]=merge({},ue):isArray(ue)?oe[fe]=ue.slice():(!Y||!isUndefined(ue))&&(oe[fe]=ue)};for(let ue=0,he=arguments.length;ue<he;ue++)arguments[ue]&&forEach(arguments[ue],le);return oe}const extend=(re,Y,oe,{allOwnKeys:le}={})=>(forEach(Y,(ue,he)=>{oe&&isFunction$1(ue)?Object.defineProperty(re,he,{value:bind(ue,oe),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(re,he,{value:ue,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:le}),re),stripBOM=re=>(re.charCodeAt(0)===65279&&(re=re.slice(1)),re),inherits=(re,Y,oe,le)=>{re.prototype=Object.create(Y.prototype,le),Object.defineProperty(re.prototype,"constructor",{value:re,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(re,"super",{value:Y.prototype}),oe&&Object.assign(re.prototype,oe)},toFlatObject=(re,Y,oe,le)=>{let ue,he,fe;const _e={};if(Y=Y||{},re==null)return Y;do{for(ue=Object.getOwnPropertyNames(re),he=ue.length;he-- >0;)fe=ue[he],(!le||le(fe,re,Y))&&!_e[fe]&&(Y[fe]=re[fe],_e[fe]=!0);re=oe!==!1&&getPrototypeOf(re)}while(re&&(!oe||oe(re,Y))&&re!==Object.prototype);return Y},endsWith=(re,Y,oe)=>{re=String(re),(oe===void 0||oe>re.length)&&(oe=re.length),oe-=Y.length;const le=re.indexOf(Y,oe);return le!==-1&&le===oe},toArray$1=re=>{if(!re)return null;if(isArray(re))return re;let Y=re.length;if(!isNumber(Y))return null;const oe=new Array(Y);for(;Y-- >0;)oe[Y]=re[Y];return oe},isTypedArray=(re=>Y=>re&&Y instanceof re)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(re,Y)=>{const le=(re&&re[iterator]).call(re);let ue;for(;(ue=le.next())&&!ue.done;){const he=ue.value;Y.call(re,he[0],he[1])}},matchAll=(re,Y)=>{let oe;const le=[];for(;(oe=re.exec(Y))!==null;)le.push(oe);return le},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=re=>re.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(oe,le,ue){return le.toUpperCase()+ue}),hasOwnProperty=(({hasOwnProperty:re})=>(Y,oe)=>re.call(Y,oe))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(re,Y)=>{const oe=Object.getOwnPropertyDescriptors(re),le={};forEach(oe,(ue,he)=>{let fe;(fe=Y(ue,he,re))!==!1&&(le[he]=fe||ue)}),Object.defineProperties(re,le)},freezeMethods=re=>{reduceDescriptors(re,(Y,oe)=>{if(isFunction$1(re)&&["arguments","caller","callee"].indexOf(oe)!==-1)return!1;const le=re[oe];if(isFunction$1(le)){if(Y.enumerable=!1,"writable"in Y){Y.writable=!1;return}Y.set||(Y.set=()=>{throw Error("Can not rewrite read-only method '"+oe+"'")})}})},toObjectSet=(re,Y)=>{const oe={},le=ue=>{ue.forEach(he=>{oe[he]=!0})};return isArray(re)?le(re):le(String(re).split(Y)),oe},noop=()=>{},toFiniteNumber=(re,Y)=>re!=null&&Number.isFinite(re=+re)?re:Y;function isSpecCompliantForm(re){return!!(re&&isFunction$1(re.append)&&re[toStringTag]==="FormData"&&re[iterator])}const toJSONObject=re=>{const Y=new Array(10),oe=(le,ue)=>{if(isObject(le)){if(Y.indexOf(le)>=0)return;if(isBuffer(le))return le;if(!("toJSON"in le)){Y[ue]=le;const he=isArray(le)?[]:{};return forEach(le,(fe,_e)=>{const Se=oe(fe,ue+1);!isUndefined(Se)&&(he[_e]=Se)}),Y[ue]=void 0,he}}return le};return oe(re,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=re=>re&&(isObject(re)||isFunction$1(re))&&isFunction$1(re.then)&&isFunction$1(re.catch),_setImmediate=((re,Y)=>re?setImmediate:Y?((oe,le)=>(_global.addEventListener("message",({source:ue,data:he})=>{ue===_global&&he===oe&&le.length&&le.shift()()},!1),ue=>{le.push(ue),_global.postMessage(oe,"*")}))(`axios@${Math.random()}`,[]):oe=>setTimeout(oe))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=re=>re!=null&&isFunction$1(re[iterator]),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isEmptyObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};let AxiosError$1=class ot extends Error{static from(Y,oe,le,ue,he,fe){const _e=new ot(Y.message,oe||Y.code,le,ue,he);return _e.cause=Y,_e.name=Y.name,fe&&Object.assign(_e,fe),_e}constructor(Y,oe,le,ue,he){super(Y),this.name="AxiosError",this.isAxiosError=!0,oe&&(this.code=oe),le&&(this.config=le),ue&&(this.request=ue),he&&(this.response=he,this.status=he.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}};AxiosError$1.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";AxiosError$1.ERR_BAD_OPTION="ERR_BAD_OPTION";AxiosError$1.ECONNABORTED="ECONNABORTED";AxiosError$1.ETIMEDOUT="ETIMEDOUT";AxiosError$1.ERR_NETWORK="ERR_NETWORK";AxiosError$1.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";AxiosError$1.ERR_DEPRECATED="ERR_DEPRECATED";AxiosError$1.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";AxiosError$1.ERR_BAD_REQUEST="ERR_BAD_REQUEST";AxiosError$1.ERR_CANCELED="ERR_CANCELED";AxiosError$1.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";AxiosError$1.ERR_INVALID_URL="ERR_INVALID_URL";const httpAdapter=null;function isVisitable(re){return utils$1.isPlainObject(re)||utils$1.isArray(re)}function removeBrackets(re){return utils$1.endsWith(re,"[]")?re.slice(0,-2):re}function renderKey(re,Y,oe){return re?re.concat(Y).map(function(ue,he){return ue=removeBrackets(ue),!oe&&he?"["+ue+"]":ue}).join(oe?".":""):Y}function isFlatArray(re){return utils$1.isArray(re)&&!re.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(Y){return/^is[A-Z]/.test(Y)});function toFormData$1(re,Y,oe){if(!utils$1.isObject(re))throw new TypeError("target must be an object");Y=Y||new FormData,oe=utils$1.toFlatObject(oe,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ne,Ie){return!utils$1.isUndefined(Ie[Ne])});const le=oe.metaTokens,ue=oe.visitor||$e,he=oe.dots,fe=oe.indexes,Se=(oe.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(Y);if(!utils$1.isFunction(ue))throw new TypeError("visitor must be a function");function ve(xe){if(xe===null)return"";if(utils$1.isDate(xe))return xe.toISOString();if(utils$1.isBoolean(xe))return xe.toString();if(!Se&&utils$1.isBlob(xe))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(xe)||utils$1.isTypedArray(xe)?Se&&typeof Blob=="function"?new Blob([xe]):Buffer.from(xe):xe}function $e(xe,Ne,Ie){let De=xe;if(xe&&!Ie&&typeof xe=="object"){if(utils$1.endsWith(Ne,"{}"))Ne=le?Ne:Ne.slice(0,-2),xe=JSON.stringify(xe);else if(utils$1.isArray(xe)&&isFlatArray(xe)||(utils$1.isFileList(xe)||utils$1.endsWith(Ne,"[]"))&&(De=utils$1.toArray(xe)))return Ne=removeBrackets(Ne),De.forEach(function(Ae,Be){!(utils$1.isUndefined(Ae)||Ae===null)&&Y.append(fe===!0?renderKey([Ne],Be,he):fe===null?Ne:Ne+"[]",ve(Ae))}),!1}return isVisitable(xe)?!0:(Y.append(renderKey(Ie,Ne,he),ve(xe)),!1)}const Ee=[],Ue=Object.assign(predicates,{defaultVisitor:$e,convertValue:ve,isVisitable});function Re(xe,Ne){if(!utils$1.isUndefined(xe)){if(Ee.indexOf(xe)!==-1)throw Error("Circular reference detected in "+Ne.join("."));Ee.push(xe),utils$1.forEach(xe,function(De,Pe){(!(utils$1.isUndefined(De)||De===null)&&ue.call(Y,De,utils$1.isString(Pe)?Pe.trim():Pe,Ne,Ue))===!0&&Re(De,Ne?Ne.concat(Pe):[Pe])}),Ee.pop()}}if(!utils$1.isObject(re))throw new TypeError("data must be an object");return Re(re),Y}function encode$2(re){const Y={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(re).replace(/[!'()~]|%20|%00/g,function(le){return Y[le]})}function AxiosURLSearchParams(re,Y){this._pairs=[],re&&toFormData$1(re,this,Y)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(Y,oe){this._pairs.push([Y,oe])};prototype.toString=function(Y){const oe=Y?function(le){return Y.call(this,le,encode$2)}:encode$2;return this._pairs.map(function(ue){return oe(ue[0])+"="+oe(ue[1])},"").join("&")};function encode$1(re){return encodeURIComponent(re).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(re,Y,oe){if(!Y)return re;const le=oe&&oe.encode||encode$1,ue=utils$1.isFunction(oe)?{serialize:oe}:oe,he=ue&&ue.serialize;let fe;if(he?fe=he(Y,ue):fe=utils$1.isURLSearchParams(Y)?Y.toString():new AxiosURLSearchParams(Y,ue).toString(le),fe){const _e=re.indexOf("#");_e!==-1&&(re=re.slice(0,_e)),re+=(re.indexOf("?")===-1?"?":"&")+fe}return re}class InterceptorManager{constructor(){this.handlers=[]}use(Y,oe,le){return this.handlers.push({fulfilled:Y,rejected:oe,synchronous:le?le.synchronous:!1,runWhen:le?le.runWhen:null}),this.handlers.length-1}eject(Y){this.handlers[Y]&&(this.handlers[Y]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(Y){utils$1.forEach(this.handlers,function(le){le!==null&&Y(le)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(re,Y){return toFormData$1(re,new platform.classes.URLSearchParams,{visitor:function(oe,le,ue,he){return platform.isNode&&utils$1.isBuffer(oe)?(this.append(le,oe.toString("base64")),!1):he.defaultVisitor.apply(this,arguments)},...Y})}function parsePropPath(re){return utils$1.matchAll(/\w+|\[(\w*)]/g,re).map(Y=>Y[0]==="[]"?"":Y[1]||Y[0])}function arrayToObject(re){const Y={},oe=Object.keys(re);let le;const ue=oe.length;let he;for(le=0;le<ue;le++)he=oe[le],Y[he]=re[he];return Y}function formDataToJSON(re){function Y(oe,le,ue,he){let fe=oe[he++];if(fe==="__proto__")return!0;const _e=Number.isFinite(+fe),Se=he>=oe.length;return fe=!fe&&utils$1.isArray(ue)?ue.length:fe,Se?(utils$1.hasOwnProp(ue,fe)?ue[fe]=[ue[fe],le]:ue[fe]=le,!_e):((!ue[fe]||!utils$1.isObject(ue[fe]))&&(ue[fe]=[]),Y(oe,le,ue[fe],he)&&utils$1.isArray(ue[fe])&&(ue[fe]=arrayToObject(ue[fe])),!_e)}if(utils$1.isFormData(re)&&utils$1.isFunction(re.entries)){const oe={};return utils$1.forEachEntry(re,(le,ue)=>{Y(parsePropPath(le),ue,oe,0)}),oe}return null}function stringifySafely(re,Y,oe){if(utils$1.isString(re))try{return(Y||JSON.parse)(re),utils$1.trim(re)}catch(le){if(le.name!=="SyntaxError")throw le}return(oe||JSON.stringify)(re)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(Y,oe){const le=oe.getContentType()||"",ue=le.indexOf("application/json")>-1,he=utils$1.isObject(Y);if(he&&utils$1.isHTMLForm(Y)&&(Y=new FormData(Y)),utils$1.isFormData(Y))return ue?JSON.stringify(formDataToJSON(Y)):Y;if(utils$1.isArrayBuffer(Y)||utils$1.isBuffer(Y)||utils$1.isStream(Y)||utils$1.isFile(Y)||utils$1.isBlob(Y)||utils$1.isReadableStream(Y))return Y;if(utils$1.isArrayBufferView(Y))return Y.buffer;if(utils$1.isURLSearchParams(Y))return oe.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),Y.toString();let _e;if(he){if(le.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(Y,this.formSerializer).toString();if((_e=utils$1.isFileList(Y))||le.indexOf("multipart/form-data")>-1){const Se=this.env&&this.env.FormData;return toFormData$1(_e?{"files[]":Y}:Y,Se&&new Se,this.formSerializer)}}return he||ue?(oe.setContentType("application/json",!1),stringifySafely(Y)):Y}],transformResponse:[function(Y){const oe=this.transitional||defaults.transitional,le=oe&&oe.forcedJSONParsing,ue=this.responseType==="json";if(utils$1.isResponse(Y)||utils$1.isReadableStream(Y))return Y;if(Y&&utils$1.isString(Y)&&(le&&!this.responseType||ue)){const fe=!(oe&&oe.silentJSONParsing)&&ue;try{return JSON.parse(Y,this.parseReviver)}catch(_e){if(fe)throw _e.name==="SyntaxError"?AxiosError$1.from(_e,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):_e}}return Y}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(Y){return Y>=200&&Y<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],re=>{defaults.headers[re]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=re=>{const Y={};let oe,le,ue;return re&&re.split(`
`).forEach(function(fe){ue=fe.indexOf(":"),oe=fe.substring(0,ue).trim().toLowerCase(),le=fe.substring(ue+1).trim(),!(!oe||Y[oe]&&ignoreDuplicateOf[oe])&&(oe==="set-cookie"?Y[oe]?Y[oe].push(le):Y[oe]=[le]:Y[oe]=Y[oe]?Y[oe]+", "+le:le)}),Y},$internals=Symbol("internals");function normalizeHeader(re){return re&&String(re).trim().toLowerCase()}function normalizeValue(re){return re===!1||re==null?re:utils$1.isArray(re)?re.map(normalizeValue):String(re)}function parseTokens(re){const Y=Object.create(null),oe=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let le;for(;le=oe.exec(re);)Y[le[1]]=le[2];return Y}const isValidHeaderName=re=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(re.trim());function matchHeaderValue(re,Y,oe,le,ue){if(utils$1.isFunction(le))return le.call(this,Y,oe);if(ue&&(Y=oe),!!utils$1.isString(Y)){if(utils$1.isString(le))return Y.indexOf(le)!==-1;if(utils$1.isRegExp(le))return le.test(Y)}}function formatHeader(re){return re.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(Y,oe,le)=>oe.toUpperCase()+le)}function buildAccessors(re,Y){const oe=utils$1.toCamelCase(" "+Y);["get","set","has"].forEach(le=>{Object.defineProperty(re,le+oe,{value:function(ue,he,fe){return this[le].call(this,Y,ue,he,fe)},configurable:!0})})}let AxiosHeaders$1=class{constructor(Y){Y&&this.set(Y)}set(Y,oe,le){const ue=this;function he(_e,Se,ve){const $e=normalizeHeader(Se);if(!$e)throw new Error("header name must be a non-empty string");const Ee=utils$1.findKey(ue,$e);(!Ee||ue[Ee]===void 0||ve===!0||ve===void 0&&ue[Ee]!==!1)&&(ue[Ee||Se]=normalizeValue(_e))}const fe=(_e,Se)=>utils$1.forEach(_e,(ve,$e)=>he(ve,$e,Se));if(utils$1.isPlainObject(Y)||Y instanceof this.constructor)fe(Y,oe);else if(utils$1.isString(Y)&&(Y=Y.trim())&&!isValidHeaderName(Y))fe(parseHeaders(Y),oe);else if(utils$1.isObject(Y)&&utils$1.isIterable(Y)){let _e={},Se,ve;for(const $e of Y){if(!utils$1.isArray($e))throw TypeError("Object iterator must return a key-value pair");_e[ve=$e[0]]=(Se=_e[ve])?utils$1.isArray(Se)?[...Se,$e[1]]:[Se,$e[1]]:$e[1]}fe(_e,oe)}else Y!=null&&he(oe,Y,le);return this}get(Y,oe){if(Y=normalizeHeader(Y),Y){const le=utils$1.findKey(this,Y);if(le){const ue=this[le];if(!oe)return ue;if(oe===!0)return parseTokens(ue);if(utils$1.isFunction(oe))return oe.call(this,ue,le);if(utils$1.isRegExp(oe))return oe.exec(ue);throw new TypeError("parser must be boolean|regexp|function")}}}has(Y,oe){if(Y=normalizeHeader(Y),Y){const le=utils$1.findKey(this,Y);return!!(le&&this[le]!==void 0&&(!oe||matchHeaderValue(this,this[le],le,oe)))}return!1}delete(Y,oe){const le=this;let ue=!1;function he(fe){if(fe=normalizeHeader(fe),fe){const _e=utils$1.findKey(le,fe);_e&&(!oe||matchHeaderValue(le,le[_e],_e,oe))&&(delete le[_e],ue=!0)}}return utils$1.isArray(Y)?Y.forEach(he):he(Y),ue}clear(Y){const oe=Object.keys(this);let le=oe.length,ue=!1;for(;le--;){const he=oe[le];(!Y||matchHeaderValue(this,this[he],he,Y,!0))&&(delete this[he],ue=!0)}return ue}normalize(Y){const oe=this,le={};return utils$1.forEach(this,(ue,he)=>{const fe=utils$1.findKey(le,he);if(fe){oe[fe]=normalizeValue(ue),delete oe[he];return}const _e=Y?formatHeader(he):String(he).trim();_e!==he&&delete oe[he],oe[_e]=normalizeValue(ue),le[_e]=!0}),this}concat(...Y){return this.constructor.concat(this,...Y)}toJSON(Y){const oe=Object.create(null);return utils$1.forEach(this,(le,ue)=>{le!=null&&le!==!1&&(oe[ue]=Y&&utils$1.isArray(le)?le.join(", "):le)}),oe}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([Y,oe])=>Y+": "+oe).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(Y){return Y instanceof this?Y:new this(Y)}static concat(Y,...oe){const le=new this(Y);return oe.forEach(ue=>le.set(ue)),le}static accessor(Y){const le=(this[$internals]=this[$internals]={accessors:{}}).accessors,ue=this.prototype;function he(fe){const _e=normalizeHeader(fe);le[_e]||(buildAccessors(ue,fe),le[_e]=!0)}return utils$1.isArray(Y)?Y.forEach(he):he(Y),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:re},Y)=>{let oe=Y[0].toUpperCase()+Y.slice(1);return{get:()=>re,set(le){this[oe]=le}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(re,Y){const oe=this||defaults,le=Y||oe,ue=AxiosHeaders$1.from(le.headers);let he=le.data;return utils$1.forEach(re,function(_e){he=_e.call(oe,he,ue.normalize(),Y?Y.status:void 0)}),ue.normalize(),he}function isCancel$1(re){return!!(re&&re.__CANCEL__)}let CanceledError$1=class extends AxiosError$1{constructor(Y,oe,le){super(Y??"canceled",AxiosError$1.ERR_CANCELED,oe,le),this.name="CanceledError",this.__CANCEL__=!0}};function settle(re,Y,oe){const le=oe.config.validateStatus;!oe.status||!le||le(oe.status)?re(oe):Y(new AxiosError$1("Request failed with status code "+oe.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(oe.status/100)-4],oe.config,oe.request,oe))}function parseProtocol(re){const Y=/^([-+\w]{1,25})(:?\/\/|:)/.exec(re);return Y&&Y[1]||""}function speedometer(re,Y){re=re||10;const oe=new Array(re),le=new Array(re);let ue=0,he=0,fe;return Y=Y!==void 0?Y:1e3,function(Se){const ve=Date.now(),$e=le[he];fe||(fe=ve),oe[ue]=Se,le[ue]=ve;let Ee=he,Ue=0;for(;Ee!==ue;)Ue+=oe[Ee++],Ee=Ee%re;if(ue=(ue+1)%re,ue===he&&(he=(he+1)%re),ve-fe<Y)return;const Re=$e&&ve-$e;return Re?Math.round(Ue*1e3/Re):void 0}}function throttle$1(re,Y){let oe=0,le=1e3/Y,ue,he;const fe=(ve,$e=Date.now())=>{oe=$e,ue=null,he&&(clearTimeout(he),he=null),re(...ve)};return[(...ve)=>{const $e=Date.now(),Ee=$e-oe;Ee>=le?fe(ve,$e):(ue=ve,he||(he=setTimeout(()=>{he=null,fe(ue)},le-Ee)))},()=>ue&&fe(ue)]}const progressEventReducer=(re,Y,oe=3)=>{let le=0;const ue=speedometer(50,250);return throttle$1(he=>{const fe=he.loaded,_e=he.lengthComputable?he.total:void 0,Se=fe-le,ve=ue(Se),$e=fe<=_e;le=fe;const Ee={loaded:fe,total:_e,progress:_e?fe/_e:void 0,bytes:Se,rate:ve||void 0,estimated:ve&&_e&&$e?(_e-fe)/ve:void 0,event:he,lengthComputable:_e!=null,[Y?"download":"upload"]:!0};re(Ee)},oe)},progressEventDecorator=(re,Y)=>{const oe=re!=null;return[le=>Y[0]({lengthComputable:oe,total:re,loaded:le}),Y[1]]},asyncDecorator=re=>(...Y)=>utils$1.asap(()=>re(...Y)),isURLSameOrigin=platform.hasStandardBrowserEnv?((re,Y)=>oe=>(oe=new URL(oe,platform.origin),re.protocol===oe.protocol&&re.host===oe.host&&(Y||re.port===oe.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(re,Y,oe,le,ue,he,fe){if(typeof document>"u")return;const _e=[`${re}=${encodeURIComponent(Y)}`];utils$1.isNumber(oe)&&_e.push(`expires=${new Date(oe).toUTCString()}`),utils$1.isString(le)&&_e.push(`path=${le}`),utils$1.isString(ue)&&_e.push(`domain=${ue}`),he===!0&&_e.push("secure"),utils$1.isString(fe)&&_e.push(`SameSite=${fe}`),document.cookie=_e.join("; ")},read(re){if(typeof document>"u")return null;const Y=document.cookie.match(new RegExp("(?:^|; )"+re+"=([^;]*)"));return Y?decodeURIComponent(Y[1]):null},remove(re){this.write(re,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(re){return typeof re!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(re)}function combineURLs(re,Y){return Y?re.replace(/\/?\/$/,"")+"/"+Y.replace(/^\/+/,""):re}function buildFullPath(re,Y,oe){let le=!isAbsoluteURL(Y);return re&&(le||oe==!1)?combineURLs(re,Y):Y}const headersToObject=re=>re instanceof AxiosHeaders$1?{...re}:re;function mergeConfig$1(re,Y){Y=Y||{};const oe={};function le(ve,$e,Ee,Ue){return utils$1.isPlainObject(ve)&&utils$1.isPlainObject($e)?utils$1.merge.call({caseless:Ue},ve,$e):utils$1.isPlainObject($e)?utils$1.merge({},$e):utils$1.isArray($e)?$e.slice():$e}function ue(ve,$e,Ee,Ue){if(utils$1.isUndefined($e)){if(!utils$1.isUndefined(ve))return le(void 0,ve,Ee,Ue)}else return le(ve,$e,Ee,Ue)}function he(ve,$e){if(!utils$1.isUndefined($e))return le(void 0,$e)}function fe(ve,$e){if(utils$1.isUndefined($e)){if(!utils$1.isUndefined(ve))return le(void 0,ve)}else return le(void 0,$e)}function _e(ve,$e,Ee){if(Ee in Y)return le(ve,$e);if(Ee in re)return le(void 0,ve)}const Se={url:he,method:he,data:he,baseURL:fe,transformRequest:fe,transformResponse:fe,paramsSerializer:fe,timeout:fe,timeoutMessage:fe,withCredentials:fe,withXSRFToken:fe,adapter:fe,responseType:fe,xsrfCookieName:fe,xsrfHeaderName:fe,onUploadProgress:fe,onDownloadProgress:fe,decompress:fe,maxContentLength:fe,maxBodyLength:fe,beforeRedirect:fe,transport:fe,httpAgent:fe,httpsAgent:fe,cancelToken:fe,socketPath:fe,responseEncoding:fe,validateStatus:_e,headers:(ve,$e,Ee)=>ue(headersToObject(ve),headersToObject($e),Ee,!0)};return utils$1.forEach(Object.keys({...re,...Y}),function($e){if($e==="__proto__"||$e==="constructor"||$e==="prototype")return;const Ee=utils$1.hasOwnProp(Se,$e)?Se[$e]:ue,Ue=Ee(re[$e],Y[$e],$e);utils$1.isUndefined(Ue)&&Ee!==_e||(oe[$e]=Ue)}),oe}const resolveConfig=re=>{const Y=mergeConfig$1({},re);let{data:oe,withXSRFToken:le,xsrfHeaderName:ue,xsrfCookieName:he,headers:fe,auth:_e}=Y;if(Y.headers=fe=AxiosHeaders$1.from(fe),Y.url=buildURL(buildFullPath(Y.baseURL,Y.url,Y.allowAbsoluteUrls),re.params,re.paramsSerializer),_e&&fe.set("Authorization","Basic "+btoa((_e.username||"")+":"+(_e.password?unescape(encodeURIComponent(_e.password)):""))),utils$1.isFormData(oe)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)fe.setContentType(void 0);else if(utils$1.isFunction(oe.getHeaders)){const Se=oe.getHeaders(),ve=["content-type","content-length"];Object.entries(Se).forEach(([$e,Ee])=>{ve.includes($e.toLowerCase())&&fe.set($e,Ee)})}}if(platform.hasStandardBrowserEnv&&(le&&utils$1.isFunction(le)&&(le=le(Y)),le||le!==!1&&isURLSameOrigin(Y.url))){const Se=ue&&he&&cookies.read(he);Se&&fe.set(ue,Se)}return Y},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(re){return new Promise(function(oe,le){const ue=resolveConfig(re);let he=ue.data;const fe=AxiosHeaders$1.from(ue.headers).normalize();let{responseType:_e,onUploadProgress:Se,onDownloadProgress:ve}=ue,$e,Ee,Ue,Re,xe;function Ne(){Re&&Re(),xe&&xe(),ue.cancelToken&&ue.cancelToken.unsubscribe($e),ue.signal&&ue.signal.removeEventListener("abort",$e)}let Ie=new XMLHttpRequest;Ie.open(ue.method.toUpperCase(),ue.url,!0),Ie.timeout=ue.timeout;function De(){if(!Ie)return;const Ae=AxiosHeaders$1.from("getAllResponseHeaders"in Ie&&Ie.getAllResponseHeaders()),Le={data:!_e||_e==="text"||_e==="json"?Ie.responseText:Ie.response,status:Ie.status,statusText:Ie.statusText,headers:Ae,config:re,request:Ie};settle(function(ze){oe(ze),Ne()},function(ze){le(ze),Ne()},Le),Ie=null}"onloadend"in Ie?Ie.onloadend=De:Ie.onreadystatechange=function(){!Ie||Ie.readyState!==4||Ie.status===0&&!(Ie.responseURL&&Ie.responseURL.indexOf("file:")===0)||setTimeout(De)},Ie.onabort=function(){Ie&&(le(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,re,Ie)),Ie=null)},Ie.onerror=function(Be){const Le=Be&&Be.message?Be.message:"Network Error",Ve=new AxiosError$1(Le,AxiosError$1.ERR_NETWORK,re,Ie);Ve.event=Be||null,le(Ve),Ie=null},Ie.ontimeout=function(){let Be=ue.timeout?"timeout of "+ue.timeout+"ms exceeded":"timeout exceeded";const Le=ue.transitional||transitionalDefaults;ue.timeoutErrorMessage&&(Be=ue.timeoutErrorMessage),le(new AxiosError$1(Be,Le.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,re,Ie)),Ie=null},he===void 0&&fe.setContentType(null),"setRequestHeader"in Ie&&utils$1.forEach(fe.toJSON(),function(Be,Le){Ie.setRequestHeader(Le,Be)}),utils$1.isUndefined(ue.withCredentials)||(Ie.withCredentials=!!ue.withCredentials),_e&&_e!=="json"&&(Ie.responseType=ue.responseType),ve&&([Ue,xe]=progressEventReducer(ve,!0),Ie.addEventListener("progress",Ue)),Se&&Ie.upload&&([Ee,Re]=progressEventReducer(Se),Ie.upload.addEventListener("progress",Ee),Ie.upload.addEventListener("loadend",Re)),(ue.cancelToken||ue.signal)&&($e=Ae=>{Ie&&(le(!Ae||Ae.type?new CanceledError$1(null,re,Ie):Ae),Ie.abort(),Ie=null)},ue.cancelToken&&ue.cancelToken.subscribe($e),ue.signal&&(ue.signal.aborted?$e():ue.signal.addEventListener("abort",$e)));const Pe=parseProtocol(ue.url);if(Pe&&platform.protocols.indexOf(Pe)===-1){le(new AxiosError$1("Unsupported protocol "+Pe+":",AxiosError$1.ERR_BAD_REQUEST,re));return}Ie.send(he||null)})},composeSignals=(re,Y)=>{const{length:oe}=re=re?re.filter(Boolean):[];if(Y||oe){let le=new AbortController,ue;const he=function(ve){if(!ue){ue=!0,_e();const $e=ve instanceof Error?ve:this.reason;le.abort($e instanceof AxiosError$1?$e:new CanceledError$1($e instanceof Error?$e.message:$e))}};let fe=Y&&setTimeout(()=>{fe=null,he(new AxiosError$1(`timeout of ${Y}ms exceeded`,AxiosError$1.ETIMEDOUT))},Y);const _e=()=>{re&&(fe&&clearTimeout(fe),fe=null,re.forEach(ve=>{ve.unsubscribe?ve.unsubscribe(he):ve.removeEventListener("abort",he)}),re=null)};re.forEach(ve=>ve.addEventListener("abort",he));const{signal:Se}=le;return Se.unsubscribe=()=>utils$1.asap(_e),Se}},streamChunk=function*(re,Y){let oe=re.byteLength;if(oe<Y){yield re;return}let le=0,ue;for(;le<oe;)ue=le+Y,yield re.slice(le,ue),le=ue},readBytes=async function*(re,Y){for await(const oe of readStream(re))yield*streamChunk(oe,Y)},readStream=async function*(re){if(re[Symbol.asyncIterator]){yield*re;return}const Y=re.getReader();try{for(;;){const{done:oe,value:le}=await Y.read();if(oe)break;yield le}}finally{await Y.cancel()}},trackStream=(re,Y,oe,le)=>{const ue=readBytes(re,Y);let he=0,fe,_e=Se=>{fe||(fe=!0,le&&le(Se))};return new ReadableStream({async pull(Se){try{const{done:ve,value:$e}=await ue.next();if(ve){_e(),Se.close();return}let Ee=$e.byteLength;if(oe){let Ue=he+=Ee;oe(Ue)}Se.enqueue(new Uint8Array($e))}catch(ve){throw _e(ve),ve}},cancel(Se){return _e(Se),ue.return()}},{highWaterMark:2})},DEFAULT_CHUNK_SIZE=64*1024,{isFunction}=utils$1,globalFetchAPI=(({Request:re,Response:Y})=>({Request:re,Response:Y}))(utils$1.global),{ReadableStream:ReadableStream$1,TextEncoder:TextEncoder$1}=utils$1.global,test=(re,...Y)=>{try{return!!re(...Y)}catch{return!1}},factory=re=>{re=utils$1.merge.call({skipUndefined:!0},globalFetchAPI,re);const{fetch:Y,Request:oe,Response:le}=re,ue=Y?isFunction(Y):typeof fetch=="function",he=isFunction(oe),fe=isFunction(le);if(!ue)return!1;const _e=ue&&isFunction(ReadableStream$1),Se=ue&&(typeof TextEncoder$1=="function"?(xe=>Ne=>xe.encode(Ne))(new TextEncoder$1):async xe=>new Uint8Array(await new oe(xe).arrayBuffer())),ve=he&&_e&&test(()=>{let xe=!1;const Ne=new oe(platform.origin,{body:new ReadableStream$1,method:"POST",get duplex(){return xe=!0,"half"}}).headers.has("Content-Type");return xe&&!Ne}),$e=fe&&_e&&test(()=>utils$1.isReadableStream(new le("").body)),Ee={stream:$e&&(xe=>xe.body)};ue&&["text","arrayBuffer","blob","formData","stream"].forEach(xe=>{!Ee[xe]&&(Ee[xe]=(Ne,Ie)=>{let De=Ne&&Ne[xe];if(De)return De.call(Ne);throw new AxiosError$1(`Response type '${xe}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,Ie)})});const Ue=async xe=>{if(xe==null)return 0;if(utils$1.isBlob(xe))return xe.size;if(utils$1.isSpecCompliantForm(xe))return(await new oe(platform.origin,{method:"POST",body:xe}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(xe)||utils$1.isArrayBuffer(xe))return xe.byteLength;if(utils$1.isURLSearchParams(xe)&&(xe=xe+""),utils$1.isString(xe))return(await Se(xe)).byteLength},Re=async(xe,Ne)=>{const Ie=utils$1.toFiniteNumber(xe.getContentLength());return Ie??Ue(Ne)};return async xe=>{let{url:Ne,method:Ie,data:De,signal:Pe,cancelToken:Ae,timeout:Be,onDownloadProgress:Le,onUploadProgress:Ve,responseType:ze,headers:Ge,withCredentials:We="same-origin",fetchOptions:Qe}=resolveConfig(xe),Ye=Y||fetch;ze=ze?(ze+"").toLowerCase():"text";let et=composeSignals([Pe,Ae&&Ae.toAbortSignal()],Be),je=null;const Ze=et&&et.unsubscribe&&(()=>{et.unsubscribe()});let tt;try{if(Ve&&ve&&Ie!=="get"&&Ie!=="head"&&(tt=await Re(Ge,De))!==0){let Me=new oe(Ne,{method:"POST",body:De,duplex:"half"}),Ke;if(utils$1.isFormData(De)&&(Ke=Me.headers.get("content-type"))&&Ge.setContentType(Ke),Me.body){const[Xe,Je]=progressEventDecorator(tt,progressEventReducer(asyncDecorator(Ve)));De=trackStream(Me.body,DEFAULT_CHUNK_SIZE,Xe,Je)}}utils$1.isString(We)||(We=We?"include":"omit");const Ce=he&&"credentials"in oe.prototype,Fe={...Qe,signal:et,method:Ie.toUpperCase(),headers:Ge.normalize().toJSON(),body:De,duplex:"half",credentials:Ce?We:void 0};je=he&&new oe(Ne,Fe);let Te=await(he?Ye(je,Qe):Ye(Ne,Fe));const He=$e&&(ze==="stream"||ze==="response");if($e&&(Le||He&&Ze)){const Me={};["status","statusText","headers"].forEach(rt=>{Me[rt]=Te[rt]});const Ke=utils$1.toFiniteNumber(Te.headers.get("content-length")),[Xe,Je]=Le&&progressEventDecorator(Ke,progressEventReducer(asyncDecorator(Le),!0))||[];Te=new le(trackStream(Te.body,DEFAULT_CHUNK_SIZE,Xe,()=>{Je&&Je(),Ze&&Ze()}),Me)}ze=ze||"text";let qe=await Ee[utils$1.findKey(Ee,ze)||"text"](Te,xe);return!He&&Ze&&Ze(),await new Promise((Me,Ke)=>{settle(Me,Ke,{data:qe,headers:AxiosHeaders$1.from(Te.headers),status:Te.status,statusText:Te.statusText,config:xe,request:je})})}catch(Ce){throw Ze&&Ze(),Ce&&Ce.name==="TypeError"&&/Load failed|fetch/i.test(Ce.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,xe,je,Ce&&Ce.response),{cause:Ce.cause||Ce}):AxiosError$1.from(Ce,Ce&&Ce.code,xe,je,Ce&&Ce.response)}}},seedCache=new Map,getFetch=re=>{let Y=re&&re.env||{};const{fetch:oe,Request:le,Response:ue}=Y,he=[le,ue,oe];let fe=he.length,_e=fe,Se,ve,$e=seedCache;for(;_e--;)Se=he[_e],ve=$e.get(Se),ve===void 0&&$e.set(Se,ve=_e?new Map:factory(Y)),$e=ve;return ve};getFetch();const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:{get:getFetch}};utils$1.forEach(knownAdapters,(re,Y)=>{if(re){try{Object.defineProperty(re,"name",{value:Y})}catch{}Object.defineProperty(re,"adapterName",{value:Y})}});const renderReason=re=>`- ${re}`,isResolvedHandle=re=>utils$1.isFunction(re)||re===null||re===!1;function getAdapter$1(re,Y){re=utils$1.isArray(re)?re:[re];const{length:oe}=re;let le,ue;const he={};for(let fe=0;fe<oe;fe++){le=re[fe];let _e;if(ue=le,!isResolvedHandle(le)&&(ue=knownAdapters[(_e=String(le)).toLowerCase()],ue===void 0))throw new AxiosError$1(`Unknown adapter '${_e}'`);if(ue&&(utils$1.isFunction(ue)||(ue=ue.get(Y))))break;he[_e||"#"+fe]=ue}if(!ue){const fe=Object.entries(he).map(([Se,ve])=>`adapter ${Se} `+(ve===!1?"is not supported by the environment":"is not available in the build"));let _e=oe?fe.length>1?`since :
`+fe.map(renderReason).join(`
`):" "+renderReason(fe[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+_e,"ERR_NOT_SUPPORT")}return ue}const adapters={getAdapter:getAdapter$1,adapters:knownAdapters};function throwIfCancellationRequested(re){if(re.cancelToken&&re.cancelToken.throwIfRequested(),re.signal&&re.signal.aborted)throw new CanceledError$1(null,re)}function dispatchRequest(re){return throwIfCancellationRequested(re),re.headers=AxiosHeaders$1.from(re.headers),re.data=transformData.call(re,re.transformRequest),["post","put","patch"].indexOf(re.method)!==-1&&re.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(re.adapter||defaults.adapter,re)(re).then(function(le){return throwIfCancellationRequested(re),le.data=transformData.call(re,re.transformResponse,le),le.headers=AxiosHeaders$1.from(le.headers),le},function(le){return isCancel$1(le)||(throwIfCancellationRequested(re),le&&le.response&&(le.response.data=transformData.call(re,re.transformResponse,le.response),le.response.headers=AxiosHeaders$1.from(le.response.headers))),Promise.reject(le)})}const VERSION$2="1.13.5",validators$1={};["object","boolean","number","function","string","symbol"].forEach((re,Y)=>{validators$1[re]=function(le){return typeof le===re||"a"+(Y<1?"n ":" ")+re}});const deprecatedWarnings={};validators$1.transitional=function(Y,oe,le){function ue(he,fe){return"[Axios v"+VERSION$2+"] Transitional option '"+he+"'"+fe+(le?". "+le:"")}return(he,fe,_e)=>{if(Y===!1)throw new AxiosError$1(ue(fe," has been removed"+(oe?" in "+oe:"")),AxiosError$1.ERR_DEPRECATED);return oe&&!deprecatedWarnings[fe]&&(deprecatedWarnings[fe]=!0,console.warn(ue(fe," has been deprecated since v"+oe+" and will be removed in the near future"))),Y?Y(he,fe,_e):!0}};validators$1.spelling=function(Y){return(oe,le)=>(console.warn(`${le} is likely a misspelling of ${Y}`),!0)};function assertOptions(re,Y,oe){if(typeof re!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const le=Object.keys(re);let ue=le.length;for(;ue-- >0;){const he=le[ue],fe=Y[he];if(fe){const _e=re[he],Se=_e===void 0||fe(_e,he,re);if(Se!==!0)throw new AxiosError$1("option "+he+" must be "+Se,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(oe!==!0)throw new AxiosError$1("Unknown option "+he,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(Y){this.defaults=Y||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(Y,oe){try{return await this._request(Y,oe)}catch(le){if(le instanceof Error){let ue={};Error.captureStackTrace?Error.captureStackTrace(ue):ue=new Error;const he=ue.stack?ue.stack.replace(/^.+\n/,""):"";try{le.stack?he&&!String(le.stack).endsWith(he.replace(/^.+\n.+\n/,""))&&(le.stack+=`
`+he):le.stack=he}catch{}}throw le}}_request(Y,oe){typeof Y=="string"?(oe=oe||{},oe.url=Y):oe=Y||{},oe=mergeConfig$1(this.defaults,oe);const{transitional:le,paramsSerializer:ue,headers:he}=oe;le!==void 0&&validator.assertOptions(le,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean),legacyInterceptorReqResOrdering:validators.transitional(validators.boolean)},!1),ue!=null&&(utils$1.isFunction(ue)?oe.paramsSerializer={serialize:ue}:validator.assertOptions(ue,{encode:validators.function,serialize:validators.function},!0)),oe.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?oe.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:oe.allowAbsoluteUrls=!0),validator.assertOptions(oe,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),oe.method=(oe.method||this.defaults.method||"get").toLowerCase();let fe=he&&utils$1.merge(he.common,he[oe.method]);he&&utils$1.forEach(["delete","get","head","post","put","patch","common"],xe=>{delete he[xe]}),oe.headers=AxiosHeaders$1.concat(fe,he);const _e=[];let Se=!0;this.interceptors.request.forEach(function(Ne){if(typeof Ne.runWhen=="function"&&Ne.runWhen(oe)===!1)return;Se=Se&&Ne.synchronous;const Ie=oe.transitional||transitionalDefaults;Ie&&Ie.legacyInterceptorReqResOrdering?_e.unshift(Ne.fulfilled,Ne.rejected):_e.push(Ne.fulfilled,Ne.rejected)});const ve=[];this.interceptors.response.forEach(function(Ne){ve.push(Ne.fulfilled,Ne.rejected)});let $e,Ee=0,Ue;if(!Se){const xe=[dispatchRequest.bind(this),void 0];for(xe.unshift(..._e),xe.push(...ve),Ue=xe.length,$e=Promise.resolve(oe);Ee<Ue;)$e=$e.then(xe[Ee++],xe[Ee++]);return $e}Ue=_e.length;let Re=oe;for(;Ee<Ue;){const xe=_e[Ee++],Ne=_e[Ee++];try{Re=xe(Re)}catch(Ie){Ne.call(this,Ie);break}}try{$e=dispatchRequest.call(this,Re)}catch(xe){return Promise.reject(xe)}for(Ee=0,Ue=ve.length;Ee<Ue;)$e=$e.then(ve[Ee++],ve[Ee++]);return $e}getUri(Y){Y=mergeConfig$1(this.defaults,Y);const oe=buildFullPath(Y.baseURL,Y.url,Y.allowAbsoluteUrls);return buildURL(oe,Y.params,Y.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(Y){Axios$1.prototype[Y]=function(oe,le){return this.request(mergeConfig$1(le||{},{method:Y,url:oe,data:(le||{}).data}))}});utils$1.forEach(["post","put","patch"],function(Y){function oe(le){return function(he,fe,_e){return this.request(mergeConfig$1(_e||{},{method:Y,headers:le?{"Content-Type":"multipart/form-data"}:{},url:he,data:fe}))}}Axios$1.prototype[Y]=oe(),Axios$1.prototype[Y+"Form"]=oe(!0)});let CancelToken$1=class at{constructor(Y){if(typeof Y!="function")throw new TypeError("executor must be a function.");let oe;this.promise=new Promise(function(he){oe=he});const le=this;this.promise.then(ue=>{if(!le._listeners)return;let he=le._listeners.length;for(;he-- >0;)le._listeners[he](ue);le._listeners=null}),this.promise.then=ue=>{let he;const fe=new Promise(_e=>{le.subscribe(_e),he=_e}).then(ue);return fe.cancel=function(){le.unsubscribe(he)},fe},Y(function(he,fe,_e){le.reason||(le.reason=new CanceledError$1(he,fe,_e),oe(le.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(Y){if(this.reason){Y(this.reason);return}this._listeners?this._listeners.push(Y):this._listeners=[Y]}unsubscribe(Y){if(!this._listeners)return;const oe=this._listeners.indexOf(Y);oe!==-1&&this._listeners.splice(oe,1)}toAbortSignal(){const Y=new AbortController,oe=le=>{Y.abort(le)};return this.subscribe(oe),Y.signal.unsubscribe=()=>this.unsubscribe(oe),Y.signal}static source(){let Y;return{token:new at(function(ue){Y=ue}),cancel:Y}}};function spread$1(re){return function(oe){return re.apply(null,oe)}}function isAxiosError$1(re){return utils$1.isObject(re)&&re.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(HttpStatusCode$1).forEach(([re,Y])=>{HttpStatusCode$1[Y]=re});function createInstance(re){const Y=new Axios$1(re),oe=bind(Axios$1.prototype.request,Y);return utils$1.extend(oe,Axios$1.prototype,Y,{allOwnKeys:!0}),utils$1.extend(oe,Y,null,{allOwnKeys:!0}),oe.create=function(ue){return createInstance(mergeConfig$1(re,ue))},oe}const axios=createInstance(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(Y){return Promise.all(Y)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=re=>formDataToJSON(utils$1.isHTMLForm(re)?new FormData(re):re);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,_hoisted_1$e=["textContent"],_sfc_main$e={__name:"Bunny",props:Fieldtype.props,emits:Fieldtype.emits,setup(re,{expose:Y,emit:oe}){const le=oe,ue=re,{expose:he,update:fe}=Fieldtype.use(le,ue);Y(he);const _e=ref(null),Se=ref(!0),ve=ref([]),$e=ref([]),Ee=computed(()=>{let Ne=ue.value||[];return(typeof Ne=="string"||typeof Ne=="number")&&(Ne=[Ne]),Ne.map(Ie=>$e.value.find(De=>De.value===Ie)||{value:Ie,label:Ie})});function Ue(){axios.request({method:"GET",url:`https://video.bunnycdn.com/library/${ue.meta.library}/videos?page=1&itemsPerPage=100&orderBy=date`,headers:{accept:"application/json",AccessKey:ue.meta.api}}).then(Ne=>{ve.value=Ne.data,Se.value=!1,Re()}).catch(Ne=>{console.error(Ne)})}function Re(){ve.value.items.forEach(Ne=>{$e.value.push({value:Ne.guid,label:`${Ne.title} (${new Date(Ne.dateUploaded).toLocaleString()})`})})}function xe(Ne){fe(Ne?Ne.value:null)}return onMounted(()=>{Ue()}),(Ne,Ie)=>(openBlock(),createElementBlock("div",null,[createVNode(unref(Combobox),{ref_key:"input",ref:_e,class:"flex-1",clearable:!1,disabled:!1,options:$e.value,placeholder:Ne.__("Select Video..."),searchable:!0,multiple:!1,"close-on-select":!0,"model-value":Ee.value,"onUpdate:modelValue":xe,onFocus:Ie[0]||(Ie[0]=De=>Ne.$emit("focus")),onBlur:Ie[1]||(Ie[1]=De=>Ne.$emit("blur"))},{option:withCtx(({label:De})=>[createTextVNode(toDisplayString(De),1)]),"selected-option":withCtx(({label:De})=>[createTextVNode(toDisplayString(De),1)]),"no-options":withCtx(()=>[createElementVNode("div",{class:"text-sm text-gray-700 text-left py-2 px-4",textContent:toDisplayString(Ne.__("No options to choose from."))},null,8,_hoisted_1$e)]),_:1},8,["options","placeholder","model-value"])]))}},{Form,Head,Link,router,toggleArchitecturalBackground,useArchitecturalBackground,useForm,usePoll}=__STATAMIC__.inertia,_export_sfc=(re,Y)=>{const oe=re.__vccOpts||re;for(const[le,ue]of Y)oe[le]=ue;return oe},_sfc_main$d={},_hoisted_1$d={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function _sfc_render$c(re,Y){return openBlock(),createElementBlock("svg",_hoisted_1$d,[...Y[0]||(Y[0]=[createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])}const PlusCircleIcon=_export_sfc(_sfc_main$d,[["render",_sfc_render$c]]),_sfc_main$c={},_hoisted_1$c={"aria-hidden":"true",viewBox:"0 0 100 101",style:{color:"#eef2f6"},fill:"#2D9EFC",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$b(re,Y){return openBlock(),createElementBlock("svg",_hoisted_1$c,[...Y[0]||(Y[0]=[createElementVNode("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"},null,-1),createElementVNode("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"},null,-1)])])}const SpinnerIcon=_export_sfc(_sfc_main$c,[["render",_sfc_render$b]]),_sfc_main$b={},_hoisted_1$b={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"};function _sfc_render$a(re,Y){return openBlock(),createElementBlock("svg",_hoisted_1$b,[...Y[0]||(Y[0]=[createElementVNode("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6 6 0 00-5.98 6.496A5.25 5.25 0 006.75 20.25H18a4.5 4.5 0 002.206-8.423 3.75 3.75 0 00-4.133-4.303A6.001 6.001 0 0010.5 3.75zm2.03 5.47a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.72-1.72v4.94a.75.75 0 001.5 0v-4.94l1.72 1.72a.75.75 0 101.06-1.06l-3-3z","clip-rule":"evenodd"},null,-1)])])}const CloudIcon=_export_sfc(_sfc_main$b,[["render",_sfc_render$a]]),_sfc_main$a={},_hoisted_1$a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"};function _sfc_render$9(re,Y){return openBlock(),createElementBlock("svg",_hoisted_1$a,[...Y[0]||(Y[0]=[createElementVNode("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"},null,-1),createElementVNode("path",{"fill-rule":"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z","clip-rule":"evenodd"},null,-1)])])}const EyeIcon=_export_sfc(_sfc_main$a,[["render",_sfc_render$9]]),_sfc_main$9={},_hoisted_1$9={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"};function _sfc_render$8(re,Y){return openBlock(),createElementBlock("svg",_hoisted_1$9,[...Y[0]||(Y[0]=[createElementVNode("path",{"fill-rule":"evenodd",d:"M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z","clip-rule":"evenodd"},null,-1),createElementVNode("path",{"fill-rule":"evenodd",d:"M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.194a.75.75 0 00-.053 1.06z","clip-rule":"evenodd"},null,-1)])])}const LinkIcon=_export_sfc(_sfc_main$9,[["render",_sfc_render$8]]),_sfc_main$8={},_hoisted_1$8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function _sfc_render$7(re,Y){return openBlock(),createElementBlock("svg",_hoisted_1$8,[...Y[0]||(Y[0]=[createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1)])])}const TrashIcon=_export_sfc(_sfc_main$8,[["render",_sfc_render$7]]),_sfc_main$7={},_hoisted_1$7={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function _sfc_render$6(re,Y){return openBlock(),createElementBlock("svg",_hoisted_1$7,[...Y[0]||(Y[0]=[createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"},null,-1),createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)])])}const CogIcon=_export_sfc(_sfc_main$7,[["render",_sfc_render$6]]);function mitt(re){return{all:re=re||new Map,on:function(Y,oe){var le=re.get(Y);le?le.push(oe):re.set(Y,[oe])},off:function(Y,oe){var le=re.get(Y);le&&(oe?le.splice(le.indexOf(oe)>>>0,1):re.set(Y,[]))},emit:function(Y,oe){var le=re.get(Y);le&&le.slice().map(function(ue){ue(oe)}),(le=re.get("*"))&&le.slice().map(function(ue){ue(Y,oe)})}}}const emitter=mitt(),_sfc_main$6={components:{CogIcon,Combobox},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary"],props:{id:String,title:String,assetOptions:[]},data(){return{isOpen:!1,videoTitle:this.title,selectedThumbnails:[]}},methods:{save(){this.title!==this.videoTitle&&(this.$progress.start("title"),this.changeTitle()),this.selectedThumbnails.length>0&&(this.$progress.start("thumbnail"),this.changeThumbnail()),this.isOpen=!1},changeTitle(){const re={method:"POST",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.id}`,headers:{Accept:"application/json","content-type":"application/*+json",AccessKey:this.bunnyApiKey},data:'{"title":"'+this.videoTitle+'"}'};axios.request(re).then(()=>{this.$toast.success(__("Video title has been updated!")),this.$progress.complete("title"),emitter.emit("load")}).catch(Y=>{this.$toast.error(__("An error occured while trying to update the video title.")),this.$progress.complete("title"),console.error(Y)})},changeThumbnail(){const re={method:"POST",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.id}/thumbnail?thumbnailUrl=${this.selectedThumbnails[0].url}`,headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}};axios.request(re).then(()=>{this.$toast.success(__("Thumbnail has been updated!")),this.thumbnailUrl=null,this.$progress.complete("thumbnail"),emitter.emit("load")}).catch(Y=>{this.$toast.error(__("An error occured while trying to update the thumbnail.")),this.$progress.complete("thumbnail"),console.error(Y)})},selectThumbnail(re){this.selectedThumbnails=[re]}}},_hoisted_1$6={class:"flex flex-col h-full"},_hoisted_2$4={class:"text-lg font-semibold px-5 py-3 bg-gray-200 rounded-t-lg flex items-center justify-between border-b"},_hoisted_3$3={class:"flex-1 px-5 py-6 text-gray"},_hoisted_4$3={class:"px-2 m-0 @container form-group publish-field text-fieldtype w-full"},_hoisted_5$3={for:"title",class:"block"},_hoisted_6$3={class:"input-group"},_hoisted_7$3={class:"px-2 m-0 @container form-group publish-field text-fieldtype w-full"},_hoisted_8$3={for:"thumbnail",class:"block"},_hoisted_9$2={class:"input-group"},_hoisted_10$2=["textContent"],_hoisted_11$2={class:"px-5 py-3 bg-gray-200 rounded-b-lg border-t flex items-center justify-end text-sm"},_hoisted_12$2=["textContent"],_hoisted_13$1=["textContent"];function _sfc_render$5(re,Y,oe,le,ue,he){const fe=resolveComponent("CogIcon"),_e=resolveComponent("Combobox"),Se=resolveComponent("modal");return openBlock(),createElementBlock("div",null,[createElementVNode("button",{onClick:Y[0]||(Y[0]=ve=>ue.isOpen=!0)},[createVNode(fe,{class:"size-5"})]),createVNode(Se,{open:ue.isOpen,"onUpdate:open":Y[4]||(Y[4]=ve=>ue.isOpen=ve),name:"settings"},{default:withCtx(()=>[createElementVNode("div",_hoisted_1$6,[createElementVNode("header",_hoisted_2$4,toDisplayString(re.__("Video Settings")),1),createElementVNode("div",_hoisted_3$3,[createElementVNode("div",_hoisted_4$3,[createElementVNode("label",_hoisted_5$3,toDisplayString(re.__("Title")),1),createElementVNode("div",_hoisted_6$3,[withDirectives(createElementVNode("input",{type:"text",id:"title",name:"title","onUpdate:modelValue":Y[1]||(Y[1]=ve=>ue.videoTitle=ve),class:"input-text"},null,512),[[vModelText,ue.videoTitle]])])]),createElementVNode("div",_hoisted_7$3,[createElementVNode("label",_hoisted_8$3,toDisplayString(re.__("Thumbnail")),1),createElementVNode("div",_hoisted_9$2,[createVNode(_e,{ref:"input",class:"flex-1",clearable:!1,disabled:!1,options:oe.assetOptions,placeholder:re.__("Select new thumbnail"),searchable:!0,multiple:!1,"close-on-select":!0,"model-value":ue.selectedThumbnails,"onUpdate:modelValue":he.selectThumbnail},{option:withCtx(({label:ve})=>[createTextVNode(toDisplayString(ve),1)]),"selected-option":withCtx(({label:ve})=>[createTextVNode(toDisplayString(ve),1)]),"no-options":withCtx(()=>[createElementVNode("div",{class:"text-sm text-gray-700 text-left py-2 px-4",textContent:toDisplayString(re.__("No options to choose from."))},null,8,_hoisted_10$2)]),_:1},8,["options","placeholder","model-value","onUpdate:modelValue"])])])]),createElementVNode("div",_hoisted_11$2,[createElementVNode("button",{class:"text-gray hover:text-gray-900",onClick:Y[2]||(Y[2]=ve=>ue.isOpen=!1),textContent:toDisplayString(re.__("Cancel"))},null,8,_hoisted_12$2),createElementVNode("button",{class:"ml-4 btn-primary",textContent:toDisplayString(re.__("Save")),onClick:Y[3]||(Y[3]=(...ve)=>he.save&&he.save(...ve))},null,8,_hoisted_13$1)])])]),_:1},8,["open"])])}const VideoSettings=_export_sfc(_sfc_main$6,[["render",_sfc_render$5]]),_sfc_main$5={components:{VideoSettings,CloudIcon,LinkIcon,TrashIcon,SpinnerIcon,EyeIcon},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary"],props:{video:Object,assetOptions:Array},data(){return{currentVideo:this.video,isLoading:!1,thumbnailUrl:`https://${this.bunnyHostname}/${this.video.guid}/${this.video.thumbnailFileName}`,videoUrl:`https://iframe.mediadelivery.net/play/${this.video.videoLibraryId}/${this.video.guid}`,triggerDeletion:!1}},mounted(){this.currentVideo.status<4&&(this.polling=setInterval(()=>{this.loadVideo()},5e3))},methods:{confirmDeletion(){this.triggerDeletion=!0},loadVideo(){this.isLoading=!0,axios.request({method:"GET",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.currentVideo.guid}`,headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}}).then(re=>{this.currentVideo=re.data,this.currentVideo.status>=4&&(clearInterval(this.polling),emitter.emit("load"))}).catch(function(re){console.error(re)}).finally(()=>{this.isLoading=!1})},deleteVideo(){this.isLoading=!0,axios.request({method:"DELETE",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.currentVideo.guid}`,headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}}).then(()=>{this.cancelDeletion(),clearInterval(this.polling),emitter.emit("load")}).catch(function(re){console.error(re)}).finally(()=>{this.isLoading=!1})},cancelDeletion(){this.triggerDeletion=!1}}},_hoisted_1$5={key:0,class:"sm:grid sm:grid-cols-3 overflow-hidden bg-white rounded shadow-xl w-full mb-4"},_hoisted_2$3=["href"],_hoisted_3$2=["src"],_hoisted_4$2={class:"sm:col-span-2 py-2 sm:py-4 px-2 sm:px-6 text-gray-800 flex flex-col justify-between gap-1 sm:shrink"},_hoisted_5$2={class:"flex sm:flex-grow items-start justify-between gap-4 w-full"},_hoisted_6$2=["href"],_hoisted_7$2={class:"flex gap-1"},_hoisted_8$2={class:"flex gap-2 md:gap-4 items-center justify-start text-xs md:text-sm whitespace-nowrap"},_hoisted_9$1=["href"],_hoisted_10$1={class:"text-xs md:text-sm text-gray-600 flex justify-between"},_hoisted_11$1={class:"flex gap-2 items-center"},_hoisted_12$1={class:"flex gap-2 items-center"},_hoisted_13={key:1,class:"flex flex-col overflow-hidden bg-white rounded shadow-xl w-full mb-4 p-6 items-center justify-center"},_hoisted_14={class:"text-lg"},_hoisted_15={class:"text-xs text-gray-600"},_hoisted_16={role:"status",class:"mt-4 mx-auto"},_hoisted_17={class:"sr-only"};function _sfc_render$4(re,Y,oe,le,ue,he){const fe=resolveComponent("VideoSettings"),_e=resolveComponent("TrashIcon"),Se=resolveComponent("LinkIcon"),ve=resolveComponent("CloudIcon"),$e=resolveComponent("EyeIcon"),Ee=resolveComponent("SpinnerIcon"),Ue=resolveComponent("ui-confirmation-modal");return openBlock(),createElementBlock("div",null,[ue.currentVideo.status>=4?(openBlock(),createElementBlock("div",_hoisted_1$5,[createElementVNode("a",{href:ue.videoUrl,target:"_blank",class:""},[createElementVNode("img",{src:ue.thumbnailUrl,class:"aspect-video inset-0 h-full object-cover w-full"},null,8,_hoisted_3$2)],8,_hoisted_2$3),createElementVNode("div",_hoisted_4$2,[createElementVNode("div",_hoisted_5$2,[createElementVNode("a",{href:ue.videoUrl,target:"_blank",class:"flex-grow font-semibold text-base sm:text-lg leading-tight truncate"},toDisplayString(ue.currentVideo.title),9,_hoisted_6$2),createElementVNode("div",_hoisted_7$2,[createVNode(fe,{id:ue.currentVideo.guid,title:ue.currentVideo.title,assetOptions:oe.assetOptions,class:"size-5"},null,8,["id","title","assetOptions"]),createElementVNode("button",{class:"size-5",onClick:Y[0]||(Y[0]=Re=>he.confirmDeletion())},[createVNode(_e,{class:"size-5"})])])]),createElementVNode("p",_hoisted_8$2,[createElementVNode("a",{href:ue.thumbnailUrl,target:"_blank",class:"flex gap-1 items-center"},[createTextVNode(toDisplayString(re.__("Thumbnail"))+" ",1),createVNode(Se,{class:"size-4"})],8,_hoisted_9$1)]),createElementVNode("div",_hoisted_10$1,[createElementVNode("div",_hoisted_11$1,[createVNode(ve,{class:"text-gray-500 size-4"}),createTextVNode(" "+toDisplayString(new Date(ue.currentVideo.dateUploaded).toLocaleString()),1)]),createElementVNode("div",_hoisted_12$1,[createVNode($e,{class:"text-gray-500 size-4"}),createTextVNode(" "+toDisplayString(ue.currentVideo.views),1)])])])])):(openBlock(),createElementBlock("div",_hoisted_13,[createElementVNode("h2",_hoisted_14,toDisplayString(re.__("Video is being processed"))+"  "+toDisplayString(ue.currentVideo.encodeProgress*2)+"% ",1),createElementVNode("p",_hoisted_15,toDisplayString(re.__("This may take some time.")),1),createElementVNode("button",{class:"text-xs text-red-500",onClick:Y[1]||(Y[1]=Re=>he.confirmDeletion())},toDisplayString(re.__("Cancel and delete video")),1),createElementVNode("div",_hoisted_16,[createVNode(Ee,{class:"w-8 h-8 mr-2 animate-spin"}),createElementVNode("span",_hoisted_17,toDisplayString(re.__("Loading...")),1)])])),createVNode(Ue,{open:ue.triggerDeletion,"onUpdate:open":Y[2]||(Y[2]=Re=>ue.triggerDeletion=Re),title:re.__("Delete video :title",{title:ue.currentVideo.title}),onConfirm:he.deleteVideo,onCancel:he.cancelDeletion,danger:"true"},null,8,["open","title","onConfirm","onCancel"])])}const VideoCard=_export_sfc(_sfc_main$5,[["render",_sfc_render$4]]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(re){return re&&re.__esModule&&Object.prototype.hasOwnProperty.call(re,"default")?re.default:re}var debounce$3={exports:{}},hasRequiredDebounce$1;function requireDebounce$1(){if(hasRequiredDebounce$1)return debounce$3.exports;hasRequiredDebounce$1=1;function re(Y,oe=100,le={}){if(typeof Y!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof Y}\`.`);if(oe<0)throw new RangeError("`wait` must not be negative.");const{immediate:ue}=typeof le=="boolean"?{immediate:le}:le;let he,fe,_e,Se,ve;function $e(){const Re=he,xe=fe;return he=void 0,fe=void 0,ve=Y.apply(Re,xe),ve}function Ee(){const Re=Date.now()-Se;Re<oe&&Re>=0?_e=setTimeout(Ee,oe-Re):(_e=void 0,ue||(ve=$e()))}const Ue=function(...Re){if(he&&this!==he&&Object.getPrototypeOf(this)===Object.getPrototypeOf(he))throw new Error("Debounced method called with different contexts of the same prototype.");he=this,fe=Re,Se=Date.now();const xe=ue&&!_e;return _e||(_e=setTimeout(Ee,oe)),xe&&(ve=$e()),ve};return Object.defineProperty(Ue,"isPending",{get(){return _e!==void 0}}),Ue.clear=()=>{_e&&(clearTimeout(_e),_e=void 0)},Ue.flush=()=>{_e&&Ue.trigger()},Ue.trigger=()=>{ve=$e(),Ue.clear()},Ue}return debounce$3.exports.debounce=re,debounce$3.exports=re,debounce$3.exports}var debounceExports$1=requireDebounce$1();const debounce$2=getDefaultExportFromCjs(debounceExports$1),_sfc_main$4={components:{PlusCircleIcon,SpinnerIcon,VideoCard},inject:["bunnyApiKey","bunnyLibrary"],data(){return{search:"",loading:!0,polling:null,result:null,page:1,maxPage:1,itemsPerPage:10,assetOptions:[]}},created(){this.getVideos(),this.getAssets(),emitter.on("load",re=>{re&&re.page&&(this.page=re.page),this.getVideos()})},methods:{getAssets(){const re={method:"GET",url:"/cp/bunny/assets/",headers:{Accept:"application/json"}};axios.request(re).then(Y=>{this.assetOptions=Y.data.items}).catch(function(Y){console.error(Y)})},getVideos(){const re={method:"GET",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos?page=${this.page}&itemsPerPage=${this.itemsPerPage}&orderBy=date`,headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}};this.search!==""&&(re.url+="&search="+this.search),axios.request(re).then(Y=>{this.maxPage=Math.ceil(Y.data.totalItems/this.itemsPerPage),this.result=Y.data,this.loading=!1}).catch(function(Y){console.error(Y)})},openUpload(){emitter.emit("upload")},debouncedSearch:debounce$2(()=>{emitter.emit("load",{page:1})},500),nextPage(){this.page++,this.page>this.maxPage&&(this.page=1),this.getVideos()},prevPage(){this.page--,this.page<=0&&(this.page=this.maxPage),this.getVideos()}}},_hoisted_1$4={class:"container w-100 lg:w-4/5 mx-auto input-group mb-4"},_hoisted_2$2=["placeholder"],_hoisted_3$1={key:0,class:"flex items-center"},_hoisted_4$1={role:"status",class:"mt-4 mx-auto"},_hoisted_5$1={class:"sr-only"},_hoisted_6$1={key:1},_hoisted_7$1={id:"card"},_hoisted_8$1={class:"container w-100 lg:w-4/5 mx-auto"},_hoisted_9={class:"flex flex-col"},_hoisted_10={key:0,class:"flex items-center justify-between"},_hoisted_11={key:2,class:"text-center text-sm"},_hoisted_12={class:"text-xl"};function _sfc_render$3(re,Y,oe,le,ue,he){const fe=resolveComponent("SpinnerIcon"),_e=resolveComponent("VideoCard"),Se=resolveComponent("PlusCircleIcon");return openBlock(),createElementBlock("div",null,[createElementVNode("div",_hoisted_1$4,[withDirectives(createElementVNode("input",{type:"text",placeholder:re.__("Search videos"),onInput:Y[0]||(Y[0]=(...ve)=>he.debouncedSearch&&he.debouncedSearch(...ve)),"onUpdate:modelValue":Y[1]||(Y[1]=ve=>ue.search=ve),class:"input-text"},null,40,_hoisted_2$2),[[vModelText,ue.search]])]),ue.loading?(openBlock(),createElementBlock("div",_hoisted_3$1,[createElementVNode("div",_hoisted_4$1,[createVNode(fe,{class:"w-8 h-8 mr-2 animate-spin"}),createElementVNode("span",_hoisted_5$1,toDisplayString(re.__("Loading...")),1)])])):!ue.loading&&ue.result.totalItems>=1?(openBlock(),createElementBlock("div",_hoisted_6$1,[createElementVNode("div",_hoisted_7$1,[createElementVNode("div",_hoisted_8$1,[createElementVNode("div",_hoisted_9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ue.result.items,ve=>(openBlock(),createBlock(_e,{key:ve.guid,video:ve,assetOptions:ue.assetOptions},null,8,["video","assetOptions"]))),128))]),ue.result.totalItems>ue.result.items.length?(openBlock(),createElementBlock("div",_hoisted_10,[createElementVNode("button",{class:"btn-primary",onClick:Y[2]||(Y[2]=(...ve)=>he.prevPage&&he.prevPage(...ve))},"  "),createElementVNode("div",null,toDisplayString(ue.page)+" / "+toDisplayString(ue.maxPage),1),createElementVNode("button",{class:"btn-primary",onClick:Y[3]||(Y[3]=(...ve)=>he.nextPage&&he.nextPage(...ve))},"  ")])):createCommentVNode("",!0)])])])):ue.search.length>0?(openBlock(),createElementBlock("div",_hoisted_11,toDisplayString(re.__("No videos found.")),1)):(openBlock(),createElementBlock("button",{key:3,onClick:Y[4]||(Y[4]=ve=>he.openUpload()),class:"flex flex-col overflow-hidden border-gray-600 border-dashed border-2 rounded shadow-xl w-full mb-4 p-6 items-center justify-center"},[createElementVNode("h2",_hoisted_12,toDisplayString(re.__("Upload Video")),1),createVNode(Se,{class:"h-10 w-10"})]))])}const VideoBrowser=_export_sfc(_sfc_main$4,[["render",_sfc_render$3]]),_sfc_main$3={},_hoisted_1$3={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"};function _sfc_render$2(re,Y){return openBlock(),createElementBlock("svg",_hoisted_1$3,[...Y[0]||(Y[0]=[createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m6-6H6"},null,-1)])])}const PlusIcon=_export_sfc(_sfc_main$3,[["render",_sfc_render$2]]);function insertReplacement(re,Y,oe){const le=[];return re.forEach(ue=>typeof ue!="string"?le.push(ue):Y[Symbol.split](ue).forEach((he,fe,_e)=>{he!==""&&le.push(he),fe<_e.length-1&&le.push(oe)})),le}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function interpolate(re,Y){const oe=/\$/g,le="$$$$";let ue=[re];if(Y==null)return ue;for(const he of Object.keys(Y))if(he!=="_"){let fe=Y[he];typeof fe=="string"&&(fe=oe[Symbol.replace](fe,le)),ue=insertReplacement(ue,new RegExp(`%\\{${he}\\}`,"g"),fe)}return ue}const defaultOnMissingKey=re=>{throw new Error(`missing string: ${re}`)};class Translator{locale;constructor(Y,{onMissingKey:oe=defaultOnMissingKey}={}){this.locale={strings:{},pluralize(le){return le===1?0:1}},Array.isArray(Y)?Y.forEach(this.#t,this):this.#t(Y),this.#e=oe}#e;#t(Y){if(!Y?.strings)return;const oe=this.locale;Object.assign(this.locale,{strings:{...oe.strings,...Y.strings},pluralize:Y.pluralize||oe.pluralize})}translate(Y,oe){return this.translateArray(Y,oe).join("")}translateArray(Y,oe){let le=this.locale.strings[Y];if(le==null&&(this.#e(Y),le=Y),typeof le=="object"){if(oe&&typeof oe.smart_count<"u"){const he=this.locale.pluralize(oe.smart_count);return interpolate(le[he],oe)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof le!="string")throw new Error("string was not a string");return interpolate(le,oe)}}class BasePlugin{uppy;opts;id;defaultLocale;i18n;i18nArray;type;VERSION;constructor(Y,oe){this.uppy=Y,this.opts=oe??{}}getPluginState(){const{plugins:Y}=this.uppy.getState();return Y?.[this.id]||{}}setPluginState(Y){const{plugins:oe}=this.uppy.getState();this.uppy.setState({plugins:{...oe,[this.id]:{...oe[this.id],...Y}}})}setOptions(Y){this.opts={...this.opts,...Y},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const Y=new Translator([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=Y.translate.bind(Y),this.i18nArray=Y.translateArray.bind(Y),this.setPluginState(void 0)}addTarget(Y){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(Y){}afterUpdate(){}}function pad(re){return re<10?`0${re}`:re.toString()}function getTimeStamp(){const re=new Date,Y=pad(re.getHours()),oe=pad(re.getMinutes()),le=pad(re.getSeconds());return`${Y}:${oe}:${le}`}const justErrorsLogger={debug:()=>{},warn:()=>{},error:(...re)=>console.error(`[Uppy] [${getTimeStamp()}]`,...re)},debugLogger={debug:(...re)=>console.debug(`[Uppy] [${getTimeStamp()}]`,...re),warn:(...re)=>console.warn(`[Uppy] [${getTimeStamp()}]`,...re),error:(...re)=>console.error(`[Uppy] [${getTimeStamp()}]`,...re)};function isDOMElement(re){return typeof re!="object"||re===null||!("nodeType"in re)?!1:re.nodeType===Node.ELEMENT_NODE}function findDOMElement(re,Y=document){return typeof re=="string"?Y.querySelector(re):isDOMElement(re)?re:null}function getTextDirection(re){for(;re&&!re.dir;)re=re.parentNode;return re?.dir}var n$1,l$2,u$3,i$2,o$2,r$2,e$2,f$3,c$2,s$2,a$2,p$2={},v$2=[],y$2=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,d$2=Array.isArray;function w$2(re,Y){for(var oe in Y)re[oe]=Y[oe];return re}function g$2(re){re&&re.parentNode&&re.parentNode.removeChild(re)}function _$1(re,Y,oe){var le,ue,he,fe={};for(he in Y)he=="key"?le=Y[he]:he=="ref"?ue=Y[he]:fe[he]=Y[he];if(arguments.length>2&&(fe.children=arguments.length>3?n$1.call(arguments,2):oe),typeof re=="function"&&re.defaultProps!=null)for(he in re.defaultProps)fe[he]===void 0&&(fe[he]=re.defaultProps[he]);return m$2(re,fe,le,ue,null)}function m$2(re,Y,oe,le,ue){var he={type:re,props:Y,key:oe,ref:le,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:ue??++u$3,__i:-1,__u:0};return ue==null&&l$2.vnode!=null&&l$2.vnode(he),he}function b$1(){return{current:null}}function k$2(re){return re.children}function x(re,Y){this.props=re,this.context=Y}function S$1(re,Y){if(Y==null)return re.__?S$1(re.__,re.__i+1):null;for(var oe;Y<re.__k.length;Y++)if((oe=re.__k[Y])!=null&&oe.__e!=null)return oe.__e;return typeof re.type=="function"?S$1(re):null}function C$1(re){var Y,oe;if((re=re.__)!=null&&re.__c!=null){for(re.__e=re.__c.base=null,Y=0;Y<re.__k.length;Y++)if((oe=re.__k[Y])!=null&&oe.__e!=null){re.__e=re.__c.base=oe.__e;break}return C$1(re)}}function M$1(re){(!re.__d&&(re.__d=!0)&&i$2.push(re)&&!$$1.__r++||o$2!=l$2.debounceRendering)&&((o$2=l$2.debounceRendering)||r$2)($$1)}function $$1(){for(var re,Y,oe,le,ue,he,fe,_e=1;i$2.length;)i$2.length>_e&&i$2.sort(e$2),re=i$2.shift(),_e=i$2.length,re.__d&&(oe=void 0,le=void 0,ue=(le=(Y=re).__v).__e,he=[],fe=[],Y.__P&&((oe=w$2({},le)).__v=le.__v+1,l$2.vnode&&l$2.vnode(oe),O$1(Y.__P,oe,le,Y.__n,Y.__P.namespaceURI,32&le.__u?[ue]:null,he,ue??S$1(le),!!(32&le.__u),fe),oe.__v=le.__v,oe.__.__k[oe.__i]=oe,N$2(he,oe,fe),le.__e=le.__=null,oe.__e!=ue&&C$1(oe)));$$1.__r=0}function I$1(re,Y,oe,le,ue,he,fe,_e,Se,ve,$e){var Ee,Ue,Re,xe,Ne,Ie,De,Pe=le&&le.__k||v$2,Ae=Y.length;for(Se=P$2(oe,Y,Pe,Se,Ae),Ee=0;Ee<Ae;Ee++)(Re=oe.__k[Ee])!=null&&(Ue=Re.__i==-1?p$2:Pe[Re.__i]||p$2,Re.__i=Ee,Ie=O$1(re,Re,Ue,ue,he,fe,_e,Se,ve,$e),xe=Re.__e,Re.ref&&Ue.ref!=Re.ref&&(Ue.ref&&B$3(Ue.ref,null,Re),$e.push(Re.ref,Re.__c||xe,Re)),Ne==null&&xe!=null&&(Ne=xe),(De=!!(4&Re.__u))||Ue.__k===Re.__k?Se=A$2(Re,Se,re,De):typeof Re.type=="function"&&Ie!==void 0?Se=Ie:xe&&(Se=xe.nextSibling),Re.__u&=-7);return oe.__e=Ne,Se}function P$2(re,Y,oe,le,ue){var he,fe,_e,Se,ve,$e=oe.length,Ee=$e,Ue=0;for(re.__k=new Array(ue),he=0;he<ue;he++)(fe=Y[he])!=null&&typeof fe!="boolean"&&typeof fe!="function"?(typeof fe=="string"||typeof fe=="number"||typeof fe=="bigint"||fe.constructor==String?fe=re.__k[he]=m$2(null,fe,null,null,null):d$2(fe)?fe=re.__k[he]=m$2(k$2,{children:fe},null,null,null):fe.constructor===void 0&&fe.__b>0?fe=re.__k[he]=m$2(fe.type,fe.props,fe.key,fe.ref?fe.ref:null,fe.__v):re.__k[he]=fe,Se=he+Ue,fe.__=re,fe.__b=re.__b+1,_e=null,(ve=fe.__i=L$1(fe,oe,Se,Ee))!=-1&&(Ee--,(_e=oe[ve])&&(_e.__u|=2)),_e==null||_e.__v==null?(ve==-1&&(ue>$e?Ue--:ue<$e&&Ue++),typeof fe.type!="function"&&(fe.__u|=4)):ve!=Se&&(ve==Se-1?Ue--:ve==Se+1?Ue++:(ve>Se?Ue--:Ue++,fe.__u|=4))):re.__k[he]=null;if(Ee)for(he=0;he<$e;he++)(_e=oe[he])!=null&&(2&_e.__u)==0&&(_e.__e==le&&(le=S$1(_e)),D$2(_e,_e));return le}function A$2(re,Y,oe,le){var ue,he;if(typeof re.type=="function"){for(ue=re.__k,he=0;ue&&he<ue.length;he++)ue[he]&&(ue[he].__=re,Y=A$2(ue[he],Y,oe,le));return Y}re.__e!=Y&&(le&&(Y&&re.type&&!Y.parentNode&&(Y=S$1(re)),oe.insertBefore(re.__e,Y||null)),Y=re.__e);do Y=Y&&Y.nextSibling;while(Y!=null&&Y.nodeType==8);return Y}function H$2(re,Y){return Y=Y||[],re==null||typeof re=="boolean"||(d$2(re)?re.some(function(oe){H$2(oe,Y)}):Y.push(re)),Y}function L$1(re,Y,oe,le){var ue,he,fe,_e=re.key,Se=re.type,ve=Y[oe],$e=ve!=null&&(2&ve.__u)==0;if(ve===null&&_e==null||$e&&_e==ve.key&&Se==ve.type)return oe;if(le>($e?1:0)){for(ue=oe-1,he=oe+1;ue>=0||he<Y.length;)if((ve=Y[fe=ue>=0?ue--:he++])!=null&&(2&ve.__u)==0&&_e==ve.key&&Se==ve.type)return fe}return-1}function T$3(re,Y,oe){Y[0]=="-"?re.setProperty(Y,oe??""):re[Y]=oe==null?"":typeof oe!="number"||y$2.test(Y)?oe:oe+"px"}function j$3(re,Y,oe,le,ue){var he,fe;e:if(Y=="style")if(typeof oe=="string")re.style.cssText=oe;else{if(typeof le=="string"&&(re.style.cssText=le=""),le)for(Y in le)oe&&Y in oe||T$3(re.style,Y,"");if(oe)for(Y in oe)le&&oe[Y]==le[Y]||T$3(re.style,Y,oe[Y])}else if(Y[0]=="o"&&Y[1]=="n")he=Y!=(Y=Y.replace(f$3,"$1")),fe=Y.toLowerCase(),Y=fe in re||Y=="onFocusOut"||Y=="onFocusIn"?fe.slice(2):Y.slice(2),re.l||(re.l={}),re.l[Y+he]=oe,oe?le?oe.u=le.u:(oe.u=c$2,re.addEventListener(Y,he?a$2:s$2,he)):re.removeEventListener(Y,he?a$2:s$2,he);else{if(ue=="http://www.w3.org/2000/svg")Y=Y.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(Y!="width"&&Y!="height"&&Y!="href"&&Y!="list"&&Y!="form"&&Y!="tabIndex"&&Y!="download"&&Y!="rowSpan"&&Y!="colSpan"&&Y!="role"&&Y!="popover"&&Y in re)try{re[Y]=oe??"";break e}catch{}typeof oe=="function"||(oe==null||oe===!1&&Y[4]!="-"?re.removeAttribute(Y):re.setAttribute(Y,Y=="popover"&&oe==1?"":oe))}}function F$2(re){return function(Y){if(this.l){var oe=this.l[Y.type+re];if(Y.t==null)Y.t=c$2++;else if(Y.t<oe.u)return;return oe(l$2.event?l$2.event(Y):Y)}}}function O$1(re,Y,oe,le,ue,he,fe,_e,Se,ve){var $e,Ee,Ue,Re,xe,Ne,Ie,De,Pe,Ae,Be,Le,Ve,ze,Ge,We,Qe,Ye=Y.type;if(Y.constructor!==void 0)return null;128&oe.__u&&(Se=!!(32&oe.__u),he=[_e=Y.__e=oe.__e]),($e=l$2.__b)&&$e(Y);e:if(typeof Ye=="function")try{if(De=Y.props,Pe="prototype"in Ye&&Ye.prototype.render,Ae=($e=Ye.contextType)&&le[$e.__c],Be=$e?Ae?Ae.props.value:$e.__:le,oe.__c?Ie=(Ee=Y.__c=oe.__c).__=Ee.__E:(Pe?Y.__c=Ee=new Ye(De,Be):(Y.__c=Ee=new x(De,Be),Ee.constructor=Ye,Ee.render=E$2),Ae&&Ae.sub(Ee),Ee.state||(Ee.state={}),Ee.__n=le,Ue=Ee.__d=!0,Ee.__h=[],Ee._sb=[]),Pe&&Ee.__s==null&&(Ee.__s=Ee.state),Pe&&Ye.getDerivedStateFromProps!=null&&(Ee.__s==Ee.state&&(Ee.__s=w$2({},Ee.__s)),w$2(Ee.__s,Ye.getDerivedStateFromProps(De,Ee.__s))),Re=Ee.props,xe=Ee.state,Ee.__v=Y,Ue)Pe&&Ye.getDerivedStateFromProps==null&&Ee.componentWillMount!=null&&Ee.componentWillMount(),Pe&&Ee.componentDidMount!=null&&Ee.__h.push(Ee.componentDidMount);else{if(Pe&&Ye.getDerivedStateFromProps==null&&De!==Re&&Ee.componentWillReceiveProps!=null&&Ee.componentWillReceiveProps(De,Be),Y.__v==oe.__v||!Ee.__e&&Ee.shouldComponentUpdate!=null&&Ee.shouldComponentUpdate(De,Ee.__s,Be)===!1){for(Y.__v!=oe.__v&&(Ee.props=De,Ee.state=Ee.__s,Ee.__d=!1),Y.__e=oe.__e,Y.__k=oe.__k,Y.__k.some(function(et){et&&(et.__=Y)}),Le=0;Le<Ee._sb.length;Le++)Ee.__h.push(Ee._sb[Le]);Ee._sb=[],Ee.__h.length&&fe.push(Ee);break e}Ee.componentWillUpdate!=null&&Ee.componentWillUpdate(De,Ee.__s,Be),Pe&&Ee.componentDidUpdate!=null&&Ee.__h.push(function(){Ee.componentDidUpdate(Re,xe,Ne)})}if(Ee.context=Be,Ee.props=De,Ee.__P=re,Ee.__e=!1,Ve=l$2.__r,ze=0,Pe){for(Ee.state=Ee.__s,Ee.__d=!1,Ve&&Ve(Y),$e=Ee.render(Ee.props,Ee.state,Ee.context),Ge=0;Ge<Ee._sb.length;Ge++)Ee.__h.push(Ee._sb[Ge]);Ee._sb=[]}else do Ee.__d=!1,Ve&&Ve(Y),$e=Ee.render(Ee.props,Ee.state,Ee.context),Ee.state=Ee.__s;while(Ee.__d&&++ze<25);Ee.state=Ee.__s,Ee.getChildContext!=null&&(le=w$2(w$2({},le),Ee.getChildContext())),Pe&&!Ue&&Ee.getSnapshotBeforeUpdate!=null&&(Ne=Ee.getSnapshotBeforeUpdate(Re,xe)),We=$e,$e!=null&&$e.type===k$2&&$e.key==null&&(We=V$2($e.props.children)),_e=I$1(re,d$2(We)?We:[We],Y,oe,le,ue,he,fe,_e,Se,ve),Ee.base=Y.__e,Y.__u&=-161,Ee.__h.length&&fe.push(Ee),Ie&&(Ee.__E=Ee.__=null)}catch(et){if(Y.__v=null,Se||he!=null)if(et.then){for(Y.__u|=Se?160:128;_e&&_e.nodeType==8&&_e.nextSibling;)_e=_e.nextSibling;he[he.indexOf(_e)]=null,Y.__e=_e}else{for(Qe=he.length;Qe--;)g$2(he[Qe]);z$2(Y)}else Y.__e=oe.__e,Y.__k=oe.__k,et.then||z$2(Y);l$2.__e(et,Y,oe)}else he==null&&Y.__v==oe.__v?(Y.__k=oe.__k,Y.__e=oe.__e):_e=Y.__e=q$3(oe.__e,Y,oe,le,ue,he,fe,Se,ve);return($e=l$2.diffed)&&$e(Y),128&Y.__u?void 0:_e}function z$2(re){re&&re.__c&&(re.__c.__e=!0),re&&re.__k&&re.__k.forEach(z$2)}function N$2(re,Y,oe){for(var le=0;le<oe.length;le++)B$3(oe[le],oe[++le],oe[++le]);l$2.__c&&l$2.__c(Y,re),re.some(function(ue){try{re=ue.__h,ue.__h=[],re.some(function(he){he.call(ue)})}catch(he){l$2.__e(he,ue.__v)}})}function V$2(re){return typeof re!="object"||re==null||re.__b&&re.__b>0?re:d$2(re)?re.map(V$2):w$2({},re)}function q$3(re,Y,oe,le,ue,he,fe,_e,Se){var ve,$e,Ee,Ue,Re,xe,Ne,Ie=oe.props||p$2,De=Y.props,Pe=Y.type;if(Pe=="svg"?ue="http://www.w3.org/2000/svg":Pe=="math"?ue="http://www.w3.org/1998/Math/MathML":ue||(ue="http://www.w3.org/1999/xhtml"),he!=null){for(ve=0;ve<he.length;ve++)if((Re=he[ve])&&"setAttribute"in Re==!!Pe&&(Pe?Re.localName==Pe:Re.nodeType==3)){re=Re,he[ve]=null;break}}if(re==null){if(Pe==null)return document.createTextNode(De);re=document.createElementNS(ue,Pe,De.is&&De),_e&&(l$2.__m&&l$2.__m(Y,he),_e=!1),he=null}if(Pe==null)Ie===De||_e&&re.data==De||(re.data=De);else{if(he=he&&n$1.call(re.childNodes),!_e&&he!=null)for(Ie={},ve=0;ve<re.attributes.length;ve++)Ie[(Re=re.attributes[ve]).name]=Re.value;for(ve in Ie)if(Re=Ie[ve],ve!="children"){if(ve=="dangerouslySetInnerHTML")Ee=Re;else if(!(ve in De)){if(ve=="value"&&"defaultValue"in De||ve=="checked"&&"defaultChecked"in De)continue;j$3(re,ve,null,Re,ue)}}for(ve in De)Re=De[ve],ve=="children"?Ue=Re:ve=="dangerouslySetInnerHTML"?$e=Re:ve=="value"?xe=Re:ve=="checked"?Ne=Re:_e&&typeof Re!="function"||Ie[ve]===Re||j$3(re,ve,Re,Ie[ve],ue);if($e)_e||Ee&&($e.__html==Ee.__html||$e.__html==re.innerHTML)||(re.innerHTML=$e.__html),Y.__k=[];else if(Ee&&(re.innerHTML=""),I$1(Y.type=="template"?re.content:re,d$2(Ue)?Ue:[Ue],Y,oe,le,Pe=="foreignObject"?"http://www.w3.org/1999/xhtml":ue,he,fe,he?he[0]:oe.__k&&S$1(oe,0),_e,Se),he!=null)for(ve=he.length;ve--;)g$2(he[ve]);_e||(ve="value",Pe=="progress"&&xe==null?re.removeAttribute("value"):xe!=null&&(xe!==re[ve]||Pe=="progress"&&!xe||Pe=="option"&&xe!=Ie[ve])&&j$3(re,ve,xe,Ie[ve],ue),ve="checked",Ne!=null&&Ne!=re[ve]&&j$3(re,ve,Ne,Ie[ve],ue))}return re}function B$3(re,Y,oe){try{if(typeof re=="function"){var le=typeof re.__u=="function";le&&re.__u(),le&&Y==null||(re.__u=re(Y))}else re.current=Y}catch(ue){l$2.__e(ue,oe)}}function D$2(re,Y,oe){var le,ue;if(l$2.unmount&&l$2.unmount(re),(le=re.ref)&&(le.current&&le.current!=re.__e||B$3(le,null,Y)),(le=re.__c)!=null){if(le.componentWillUnmount)try{le.componentWillUnmount()}catch(he){l$2.__e(he,Y)}le.base=le.__P=null}if(le=re.__k)for(ue=0;ue<le.length;ue++)le[ue]&&D$2(le[ue],Y,oe||typeof re.type!="function");oe||g$2(re.__e),re.__c=re.__=re.__e=void 0}function E$2(re,Y,oe){return this.constructor(re,oe)}function G$1(re,Y,oe){var le,ue,he,fe;Y==document&&(Y=document.documentElement),l$2.__&&l$2.__(re,Y),ue=(le=!1)?null:Y.__k,he=[],fe=[],O$1(Y,re=Y.__k=_$1(k$2,null,[re]),ue||p$2,p$2,Y.namespaceURI,ue?null:Y.firstChild?n$1.call(Y.childNodes):null,he,ue?ue.__e:Y.firstChild,le,fe),N$2(he,re,fe)}function K$2(re,Y,oe){var le,ue,he,fe,_e=w$2({},re.props);for(he in re.type&&re.type.defaultProps&&(fe=re.type.defaultProps),Y)he=="key"?le=Y[he]:he=="ref"?ue=Y[he]:_e[he]=Y[he]===void 0&&fe!=null?fe[he]:Y[he];return arguments.length>2&&(_e.children=arguments.length>3?n$1.call(arguments,2):oe),m$2(re.type,_e,le||re.key,ue||re.ref,null)}n$1=v$2.slice,l$2={__e:function(re,Y,oe,le){for(var ue,he,fe;Y=Y.__;)if((ue=Y.__c)&&!ue.__)try{if((he=ue.constructor)&&he.getDerivedStateFromError!=null&&(ue.setState(he.getDerivedStateFromError(re)),fe=ue.__d),ue.componentDidCatch!=null&&(ue.componentDidCatch(re,le||{}),fe=ue.__d),fe)return ue.__E=ue}catch(_e){re=_e}throw re}},u$3=0,x.prototype.setState=function(re,Y){var oe;oe=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=w$2({},this.state),typeof re=="function"&&(re=re(w$2({},oe),this.props)),re&&w$2(oe,re),re!=null&&this.__v&&(Y&&this._sb.push(Y),M$1(this))},x.prototype.forceUpdate=function(re){this.__v&&(this.__e=!0,re&&this.__h.push(re),M$1(this))},x.prototype.render=k$2,i$2=[],r$2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e$2=function(re,Y){return re.__v.__b-Y.__v.__b},$$1.__r=0,f$3=/(PointerCapture)$|Capture$/i,c$2=0,s$2=F$2(!1),a$2=F$2(!0);var t$1,r$1,u$2,i$1,o$1=0,f$2=[],c$1=l$2,e$1=c$1.__b,a$1=c$1.__r,v$1=c$1.diffed,l$1=c$1.__c,m$1=c$1.unmount,s$1=c$1.__;function p$1(re,Y){c$1.__h&&c$1.__h(r$1,re,o$1||Y),o$1=0;var oe=r$1.__H||(r$1.__H={__:[],__h:[]});return re>=oe.__.length&&oe.__.push({}),oe.__[re]}function d$1(re){return o$1=1,h$1(D$1,re)}function h$1(re,Y,oe){var le=p$1(t$1++,2);if(le.t=re,!le.__c&&(le.__=[oe?oe(Y):D$1(void 0,Y),function(_e){var Se=le.__N?le.__N[0]:le.__[0],ve=le.t(Se,_e);Se!==ve&&(le.__N=[ve,le.__[1]],le.__c.setState({}))}],le.__c=r$1,!r$1.__f)){var ue=function(_e,Se,ve){if(!le.__c.__H)return!0;var $e=le.__c.__H.__.filter(function(Ue){return!!Ue.__c});if($e.every(function(Ue){return!Ue.__N}))return!he||he.call(this,_e,Se,ve);var Ee=le.__c.props!==_e;return $e.forEach(function(Ue){if(Ue.__N){var Re=Ue.__[0];Ue.__=Ue.__N,Ue.__N=void 0,Re!==Ue.__[0]&&(Ee=!0)}}),he&&he.call(this,_e,Se,ve)||Ee};r$1.__f=!0;var he=r$1.shouldComponentUpdate,fe=r$1.componentWillUpdate;r$1.componentWillUpdate=function(_e,Se,ve){if(this.__e){var $e=he;he=void 0,ue(_e,Se,ve),he=$e}fe&&fe.call(this,_e,Se,ve)},r$1.shouldComponentUpdate=ue}return le.__N||le.__}function y$1(re,Y){var oe=p$1(t$1++,3);!c$1.__s&&C(oe.__H,Y)&&(oe.__=re,oe.u=Y,r$1.__H.__h.push(oe))}function A$1(re){return o$1=5,T$2(function(){return{current:re}},[])}function T$2(re,Y){var oe=p$1(t$1++,7);return C(oe.__H,Y)&&(oe.__=re(),oe.__H=Y,oe.__h=re),oe.__}function q$2(re,Y){return o$1=8,T$2(function(){return re},Y)}function j$2(){for(var re;re=f$2.shift();)if(re.__P&&re.__H)try{re.__H.__h.forEach(z$1),re.__H.__h.forEach(B$2),re.__H.__h=[]}catch(Y){re.__H.__h=[],c$1.__e(Y,re.__v)}}c$1.__b=function(re){r$1=null,e$1&&e$1(re)},c$1.__=function(re,Y){re&&Y.__k&&Y.__k.__m&&(re.__m=Y.__k.__m),s$1&&s$1(re,Y)},c$1.__r=function(re){a$1&&a$1(re),t$1=0;var Y=(r$1=re.__c).__H;Y&&(u$2===r$1?(Y.__h=[],r$1.__h=[],Y.__.forEach(function(oe){oe.__N&&(oe.__=oe.__N),oe.u=oe.__N=void 0})):(Y.__h.forEach(z$1),Y.__h.forEach(B$2),Y.__h=[],t$1=0)),u$2=r$1},c$1.diffed=function(re){v$1&&v$1(re);var Y=re.__c;Y&&Y.__H&&(Y.__H.__h.length&&(f$2.push(Y)!==1&&i$1===c$1.requestAnimationFrame||((i$1=c$1.requestAnimationFrame)||w$1)(j$2)),Y.__H.__.forEach(function(oe){oe.u&&(oe.__H=oe.u),oe.u=void 0})),u$2=r$1=null},c$1.__c=function(re,Y){Y.some(function(oe){try{oe.__h.forEach(z$1),oe.__h=oe.__h.filter(function(le){return!le.__||B$2(le)})}catch(le){Y.some(function(ue){ue.__h&&(ue.__h=[])}),Y=[],c$1.__e(le,oe.__v)}}),l$1&&l$1(re,Y)},c$1.unmount=function(re){m$1&&m$1(re);var Y,oe=re.__c;oe&&oe.__H&&(oe.__H.__.forEach(function(le){try{z$1(le)}catch(ue){Y=ue}}),oe.__H=void 0,Y&&c$1.__e(Y,oe.__v))};var k$1=typeof requestAnimationFrame=="function";function w$1(re){var Y,oe=function(){clearTimeout(le),k$1&&cancelAnimationFrame(Y),setTimeout(re)},le=setTimeout(oe,35);k$1&&(Y=requestAnimationFrame(oe))}function z$1(re){var Y=r$1,oe=re.__c;typeof oe=="function"&&(re.__c=void 0,oe()),r$1=Y}function B$2(re){var Y=r$1;re.__c=re.__(),r$1=Y}function C(re,Y){return!re||re.length!==Y.length||Y.some(function(oe,le){return oe!==re[le]})}function D$1(re,Y){return typeof Y=="function"?Y(re):Y}function g$1(re,Y){for(var oe in Y)re[oe]=Y[oe];return re}function E$1(re,Y){for(var oe in re)if(oe!=="__source"&&!(oe in Y))return!0;for(var le in Y)if(le!=="__source"&&re[le]!==Y[le])return!0;return!1}function N$1(re,Y){this.props=re,this.context=Y}(N$1.prototype=new x).isPureReactComponent=!0,N$1.prototype.shouldComponentUpdate=function(re,Y){return E$1(this.props,re)||E$1(this.state,Y)};var T$1=l$2.__b;l$2.__b=function(re){re.type&&re.type.__f&&re.ref&&(re.props.ref=re.ref,re.ref=null),T$1&&T$1(re)};var U=l$2.__e;l$2.__e=function(re,Y,oe,le){if(re.then){for(var ue,he=Y;he=he.__;)if((ue=he.__c)&&ue.__c)return Y.__e==null&&(Y.__e=oe.__e,Y.__k=oe.__k),ue.__c(re,Y)}U(re,Y,oe,le)};var F$1=l$2.unmount;function V$1(re,Y,oe){return re&&(re.__c&&re.__c.__H&&(re.__c.__H.__.forEach(function(le){typeof le.__c=="function"&&le.__c()}),re.__c.__H=null),(re=g$1({},re)).__c!=null&&(re.__c.__P===oe&&(re.__c.__P=Y),re.__c.__e=!0,re.__c=null),re.__k=re.__k&&re.__k.map(function(le){return V$1(le,Y,oe)})),re}function W$1(re,Y,oe){return re&&oe&&(re.__v=null,re.__k=re.__k&&re.__k.map(function(le){return W$1(le,Y,oe)}),re.__c&&re.__c.__P===Y&&(re.__e&&oe.appendChild(re.__e),re.__c.__e=!0,re.__c.__P=oe)),re}function P$1(){this.__u=0,this.o=null,this.__b=null}function j$1(re){if(!re.__)return null;var Y=re.__.__c;return Y&&Y.__a&&Y.__a(re)}function B$1(){this.i=null,this.l=null}l$2.unmount=function(re){var Y=re.__c;Y&&(Y.__z=!0),Y&&Y.__R&&Y.__R(),Y&&32&re.__u&&(re.type=null),F$1&&F$1(re)},(P$1.prototype=new x).__c=function(re,Y){var oe=Y.__c,le=this;le.o==null&&(le.o=[]),le.o.push(oe);var ue=j$1(le.__v),he=!1,fe=function(){he||le.__z||(he=!0,oe.__R=null,ue?ue(Se):Se())};oe.__R=fe;var _e=oe.__P;oe.__P=null;var Se=function(){if(!--le.__u){if(le.state.__a){var ve=le.state.__a;le.__v.__k[0]=W$1(ve,ve.__c.__P,ve.__c.__O)}var $e;for(le.setState({__a:le.__b=null});$e=le.o.pop();)$e.__P=_e,$e.forceUpdate()}};le.__u++||32&Y.__u||le.setState({__a:le.__b=le.__v.__k[0]}),re.then(fe,fe)},P$1.prototype.componentWillUnmount=function(){this.o=[]},P$1.prototype.render=function(re,Y){if(this.__b){if(this.__v.__k){var oe=document.createElement("div"),le=this.__v.__k[0].__c;this.__v.__k[0]=V$1(this.__b,oe,le.__O=le.__P)}this.__b=null}var ue=Y.__a&&_$1(k$2,null,re.fallback);return ue&&(ue.__u&=-33),[_$1(k$2,null,Y.__a?null:re.children),ue]};var H$1=function(re,Y,oe){if(++oe[1]===oe[0]&&re.l.delete(Y),re.props.revealOrder&&(re.props.revealOrder[0]!=="t"||!re.l.size))for(oe=re.i;oe;){for(;oe.length>3;)oe.pop()();if(oe[1]<oe[0])break;re.i=oe=oe[2]}};(B$1.prototype=new x).__a=function(re){var Y=this,oe=j$1(Y.__v),le=Y.l.get(re);return le[0]++,function(ue){var he=function(){Y.props.revealOrder?(le.push(ue),H$1(Y,re,le)):ue()};oe?oe(he):he()}},B$1.prototype.render=function(re){this.i=null,this.l=new Map;var Y=H$2(re.children);re.revealOrder&&re.revealOrder[0]==="b"&&Y.reverse();for(var oe=Y.length;oe--;)this.l.set(Y[oe],this.i=[1,0,this.i]);return re.children},B$1.prototype.componentDidUpdate=B$1.prototype.componentDidMount=function(){var re=this;this.l.forEach(function(Y,oe){H$1(re,oe,Y)})};var q$1=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,G=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,J$1=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,K$1=/[A-Z0-9]/g,Q$1=typeof document<"u",X$1=function(re){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(re)};function nn(re,Y,oe){return Y.__k==null&&(Y.textContent=""),G$1(re,Y),typeof oe=="function"&&oe(),re?re.__c:null}x.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(re){Object.defineProperty(x.prototype,re,{configurable:!0,get:function(){return this["UNSAFE_"+re]},set:function(Y){Object.defineProperty(this,re,{configurable:!0,writable:!0,value:Y})}})});var en=l$2.event;function rn(){}function un(){return this.cancelBubble}function on(){return this.defaultPrevented}l$2.event=function(re){return en&&(re=en(re)),re.persist=rn,re.isPropagationStopped=un,re.isDefaultPrevented=on,re.nativeEvent=re};var cn={enumerable:!1,configurable:!0,get:function(){return this.class}},fn=l$2.vnode;l$2.vnode=function(re){typeof re.type=="string"&&(function(Y){var oe=Y.props,le=Y.type,ue={},he=le.indexOf("-")===-1;for(var fe in oe){var _e=oe[fe];if(!(fe==="value"&&"defaultValue"in oe&&_e==null||Q$1&&fe==="children"&&le==="noscript"||fe==="class"||fe==="className")){var Se=fe.toLowerCase();fe==="defaultValue"&&"value"in oe&&oe.value==null?fe="value":fe==="download"&&_e===!0?_e="":Se==="translate"&&_e==="no"?_e=!1:Se[0]==="o"&&Se[1]==="n"?Se==="ondoubleclick"?fe="ondblclick":Se!=="onchange"||le!=="input"&&le!=="textarea"||X$1(oe.type)?Se==="onfocus"?fe="onfocusin":Se==="onblur"?fe="onfocusout":J$1.test(fe)&&(fe=Se):Se=fe="oninput":he&&G.test(fe)?fe=fe.replace(K$1,"-$&").toLowerCase():_e===null&&(_e=void 0),Se==="oninput"&&ue[fe=Se]&&(fe="oninputCapture"),ue[fe]=_e}}le=="select"&&ue.multiple&&Array.isArray(ue.value)&&(ue.value=H$2(oe.children).forEach(function(ve){ve.props.selected=ue.value.indexOf(ve.props.value)!=-1})),le=="select"&&ue.defaultValue!=null&&(ue.value=H$2(oe.children).forEach(function(ve){ve.props.selected=ue.multiple?ue.defaultValue.indexOf(ve.props.value)!=-1:ue.defaultValue==ve.props.value})),oe.class&&!oe.className?(ue.class=oe.class,Object.defineProperty(ue,"className",cn)):(oe.className&&!oe.class||oe.class&&oe.className)&&(ue.class=ue.className=oe.className),Y.props=ue})(re),re.$$typeof=q$1,fn&&fn(re)};var an=l$2.__r;l$2.__r=function(re){an&&an(re),re.__c};var sn=l$2.diffed;l$2.diffed=function(re){sn&&sn(re);var Y=re.props,oe=re.__e;oe!=null&&re.type==="textarea"&&"value"in Y&&Y.value!==oe.value&&(oe.value=Y.value==null?"":Y.value)};function debounce$1(re){let Y=null,oe;return(...le)=>(oe=le,Y||(Y=Promise.resolve().then(()=>(Y=null,re(...oe)))),Y)}class UIPlugin extends BasePlugin{#e;isTargetDOMEl;el;parent;title;getTargetPlugin(Y){let oe;if(typeof Y?.addTarget=="function")oe=Y,oe instanceof UIPlugin||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:oe,UIPlugin}}));else if(typeof Y=="function"){const le=Y;this.uppy.iteratePlugins(ue=>{ue instanceof le&&(oe=ue)})}return oe}mount(Y,oe){const le=oe.id,ue=findDOMElement(Y);if(ue){this.isTargetDOMEl=!0;const _e=document.createElement("div");return _e.classList.add("uppy-Root"),this.#e=debounce$1(Se=>{this.uppy.getPlugin(this.id)&&(nn(this.render(Se,_e),_e),this.afterUpdate())}),this.uppy.log(`Installing ${le} to a DOM element '${Y}'`),this.opts.replaceTargetContent&&(ue.innerHTML=""),nn(this.render(this.uppy.getState(),_e),_e),this.el=_e,ue.appendChild(_e),_e.dir=this.opts.direction||getTextDirection(_e)||"ltr",this.onMount(),this.el}const he=this.getTargetPlugin(Y);if(he)return this.uppy.log(`Installing ${le} to ${he.id}`),this.parent=he,this.el=he.addTarget(oe),this.onMount(),this.el;this.uppy.log(`Not installing ${le}`);let fe=`Invalid target option given to ${le}.`;throw typeof Y=="function"?fe+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":fe+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(fe)}render(Y,oe){throw new Error("Extend the render method to add your plugin to a DOM element")}update(Y){this.el!=null&&this.#e?.(Y)}unmount(){this.isTargetDOMEl&&this.el?.remove(),this.onUnmount()}onMount(){}onUnmount(){}}const version$7="4.3.2",packageJson$6={version:version$7};class DefaultStore{static VERSION=packageJson$6.version;state={};#e=new Set;getState(){return this.state}setState(Y){const oe={...this.state},le={...this.state,...Y};this.state=le,this.#t(oe,le,Y)}subscribe(Y){return this.#e.add(Y),()=>{this.#e.delete(Y)}}#t(...Y){this.#e.forEach(oe=>{oe(...Y)})}}function getFileNameAndExtension(re){const Y=re.lastIndexOf(".");return Y===-1||Y===re.length-1?{name:re,extension:void 0}:{name:re.slice(0,Y),extension:re.slice(Y+1)}}const mimeTypes={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function getFileType(re){if(re.type)return re.type;const Y=re.name?getFileNameAndExtension(re.name).extension?.toLowerCase():null;return Y&&Y in mimeTypes?mimeTypes[Y]:"application/octet-stream"}function encodeCharacter(re){return re.charCodeAt(0).toString(32)}function encodeFilename(re){let Y="";return re.replace(/[^A-Z0-9]/gi,oe=>(Y+=`-${encodeCharacter(oe)}`,"/"))+Y}function generateFileID(re,Y){let oe=Y||"uppy";return typeof re.name=="string"&&(oe+=`-${encodeFilename(re.name.toLowerCase())}`),re.type!==void 0&&(oe+=`-${re.type}`),re.meta&&typeof re.meta.relativePath=="string"&&(oe+=`-${encodeFilename(re.meta.relativePath.toLowerCase())}`),re.data.size!==void 0&&(oe+=`-${re.data.size}`),re.data.lastModified!==void 0&&(oe+=`-${re.data.lastModified}`),oe}function hasFileStableId(re){return!re.isRemote||!re.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(re.remote.provider)}function getSafeFileId(re,Y){if(hasFileStableId(re))return re.id;const oe=getFileType(re);return generateFileID({...re,type:oe},Y)}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function re(Y){var oe=typeof Y;return Y!=null&&(oe=="object"||oe=="function")}return isObject_1=re,isObject_1}var _freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var re=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal=re,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var re=require_freeGlobal(),Y=typeof self=="object"&&self&&self.Object===Object&&self,oe=re||Y||Function("return this")();return _root=oe,_root}var now_1,hasRequiredNow;function requireNow(){if(hasRequiredNow)return now_1;hasRequiredNow=1;var re=require_root(),Y=function(){return re.Date.now()};return now_1=Y,now_1}var _trimmedEndIndex,hasRequired_trimmedEndIndex;function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var re=/\s/;function Y(oe){for(var le=oe.length;le--&&re.test(oe.charAt(le)););return le}return _trimmedEndIndex=Y,_trimmedEndIndex}var _baseTrim,hasRequired_baseTrim;function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var re=require_trimmedEndIndex(),Y=/^\s+/;function oe(le){return le&&le.slice(0,re(le)+1).replace(Y,"")}return _baseTrim=oe,_baseTrim}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var re=require_root(),Y=re.Symbol;return _Symbol=Y,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var re=require_Symbol(),Y=Object.prototype,oe=Y.hasOwnProperty,le=Y.toString,ue=re?re.toStringTag:void 0;function he(fe){var _e=oe.call(fe,ue),Se=fe[ue];try{fe[ue]=void 0;var ve=!0}catch{}var $e=le.call(fe);return ve&&(_e?fe[ue]=Se:delete fe[ue]),$e}return _getRawTag=he,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var re=Object.prototype,Y=re.toString;function oe(le){return Y.call(le)}return _objectToString=oe,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var re=require_Symbol(),Y=require_getRawTag(),oe=require_objectToString(),le="[object Null]",ue="[object Undefined]",he=re?re.toStringTag:void 0;function fe(_e){return _e==null?_e===void 0?ue:le:he&&he in Object(_e)?Y(_e):oe(_e)}return _baseGetTag=fe,_baseGetTag}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function re(Y){return Y!=null&&typeof Y=="object"}return isObjectLike_1=re,isObjectLike_1}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var re=require_baseGetTag(),Y=requireIsObjectLike(),oe="[object Symbol]";function le(ue){return typeof ue=="symbol"||Y(ue)&&re(ue)==oe}return isSymbol_1=le,isSymbol_1}var toNumber_1,hasRequiredToNumber;function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var re=require_baseTrim(),Y=requireIsObject(),oe=requireIsSymbol(),le=NaN,ue=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,fe=/^0o[0-7]+$/i,_e=parseInt;function Se(ve){if(typeof ve=="number")return ve;if(oe(ve))return le;if(Y(ve)){var $e=typeof ve.valueOf=="function"?ve.valueOf():ve;ve=Y($e)?$e+"":$e}if(typeof ve!="string")return ve===0?ve:+ve;ve=re(ve);var Ee=he.test(ve);return Ee||fe.test(ve)?_e(ve.slice(2),Ee?2:8):ue.test(ve)?le:+ve}return toNumber_1=Se,toNumber_1}var debounce_1,hasRequiredDebounce;function requireDebounce(){if(hasRequiredDebounce)return debounce_1;hasRequiredDebounce=1;var re=requireIsObject(),Y=requireNow(),oe=requireToNumber(),le="Expected a function",ue=Math.max,he=Math.min;function fe(_e,Se,ve){var $e,Ee,Ue,Re,xe,Ne,Ie=0,De=!1,Pe=!1,Ae=!0;if(typeof _e!="function")throw new TypeError(le);Se=oe(Se)||0,re(ve)&&(De=!!ve.leading,Pe="maxWait"in ve,Ue=Pe?ue(oe(ve.maxWait)||0,Se):Ue,Ae="trailing"in ve?!!ve.trailing:Ae);function Be(je){var Ze=$e,tt=Ee;return $e=Ee=void 0,Ie=je,Re=_e.apply(tt,Ze),Re}function Le(je){return Ie=je,xe=setTimeout(Ge,Se),De?Be(je):Re}function Ve(je){var Ze=je-Ne,tt=je-Ie,Ce=Se-Ze;return Pe?he(Ce,Ue-tt):Ce}function ze(je){var Ze=je-Ne,tt=je-Ie;return Ne===void 0||Ze>=Se||Ze<0||Pe&&tt>=Ue}function Ge(){var je=Y();if(ze(je))return We(je);xe=setTimeout(Ge,Ve(je))}function We(je){return xe=void 0,Ae&&$e?Be(je):($e=Ee=void 0,Re)}function Qe(){xe!==void 0&&clearTimeout(xe),Ie=0,$e=Ne=Ee=xe=void 0}function Ye(){return xe===void 0?Re:We(Y())}function et(){var je=Y(),Ze=ze(je);if($e=arguments,Ee=this,Ne=je,Ze){if(xe===void 0)return Le(Ne);if(Pe)return clearTimeout(xe),xe=setTimeout(Ge,Se),Be(Ne)}return xe===void 0&&(xe=setTimeout(Ge,Se)),Re}return et.cancel=Qe,et.flush=Ye,et}return debounce_1=fe,debounce_1}var throttle_1,hasRequiredThrottle;function requireThrottle(){if(hasRequiredThrottle)return throttle_1;hasRequiredThrottle=1;var re=requireDebounce(),Y=requireIsObject(),oe="Expected a function";function le(ue,he,fe){var _e=!0,Se=!0;if(typeof ue!="function")throw new TypeError(oe);return Y(fe)&&(_e="leading"in fe?!!fe.leading:_e,Se="trailing"in fe?!!fe.trailing:Se),re(ue,he,{leading:_e,maxWait:he,trailing:Se})}return throttle_1=le,throttle_1}var throttleExports=requireThrottle();const throttle=getDefaultExportFromCjs(throttleExports);var namespaceEmitter,hasRequiredNamespaceEmitter;function requireNamespaceEmitter(){return hasRequiredNamespaceEmitter||(hasRequiredNamespaceEmitter=1,namespaceEmitter=function(){var Y={},oe=Y._fns={};Y.emit=function(fe,_e,Se,ve,$e,Ee,Ue){var Re=le(fe);Re.length&&ue(fe,Re,[_e,Se,ve,$e,Ee,Ue])},Y.on=function(fe,_e){oe[fe]||(oe[fe]=[]),oe[fe].push(_e)},Y.once=function(fe,_e){function Se(){_e.apply(this,arguments),Y.off(fe,Se)}this.on(fe,Se)},Y.off=function(fe,_e){var Se=[];if(fe&&_e){var ve=this._fns[fe],$e=0,Ee=ve?ve.length:0;for($e;$e<Ee;$e++)ve[$e]!==_e&&Se.push(ve[$e])}Se.length?this._fns[fe]=Se:delete this._fns[fe]};function le(he){var fe=oe[he]?oe[he]:[],_e=he.indexOf(":"),Se=_e===-1?[he]:[he.substring(0,_e),he.substring(_e+1)],ve=Object.keys(oe),$e=0,Ee=ve.length;for($e;$e<Ee;$e++){var Ue=ve[$e];if(Ue==="*"&&(fe=fe.concat(oe[Ue])),Se.length===2&&Se[0]===Ue){fe=fe.concat(oe[Ue]);break}}return fe}function ue(he,fe,_e){var Se=0,ve=fe.length;for(Se;Se<ve&&fe[Se];Se++)fe[Se].event=he,fe[Se].apply(fe[Se],_e)}return Y}),namespaceEmitter}var namespaceEmitterExports=requireNamespaceEmitter();const ee$1=getDefaultExportFromCjs(namespaceEmitterExports);let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",nanoid=(re=21)=>{let Y="",oe=re|0;for(;oe--;)Y+=urlAlphabet[Math.random()*64|0];return Y};const version$6="4.5.3",packageJson$5={version:version$6};function getFileName(re,Y){return Y.name?Y.name:re.split("/")[0]==="image"?`${re.split("/")[0]}.${re.split("/")[1]}`:"noname"}const locale$3={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var prettierBytes$1,hasRequiredPrettierBytes;function requirePrettierBytes(){return hasRequiredPrettierBytes||(hasRequiredPrettierBytes=1,prettierBytes$1=function(Y){if(typeof Y!="number"||Number.isNaN(Y))throw new TypeError(`Expected a number, got ${typeof Y}`);const oe=Y<0;let le=Math.abs(Y);if(oe&&(le=-le),le===0)return"0 B";const ue=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],he=Math.min(Math.floor(Math.log(le)/Math.log(1024)),ue.length-1),fe=Number(le/1024**he),_e=ue[he];return`${fe>=10||fe%1===0?Math.round(fe):fe.toFixed(1)} ${_e}`}),prettierBytes$1}var prettierBytesExports=requirePrettierBytes();const prettierBytes=getDefaultExportFromCjs(prettierBytesExports);var wildcard,hasRequiredWildcard;function requireWildcard(){if(hasRequiredWildcard)return wildcard;hasRequiredWildcard=1;function re(Y,oe){this.text=Y=Y||"",this.hasWild=~Y.indexOf("*"),this.separator=oe,this.parts=Y.split(oe)}return re.prototype.match=function(Y){var oe=!0,le=this.parts,ue,he=le.length,fe;if(typeof Y=="string"||Y instanceof String)if(!this.hasWild&&this.text!=Y)oe=!1;else{for(fe=(Y||"").split(this.separator),ue=0;oe&&ue<he;ue++)le[ue]!=="*"&&(ue<fe.length?oe=le[ue]===fe[ue]:oe=!1);oe=oe&&fe}else if(typeof Y.splice=="function")for(oe=[],ue=Y.length;ue--;)this.match(Y[ue])&&(oe[oe.length]=Y[ue]);else if(typeof Y=="object"){oe={};for(var _e in Y)this.match(_e)&&(oe[_e]=Y[_e])}return oe},wildcard=function(Y,oe,le){var ue=new re(Y,le||/[\/\.]/);return typeof oe<"u"?ue.match(oe):ue},wildcard}var mimeMatch,hasRequiredMimeMatch;function requireMimeMatch(){if(hasRequiredMimeMatch)return mimeMatch;hasRequiredMimeMatch=1;var re=requireWildcard(),Y=/[\/\+\.]/;return mimeMatch=function(oe,le){function ue(he){var fe=re(he,oe,Y);return fe&&fe.length>=2}return le?ue(le.split(";")[0]):ue},mimeMatch}var mimeMatchExports=requireMimeMatch();const match=getDefaultExportFromCjs(mimeMatchExports),defaultOptions$6={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class RestrictionError extends Error{isUserFacing;file;constructor(Y,oe){super(Y),this.isUserFacing=oe?.isUserFacing??!0,oe?.file&&(this.file=oe.file)}isRestriction=!0}class Restricter{getI18n;getOpts;constructor(Y,oe){this.getI18n=oe,this.getOpts=()=>{const le=Y();if(le.restrictions?.allowedFileTypes!=null&&!Array.isArray(le.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return le}}validateAggregateRestrictions(Y,oe){const{maxTotalFileSize:le,maxNumberOfFiles:ue}=this.getOpts().restrictions;if(ue&&Y.filter(fe=>!fe.isGhost).length+oe.length>ue)throw new RestrictionError(`${this.getI18n()("youCanOnlyUploadX",{smart_count:ue})}`);if(le){const he=[...Y,...oe].reduce((fe,_e)=>fe+(_e.size??0),0);if(he>le)throw new RestrictionError(this.getI18n()("aggregateExceedsSize",{sizeAllowed:prettierBytes(le),size:prettierBytes(he)}))}}validateSingleFile(Y){const{maxFileSize:oe,minFileSize:le,allowedFileTypes:ue}=this.getOpts().restrictions;if(ue&&!ue.some(fe=>fe.includes("/")?Y.type?match(Y.type.replace(/;.*?$/,""),fe):!1:fe[0]==="."&&Y.extension?Y.extension.toLowerCase()===fe.slice(1).toLowerCase():!1)){const fe=ue.join(", ");throw new RestrictionError(this.getI18n()("youCanOnlyUploadFileTypes",{types:fe}),{file:Y})}if(oe&&Y.size!=null&&Y.size>oe)throw new RestrictionError(this.getI18n()("exceedsSize",{size:prettierBytes(oe),file:Y.name??this.getI18n()("unnamed")}),{file:Y});if(le&&Y.size!=null&&Y.size<le)throw new RestrictionError(this.getI18n()("inferiorSize",{size:prettierBytes(le)}),{file:Y})}validate(Y,oe){oe.forEach(le=>{this.validateSingleFile(le)}),this.validateAggregateRestrictions(Y,oe)}validateMinNumberOfFiles(Y){const{minNumberOfFiles:oe}=this.getOpts().restrictions;if(oe&&Object.keys(Y).length<oe)throw new RestrictionError(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:oe}))}getMissingRequiredMetaFields(Y){const oe=new RestrictionError(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:Y.name??this.getI18n()("unnamed")})),{requiredMetaFields:le}=this.getOpts().restrictions,ue=[];for(const he of le)(!Object.hasOwn(Y.meta,he)||Y.meta[he]==="")&&ue.push(he);return{missingFields:ue,error:oe}}}function supportsUploadProgress(re){if(re==null&&typeof navigator<"u"&&(re=navigator.userAgent),!re)return!0;const Y=/Edge\/(\d+\.\d+)/.exec(re);if(!Y)return!0;const le=Y[1].split(".",2),ue=parseInt(le[0],10),he=parseInt(le[1],10);return ue<15||ue===15&&he<15063||ue>18||ue===18&&he>=18218}const defaultUploadState={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};class Uppy{static VERSION=packageJson$5.version;#e=Object.create(null);#t;#n;#r=ee$1();#i=new Set;#o=new Set;#a=new Set;defaultLocale;locale;opts;store;i18n;i18nArray;scheduledAutoProceed=null;wasOffline=!1;constructor(Y){this.defaultLocale=locale$3;const oe={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:defaultOptions$6,meta:{},onBeforeFileAdded:(ue,he)=>!Object.hasOwn(he,ue.id),onBeforeUpload:ue=>ue,store:new DefaultStore,logger:justErrorsLogger,infoTimeout:5e3},le={...oe,...Y};this.opts={...le,restrictions:{...oe.restrictions,...Y?.restrictions}},Y?.logger&&Y.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):Y?.debug&&(this.opts.logger=debugLogger),this.log(`Using Core v${Uppy.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...defaultUploadState,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:supportsUploadProgress(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),this.#t=new Restricter(()=>this.opts,()=>this.i18n),this.#n=this.store.subscribe((ue,he,fe)=>{this.emit("state-update",ue,he,fe),this.updateAll(he)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),this.#F()}emit(Y,...oe){this.#r.emit(Y,...oe)}on(Y,oe){return this.#r.on(Y,oe),this}once(Y,oe){return this.#r.once(Y,oe),this}off(Y,oe){return this.#r.off(Y,oe),this}updateAll(Y){this.iteratePlugins(oe=>{oe.update(Y)})}setState(Y){this.store.setState(Y)}getState(){return this.store.getState()}patchFilesState(Y){const oe=this.getState().files;this.setState({files:{...oe,...Object.fromEntries(Object.entries(Y).map(([le,ue])=>[le,{...oe[le],...ue}]))}})}setFileState(Y,oe){if(!this.getState().files[Y])throw new Error(`Cant set state for ${Y} (the file could have been removed)`);this.patchFilesState({[Y]:oe})}i18nInit(){const Y=le=>this.log(`Missing i18n string: ${le}`,"error"),oe=new Translator([this.defaultLocale,this.opts.locale],{onMissingKey:Y});this.i18n=oe.translate.bind(oe),this.i18nArray=oe.translateArray.bind(oe),this.locale=oe.locale}setOptions(Y){this.opts={...this.opts,...Y,restrictions:{...this.opts.restrictions,...Y?.restrictions}},Y.meta&&this.setMeta(Y.meta),this.i18nInit(),Y.locale&&this.iteratePlugins(oe=>{oe.setOptions(Y)}),this.setState(void 0)}resetProgress(){const Y={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},oe={...this.getState().files},le=Object.create(null);Object.keys(oe).forEach(ue=>{le[ue]={...oe[ue],progress:{...oe[ue].progress,...Y},tus:void 0,transloadit:void 0}}),this.setState({files:le,...defaultUploadState})}clear(){const{capabilities:Y,currentUploads:oe}=this.getState();if(Object.keys(oe).length>0&&!Y.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...defaultUploadState,files:{}})}addPreProcessor(Y){this.#i.add(Y)}removePreProcessor(Y){return this.#i.delete(Y)}addPostProcessor(Y){this.#a.add(Y)}removePostProcessor(Y){return this.#a.delete(Y)}addUploader(Y){this.#o.add(Y)}removeUploader(Y){return this.#o.delete(Y)}setMeta(Y){const oe={...this.getState().meta,...Y},le={...this.getState().files};Object.keys(le).forEach(ue=>{le[ue]={...le[ue],meta:{...le[ue].meta,...Y}}}),this.log("Adding metadata:"),this.log(Y),this.setState({meta:oe,files:le})}setFileMeta(Y,oe){const le={...this.getState().files};if(!le[Y]){this.log(`Was trying to set metadata for a file that has been removed: ${Y}`);return}const ue={...le[Y].meta,...oe};le[Y]={...le[Y],meta:ue},this.setState({files:le})}getFile(Y){return this.getState().files[Y]}getFiles(){const{files:Y}=this.getState();return Object.values(Y)}getFilesByIds(Y){return Y.map(oe=>this.getFile(oe))}getObjectOfFilesPerState(){const{files:Y,totalProgress:oe,error:le}=this.getState(),ue=Object.values(Y),he=[],fe=[],_e=[],Se=[],ve=[],$e=[],Ee=[],Ue=[],Re=[];for(const xe of ue){const{progress:Ne}=xe;!Ne.uploadComplete&&Ne.uploadStarted&&(he.push(xe),xe.isPaused||Ue.push(xe)),Ne.uploadStarted||fe.push(xe),(Ne.uploadStarted||Ne.preprocess||Ne.postprocess)&&_e.push(xe),Ne.uploadStarted&&Se.push(xe),xe.isPaused&&ve.push(xe),Ne.uploadComplete&&$e.push(xe),xe.error&&Ee.push(xe),(Ne.preprocess||Ne.postprocess)&&Re.push(xe)}return{newFiles:fe,startedFiles:_e,uploadStartedFiles:Se,pausedFiles:ve,completeFiles:$e,erroredFiles:Ee,inProgressFiles:he,inProgressNotPausedFiles:Ue,processingFiles:Re,isUploadStarted:Se.length>0,isAllComplete:oe===100&&$e.length===ue.length&&Re.length===0,isAllErrored:!!le&&Ee.length===ue.length,isAllPaused:he.length!==0&&ve.length===he.length,isUploadInProgress:he.length>0,isSomeGhost:ue.some(xe=>xe.isGhost)}}#s(Y){for(const fe of Y)fe.isRestriction?this.emit("restriction-failed",fe.file,fe):this.emit("error",fe,fe.file),this.log(fe,"warning");const oe=Y.filter(fe=>fe.isUserFacing),le=4,ue=oe.slice(0,le),he=oe.slice(le);ue.forEach(({message:fe,details:_e=""})=>{this.info({message:fe,details:_e},"error",this.opts.infoTimeout)}),he.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:he.length})})}validateRestrictions(Y,oe=this.getFiles()){try{this.#t.validate(oe,[Y])}catch(le){return le}return null}validateSingleFile(Y){try{this.#t.validateSingleFile(Y)}catch(oe){return oe.message}return null}validateAggregateRestrictions(Y){const oe=this.getFiles();try{this.#t.validateAggregateRestrictions(oe,Y)}catch(le){return le.message}return null}#l(Y){const{missingFields:oe,error:le}=this.#t.getMissingRequiredMetaFields(Y);return oe.length>0?(this.setFileState(Y.id,{missingRequiredMetaFields:oe,error:le.message}),this.log(le.message),this.emit("restriction-failed",Y,le),!1):(oe.length===0&&Y.missingRequiredMetaFields&&this.setFileState(Y.id,{missingRequiredMetaFields:[]}),!0)}#p(Y){let oe=!0;for(const le of Object.values(Y))this.#l(le)||(oe=!1);return oe}#u(Y){const{allowNewUpload:oe}=this.getState();if(oe===!1){const le=new RestrictionError(this.i18n("noMoreFilesAllowed"),{file:Y});throw this.#s([le]),le}}checkIfFileAlreadyExists(Y){const{files:oe}=this.getState();return!!(oe[Y]&&!oe[Y].isGhost)}#h(Y){const oe=Y instanceof File?{name:Y.name,type:Y.type,size:Y.size,data:Y}:Y,le=getFileType(oe),ue=getFileName(le,oe),he=getFileNameAndExtension(ue).extension,fe=getSafeFileId(oe,this.getID()),_e=oe.meta||{};_e.name=ue,_e.type=le;const Se=Number.isFinite(oe.data.size)?oe.data.size:null;return{source:oe.source||"",id:fe,name:ue,extension:he||"",meta:{...this.getState().meta,..._e},type:le,data:oe.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:Se,uploadComplete:!1,uploadStarted:null},size:Se,isGhost:!1,isRemote:oe.isRemote||!1,remote:oe.remote,preview:oe.preview}}#d(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(Y=>{Y.isRestriction||this.log(Y.stack||Y.message||Y)})},4))}#c(Y){let{files:oe}=this.getState(),le={...oe};const ue=[],he=[];for(const fe of Y)try{let _e=this.#h(fe);const Se=oe[_e.id]?.isGhost;Se&&(_e={...oe[_e.id],isGhost:!1,data:fe.data},this.log(`Replaced the blob in the restored ghost file: ${_e.name}, ${_e.id}`));const ve=this.opts.onBeforeFileAdded(_e,le);if(oe=this.getState().files,le={...oe,...le},!ve&&this.checkIfFileAlreadyExists(_e.id))throw new RestrictionError(this.i18n("noDuplicates",{fileName:_e.name??this.i18n("unnamed")}),{file:fe});if(ve===!1&&!Se)throw new RestrictionError("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:fe});typeof ve=="object"&&ve!==null&&(_e=ve),this.#t.validateSingleFile(_e),le[_e.id]=_e,ue.push(_e)}catch(_e){he.push(_e)}try{this.#t.validateAggregateRestrictions(Object.values(oe),ue)}catch(fe){return he.push(fe),{nextFilesState:oe,validFilesToAdd:[],errors:he}}return{nextFilesState:le,validFilesToAdd:ue,errors:he}}addFile(Y){this.#u(Y);const{nextFilesState:oe,validFilesToAdd:le,errors:ue}=this.#c([Y]),he=ue.filter(_e=>_e.isRestriction);if(this.#s(he),ue.length>0)throw ue[0];this.setState({files:oe});const[fe]=le;return this.emit("file-added",fe),this.emit("files-added",le),this.log(`Added file: ${fe.name}, ${fe.id}, mime type: ${fe.type}`),this.#d(),fe.id}addFiles(Y){this.#u();const{nextFilesState:oe,validFilesToAdd:le,errors:ue}=this.#c(Y),he=ue.filter(_e=>_e.isRestriction);this.#s(he);const fe=ue.filter(_e=>!_e.isRestriction);if(fe.length>0){let _e=`Multiple errors occurred while adding files:
`;if(fe.forEach(Se=>{_e+=`
 * ${Se.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:fe.length}),details:_e},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(fe,_e);{const Se=new Error(_e);throw Se.errors=fe,Se}}this.setState({files:oe}),le.forEach(_e=>{this.emit("file-added",_e)}),this.emit("files-added",le),le.length>5?this.log(`Added batch of ${le.length} files`):Object.values(le).forEach(_e=>{this.log(`Added file: ${_e.name}
 id: ${_e.id}
 type: ${_e.type}`)}),le.length>0&&this.#d()}removeFiles(Y){const{files:oe,currentUploads:le}=this.getState(),ue={...oe},he={...le},fe=Object.create(null);Y.forEach($e=>{oe[$e]&&(fe[$e]=oe[$e],delete ue[$e])});function _e($e){return fe[$e]===void 0}Object.keys(he).forEach($e=>{const Ee=le[$e].fileIDs.filter(_e);if(Ee.length===0){delete he[$e];return}const{capabilities:Ue}=this.getState();if(Ee.length!==le[$e].fileIDs.length&&!Ue.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");he[$e]={...le[$e],fileIDs:Ee}});const Se={currentUploads:he,files:ue};Object.keys(ue).length===0&&(Se.allowNewUpload=!0,Se.error=null,Se.recoveredState=null),this.setState(Se),this.#y();const ve=Object.keys(fe);ve.forEach($e=>{this.emit("file-removed",fe[$e])}),ve.length>5?this.log(`Removed ${ve.length} files`):this.log(`Removed files: ${ve.join(", ")}`)}removeFile(Y){this.removeFiles([Y])}pauseResume(Y){if(!this.getState().capabilities.resumableUploads||this.getFile(Y).progress.uploadComplete)return;const oe=this.getFile(Y),ue=!(oe.isPaused||!1);return this.setFileState(Y,{isPaused:ue}),this.emit("upload-pause",oe,ue),ue}pauseAll(){const Y={...this.getState().files};Object.keys(Y).filter(le=>!Y[le].progress.uploadComplete&&Y[le].progress.uploadStarted).forEach(le=>{const ue={...Y[le],isPaused:!0};Y[le]=ue}),this.setState({files:Y}),this.emit("pause-all")}resumeAll(){const Y={...this.getState().files};Object.keys(Y).filter(le=>!Y[le].progress.uploadComplete&&Y[le].progress.uploadStarted).forEach(le=>{const ue={...Y[le],isPaused:!1,error:null};Y[le]=ue}),this.setState({files:Y}),this.emit("resume-all")}#f(){const{files:Y}=this.getState();return Object.keys(Y).filter(oe=>{const le=Y[oe];return le.error&&(!le.missingRequiredMetaFields||le.missingRequiredMetaFields.length===0)})}async#m(){const Y=this.#f(),oe={...this.getState().files};if(Y.forEach(ue=>{oe[ue]={...oe[ue],isPaused:!1,error:null}}),this.setState({files:oe,error:null}),this.emit("retry-all",this.getFilesByIds(Y)),Y.length===0)return{successful:[],failed:[]};const le=this.#b(Y,{forceAllowNewUpload:!0});return this.#_(le)}async retryAll(){const Y=await this.#m();return this.emit("complete",Y),Y}cancelAll(){this.emit("cancel-all");const{files:Y}=this.getState(),oe=Object.keys(Y);oe.length&&this.removeFiles(oe),this.setState(defaultUploadState)}retryUpload(Y){this.setFileState(Y,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(Y));const oe=this.#b([Y],{forceAllowNewUpload:!0});return this.#_(oe)}logout(){this.iteratePlugins(Y=>{Y.provider?.logout?.()})}#v=(Y,oe)=>{const le=Y?this.getFile(Y.id):void 0;if(Y==null||!le){this.log(`Not setting progress for a file that has been removed: ${Y?.id}`);return}if(le.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${Y.id}`);return}const ue={bytesTotal:oe.bytesTotal,percentage:oe.bytesTotal!=null&&Number.isFinite(oe.bytesTotal)&&oe.bytesTotal>0?Math.round(oe.bytesUploaded/oe.bytesTotal*100):void 0};le.progress.uploadStarted!=null?this.setFileState(Y.id,{progress:{...le.progress,...ue,bytesUploaded:oe.bytesUploaded}}):this.setFileState(Y.id,{progress:{...le.progress,...ue}}),this.#y()};#S(){const Y=this.#E();let oe=null;Y!=null&&(oe=Math.round(Y*100),oe>100?oe=100:oe<0&&(oe=0)),this.emit("progress",oe??0),this.setState({totalProgress:oe??0})}#y=throttle(()=>this.#S(),500,{leading:!0,trailing:!0});[Symbol.for("uppy test: updateTotalProgress")](){return this.#S()}#E(){const oe=this.getFiles().filter(Se=>Se.progress.uploadStarted||Se.progress.preprocess||Se.progress.postprocess);if(oe.length===0)return 0;if(oe.every(Se=>Se.progress.uploadComplete))return 1;const le=Se=>Se.progress.bytesTotal!=null&&Se.progress.bytesTotal!==0,ue=oe.filter(le),he=oe.filter(Se=>!le(Se));if(ue.every(Se=>Se.progress.uploadComplete)&&he.length>0&&!he.every(Se=>Se.progress.uploadComplete))return null;const fe=ue.reduce((Se,ve)=>Se+(ve.progress.bytesTotal??0),0),_e=ue.reduce((Se,ve)=>Se+(ve.progress.bytesUploaded||0),0);return fe===0?0:_e/fe}#F(){const Y=(ue,he,fe)=>{let _e=ue.message||"Unknown error";ue.details&&(_e+=` ${ue.details}`),this.setState({error:_e}),he!=null&&he.id in this.getState().files&&this.setFileState(he.id,{error:_e,response:fe})};this.on("error",Y),this.on("upload-error",(ue,he,fe)=>{if(Y(he,ue,fe),typeof he=="object"&&he.message){this.log(he.message,"error");const _e=new Error(this.i18n("failedToUpload",{file:ue?.name??""}));_e.isUserFacing=!0,_e.details=he.message,he.details&&(_e.details+=` ${he.details}`),this.#s([_e])}else this.#s([he])});let oe=null;this.on("upload-stalled",(ue,he)=>{const{message:fe}=ue,_e=he.map(Se=>Se.meta.name).join(", ");oe||(this.info({message:fe,details:_e},"warning",this.opts.infoTimeout),oe=setTimeout(()=>{oe=null},this.opts.infoTimeout)),this.log(`${fe} ${_e}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const le=ue=>{const he=ue.filter(_e=>{const Se=_e!=null&&this.getFile(_e.id);return Se||this.log(`Not setting progress for a file that has been removed: ${_e?.id}`),Se}),fe=Object.fromEntries(he.map(_e=>[_e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:_e.size}}]));this.patchFilesState(fe)};this.on("upload-start",le),this.on("upload-progress",this.#v),this.on("upload-success",(ue,he)=>{if(ue==null||!this.getFile(ue.id)){this.log(`Not setting progress for a file that has been removed: ${ue?.id}`);return}const fe=this.getFile(ue.id).progress;this.setFileState(ue.id,{progress:{...fe,postprocess:this.#a.size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:fe.bytesTotal},response:he,uploadURL:he.uploadURL,isPaused:!1}),ue.size==null&&this.setFileState(ue.id,{size:he.bytesUploaded||fe.bytesTotal}),this.#y()}),this.on("preprocess-progress",(ue,he)=>{if(ue==null||!this.getFile(ue.id)){this.log(`Not setting progress for a file that has been removed: ${ue?.id}`);return}this.setFileState(ue.id,{progress:{...this.getFile(ue.id).progress,preprocess:he}})}),this.on("preprocess-complete",ue=>{if(ue==null||!this.getFile(ue.id)){this.log(`Not setting progress for a file that has been removed: ${ue?.id}`);return}const he={...this.getState().files};he[ue.id]={...he[ue.id],progress:{...he[ue.id].progress}},delete he[ue.id].progress.preprocess,this.setState({files:he})}),this.on("postprocess-progress",(ue,he)=>{if(ue==null||!this.getFile(ue.id)){this.log(`Not setting progress for a file that has been removed: ${ue?.id}`);return}this.setFileState(ue.id,{progress:{...this.getState().files[ue.id].progress,postprocess:he}})}),this.on("postprocess-complete",ue=>{if(ue==null||!this.getFile(ue.id)){this.log(`Not setting progress for a file that has been removed: ${ue?.id}`);return}const he={...this.getState().files};he[ue.id]={...he[ue.id],progress:{...he[ue.id].progress}},delete he[ue.id].progress.postprocess,this.setState({files:he})}),this.on("restored",()=>{this.#y()}),this.on("dashboard:file-edit-complete",ue=>{ue&&this.#l(ue)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",this.#g),window.addEventListener("offline",this.#g),setTimeout(this.#g,3e3))}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}#g=this.updateOnlineStatus.bind(this);getID(){return this.opts.id}use(Y,...oe){if(typeof Y!="function"){const fe=`Expected a plugin class, but got ${Y===null?"null":typeof Y}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(fe)}const le=new Y(this,...oe),ue=le.id;if(!ue)throw new Error("Your plugin must have an id");if(!le.type)throw new Error("Your plugin must have a type");const he=this.getPlugin(ue);if(he){const fe=`Already found a plugin named '${he.id}'. Tried to use: '${ue}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(fe)}return Y.VERSION&&this.log(`Using ${ue} v${Y.VERSION}`),le.type in this.#e?this.#e[le.type].push(le):this.#e[le.type]=[le],le.install(),this.emit("plugin-added",le),this}getPlugin(Y){for(const oe of Object.values(this.#e)){const le=oe.find(ue=>ue.id===Y);if(le!=null)return le}}[Symbol.for("uppy test: getPlugins")](Y){return this.#e[Y]}iteratePlugins(Y){Object.values(this.#e).flat(1).forEach(Y)}removePlugin(Y){this.log(`Removing plugin ${Y.id}`),this.emit("plugin-remove",Y),Y.uninstall&&Y.uninstall();const oe=this.#e[Y.type],le=oe.findIndex(fe=>fe.id===Y.id);le!==-1&&oe.splice(le,1);const he={plugins:{...this.getState().plugins,[Y.id]:void 0}};this.setState(he)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),this.#n(),this.iteratePlugins(Y=>{this.removePlugin(Y)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",this.#g),window.removeEventListener("offline",this.#g))}hideInfo(){const{info:Y}=this.getState();this.setState({info:Y.slice(1)}),this.emit("info-hidden")}info(Y,oe="info",le=3e3){const ue=typeof Y=="object";this.setState({info:[...this.getState().info,{type:oe,message:ue?Y.message:Y,details:ue?Y.details:null}]}),setTimeout(()=>this.hideInfo(),le),this.emit("info-visible")}log(Y,oe){const{logger:le}=this.opts;switch(oe){case"error":le.error(Y);break;case"warning":le.warn(Y);break;default:le.debug(Y);break}}#$=new Map;registerRequestClient(Y,oe){this.#$.set(Y,oe)}getRequestClientForFile(Y){if(!Y.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${Y.id}`);const oe=this.#$.get(Y.remote.requestClientId);if(oe==null)throw new Error(`requestClientId "${Y.remote.requestClientId}" not registered for file "${Y.id}"`);return oe}restore(Y){return this.log(`Core: attempting to restore upload "${Y}"`),this.getState().currentUploads[Y]?this.#_(Y):(this.#w(Y),Promise.reject(new Error("Nonexistent upload")))}#b(Y,oe={}){const{forceAllowNewUpload:le=!1}=oe,{allowNewUpload:ue,currentUploads:he}=this.getState();if(!ue&&!le)throw new Error("Cannot create a new upload: already uploading.");const fe=nanoid();return this.emit("upload",fe,this.getFilesByIds(Y)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...he,[fe]:{fileIDs:Y,step:0,result:{}}}}),fe}[Symbol.for("uppy test: createUpload")](...Y){return this.#b(...Y)}#x(Y){const{currentUploads:oe}=this.getState();return oe[Y]}addResultData(Y,oe){if(!this.#x(Y)){this.log(`Not setting result for an upload that has been removed: ${Y}`);return}const{currentUploads:le}=this.getState(),ue={...le[Y],result:{...le[Y].result,...oe}};this.setState({currentUploads:{...le,[Y]:ue}})}#w(Y){const oe={...this.getState().currentUploads};delete oe[Y],this.setState({currentUploads:oe})}async#_(Y){const oe=()=>{const{currentUploads:fe}=this.getState();return fe[Y]};let le=oe();const ue=[...this.#i,...this.#o,...this.#a];try{for(let fe=le.step||0;fe<ue.length&&le;fe++){const _e=ue[fe];this.setState({currentUploads:{...this.getState().currentUploads,[Y]:{...le,step:fe}}});const{fileIDs:Se}=le;await _e(Se,Y),le=oe()}}catch(fe){throw this.#w(Y),fe}if(le){le.fileIDs.forEach(ve=>{const $e=this.getFile(ve);$e?.progress.postprocess&&this.emit("postprocess-complete",$e)});const fe=le.fileIDs.map(ve=>this.getFile(ve)),_e=fe.filter(ve=>!ve.error),Se=fe.filter(ve=>ve.error);this.addResultData(Y,{successful:_e,failed:Se,uploadID:Y}),le=oe()}let he;return le&&(he=le.result,this.#w(Y)),he==null&&(this.log(`Not setting result for an upload that has been removed: ${Y}`),he={successful:[],failed:[],uploadID:Y}),he}async upload(){this.#e.uploader?.length||this.log("No uploader type plugins are used","warning");let{files:Y}=this.getState();if(this.#f().length>0){const ue=await this.#m();if(!(this.getFiles().filter(fe=>fe.progress.uploadStarted==null).length>0))return this.emit("complete",ue),ue;({files:Y}=this.getState())}const le=this.opts.onBeforeUpload(Y);return le===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(le&&typeof le=="object"&&(Y=le,this.setState({files:Y})),Promise.resolve().then(()=>this.#t.validateMinNumberOfFiles(Y)).catch(ue=>{throw this.#s([ue]),ue}).then(()=>{if(!this.#p(Y))throw new RestrictionError(this.i18n("missingRequiredMetaField"))}).catch(ue=>{throw ue}).then(async()=>{const{currentUploads:ue}=this.getState(),he=Object.values(ue).flatMap(ve=>ve.fileIDs),fe=[];Object.keys(Y).forEach(ve=>{const $e=this.getFile(ve);!$e.progress.uploadStarted&&he.indexOf(ve)===-1&&fe.push($e.id)});const _e=this.#b(fe),Se=await this.#_(_e);return this.emit("complete",Se),Se}).catch(ue=>{throw this.emit("error",ue),this.log(ue,"error"),ue}))}}var f$1=0;function u$1(re,Y,oe,le,ue,he){Y||(Y={});var fe,_e,Se=Y;if("ref"in Se)for(_e in Se={},Y)_e=="ref"?fe=Y[_e]:Se[_e]=Y[_e];var ve={type:re,props:Se,key:oe,ref:fe,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--f$1,__i:-1,__u:0,__source:ue,__self:he};if(typeof re=="function"&&(fe=re.defaultProps))for(_e in fe)Se[_e]===void 0&&(Se[_e]=fe[_e]);return l$2.vnode&&l$2.vnode(ve),ve}const version$5="4.3.2",packageJson$4={version:version$5},TRANSITION_MS=300;class FadeIn extends x{ref=b$1();componentWillEnter(Y){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(Y,TRANSITION_MS)}componentWillLeave(Y){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(Y,TRANSITION_MS)}render(){const{children:Y}=this.props;return u$1("div",{className:"uppy-Informer-animated",ref:this.ref,children:Y})}}function assign(re,Y){return Object.assign(re,Y)}function getKey(re,Y){return re?.key??Y}function linkRef(re,Y){const oe=re._ptgLinkedRefs||(re._ptgLinkedRefs={});return oe[Y]||(oe[Y]=le=>{re.refs[Y]=le})}function getChildMapping(re){const Y={};for(let oe=0;oe<re.length;oe++)if(re[oe]!=null){const le=getKey(re[oe],oe.toString(36));Y[le]=re[oe]}return Y}function mergeChildMappings(re,Y){re=re||{},Y=Y||{};const oe=fe=>Object.hasOwn(Y,fe)?Y[fe]:re[fe],le={};let ue=[];for(const fe in re)Object.hasOwn(Y,fe)?ue.length&&(le[fe]=ue,ue=[]):ue.push(fe);const he={};for(const fe in Y){if(Object.hasOwn(le,fe))for(let _e=0;_e<le[fe].length;_e++){const Se=le[fe][_e];he[le[fe][_e]]=oe(Se)}he[fe]=oe(fe)}for(let fe=0;fe<ue.length;fe++)he[ue[fe]]=oe(ue[fe]);return he}const identity=re=>re;class TransitionGroup extends x{constructor(Y,oe){super(Y,oe),this.refs={},this.state={children:getChildMapping(H$2(H$2(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const Y=this.state.children;for(const oe in Y)Y[oe]&&this.performAppear(oe)}componentWillReceiveProps(Y){const oe=getChildMapping(H$2(Y.children)||[]),le=this.state.children;this.setState(he=>({children:mergeChildMappings(he.children,oe)}));let ue;for(ue in oe)if(Object.hasOwn(oe,ue)){const he=le&&Object.hasOwn(le,ue);oe[ue]&&he&&this.currentlyTransitioningKeys[ue]?(this.keysToEnter.push(ue),this.keysToAbortLeave.push(ue)):oe[ue]&&!he&&!this.currentlyTransitioningKeys[ue]&&this.keysToEnter.push(ue)}for(ue in le)if(Object.hasOwn(le,ue)){const he=oe&&Object.hasOwn(oe,ue);le[ue]&&!he&&!this.currentlyTransitioningKeys[ue]&&this.keysToLeave.push(ue)}}componentDidUpdate(){const{keysToEnter:Y}=this;this.keysToEnter=[],Y.forEach(this.performEnter);const{keysToLeave:oe}=this;this.keysToLeave=[],oe.forEach(this.performLeave)}_finishAbort(Y){const oe=this.keysToAbortLeave.indexOf(Y);oe!==-1&&this.keysToAbortLeave.splice(oe,1)}performAppear(Y){this.currentlyTransitioningKeys[Y]=!0;const oe=this.refs[Y];oe?.componentWillAppear?oe.componentWillAppear(this._handleDoneAppearing.bind(this,Y)):this._handleDoneAppearing(Y)}_handleDoneAppearing(Y){const oe=this.refs[Y];oe?.componentDidAppear&&oe.componentDidAppear(),delete this.currentlyTransitioningKeys[Y],this._finishAbort(Y);const le=getChildMapping(H$2(this.props.children)||[]);(!le||!Object.hasOwn(le,Y))&&this.performLeave(Y)}performEnter(Y){this.currentlyTransitioningKeys[Y]=!0;const oe=this.refs[Y];oe?.componentWillEnter?oe.componentWillEnter(this._handleDoneEntering.bind(this,Y)):this._handleDoneEntering(Y)}_handleDoneEntering(Y){const oe=this.refs[Y];oe?.componentDidEnter&&oe.componentDidEnter(),delete this.currentlyTransitioningKeys[Y],this._finishAbort(Y);const le=getChildMapping(H$2(this.props.children)||[]);(!le||!Object.hasOwn(le,Y))&&this.performLeave(Y)}performLeave(Y){if(this.keysToAbortLeave.indexOf(Y)!==-1)return;this.currentlyTransitioningKeys[Y]=!0;const le=this.refs[Y];le?.componentWillLeave?le.componentWillLeave(this._handleDoneLeaving.bind(this,Y)):this._handleDoneLeaving(Y)}_handleDoneLeaving(Y){if(this.keysToAbortLeave.indexOf(Y)!==-1)return;const le=this.refs[Y];le?.componentDidLeave&&le.componentDidLeave(),delete this.currentlyTransitioningKeys[Y];const ue=getChildMapping(H$2(this.props.children)||[]);if(ue&&Object.hasOwn(ue,Y))this.performEnter(Y);else{const he=assign({},this.state.children);delete he[Y],this.setState({children:he})}}render({childFactory:Y,transitionLeave:oe,transitionName:le,transitionAppear:ue,transitionEnter:he,transitionLeaveTimeout:fe,transitionEnterTimeout:_e,transitionAppearTimeout:Se,component:ve,...$e},{children:Ee}){const Ue=Object.entries(Ee).map(([Re,xe])=>{if(!xe)return;const Ne=linkRef(this,Re);return K$2(Y(xe),{ref:Ne,key:Re})}).filter(Boolean);return _$1(ve,$e,Ue)}}TransitionGroup.defaultProps={component:"span",childFactory:identity};class Informer extends UIPlugin{static VERSION=packageJson$4.version;constructor(Y,oe){super(Y,oe),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}render=Y=>u$1("div",{className:"uppy uppy-Informer",children:u$1(TransitionGroup,{children:Y.info.map(oe=>u$1(FadeIn,{children:u$1("p",{role:"alert",children:[oe.message," ",oe.details&&u$1("span",{"aria-label":oe.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${oe.message} 

 ${oe.details}`),children:"?"})]})},oe.message))})});install(){const{target:Y}=this.opts;Y&&this.mount(Y,this)}}var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var hasRequiredClassnames;function requireClassnames(){return hasRequiredClassnames||(hasRequiredClassnames=1,(function(re){(function(){var Y={}.hasOwnProperty;function oe(){for(var he="",fe=0;fe<arguments.length;fe++){var _e=arguments[fe];_e&&(he=ue(he,le(_e)))}return he}function le(he){if(typeof he=="string"||typeof he=="number")return he;if(typeof he!="object")return"";if(Array.isArray(he))return oe.apply(null,he);if(he.toString!==Object.prototype.toString&&!he.toString.toString().includes("[native code]"))return he.toString();var fe="";for(var _e in he)Y.call(he,_e)&&he[_e]&&(fe=ue(fe,_e));return fe}function ue(he,fe){return fe?he?he+" "+fe:he+fe:he}re.exports?(oe.default=oe,re.exports=oe):window.classNames=oe})()})(classnames)),classnames.exports}var classnamesExports=requireClassnames();const classNames=getDefaultExportFromCjs(classnamesExports),STYLE_INNER={position:"relative",width:"100%",minHeight:"100%"},STYLE_CONTENT={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class VirtualList extends x{constructor(Y){super(Y),this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement?.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}handleScroll=()=>{this.setState({offset:this.base.scrollTop})};handleResize=()=>{this.resize()};resize(){const{height:Y}=this.state;Y!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render({data:Y,rowHeight:oe,renderRow:le,overscanCount:ue=10,...he}){const{offset:fe,height:_e}=this.state;let Se=Math.floor(fe/oe),ve=Math.floor(_e/oe);ue&&(Se=Math.max(0,Se-Se%ue),ve+=ue);const $e=Se+ve+4,Ee=Y.slice(Se,$e),Ue={...STYLE_INNER,height:Y.length*oe},Re={...STYLE_CONTENT,top:Se*oe};return u$1("div",{onScroll:this.handleScroll,...he,children:u$1("div",{role:"presentation",style:Ue,children:u$1("div",{role:"presentation",style:Re,children:Ee.map(le)})})})}}function defaultPickerIcon(){return u$1("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:u$1("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function emaFilter(re,Y,oe,le){return re===Y?re:le===0?Y:re+(Y-re)*2**(-le/oe)}const version$4="4.2.3",packageJson$3={version:version$4},locale$2={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},statusBarStates={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function secondsToTime(re){const Y=Math.floor(re/3600)%24,oe=Math.floor(re/60)%60,le=Math.floor(re%60);return{hours:Y,minutes:oe,seconds:le}}function prettyETA(re){const Y=secondsToTime(re),oe=Y.hours===0?"":`${Y.hours}h`,le=Y.minutes===0?"":`${Y.hours===0?Y.minutes:` ${Y.minutes.toString(10).padStart(2,"0")}`}m`,ue=Y.hours!==0?"":`${Y.minutes===0?Y.seconds:` ${Y.seconds.toString(10).padStart(2,"0")}`}s`;return`${oe}${le}${ue}`}const DOT="",renderDot=()=>` ${DOT} `;function UploadBtn(re){const{newFiles:Y,isUploadStarted:oe,recoveredState:le,i18n:ue,uploadState:he,isSomeGhost:fe,startUpload:_e}=re,Se=classNames("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":he===statusBarStates.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":fe}),ve=Y&&oe&&!le?ue("uploadXNewFiles",{smart_count:Y}):ue("uploadXFiles",{smart_count:Y});return u$1("button",{type:"button",className:Se,"aria-label":ue("uploadXFiles",{smart_count:Y}),onClick:_e,disabled:fe,"data-uppy-super-focusable":!0,children:ve})}function RetryBtn(re){const{i18n:Y,uppy:oe}=re;return u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":Y("retryUpload"),onClick:()=>oe.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:u$1("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),Y("retry")]})}function CancelBtn(re){const{i18n:Y,uppy:oe}=re;return u$1("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:Y("cancel"),"aria-label":Y("cancel"),onClick:()=>oe.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:u$1("g",{fill:"none",fillRule:"evenodd",children:[u$1("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),u$1("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function PauseResumeButton(re){const{isAllPaused:Y,i18n:oe,isAllComplete:le,resumableUploads:ue,uppy:he}=re,fe=oe(Y?"resume":"pause");function _e(){if(!le){if(!ue){he.cancelAll();return}if(Y){he.resumeAll();return}he.pauseAll()}}return u$1("button",{title:fe,"aria-label":fe,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:_e,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:u$1("g",{fill:"none",fillRule:"evenodd",children:[u$1("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),u$1("path",{fill:"#FFF",d:Y?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function DoneBtn(re){const{i18n:Y,doneButtonHandler:oe}=re;return u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:oe,"data-uppy-super-focusable":!0,children:Y("done")})}function LoadingSpinner(){return u$1("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:u$1("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function ProgressBarProcessing(re){const{progress:Y}=re,{value:oe,mode:le,message:ue}=Y;return u$1("div",{className:"uppy-StatusBar-content",children:[u$1(LoadingSpinner,{}),le==="determinate"?`${Math.round(oe*100)}%  `:"",ue]})}function ProgressDetails(re){const{numUploads:Y,complete:oe,totalUploadedSize:le,totalSize:ue,totalETA:he,i18n:fe}=re,_e=Y>1,Se=prettierBytes(le);return u$1("div",{className:"uppy-StatusBar-statusSecondary",children:[_e&&fe("filesUploadedOfTotal",{complete:oe,smart_count:Y}),u$1("span",{className:"uppy-StatusBar-additionalInfo",children:[_e&&renderDot(),ue!=null?fe("dataUploadedOfTotal",{complete:Se,total:prettierBytes(ue)}):fe("dataUploadedOfUnknown",{complete:Se}),renderDot(),he!=null&&fe("xTimeLeft",{time:prettyETA(he)})]})]})}function FileUploadCount(re){const{i18n:Y,complete:oe,numUploads:le}=re;return u$1("div",{className:"uppy-StatusBar-statusSecondary",children:Y("filesUploadedOfTotal",{complete:oe,smart_count:le})})}function UploadNewlyAddedFiles(re){const{i18n:Y,newFiles:oe,startUpload:le}=re,ue=classNames("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return u$1("div",{className:"uppy-StatusBar-statusSecondary",children:[u$1("div",{className:"uppy-StatusBar-statusSecondaryHint",children:Y("xMoreFilesAdded",{smart_count:oe})}),u$1("button",{type:"button",className:ue,"aria-label":Y("uploadXFiles",{smart_count:oe}),onClick:le,children:Y("upload")})]})}function ProgressBarUploading(re){const{i18n:Y,supportsUploadProgress:oe,totalProgress:le,showProgressDetails:ue,isUploadStarted:he,isAllComplete:fe,isAllPaused:_e,newFiles:Se,numUploads:ve,complete:$e,totalUploadedSize:Ee,totalSize:Ue,totalETA:Re,startUpload:xe}=re,Ne=Se&&he;if(!he||fe)return null;const Ie=Y(_e?"paused":"uploading");function De(){return!_e&&!Ne&&ue?oe?u$1(ProgressDetails,{numUploads:ve,complete:$e,totalUploadedSize:Ee,totalSize:Ue,totalETA:Re,i18n:Y}):u$1(FileUploadCount,{i18n:Y,complete:$e,numUploads:ve}):null}return u$1("div",{className:"uppy-StatusBar-content",title:Ie,children:[_e?null:u$1(LoadingSpinner,{}),u$1("div",{className:"uppy-StatusBar-status",children:[u$1("div",{className:"uppy-StatusBar-statusPrimary",children:oe&&le!==0?`${Ie}: ${le}%`:Ie}),De(),Ne?u$1(UploadNewlyAddedFiles,{i18n:Y,newFiles:Se,startUpload:xe}):null]})]})}function ProgressBarComplete(re){const{i18n:Y}=re;return u$1("div",{className:"uppy-StatusBar-content",role:"status",title:Y("complete"),children:u$1("div",{className:"uppy-StatusBar-status",children:u$1("div",{className:"uppy-StatusBar-statusPrimary",children:[u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:u$1("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),Y("complete")]})})})}function ProgressBarError(re){const{error:Y,i18n:oe,complete:le,numUploads:ue}=re;function he(){const fe=`${oe("uploadFailed")} 

 ${Y}`;alert(fe)}return u$1("div",{className:"uppy-StatusBar-content",title:oe("uploadFailed"),children:[u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:u$1("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),u$1("div",{className:"uppy-StatusBar-status",children:[u$1("div",{className:"uppy-StatusBar-statusPrimary",children:[oe("uploadFailed"),u$1("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":oe("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:he,type:"button",children:"?"})]}),u$1(FileUploadCount,{i18n:oe,complete:le,numUploads:ue})]})]})}function calculateProcessingProgress(re){const Y=[];let oe="indeterminate",le;for(const{progress:he}of Object.values(re)){const{preprocess:fe,postprocess:_e}=he;le==null&&(fe||_e)&&({mode:oe,message:le}=fe||_e),fe?.mode==="determinate"&&Y.push(fe.value),_e?.mode==="determinate"&&Y.push(_e.value)}const ue=Y.reduce((he,fe)=>he+fe/Y.length,0);return{mode:oe,message:le,value:ue}}const{STATE_ERROR,STATE_WAITING,STATE_PREPROCESSING,STATE_UPLOADING,STATE_POSTPROCESSING,STATE_COMPLETE}=statusBarStates;function StatusBarUI({newFiles:re,allowNewUpload:Y,isUploadInProgress:oe,isAllPaused:le,resumableUploads:ue,error:he,hideUploadButton:fe=void 0,hidePauseResumeButton:_e=!1,hideCancelButton:Se=!1,hideRetryButton:ve=!1,recoveredState:$e,uploadState:Ee,totalProgress:Ue,files:Re,supportsUploadProgress:xe,hideAfterFinish:Ne=!1,isSomeGhost:Ie,doneButtonHandler:De=void 0,isUploadStarted:Pe,i18n:Ae,startUpload:Be,uppy:Le,isAllComplete:Ve,showProgressDetails:ze=void 0,numUploads:Ge,complete:We,totalSize:Qe,totalETA:Ye,totalUploadedSize:et}){function je(){switch(Ee){case STATE_POSTPROCESSING:case STATE_PREPROCESSING:{const st=calculateProcessingProgress(Re);return st.mode==="determinate"?st.value*100:Ue}case STATE_ERROR:return null;case STATE_UPLOADING:return xe?Ue:null;default:return Ue}}function Ze(){switch(Ee){case STATE_POSTPROCESSING:case STATE_PREPROCESSING:{const{mode:st}=calculateProcessingProgress(Re);return st==="indeterminate"}case STATE_UPLOADING:return!xe;default:return!1}}const tt=je(),Ce=tt??100,Fe=!he&&re&&(!oe&&!le||$e)&&Y&&!fe,Te=!Se&&Ee!==STATE_WAITING&&Ee!==STATE_COMPLETE,He=ue&&!_e&&Ee===STATE_UPLOADING,qe=he&&!Ve&&!ve,Me=De&&Ee===STATE_COMPLETE,Ke=classNames("uppy-StatusBar-progress",{"is-indeterminate":Ze()}),Xe=classNames("uppy-StatusBar",`is-${Ee}`,{"has-ghosts":Ie}),Je=(()=>{switch(Ee){case STATE_PREPROCESSING:case STATE_POSTPROCESSING:return u$1(ProgressBarProcessing,{progress:calculateProcessingProgress(Re)});case STATE_COMPLETE:return u$1(ProgressBarComplete,{i18n:Ae});case STATE_ERROR:return u$1(ProgressBarError,{error:he,i18n:Ae,numUploads:Ge,complete:We});case STATE_UPLOADING:return u$1(ProgressBarUploading,{i18n:Ae,supportsUploadProgress:xe,totalProgress:Ue,showProgressDetails:ze,isUploadStarted:Pe,isAllComplete:Ve,isAllPaused:le,newFiles:re,numUploads:Ge,complete:We,totalUploadedSize:et,totalSize:Qe,totalETA:Ye,startUpload:Be});default:return null}})();return!(Fe||qe||He||Te||Me)&&!Je||Ee===STATE_COMPLETE&&Ne?null:u$1("div",{className:Xe,children:[u$1("div",{className:Ke,style:{width:`${Ce}%`},role:"progressbar","aria-label":`${Ce}%`,"aria-valuetext":`${Ce}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":tt}),Je,u$1("div",{className:"uppy-StatusBar-actions",children:[Fe?u$1(UploadBtn,{newFiles:re,isUploadStarted:Pe,recoveredState:$e,i18n:Ae,isSomeGhost:Ie,startUpload:Be,uploadState:Ee}):null,qe?u$1(RetryBtn,{i18n:Ae,uppy:Le}):null,He?u$1(PauseResumeButton,{isAllPaused:le,i18n:Ae,isAllComplete:Ve,resumableUploads:ue,uppy:Le}):null,Te?u$1(CancelBtn,{i18n:Ae,uppy:Le}):null,Me?u$1(DoneBtn,{i18n:Ae,doneButtonHandler:De}):null]})]})}const speedFilterHalfLife=2e3,ETAFilterHalfLife=2e3;function getUploadingState$1(re,Y,oe,le){if(re)return statusBarStates.STATE_ERROR;if(Y)return statusBarStates.STATE_COMPLETE;if(oe)return statusBarStates.STATE_WAITING;let ue=statusBarStates.STATE_WAITING;const he=Object.keys(le);for(let fe=0;fe<he.length;fe++){const{progress:_e}=le[he[fe]];if(_e.uploadStarted&&!_e.uploadComplete)return statusBarStates.STATE_UPLOADING;_e.preprocess&&(ue=statusBarStates.STATE_PREPROCESSING),_e.postprocess&&ue!==statusBarStates.STATE_PREPROCESSING&&(ue=statusBarStates.STATE_POSTPROCESSING)}return ue}const defaultOptions$5={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};class StatusBar extends UIPlugin{static VERSION=packageJson$3.version;#e;#t;#n;#r;constructor(Y,oe){super(Y,{...defaultOptions$5,...oe}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=locale$2,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}#i(Y){if(Y.total==null||Y.total===0)return null;const oe=Y.total-Y.uploaded;if(oe<=0)return null;this.#e??=performance.now();const le=performance.now()-this.#e;if(le===0)return Math.round((this.#r??0)/100)/10;const ue=Y.uploaded-this.#t;if(this.#t=Y.uploaded,ue<=0)return Math.round((this.#r??0)/100)/10;const he=ue/le,fe=this.#n==null?he:emaFilter(he,this.#n,speedFilterHalfLife,le);this.#n=fe;const _e=oe/fe,Se=Math.max(this.#r-le,0),ve=this.#r==null?_e:emaFilter(_e,Se,ETAFilterHalfLife,le);return this.#r=ve,this.#e=performance.now(),Math.round(ve/100)/10}startUpload=()=>this.uppy.upload().catch((()=>{}));render(Y){const{capabilities:oe,files:le,allowNewUpload:ue,totalProgress:he,error:fe,recoveredState:_e}=Y,{newFiles:Se,startedFiles:ve,completeFiles:$e,isUploadStarted:Ee,isAllComplete:Ue,isAllPaused:Re,isUploadInProgress:xe,isSomeGhost:Ne}=this.uppy.getObjectOfFilesPerState(),Ie=_e?Object.values(le):Se,De=!!oe.resumableUploads,Pe=oe.uploadProgress!==!1;let Ae=null,Be=0;ve.every(Ve=>Ve.progress.bytesTotal!=null&&Ve.progress.bytesTotal!==0)?(Ae=0,ve.forEach(Ve=>{Ae+=Ve.progress.bytesTotal||0,Be+=Ve.progress.bytesUploaded||0})):ve.forEach(Ve=>{Be+=Ve.progress.bytesUploaded||0});const Le=this.#i({uploaded:Be,total:Ae});return StatusBarUI({error:fe,uploadState:getUploadingState$1(fe,Ue,_e,Y.files||{}),allowNewUpload:ue,totalProgress:he,totalSize:Ae,totalUploadedSize:Be,isAllComplete:!1,isAllPaused:Re,isUploadStarted:Ee,isUploadInProgress:xe,isSomeGhost:Ne,recoveredState:_e,complete:$e.length,newFiles:Ie.length,numUploads:ve.length,totalETA:Le,files:le,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:De,supportsUploadProgress:Pe,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const Y=this.el;getTextDirection(Y)||(Y.dir="ltr")}#o=()=>{const{recoveredState:Y}=this.uppy.getState();if(this.#n=null,this.#r=null,Y){this.#t=Object.values(Y.files).reduce((oe,{progress:le})=>oe+le.bytesUploaded,0),this.uppy.emit("restore-confirmed");return}this.#e=performance.now(),this.#t=0};install(){const{target:Y}=this.opts;Y&&this.mount(Y,this),this.uppy.on("upload",this.#o),this.#e=performance.now(),this.#t=this.uppy.getFiles().reduce((oe,le)=>oe+le.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",this.#o)}}const DATA_URL_PATTERN=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function dataURItoBlob(re,Y,oe){const le=DATA_URL_PATTERN.exec(re),ue=Y.mimeType??le?.[1]??"plain/text";let he;if(le?.[2]!=null){const fe=atob(decodeURIComponent(le[3])),_e=new Uint8Array(fe.length);for(let Se=0;Se<fe.length;Se++)_e[Se]=fe.charCodeAt(Se);he=[_e]}else le?.[3]!=null&&(he=[decodeURIComponent(le[3])]);return new Blob(he,{type:ue})}function isObjectURL(re){return re.startsWith("blob:")}function isPreviewSupported(re){return re?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(re):!1}function e(re,Y,oe){return Y in re?Object.defineProperty(re,Y,{value:oe,enumerable:!0,configurable:!0,writable:!0}):re[Y]=oe,re}var t=typeof self<"u"?self:global;const s=typeof navigator<"u",i=s&&typeof HTMLImageElement>"u",n=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),r=t.Buffer,a=!!r,h=re=>re!==void 0;function f(re){return re===void 0||(re instanceof Map?re.size===0:Object.values(re).filter(h).length===0)}function l(re){let Y=new Error(re);throw delete Y.stack,Y}function o(re){let Y=(function(oe){let le=0;return oe.ifd0.enabled&&(le+=1024),oe.exif.enabled&&(le+=2048),oe.makerNote&&(le+=2048),oe.userComment&&(le+=1024),oe.gps.enabled&&(le+=512),oe.interop.enabled&&(le+=100),oe.ifd1.enabled&&(le+=1024),le+2048})(re);return re.jfif.enabled&&(Y+=50),re.xmp.enabled&&(Y+=2e4),re.iptc.enabled&&(Y+=14e3),re.icc.enabled&&(Y+=6e3),Y}const u=re=>String.fromCharCode.apply(null,re),d=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class c{static from(Y,oe){return Y instanceof this&&Y.le===oe?Y:new c(Y,void 0,void 0,oe)}constructor(Y,oe=0,le,ue){if(typeof ue=="boolean"&&(this.le=ue),Array.isArray(Y)&&(Y=new Uint8Array(Y)),Y===0)this.byteOffset=0,this.byteLength=0;else if(Y instanceof ArrayBuffer){le===void 0&&(le=Y.byteLength-oe);let he=new DataView(Y,oe,le);this._swapDataView(he)}else if(Y instanceof Uint8Array||Y instanceof DataView||Y instanceof c){le===void 0&&(le=Y.byteLength-oe),(oe+=Y.byteOffset)+le>Y.byteOffset+Y.byteLength&&l("Creating view outside of available memory in ArrayBuffer");let he=new DataView(Y.buffer,oe,le);this._swapDataView(he)}else if(typeof Y=="number"){let he=new DataView(new ArrayBuffer(Y));this._swapDataView(he)}else l("Invalid input argument for BufferView: "+Y)}_swapArrayBuffer(Y){this._swapDataView(new DataView(Y))}_swapBuffer(Y){this._swapDataView(new DataView(Y.buffer,Y.byteOffset,Y.byteLength))}_swapDataView(Y){this.dataView=Y,this.buffer=Y.buffer,this.byteOffset=Y.byteOffset,this.byteLength=Y.byteLength}_lengthToEnd(Y){return this.byteLength-Y}set(Y,oe,le=c){return Y instanceof DataView||Y instanceof c?Y=new Uint8Array(Y.buffer,Y.byteOffset,Y.byteLength):Y instanceof ArrayBuffer&&(Y=new Uint8Array(Y)),Y instanceof Uint8Array||l("BufferView.set(): Invalid data argument."),this.toUint8().set(Y,oe),new le(this,oe,Y.byteLength)}subarray(Y,oe){return oe=oe||this._lengthToEnd(Y),new c(this,Y,oe)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(Y,oe){return new Uint8Array(this.buffer,this.byteOffset+Y,oe)}getString(Y=0,oe=this.byteLength){return ue=this.getUint8Array(Y,oe),d?d.decode(ue):a?Buffer.from(ue).toString("utf8"):decodeURIComponent(escape(u(ue)));var ue}getLatin1String(Y=0,oe=this.byteLength){let le=this.getUint8Array(Y,oe);return u(le)}getUnicodeString(Y=0,oe=this.byteLength){const le=[];for(let ue=0;ue<oe&&Y+ue<this.byteLength;ue+=2)le.push(this.getUint16(Y+ue));return u(le)}getInt8(Y){return this.dataView.getInt8(Y)}getUint8(Y){return this.dataView.getUint8(Y)}getInt16(Y,oe=this.le){return this.dataView.getInt16(Y,oe)}getInt32(Y,oe=this.le){return this.dataView.getInt32(Y,oe)}getUint16(Y,oe=this.le){return this.dataView.getUint16(Y,oe)}getUint32(Y,oe=this.le){return this.dataView.getUint32(Y,oe)}getFloat32(Y,oe=this.le){return this.dataView.getFloat32(Y,oe)}getFloat64(Y,oe=this.le){return this.dataView.getFloat64(Y,oe)}getFloat(Y,oe=this.le){return this.dataView.getFloat32(Y,oe)}getDouble(Y,oe=this.le){return this.dataView.getFloat64(Y,oe)}getUintBytes(Y,oe,le){switch(oe){case 1:return this.getUint8(Y,le);case 2:return this.getUint16(Y,le);case 4:return this.getUint32(Y,le);case 8:return this.getUint64&&this.getUint64(Y,le)}}getUint(Y,oe,le){switch(oe){case 8:return this.getUint8(Y,le);case 16:return this.getUint16(Y,le);case 32:return this.getUint32(Y,le);case 64:return this.getUint64&&this.getUint64(Y,le)}}toString(Y){return this.dataView.toString(Y,this.constructor.name)}ensureChunk(){}}function p(re,Y){l(`${re} '${Y}' was not loaded, try using full build of exifr.`)}class g extends Map{constructor(Y){super(),this.kind=Y}get(Y,oe){return this.has(Y)||p(this.kind,Y),oe&&(Y in oe||(function(le,ue){l(`Unknown ${le} '${ue}'.`)})(this.kind,Y),oe[Y].enabled||p(this.kind,Y)),super.get(Y)}keyList(){return Array.from(this.keys())}}var m=new g("file parser"),y=new g("segment parser"),b=new g("file reader");let w=t.fetch;function k(re,Y){return(oe=re).startsWith("data:")||oe.length>1e4?v(re,Y,"base64"):n&&re.includes("://")?O(re,Y,"url",S):n?v(re,Y,"fs"):s?O(re,Y,"url",S):void l("Invalid input argument");var oe}async function O(re,Y,oe,le){return b.has(oe)?v(re,Y,oe):le?(async function(ue,he){let fe=await he(ue);return new c(fe)})(re,le):void l(`Parser ${oe} is not loaded`)}async function v(re,Y,oe){let le=new(b.get(oe))(re,Y);return await le.read(),le}const S=re=>w(re).then((Y=>Y.arrayBuffer())),A=re=>new Promise(((Y,oe)=>{let le=new FileReader;le.onloadend=()=>Y(le.result||new ArrayBuffer),le.onerror=oe,le.readAsArrayBuffer(re)})),B=new Map,V=new Map,I=new Map,L=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],T=["jfif","xmp","icc","iptc","ihdr"],z=["tiff",...T],P=["ifd0","ifd1","exif","gps","interop"],F=[...z,...P],j=["makerNote","userComment"],E=["translateKeys","translateValues","reviveValues","multiSegment"],M=[...E,"sanitize","mergeOutput","silentErrors"];class _{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class D extends _{get needed(){return this.enabled||this.deps.size>0}constructor(Y,oe,le,ue){if(super(),e(this,"enabled",!1),e(this,"skip",new Set),e(this,"pick",new Set),e(this,"deps",new Set),e(this,"translateKeys",!1),e(this,"translateValues",!1),e(this,"reviveValues",!1),this.key=Y,this.enabled=oe,this.parse=this.enabled,this.applyInheritables(ue),this.canBeFiltered=P.includes(Y),this.canBeFiltered&&(this.dict=B.get(Y)),le!==void 0)if(Array.isArray(le))this.parse=this.enabled=!0,this.canBeFiltered&&le.length>0&&this.translateTagSet(le,this.pick);else if(typeof le=="object"){if(this.enabled=!0,this.parse=le.parse!==!1,this.canBeFiltered){let{pick:he,skip:fe}=le;he&&he.length>0&&this.translateTagSet(he,this.pick),fe&&fe.length>0&&this.translateTagSet(fe,this.skip)}this.applyInheritables(le)}else le===!0||le===!1?this.parse=this.enabled=le:l(`Invalid options argument: ${le}`)}applyInheritables(Y){let oe,le;for(oe of E)le=Y[oe],le!==void 0&&(this[oe]=le)}translateTagSet(Y,oe){if(this.dict){let le,ue,{tagKeys:he,tagValues:fe}=this.dict;for(le of Y)typeof le=="string"?(ue=fe.indexOf(le),ue===-1&&(ue=he.indexOf(Number(le))),ue!==-1&&oe.add(Number(he[ue]))):oe.add(le)}else for(let le of Y)oe.add(le)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,X(this.pick,this.deps)):this.enabled&&this.pick.size>0&&X(this.pick,this.deps)}}var N={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},$=new Map;class R extends _{static useCached(Y){let oe=$.get(Y);return oe!==void 0||(oe=new this(Y),$.set(Y,oe)),oe}constructor(Y){super(),Y===!0?this.setupFromTrue():Y===void 0?this.setupFromUndefined():Array.isArray(Y)?this.setupFromArray(Y):typeof Y=="object"?this.setupFromObject(Y):l(`Invalid options argument ${Y}`),this.firstChunkSize===void 0&&(this.firstChunkSize=s?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let Y;for(Y of L)this[Y]=N[Y];for(Y of M)this[Y]=N[Y];for(Y of j)this[Y]=N[Y];for(Y of F)this[Y]=new D(Y,N[Y],void 0,this)}setupFromTrue(){let Y;for(Y of L)this[Y]=N[Y];for(Y of M)this[Y]=N[Y];for(Y of j)this[Y]=!0;for(Y of F)this[Y]=new D(Y,!0,void 0,this)}setupFromArray(Y){let oe;for(oe of L)this[oe]=N[oe];for(oe of M)this[oe]=N[oe];for(oe of j)this[oe]=N[oe];for(oe of F)this[oe]=new D(oe,!1,void 0,this);this.setupGlobalFilters(Y,void 0,P)}setupFromObject(Y){let oe;for(oe of(P.ifd0=P.ifd0||P.image,P.ifd1=P.ifd1||P.thumbnail,Object.assign(this,Y),L))this[oe]=W(Y[oe],N[oe]);for(oe of M)this[oe]=W(Y[oe],N[oe]);for(oe of j)this[oe]=W(Y[oe],N[oe]);for(oe of z)this[oe]=new D(oe,N[oe],Y[oe],this);for(oe of P)this[oe]=new D(oe,N[oe],Y[oe],this.tiff);this.setupGlobalFilters(Y.pick,Y.skip,P,F),Y.tiff===!0?this.batchEnableWithBool(P,!0):Y.tiff===!1?this.batchEnableWithUserValue(P,Y):Array.isArray(Y.tiff)?this.setupGlobalFilters(Y.tiff,void 0,P):typeof Y.tiff=="object"&&this.setupGlobalFilters(Y.tiff.pick,Y.tiff.skip,P)}batchEnableWithBool(Y,oe){for(let le of Y)this[le].enabled=oe}batchEnableWithUserValue(Y,oe){for(let le of Y){let ue=oe[le];this[le].enabled=ue!==!1&&ue!==void 0}}setupGlobalFilters(Y,oe,le,ue=le){if(Y&&Y.length){for(let fe of ue)this[fe].enabled=!1;let he=K(Y,le);for(let[fe,_e]of he)X(this[fe].pick,_e),this[fe].enabled=!0}else if(oe&&oe.length){let he=K(oe,le);for(let[fe,_e]of he)X(this[fe].skip,_e)}}filterNestedSegmentTags(){let{ifd0:Y,exif:oe,xmp:le,iptc:ue,icc:he}=this;this.makerNote?oe.deps.add(37500):oe.skip.add(37500),this.userComment?oe.deps.add(37510):oe.skip.add(37510),le.enabled||Y.skip.add(700),ue.enabled||Y.skip.add(33723),he.enabled||Y.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:Y,exif:oe,gps:le,interop:ue}=this;ue.needed&&(oe.deps.add(40965),Y.deps.add(40965)),oe.needed&&Y.deps.add(34665),le.needed&&Y.deps.add(34853),this.tiff.enabled=P.some((he=>this[he].enabled===!0))||this.makerNote||this.userComment;for(let he of P)this[he].finalizeFilters()}get onlyTiff(){return!T.map((Y=>this[Y].enabled)).some((Y=>Y===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let Y of z)this[Y].enabled&&!y.has(Y)&&p("segment parser",Y)}}function K(re,Y){let oe,le,ue,he,fe=[];for(ue of Y){for(he of(oe=B.get(ue),le=[],oe))(re.includes(he[0])||re.includes(he[1]))&&le.push(he[0]);le.length&&fe.push([ue,le])}return fe}function W(re,Y){return re!==void 0?re:Y!==void 0?Y:void 0}function X(re,Y){for(let oe of Y)re.add(oe)}e(R,"default",N);class H{constructor(Y){e(this,"parsers",{}),e(this,"output",{}),e(this,"errors",[]),e(this,"pushToErrors",(oe=>this.errors.push(oe))),this.options=R.useCached(Y)}async read(Y){this.file=await(function(oe,le){return typeof oe=="string"?k(oe,le):s&&!i&&oe instanceof HTMLImageElement?k(oe.src,le):oe instanceof Uint8Array||oe instanceof ArrayBuffer||oe instanceof DataView?new c(oe):s&&oe instanceof Blob?O(oe,le,"blob",A):void l("Invalid input argument")})(Y,this.options)}setup(){if(this.fileParser)return;let{file:Y}=this,oe=Y.getUint16(0);for(let[le,ue]of m)if(ue.canHandle(Y,oe))return this.fileParser=new ue(this.options,this.file,this.parsers),Y[le]=!0;this.file.close&&this.file.close(),l("Unknown file format")}async parse(){let{output:Y,errors:oe}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),oe.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&oe.length>0&&(Y.errors=oe),f(le=Y)?void 0:le;var le}async executeParsers(){let{output:Y}=this;await this.fileParser.parse();let oe=Object.values(this.parsers).map((async le=>{let ue=await le.parse();le.assignToOutput(Y,ue)}));this.options.silentErrors&&(oe=oe.map((le=>le.catch(this.pushToErrors)))),await Promise.all(oe)}async extractThumbnail(){this.setup();let{options:Y,file:oe}=this,le=y.get("tiff",Y);var ue;if(oe.tiff?ue={start:0,type:"tiff"}:oe.jpeg&&(ue=await this.fileParser.getOrFindSegment("tiff")),ue===void 0)return;let he=await this.fileParser.ensureSegmentChunk(ue),fe=this.parsers.tiff=new le(he,Y,oe),_e=await fe.extractThumbnail();return oe.close&&oe.close(),_e}}class J{static findPosition(Y,oe){let le=Y.getUint16(oe+2)+2,ue=typeof this.headerLength=="function"?this.headerLength(Y,oe,le):this.headerLength,he=oe+ue,fe=le-ue;return{offset:oe,length:le,headerLength:ue,start:he,size:fe,end:he+fe}}static parse(Y,oe={}){return new this(Y,new R({[this.type]:oe}),Y).parse()}normalizeInput(Y){return Y instanceof c?Y:new c(Y)}constructor(Y,oe={},le){e(this,"errors",[]),e(this,"raw",new Map),e(this,"handleError",(ue=>{if(!this.options.silentErrors)throw ue;this.errors.push(ue.message)})),this.chunk=this.normalizeInput(Y),this.file=le,this.type=this.constructor.type,this.globalOptions=this.options=oe,this.localOptions=oe[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(Y,oe){let le=I.get(oe),ue=V.get(oe),he=B.get(oe),fe=this.options[oe],_e=fe.reviveValues&&!!le,Se=fe.translateValues&&!!ue,ve=fe.translateKeys&&!!he,$e={};for(let[Ee,Ue]of Y)_e&&le.has(Ee)?Ue=le.get(Ee)(Ue):Se&&ue.has(Ee)&&(Ue=this.translateValue(Ue,ue.get(Ee))),ve&&he.has(Ee)&&(Ee=he.get(Ee)||Ee),$e[Ee]=Ue;return $e}translateValue(Y,oe){return oe[Y]||oe.DEFAULT||Y}assignToOutput(Y,oe){this.assignObjectToOutput(Y,this.constructor.type,oe)}assignObjectToOutput(Y,oe,le){if(this.globalOptions.mergeOutput)return Object.assign(Y,le);Y[oe]?Object.assign(Y[oe],le):Y[oe]=le}}e(J,"headerLength",4),e(J,"type",void 0),e(J,"multiSegment",!1),e(J,"canHandle",(()=>!1));function q(re){return re===192||re===194||re===196||re===219||re===221||re===218||re===254}function Q(re){return re>=224&&re<=239}function Z(re,Y,oe){for(let[le,ue]of y)if(ue.canHandle(re,Y,oe))return le}class ee extends class{constructor(Y,oe,le){e(this,"errors",[]),e(this,"ensureSegmentChunk",(async ue=>{let he=ue.start,fe=ue.size||65536;if(this.file.chunked)if(this.file.available(he,fe))ue.chunk=this.file.subarray(he,fe);else try{ue.chunk=await this.file.readChunk(he,fe)}catch(_e){l(`Couldn't read segment: ${JSON.stringify(ue)}. ${_e.message}`)}else this.file.byteLength>he+fe?ue.chunk=this.file.subarray(he,fe):ue.size===void 0?ue.chunk=this.file.subarray(he):l("Segment unreachable: "+JSON.stringify(ue));return ue.chunk})),this.extendOptions&&this.extendOptions(Y),this.options=Y,this.file=oe,this.parsers=le}injectSegment(Y,oe){this.options[Y].enabled&&this.createParser(Y,oe)}createParser(Y,oe){let le=new(y.get(Y))(oe,this.options,this.file);return this.parsers[Y]=le}createParsers(Y){for(let oe of Y){let{type:le,chunk:ue}=oe,he=this.options[le];if(he&&he.enabled){let fe=this.parsers[le];fe&&fe.append||fe||this.createParser(le,ue)}}}async readSegments(Y){let oe=Y.map(this.ensureSegmentChunk);await Promise.all(oe)}}{constructor(...Y){super(...Y),e(this,"appSegments",[]),e(this,"jpegSegments",[]),e(this,"unknownSegments",[])}static canHandle(Y,oe){return oe===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(Y){Y===!0?(this.findAll=!0,this.wanted=new Set(y.keyList())):(Y=Y===void 0?y.keyList().filter((oe=>this.options[oe].enabled)):Y.filter((oe=>this.options[oe].enabled&&y.has(oe))),this.findAll=!1,this.remaining=new Set(Y),this.wanted=new Set(Y)),this.unfinishedMultiSegment=!1}async findAppSegments(Y=0,oe){this.setupSegmentFinderArgs(oe);let{file:le,findAll:ue,wanted:he,remaining:fe}=this;if(!ue&&this.file.chunked&&(ue=Array.from(he).some((_e=>{let Se=y.get(_e),ve=this.options[_e];return Se.multiSegment&&ve.multiSegment})),ue&&await this.file.readWhole()),Y=this.findAppSegmentsInRange(Y,le.byteLength),!this.options.onlyTiff&&le.chunked){let _e=!1;for(;fe.size>0&&!_e&&(le.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:Se}=le,ve=this.appSegments.some(($e=>!this.file.available($e.offset||$e.start,$e.length||$e.size)));if(_e=Y>Se&&!ve?!await le.readNextChunk(Y):!await le.readNextChunk(Se),(Y=this.findAppSegmentsInRange(Y,le.byteLength))===void 0)return}}}findAppSegmentsInRange(Y,oe){oe-=2;let le,ue,he,fe,_e,Se,{file:ve,findAll:$e,wanted:Ee,remaining:Ue,options:Re}=this;for(;Y<oe;Y++)if(ve.getUint8(Y)===255){if(le=ve.getUint8(Y+1),Q(le)){if(ue=ve.getUint16(Y+2),he=Z(ve,Y,ue),he&&Ee.has(he)&&(fe=y.get(he),_e=fe.findPosition(ve,Y),Se=Re[he],_e.type=he,this.appSegments.push(_e),!$e&&(fe.multiSegment&&Se.multiSegment?(this.unfinishedMultiSegment=_e.chunkNumber<_e.chunkCount,this.unfinishedMultiSegment||Ue.delete(he)):Ue.delete(he),Ue.size===0)))break;Re.recordUnknownSegments&&(_e=J.findPosition(ve,Y),_e.marker=le,this.unknownSegments.push(_e)),Y+=ue+1}else if(q(le)){if(ue=ve.getUint16(Y+2),le===218&&Re.stopAfterSos!==!1)return;Re.recordJpegSegments&&this.jpegSegments.push({offset:Y,length:ue,marker:le}),Y+=ue+1}}return Y}mergeMultiSegments(){if(!this.appSegments.some((oe=>oe.multiSegment)))return;let Y=(function(oe,le){let ue,he,fe,_e=new Map;for(let Se=0;Se<oe.length;Se++)ue=oe[Se],he=ue[le],_e.has(he)?fe=_e.get(he):_e.set(he,fe=[]),fe.push(ue);return Array.from(_e)})(this.appSegments,"type");this.mergedAppSegments=Y.map((([oe,le])=>{let ue=y.get(oe,this.options);return ue.handleMultiSegments?{type:oe,chunk:ue.handleMultiSegments(le)}:le[0]}))}getSegment(Y){return this.appSegments.find((oe=>oe.type===Y))}async getOrFindSegment(Y){let oe=this.getSegment(Y);return oe===void 0&&(await this.findAppSegments(0,[Y]),oe=this.getSegment(Y)),oe}}e(ee,"type","jpeg"),m.set("jpeg",ee);const te=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class se extends J{parseHeader(){var Y=this.chunk.getUint16();Y===18761?this.le=!0:Y===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(Y,oe,le=new Map){let{pick:ue,skip:he}=this.options[oe];ue=new Set(ue);let fe=ue.size>0,_e=he.size===0,Se=this.chunk.getUint16(Y);Y+=2;for(let ve=0;ve<Se;ve++){let $e=this.chunk.getUint16(Y);if(fe){if(ue.has($e)&&(le.set($e,this.parseTag(Y,$e,oe)),ue.delete($e),ue.size===0))break}else!_e&&he.has($e)||le.set($e,this.parseTag(Y,$e,oe));Y+=12}return le}parseTag(Y,oe,le){let{chunk:ue}=this,he=ue.getUint16(Y+2),fe=ue.getUint32(Y+4),_e=te[he];if(_e*fe<=4?Y+=8:Y=ue.getUint32(Y+8),(he<1||he>13)&&l(`Invalid TIFF value type. block: ${le.toUpperCase()}, tag: ${oe.toString(16)}, type: ${he}, offset ${Y}`),Y>ue.byteLength&&l(`Invalid TIFF value offset. block: ${le.toUpperCase()}, tag: ${oe.toString(16)}, type: ${he}, offset ${Y} is outside of chunk size ${ue.byteLength}`),he===1)return ue.getUint8Array(Y,fe);if(he===2)return(Se=(function(ve){for(;ve.endsWith("\0");)ve=ve.slice(0,-1);return ve})(Se=ue.getString(Y,fe)).trim())===""?void 0:Se;var Se;if(he===7)return ue.getUint8Array(Y,fe);if(fe===1)return this.parseTagValue(he,Y);{let ve=new((function(Ee){switch(Ee){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(he))(fe),$e=_e;for(let Ee=0;Ee<fe;Ee++)ve[Ee]=this.parseTagValue(he,Y),Y+=$e;return ve}}parseTagValue(Y,oe){let{chunk:le}=this;switch(Y){case 1:return le.getUint8(oe);case 3:return le.getUint16(oe);case 4:return le.getUint32(oe);case 5:return le.getUint32(oe)/le.getUint32(oe+4);case 6:return le.getInt8(oe);case 8:return le.getInt16(oe);case 9:return le.getInt32(oe);case 10:return le.getInt32(oe)/le.getInt32(oe+4);case 11:return le.getFloat(oe);case 12:return le.getDouble(oe);case 13:return le.getUint32(oe);default:l(`Invalid tiff type ${Y}`)}}}class ie extends se{static canHandle(Y,oe){return Y.getUint8(oe+1)===225&&Y.getUint32(oe+4)===1165519206&&Y.getUint16(oe+8)===0}async parse(){this.parseHeader();let{options:Y}=this;return Y.ifd0.enabled&&await this.parseIfd0Block(),Y.exif.enabled&&await this.safeParse("parseExifBlock"),Y.gps.enabled&&await this.safeParse("parseGpsBlock"),Y.interop.enabled&&await this.safeParse("parseInteropBlock"),Y.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(Y){let oe=this[Y]();return oe.catch!==void 0&&(oe=oe.catch(this.handleError)),oe}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let Y=this.chunk.getUint16(this.ifd0Offset),oe=this.ifd0Offset+2+12*Y;this.ifd1Offset=this.chunk.getUint32(oe)}}parseBlock(Y,oe){let le=new Map;return this[oe]=le,this.parseTags(Y,oe,le),le}async parseIfd0Block(){if(this.ifd0)return;let{file:Y}=this;this.findIfd0Offset(),this.ifd0Offset<8&&l("Malformed EXIF data"),!Y.chunked&&this.ifd0Offset>Y.byteLength&&l(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${Y.byteLength}`),Y.tiff&&await Y.ensureChunk(this.ifd0Offset,o(this.options));let oe=this.parseBlock(this.ifd0Offset,"ifd0");return oe.size!==0?(this.exifOffset=oe.get(34665),this.interopOffset=oe.get(40965),this.gpsOffset=oe.get(34853),this.xmp=oe.get(700),this.iptc=oe.get(33723),this.icc=oe.get(34675),this.options.sanitize&&(oe.delete(34665),oe.delete(40965),oe.delete(34853),oe.delete(700),oe.delete(33723),oe.delete(34675)),oe):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,o(this.options));let Y=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=Y.get(40965)),this.makerNote=Y.get(37500),this.userComment=Y.get(37510),this.options.sanitize&&(Y.delete(40965),Y.delete(37500),Y.delete(37510)),this.unpack(Y,41728),this.unpack(Y,41729),Y}unpack(Y,oe){let le=Y.get(oe);le&&le.length===1&&Y.set(oe,le[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let Y=this.parseBlock(this.gpsOffset,"gps");return Y&&Y.has(2)&&Y.has(4)&&(Y.set("latitude",ne(...Y.get(2),Y.get(1))),Y.set("longitude",ne(...Y.get(4),Y.get(3)))),Y}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(Y=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||Y))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let Y=this.ifd1.get(513),oe=this.ifd1.get(514);return this.chunk.getUint8Array(Y,oe)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let Y,oe,le,ue={};for(oe of P)if(Y=this[oe],!f(Y))if(le=this.canTranslate?this.translateBlock(Y,oe):Object.fromEntries(Y),this.options.mergeOutput){if(oe==="ifd1")continue;Object.assign(ue,le)}else ue[oe]=le;return this.makerNote&&(ue.makerNote=this.makerNote),this.userComment&&(ue.userComment=this.userComment),ue}assignToOutput(Y,oe){if(this.globalOptions.mergeOutput)Object.assign(Y,oe);else for(let[le,ue]of Object.entries(oe))this.assignObjectToOutput(Y,le,ue)}}function ne(re,Y,oe,le){var ue=re+Y/60+oe/3600;return le!=="S"&&le!=="W"||(ue*=-1),ue}e(ie,"type","tiff"),e(ie,"headerLength",10),y.set("tiff",ie);const ae={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},ae,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},ae,{tiff:!1,ifd1:!0,mergeOutput:!1});const de=Object.assign({},ae,{firstChunkSize:4e4,ifd0:[274]});async function ce(re){let Y=new H(de);await Y.read(re);let oe=await Y.parse();if(oe&&oe.ifd0)return oe.ifd0[274]}const pe=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let ge=!0,me=!0;if(typeof navigator=="object"){let re=navigator.userAgent;if(re.includes("iPad")||re.includes("iPhone")){let Y=re.match(/OS (\d+)_(\d+)/);if(Y){let[,oe,le]=Y;ge=Number(oe)+.1*Number(le)<13.4,me=!1}}else if(re.includes("OS X 10")){let[,Y]=re.match(/OS X 10[_.](\d+)/);ge=me=Number(Y)<15}if(re.includes("Chrome/")){let[,Y]=re.match(/Chrome\/(\d+)/);ge=me=Number(Y)<81}else if(re.includes("Firefox/")){let[,Y]=re.match(/Firefox\/(\d+)/);ge=me=Number(Y)<77}}async function ye(re){let Y=await ce(re);return Object.assign({canvas:ge,css:me},pe[Y])}class be extends c{constructor(...Y){super(...Y),e(this,"ranges",new we),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(Y,oe,le){if(Y===0&&this.byteLength===0&&le){let ue=new DataView(le.buffer||le,le.byteOffset,le.byteLength);this._swapDataView(ue)}else{let ue=Y+oe;if(ue>this.byteLength){let{dataView:he}=this._extend(ue);this._swapDataView(he)}}}_extend(Y){let oe;oe=a?r.allocUnsafe(Y):new Uint8Array(Y);let le=new DataView(oe.buffer,oe.byteOffset,oe.byteLength);return oe.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:oe,dataView:le}}subarray(Y,oe,le=!1){return oe=oe||this._lengthToEnd(Y),le&&this._tryExtend(Y,oe),this.ranges.add(Y,oe),super.subarray(Y,oe)}set(Y,oe,le=!1){le&&this._tryExtend(oe,Y.byteLength,Y);let ue=super.set(Y,oe);return this.ranges.add(oe,ue.byteLength),ue}async ensureChunk(Y,oe){this.chunked&&(this.ranges.available(Y,oe)||await this.readChunk(Y,oe))}available(Y,oe){return this.ranges.available(Y,oe)}}class we{constructor(){e(this,"list",[])}get length(){return this.list.length}add(Y,oe,le=0){let ue=Y+oe,he=this.list.filter((fe=>ke(Y,fe.offset,ue)||ke(Y,fe.end,ue)));if(he.length>0){Y=Math.min(Y,...he.map((_e=>_e.offset))),ue=Math.max(ue,...he.map((_e=>_e.end))),oe=ue-Y;let fe=he.shift();fe.offset=Y,fe.length=oe,fe.end=ue,this.list=this.list.filter((_e=>!he.includes(_e)))}else this.list.push({offset:Y,length:oe,end:ue})}available(Y,oe){let le=Y+oe;return this.list.some((ue=>ue.offset<=Y&&le<=ue.end))}}function ke(re,Y,oe){return re<=Y&&Y<=oe}class Oe extends be{constructor(Y,oe){super(0),e(this,"chunksRead",0),this.input=Y,this.options=oe}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(Y=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let oe=this.options.chunkSize,le=await this.readChunk(Y,oe);return!!le&&le.byteLength===oe}async readChunk(Y,oe){if(this.chunksRead++,(oe=this.safeWrapAddress(Y,oe))!==0)return this._readChunk(Y,oe)}safeWrapAddress(Y,oe){return this.size!==void 0&&Y+oe>this.size?Math.max(0,this.size-Y):oe}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}b.set("blob",class extends Oe{async readWhole(){this.chunked=!1;let re=await A(this.input);this._swapArrayBuffer(re)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(re,Y){let oe=Y?re+Y:void 0,le=this.input.slice(re,oe),ue=await A(le);return this.set(ue,re,!0)}});const version$3="4.2.3",packageJson$2={version:version$3},locale$1={strings:{generatingThumbnails:"Generating thumbnails..."}};function canvasToBlob(re,Y,oe){try{re.getContext("2d").getImageData(0,0,1,1)}catch(le){if(le.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return re.toBlob?new Promise(le=>{re.toBlob(le,Y,oe)}).then(le=>{if(le===null)throw new Error("cannot read image, probably an svg with external resources");return le}):Promise.resolve().then(()=>dataURItoBlob(re.toDataURL(Y,oe),{})).then(le=>{if(le===null)throw new Error("could not extract blob, probably an old browser");return le})}function rotateImage(re,Y){let oe=re.width,le=re.height;(Y.deg===90||Y.deg===270)&&(oe=re.height,le=re.width);const ue=document.createElement("canvas");ue.width=oe,ue.height=le;const he=ue.getContext("2d");return he.translate(oe/2,le/2),Y.canvas&&(he.rotate(Y.rad),he.scale(Y.scaleX,Y.scaleY)),he.drawImage(re,-re.width/2,-re.height/2,re.width,re.height),ue}function protect(re){const Y=re.width/re.height,oe=5e6,le=4096;let ue=Math.floor(Math.sqrt(oe*Y)),he=Math.floor(oe/Math.sqrt(oe*Y));if(ue>le&&(ue=le,he=Math.round(ue/Y)),he>le&&(he=le,ue=Math.round(Y*he)),re.width>ue){const fe=document.createElement("canvas");return fe.width=ue,fe.height=he,fe.getContext("2d").drawImage(re,0,0,ue,he),fe}return re}const defaultOptions$4={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class ThumbnailGenerator extends UIPlugin{static VERSION=packageJson$2.version;queue;queueProcessing;defaultThumbnailDimension;thumbnailType;constructor(Y,oe){if(super(Y,{...defaultOptions$4,...oe}),this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=locale$1,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(Y,oe,le){const ue=URL.createObjectURL(Y.data),he=new Promise((_e,Se)=>{const ve=new Image;ve.src=ue,ve.addEventListener("load",()=>{URL.revokeObjectURL(ue),_e(ve)}),ve.addEventListener("error",$e=>{URL.revokeObjectURL(ue),Se($e.error||new Error("Could not create thumbnail"))})}),fe=ye(Y.data).catch(()=>1);return Promise.all([he,fe]).then(([_e,Se])=>{const ve=this.getProportionalDimensions(_e,oe,le,Se.deg),$e=rotateImage(_e,Se),Ee=this.resizeImage($e,ve.width,ve.height);return canvasToBlob(Ee,this.thumbnailType,80)}).then(_e=>URL.createObjectURL(_e))}getProportionalDimensions(Y,oe,le,ue){let he=Y.width/Y.height;if((ue===90||ue===270)&&(he=Y.height/Y.width),oe!=null){let fe=oe;return Y.width<oe&&(fe=Y.width),{width:fe,height:Math.round(fe/he)}}if(le!=null){let fe=le;return Y.height<le&&(fe=Y.height),{width:Math.round(fe*he),height:fe}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/he)}}resizeImage(Y,oe,le){let ue=protect(Y),he=Math.ceil(Math.log2(ue.width/oe));he<1&&(he=1);let fe=oe*2**(he-1),_e=le*2**(he-1);const Se=2;for(;he--;){const ve=document.createElement("canvas");ve.width=fe,ve.height=_e,ve.getContext("2d").drawImage(ue,0,0,fe,_e),ue=ve,fe=Math.round(fe/Se),_e=Math.round(_e/Se)}return ue}setPreviewURL(Y,oe){this.uppy.setFileState(Y,{preview:oe})}addToQueue(Y){this.queue.push(Y),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const Y=this.uppy.getFile(this.queue.shift());return Y?this.requestThumbnail(Y).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(Y){return isPreviewSupported(Y.type)&&!Y.isRemote?this.createThumbnail(Y,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(oe=>{this.setPreviewURL(Y.id,oe),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${Y.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(Y.id),oe)}).catch(oe=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${Y.id}:`,"warning"),this.uppy.log(oe,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(Y.id),oe)}):Promise.resolve()}onFileAdded=Y=>{!Y.preview&&Y.data&&isPreviewSupported(Y.type)&&!Y.isRemote&&this.addToQueue(Y.id)};onCancelRequest=Y=>{const oe=this.queue.indexOf(Y.id);oe!==-1&&this.queue.splice(oe,1)};onFileRemoved=Y=>{const oe=this.queue.indexOf(Y.id);oe!==-1&&this.queue.splice(oe,1),Y.preview&&isObjectURL(Y.preview)&&URL.revokeObjectURL(Y.preview)};onRestored=()=>{this.uppy.getFiles().filter(oe=>oe.isRestored).forEach(oe=>{(!oe.preview||isObjectURL(oe.preview))&&this.addToQueue(oe.id)})};onAllFilesRemoved=()=>{this.queue=[]};waitUntilAllProcessed=Y=>{Y.forEach(le=>{const ue=this.uppy.getFile(le);this.uppy.emit("preprocess-progress",ue,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const oe=()=>{Y.forEach(le=>{const ue=this.uppy.getFile(le);this.uppy.emit("preprocess-complete",ue)})};return new Promise(le=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{oe(),le()}):(oe(),le())})};install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}function findAllDOMElements(re){if(typeof re=="string"){const Y=document.querySelectorAll(re);return Y.length===0?null:Array.from(Y)}return typeof re=="object"&&isDOMElement(re)?[re]:null}const toArray=Array.from;function fallbackApi(re){const Y=toArray(re.files);return Promise.resolve(Y)}function getFilesAndDirectoriesFromDirectory(re,Y,oe,{onSuccess:le}){re.readEntries(ue=>{const he=[...Y,...ue];ue.length?queueMicrotask(()=>{getFilesAndDirectoriesFromDirectory(re,he,oe,{onSuccess:le})}):le(he)},ue=>{oe(ue),le(Y)})}function getAsFileSystemHandleFromEntry(re,Y){return re==null?re:{kind:re.isFile?"file":re.isDirectory?"directory":void 0,name:re.name,getFile(){return new Promise((oe,le)=>re.file(oe,le))},async*values(){const oe=re.createReader();yield*await new Promise(ue=>{getFilesAndDirectoriesFromDirectory(oe,[],Y,{onSuccess:he=>ue(he.map(fe=>getAsFileSystemHandleFromEntry(fe,Y)))})})},isSameEntry:void 0}}async function*createPromiseToAddFileOrParseDirectory(re,Y,oe=void 0){const le=()=>`${Y}/${re.name}`;if(re.kind==="file"){const ue=await re.getFile();ue!=null?(ue.relativePath=Y?le():null,yield ue):oe!=null&&(yield oe)}else if(re.kind==="directory")for await(const ue of re.values())yield*createPromiseToAddFileOrParseDirectory(ue,Y?le():re.name);else oe!=null&&(yield oe)}async function*getFilesFromDataTransfer(re,Y){const oe=await Promise.all(Array.from(re.items,async le=>{let ue;return ue??=getAsFileSystemHandleFromEntry(typeof le.getAsEntry=="function"?le.getAsEntry():le.webkitGetAsEntry(),Y),{fileSystemHandle:ue,lastResortFile:le.getAsFile()}}));for(const{lastResortFile:le,fileSystemHandle:ue}of oe)if(ue!=null)try{yield*createPromiseToAddFileOrParseDirectory(ue,"",le)}catch(he){le!=null?yield le:Y(he)}else le!=null&&(yield le)}async function getDroppedFiles(re,Y){const oe=Y?.logDropError??Function.prototype;try{const le=[];for await(const ue of getFilesFromDataTransfer(re,oe))le.push(ue);return le}catch{return fallbackApi(re)}}const version$2="4.4.3",packageJson$1={version:version$2};function isDragDropSupported(){const re=document.body;return!(!("draggable"in re)||!("ondragstart"in re&&"ondrop"in re)||!("FormData"in window)||!("FileReader"in window))}class AddFiles extends x{fileInput=null;folderInput=null;mobilePhotoFileInput=null;mobileVideoFileInput=null;triggerFileInputClick=()=>{this.fileInput?.click()};triggerFolderInputClick=()=>{this.folderInput?.click()};triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput?.click()};triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput?.click()};onFileInputChange=Y=>{this.props.handleInputChange(Y),Y.currentTarget.value=""};renderHiddenInput=(Y,oe)=>u$1("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:Y,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes?.join(", "),ref:oe});renderHiddenCameraInput=(Y,oe,le)=>{const he={photo:"image/*",video:"video/*"}[Y];return u$1("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${Y}`,onChange:this.onFileInputChange,capture:oe===""?"environment":oe,accept:he,ref:le})};renderMyDeviceAcquirer=()=>u$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[u$1("div",{className:"uppy-DashboardTab-inner",children:u$1("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:u$1("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),u$1("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})});renderPhotoCamera=()=>u$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[u$1("div",{className:"uppy-DashboardTab-inner",children:u$1("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:u$1("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),u$1("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})});renderVideoCamera=()=>u$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[u$1("div",{className:"uppy-DashboardTab-inner",children:u$1("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:u$1("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),u$1("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})});renderBrowseButton=(Y,oe)=>{const le=this.props.acquirers.length;return u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:oe,"data-uppy-super-focusable":le===0,children:Y})};renderDropPasteBrowseTagline=Y=>{const oe=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),le=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),ue=this.props.fileManagerSelectionType,he=ue.charAt(0).toUpperCase()+ue.slice(1);return u$1("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):Y>0?this.props.i18nArray(`dropPasteImport${he}`,{browseFiles:oe,browseFolders:le,browse:oe}):this.props.i18nArray(`dropPaste${he}`,{browseFiles:oe,browseFolders:le,browse:oe})})};[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderAcquirer=Y=>u$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":Y.id,children:u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":Y.id,"aria-controls":`uppy-DashboardContent-panel--${Y.id}`,"aria-selected":this.props.activePickerPanel?.id===Y.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(Y.id),children:[u$1("div",{className:"uppy-DashboardTab-inner",children:Y.icon()}),u$1("div",{className:"uppy-DashboardTab-name",children:Y.name})]})});renderAcquirers=Y=>{const oe=[...Y],le=oe.splice(Y.length-2,Y.length);return u$1(k$2,{children:[oe.map(ue=>this.renderAcquirer(ue)),u$1("span",{role:"presentation",style:{"white-space":"nowrap"},children:le.map(ue=>this.renderAcquirer(ue))})]})};renderSourcesList=(Y,oe)=>{const{showNativePhotoCameraButton:le,showNativeVideoCameraButton:ue}=this.props;let he=[];const fe="myDevice";oe||he.push({key:fe,elements:this.renderMyDeviceAcquirer()}),le&&he.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),ue&&he.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),he.push(...Y.map($e=>({key:$e.id,elements:this.renderAcquirer($e)}))),he.length===1&&he[0].key===fe&&(he=[]);const Se=[...he],ve=Se.splice(he.length-2,he.length);return u$1(k$2,{children:[this.renderDropPasteBrowseTagline(he.length),u$1("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[Se.map(({key:$e,elements:Ee})=>u$1(k$2,{children:Ee},$e)),u$1("span",{role:"presentation",style:{"white-space":"nowrap"},children:ve.map(({key:$e,elements:Ee})=>u$1(k$2,{children:Ee},$e))})]})]})};renderPoweredByUppy(){const{i18nArray:Y}=this.props,oe=u$1("span",{children:[u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:u$1("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),u$1("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),le=Y("poweredBy",{uppy:oe});return u$1("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:le})}render(){const{showNativePhotoCameraButton:Y,showNativeVideoCameraButton:oe,nativeCameraFacingMode:le}=this.props;return u$1("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,ue=>{this.fileInput=ue}),this.renderHiddenInput(!0,ue=>{this.folderInput=ue}),Y&&this.renderHiddenCameraInput("photo",le,ue=>{this.mobilePhotoFileInput=ue}),oe&&this.renderHiddenCameraInput("video",le,ue=>{this.mobileVideoFileInput=ue}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),u$1("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&u$1("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const AddFilesPanel=re=>u$1("div",{className:classNames("uppy-Dashboard-AddFilesPanel",re.className),"data-uppy-panelType":"AddFiles","aria-hidden":!re.showAddFilesPanel,children:[u$1("div",{className:"uppy-DashboardContent-bar",children:[u$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:re.i18n("addingMoreFiles")}),u$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>re.toggleAddFilesPanel(!1),children:re.i18n("back")})]}),u$1(AddFiles,{...re})]});function EditorPanel(re){const Y=re.files[re.fileCardFor],oe=()=>{re.uppy.emit("file-editor:cancel",Y),re.closeFileEditor()};return u$1("div",{className:classNames("uppy-DashboardContent-panel",re.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[u$1("div",{className:"uppy-DashboardContent-bar",children:[u$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:re.i18nArray("editing",{file:u$1("span",{className:"uppy-DashboardContent-titleFile",children:Y.meta?Y.meta.name:Y.name})})}),u$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:oe,children:re.i18n("cancel")}),u$1("button",{className:"uppy-DashboardContent-save",type:"button",onClick:re.saveFileEditor,children:re.i18n("save")})]}),u$1("div",{className:"uppy-DashboardContent-panelBody",children:re.editors.map(le=>re.uppy.getPlugin(le.id).render(re.state))})]})}function iconImage(){return u$1("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("g",{fill:"#686DE0",fillRule:"evenodd",children:[u$1("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),u$1("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),u$1("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function iconAudio(){return u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function iconVideo(){return u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function iconPDF(){return u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function iconArchive(){return u$1("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function iconFile(){return u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[u$1("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),u$1("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function iconText(){return u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u$1("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function getIconByMime(re){const Y={color:"#838999",icon:iconFile()};if(!re)return Y;const oe=re.split("/")[0],le=re.split("/")[1];return oe==="text"?{color:"#5a5e69",icon:iconText()}:oe==="image"?{color:"#686de0",icon:iconImage()}:oe==="audio"?{color:"#068dbb",icon:iconAudio()}:oe==="video"?{color:"#19af67",icon:iconVideo()}:oe==="application"&&le==="pdf"?{color:"#e25149",icon:iconPDF()}:oe==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(le)!==-1?{color:"#00C469",icon:iconArchive()}:Y}function ignoreEvent(re){const{tagName:Y}=re.target;if(Y==="INPUT"||Y==="TEXTAREA"){re.stopPropagation();return}re.preventDefault(),re.stopPropagation()}function FilePreview(re){const{file:Y}=re;if(Y.preview)return u$1("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:Y.name,src:Y.preview});const{color:oe,icon:le}=getIconByMime(Y.type);return u$1("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[u$1("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:oe},children:le}),u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:u$1("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function RenderMetaFields(re){const{computedMetaFields:Y,requiredMetaFields:oe,updateMeta:le,form:ue,formState:he}=re,fe={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return Y.map(_e=>{const Se=`uppy-Dashboard-FileCard-input-${_e.id}`,ve=oe.includes(_e.id);return u$1("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[u$1("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:Se,children:_e.name}),_e.render!==void 0?_e.render({value:he[_e.id],onChange:$e=>le($e,_e.id),fieldCSSClasses:fe,required:ve,form:ue.id},_$1):u$1("input",{className:fe.text,id:Se,form:ue.id,type:_e.type||"text",required:ve,value:he[_e.id],placeholder:_e.placeholder,onInput:$e=>le($e.target.value,_e.id),"data-uppy-super-focusable":!0})]},_e.id)})}function FileCard(re){const{files:Y,fileCardFor:oe,toggleFileCard:le,saveFileCard:ue,metaFields:he,requiredMetaFields:fe,openFileEditor:_e,i18n:Se,i18nArray:ve,className:$e,canEditFile:Ee}=re,Ue=()=>typeof he=="function"?he(Y[oe]):he,Re=Y[oe],xe=Ue()??[],Ne=Ee(Re),Ie={};xe.forEach(ze=>{Ie[ze.id]=Re.meta[ze.id]??""});const[De,Pe]=d$1(Ie),Ae=q$2(ze=>{ze.preventDefault(),ue(De,oe)},[ue,De,oe]),Be=(ze,Ge)=>{Pe({...De,[Ge]:ze})},Le=()=>{le(!1)},[Ve]=d$1(()=>{const ze=document.createElement("form");return ze.setAttribute("tabindex","-1"),ze.id=nanoid(),ze});return y$1(()=>(document.body.appendChild(Ve),Ve.addEventListener("submit",Ae),()=>{Ve.removeEventListener("submit",Ae),document.body.removeChild(Ve)}),[Ve,Ae]),u$1("div",{className:classNames("uppy-Dashboard-FileCard",$e),"data-uppy-panelType":"FileCard",onDragOver:ignoreEvent,onDragLeave:ignoreEvent,onDrop:ignoreEvent,onPaste:ignoreEvent,children:[u$1("div",{className:"uppy-DashboardContent-bar",children:[u$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:ve("editing",{file:u$1("span",{className:"uppy-DashboardContent-titleFile",children:Re.meta?Re.meta.name:Re.name})})}),u$1("button",{className:"uppy-DashboardContent-back",type:"button",form:Ve.id,title:Se("finishEditingFile"),onClick:Le,children:Se("cancel")})]}),u$1("div",{className:"uppy-Dashboard-FileCard-inner",children:[u$1("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:getIconByMime(Re.type).color},children:[u$1(FilePreview,{file:Re}),Ne&&u$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:ze=>{Ae(ze),_e(Re)},children:Se("editImage")})]}),u$1("div",{className:"uppy-Dashboard-FileCard-info",children:u$1(RenderMetaFields,{computedMetaFields:xe,requiredMetaFields:fe,updateMeta:Be,form:Ve,formState:De})}),u$1("div",{className:"uppy-Dashboard-FileCard-actions",children:[u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:Ve.id,children:Se("saveChanges")}),u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:Le,form:Ve.id,children:Se("cancel")})]})]})]})}function shallowEqualObjects(re,Y){if(re===Y)return!0;if(!re||!Y)return!1;const oe=Object.keys(re),le=Object.keys(Y),ue=oe.length;if(le.length!==ue)return!1;for(let he=0;he<ue;he++){const fe=oe[he];if(re[fe]!==Y[fe]||!Object.prototype.hasOwnProperty.call(Y,fe))return!1}return!0}function copyToClipboard(re,Y="Copy the URL below"){return new Promise(oe=>{const le=document.createElement("textarea");le.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),le.value=re,document.body.appendChild(le),le.select();const ue=()=>{document.body.removeChild(le),window.prompt(Y,re),oe()};try{return document.execCommand("copy")?(document.body.removeChild(le),oe()):ue()}catch{return document.body.removeChild(le),ue()}})}function EditButton({file:re,uploadInProgressOrComplete:Y,metaFields:oe,canEditFile:le,i18n:ue,onClick:he}){return!Y&&oe&&oe.length>0||!Y&&le(re)?u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":ue("editFileWithFilename",{file:re.meta.name}),title:ue("editFileWithFilename",{file:re.meta.name}),onClick:()=>he(),children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:u$1("g",{fillRule:"evenodd",children:[u$1("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),u$1("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),u$1("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function RemoveButton({i18n:re,onClick:Y,file:oe}){return u$1("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":re("removeFile",{file:oe.meta.name}),title:re("removeFile",{file:oe.meta.name}),onClick:()=>Y(),children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[u$1("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),u$1("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function CopyLinkButton({file:re,uppy:Y,i18n:oe}){const le=ue=>{copyToClipboard(re.uploadURL,oe("copyLinkToClipboardFallback")).then(()=>{Y.log("Link copied to clipboard."),Y.info(oe("copyLinkToClipboardSuccess"),"info",3e3)}).catch(Y.log).then(()=>ue.target.focus({preventScroll:!0}))};return u$1("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":oe("copyLink"),title:oe("copyLink"),onClick:ue=>le(ue),children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:u$1("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function Buttons(re){const{uppy:Y,file:oe,uploadInProgressOrComplete:le,canEditFile:ue,metaFields:he,showLinkToFileUploadResult:fe,showRemoveButton:_e,i18n:Se,toggleFileCard:ve,openFileEditor:$e}=re;return u$1("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[u$1(EditButton,{i18n:Se,file:oe,uploadInProgressOrComplete:le,canEditFile:ue,metaFields:he,onClick:()=>{he&&he.length>0?ve(!0,oe.id):$e(oe)}}),fe&&oe.uploadURL?u$1(CopyLinkButton,{file:oe,uppy:Y,i18n:Se}):null,_e?u$1(RemoveButton,{i18n:Se,file:oe,onClick:()=>Y.removeFile(oe.id)}):null]})}const separator="...";function truncateString(re,Y){if(Y===0)return"";if(re.length<=Y)return re;if(Y<=separator.length+1)return`${re.slice(0,Y-1)}`;const oe=Y-separator.length,le=Math.ceil(oe/2),ue=Math.floor(oe/2);return re.slice(0,le)+separator+re.slice(-ue)}const metaFieldIdToName=(re,Y)=>(typeof Y=="function"?Y():Y).filter(ue=>ue.id===re)[0].name;function MetaErrorMessage(re){const{file:Y,toggleFileCard:oe,i18n:le,metaFields:ue}=re,{missingRequiredMetaFields:he}=Y;if(!he?.length)return null;const fe=he.map(_e=>metaFieldIdToName(_e,ue)).join(", ");return u$1("div",{className:"uppy-Dashboard-Item-errorMessage",children:[le("missingRequiredMetaFields",{smart_count:he.length,fields:fe})," ",u$1("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>oe(!0,Y.id),children:le("editFile")})]})}const renderFileName=re=>{const{author:Y,name:oe}=re.file.meta;function le(){return re.isSingleFile&&re.containerHeight>=350?90:re.containerWidth<=352?35:re.containerWidth<=576?60:Y?20:30}return u$1("div",{className:"uppy-Dashboard-Item-name",title:oe,children:truncateString(oe,le())})},renderAuthor=re=>{const{author:Y}=re.file.meta,oe=re.file.remote?.providerName,le="";return Y?u$1("div",{className:"uppy-Dashboard-Item-author",children:[u$1("a",{href:`${Y.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:truncateString(Y.name,13)}),oe?u$1(k$2,{children:[` ${le} `,oe,` ${le} `]}):null]}):null},renderFileSize=re=>re.file.size&&u$1("div",{className:"uppy-Dashboard-Item-statusSize",children:prettierBytes(re.file.size)}),ReSelectButton=re=>re.file.isGhost&&u$1("span",{children:["  ",u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>re.toggleAddFilesPanel(!0),children:re.i18n("reSelect")})]}),ErrorButton=({file:re,onClick:Y})=>re.error?u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":re.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:Y,type:"button",children:"?"}):null;function FileInfo(re){const{file:Y,i18n:oe,toggleFileCard:le,metaFields:ue,toggleAddFilesPanel:he,isSingleFile:fe,containerHeight:_e,containerWidth:Se}=re;return u$1("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":Y.source,children:[u$1("div",{className:"uppy-Dashboard-Item-fileName",children:[renderFileName({file:Y,isSingleFile:fe,containerHeight:_e,containerWidth:Se}),u$1(ErrorButton,{file:Y,onClick:()=>alert(Y.error)})]}),u$1("div",{className:"uppy-Dashboard-Item-status",children:[renderAuthor({file:Y}),renderFileSize({file:Y}),ReSelectButton({file:Y,toggleAddFilesPanel:he,i18n:oe})]}),u$1(MetaErrorMessage,{file:Y,i18n:oe,toggleFileCard:le,metaFields:ue})]})}function FilePreviewAndLink(re){const{file:Y,i18n:oe,toggleFileCard:le,metaFields:ue,showLinkToFileUploadResult:he}=re,_e=Y.preview?"rgba(255, 255, 255, 0.5)":getIconByMime(Y.type).color;return u$1("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:_e},children:[he&&Y.uploadURL&&u$1("a",{className:"uppy-Dashboard-Item-previewLink",href:Y.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":Y.meta.name,children:u$1("span",{hidden:!0,children:Y.meta.name})}),u$1(FilePreview,{file:Y}),u$1(MetaErrorMessage,{file:Y,i18n:oe,toggleFileCard:le,metaFields:ue})]})}function onPauseResumeCancelRetry(re){if(!re.isUploaded){if(re.error&&!re.hideRetryButton){re.uppy.retryUpload(re.file.id);return}re.resumableUploads&&!re.hidePauseResumeButton?re.uppy.pauseResume(re.file.id):re.individualCancellation&&!re.hideCancelButton&&re.uppy.removeFile(re.file.id)}}function progressIndicatorTitle(re){return re.isUploaded?re.i18n("uploadComplete"):re.error?re.i18n("retryUpload"):re.resumableUploads?re.file.isPaused?re.i18n("resumeUpload"):re.i18n("pauseUpload"):re.individualCancellation?re.i18n("cancelUpload"):""}function ProgressIndicatorButton(re){return u$1("div",{className:"uppy-Dashboard-Item-progress",children:u$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":progressIndicatorTitle(re),title:progressIndicatorTitle(re),onClick:()=>onPauseResumeCancelRetry(re),children:re.children})})}function ProgressCircleContainer({children:re}){return u$1("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:re})}function ProgressCircle({progress:re}){const Y=2*Math.PI*15;return u$1("g",{children:[u$1("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),u$1("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":Y,"stroke-dashoffset":Y-Y/100*re})]})}function FileProgress(re){return!re.file.progress.uploadStarted||re.file.progress.percentage===void 0?null:re.isUploaded?u$1("div",{className:"uppy-Dashboard-Item-progress",children:u$1("div",{className:"uppy-Dashboard-Item-progressIndicator",children:u$1(ProgressCircleContainer,{children:[u$1("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),u$1("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):re.recoveredState?null:re.error&&!re.hideRetryButton?u$1(ProgressIndicatorButton,{...re,children:u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[u$1("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),u$1("path",{d:"M7.9 3H10v2H7.9z"}),u$1("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),u$1("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):re.resumableUploads&&!re.hidePauseResumeButton?u$1(ProgressIndicatorButton,{...re,children:u$1(ProgressCircleContainer,{children:[u$1(ProgressCircle,{progress:re.file.progress.percentage}),re.file.isPaused?u$1("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):u$1("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[u$1("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),u$1("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!re.resumableUploads&&re.individualCancellation&&!re.hideCancelButton?u$1(ProgressIndicatorButton,{...re,children:u$1(ProgressCircleContainer,{children:[u$1(ProgressCircle,{progress:re.file.progress.percentage}),u$1("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):u$1("div",{className:"uppy-Dashboard-Item-progress",children:u$1("div",{className:"uppy-Dashboard-Item-progressIndicator",children:u$1(ProgressCircleContainer,{children:u$1(ProgressCircle,{progress:re.file.progress.percentage})})})})}class FileItem extends x{componentDidMount(){const{file:Y}=this.props;Y.preview||this.props.handleRequestThumbnail(Y)}shouldComponentUpdate(Y){return!shallowEqualObjects(this.props,Y)}componentDidUpdate(){const{file:Y}=this.props;Y.preview||this.props.handleRequestThumbnail(Y)}componentWillUnmount(){const{file:Y}=this.props;Y.preview||this.props.handleCancelThumbnail(Y)}render(){const{file:Y}=this.props,oe=Y.progress.preprocess||Y.progress.postprocess,le=!!Y.progress.uploadComplete&&!oe&&!Y.error,ue=!!Y.progress.uploadStarted||!!oe,he=Y.progress.uploadStarted&&!Y.progress.uploadComplete||oe,fe=Y.error||!1,{isGhost:_e}=Y;let Se=(this.props.individualCancellation||!he)&&!le;le&&this.props.showRemoveButtonAfterComplete&&(Se=!0);const ve=classNames({"uppy-Dashboard-Item":!0,"is-inprogress":he&&!this.props.recoveredState,"is-processing":oe,"is-complete":le,"is-error":!!fe,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":_e});return u$1("div",{className:ve,id:`uppy_${Y.id}`,role:this.props.role,children:[u$1("div",{className:"uppy-Dashboard-Item-preview",children:[u$1(FilePreviewAndLink,{file:Y,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),u$1(FileProgress,{uppy:this.props.uppy,file:Y,error:fe,isUploaded:le,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),u$1("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[u$1(FileInfo,{file:Y,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),u$1(Buttons,{file:Y,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:Se,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:ue,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function chunks(re,Y){const oe=[];let le=[];return re.forEach(ue=>{le.length<Y?le.push(ue):(oe.push(le),le=[ue])}),le.length&&oe.push(le),oe}function FileList({id:re,i18n:Y,uppy:oe,files:le,resumableUploads:ue,hideRetryButton:he,hidePauseResumeButton:fe,hideCancelButton:_e,showLinkToFileUploadResult:Se,showRemoveButtonAfterComplete:ve,metaFields:$e,isSingleFile:Ee,toggleFileCard:Ue,handleRequestThumbnail:Re,handleCancelThumbnail:xe,recoveredState:Ne,individualCancellation:Ie,itemsPerRow:De,openFileEditor:Pe,canEditFile:Ae,toggleAddFilesPanel:Be,containerWidth:Le,containerHeight:Ve}){const ze=De===1?71:200,Ge=T$2(()=>{const Qe=(et,je)=>Number(le[je].isGhost)-Number(le[et].isGhost),Ye=Object.keys(le);return Ne&&Ye.sort(Qe),chunks(Ye,De)},[le,De,Ne]),We=Qe=>u$1("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:Qe.map(Ye=>u$1(FileItem,{uppy:oe,id:re,i18n:Y,resumableUploads:ue,individualCancellation:Ie,hideRetryButton:he,hidePauseResumeButton:fe,hideCancelButton:_e,showLinkToFileUploadResult:Se,showRemoveButtonAfterComplete:ve,metaFields:$e,recoveredState:Ne,isSingleFile:Ee,containerWidth:Le,containerHeight:Ve,toggleFileCard:Ue,handleRequestThumbnail:Re,handleCancelThumbnail:xe,role:"listitem",openFileEditor:Pe,canEditFile:Ae,toggleAddFilesPanel:Be,file:le[Ye]},Ye))},Qe[0]);return Ee?u$1("div",{class:"uppy-Dashboard-files",children:We(Ge[0])}):u$1(VirtualList,{class:"uppy-Dashboard-files",role:"list",data:Ge,renderRow:We,rowHeight:ze})}function PickerPanelContent({activePickerPanel:re,className:Y,hideAllPanels:oe,i18n:le,state:ue,uppy:he}){const fe=A$1(null);return u$1("div",{className:classNames("uppy-DashboardContent-panel",Y),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${re.id}`,onDragOver:ignoreEvent,onDragLeave:ignoreEvent,onDrop:ignoreEvent,onPaste:ignoreEvent,children:[u$1("div",{className:"uppy-DashboardContent-bar",children:[u$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:le("importFrom",{name:re.name})}),u$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:oe,children:le("cancel")})]}),u$1("div",{ref:fe,className:"uppy-DashboardContent-panelBody",children:he.getPlugin(re.id).render(ue,fe.current)})]})}const uploadStates={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function getUploadingState(re,Y,oe,le={}){if(re)return uploadStates.STATE_ERROR;if(Y)return uploadStates.STATE_COMPLETE;if(oe)return uploadStates.STATE_PAUSED;let ue=uploadStates.STATE_WAITING;const he=Object.keys(le);for(let fe=0;fe<he.length;fe++){const{progress:_e}=le[he[fe]];if(_e.uploadStarted&&!_e.uploadComplete)return uploadStates.STATE_UPLOADING;_e.preprocess&&ue!==uploadStates.STATE_UPLOADING&&(ue=uploadStates.STATE_PREPROCESSING),_e.postprocess&&ue!==uploadStates.STATE_UPLOADING&&ue!==uploadStates.STATE_PREPROCESSING&&(ue=uploadStates.STATE_POSTPROCESSING)}return ue}function UploadStatus({files:re,i18n:Y,isAllComplete:oe,isAllErrored:le,isAllPaused:ue,inProgressNotPausedFiles:he,newFiles:fe,processingFiles:_e}){switch(getUploadingState(le,oe,ue,re)){case"uploading":return Y("uploadingXFiles",{smart_count:he.length});case"preprocessing":case"postprocessing":return Y("processingXFiles",{smart_count:_e.length});case"paused":return Y("uploadPaused");case"waiting":return Y("xFilesSelected",{smart_count:fe.length});case"complete":return Y("uploadComplete");case"error":return Y("error")}}function PanelTopBar(re){const{i18n:Y,isAllComplete:oe,hideCancelButton:le,maxNumberOfFiles:ue,toggleAddFilesPanel:he,uppy:fe}=re;let{allowNewUpload:_e}=re;return _e&&ue&&(_e=re.totalFileCount<re.maxNumberOfFiles),u$1("div",{className:"uppy-DashboardContent-bar",children:[!oe&&!le?u$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>fe.cancelAll(),children:Y("cancel")}):u$1("div",{}),u$1("div",{className:"uppy-DashboardContent-title",children:u$1(UploadStatus,{...re})}),_e?u$1("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":Y("addMoreFiles"),title:Y("addMoreFiles"),onClick:()=>he(!0),children:[u$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:u$1("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),u$1("span",{className:"uppy-DashboardContent-addMoreCaption",children:Y("addMore")})]}):u$1("div",{})]})}const transitionName="uppy-transition-slideDownUp",duration=250;function Slide({children:re}){const[Y,oe]=d$1(null),[le,ue]=d$1(""),he=A$1(),fe=A$1(),_e=A$1(),Se=()=>{ue(`${transitionName}-enter`),cancelAnimationFrame(_e.current),clearTimeout(fe.current),fe.current=void 0,_e.current=requestAnimationFrame(()=>{ue(`${transitionName}-enter ${transitionName}-enter-active`),he.current=setTimeout(()=>{ue("")},duration)})},ve=()=>{ue(`${transitionName}-leave`),cancelAnimationFrame(_e.current),clearTimeout(he.current),he.current=void 0,_e.current=requestAnimationFrame(()=>{ue(`${transitionName}-leave ${transitionName}-leave-active`),fe.current=setTimeout(()=>{oe(null),ue("")},duration)})};return y$1(()=>{const $e=H$2(re)[0];Y!==$e&&($e&&!Y?Se():Y&&!$e&&!fe.current&&ve(),oe($e))},[re,Y]),y$1(()=>()=>{clearTimeout(he.current),clearTimeout(fe.current),cancelAnimationFrame(_e.current)},[]),Y?K$2(Y,{className:classNames(le,Y.props.className)}):null}const WIDTH_XL=900,WIDTH_LG=700,WIDTH_MD=576,HEIGHT_MD=330;function Dashboard$1(re){const Y=re.totalFileCount===0,oe=re.totalFileCount===1,le=re.containerWidth>WIDTH_MD,ue=re.containerHeight>HEIGHT_MD,he=classNames({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":re.disabled,"uppy-Dashboard--animateOpenClose":re.animateOpenClose,"uppy-Dashboard--isClosing":re.isClosing,"uppy-Dashboard--isDraggingOver":re.isDraggingOver,"uppy-Dashboard--modal":!re.inline,"uppy-size--md":re.containerWidth>WIDTH_MD,"uppy-size--lg":re.containerWidth>WIDTH_LG,"uppy-size--xl":re.containerWidth>WIDTH_XL,"uppy-size--height-md":re.containerHeight>HEIGHT_MD,"uppy-Dashboard--isAddFilesPanelVisible":re.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":re.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":re.singleFileFullScreen&&oe&&ue});let fe=1;re.containerWidth>WIDTH_XL?fe=5:re.containerWidth>WIDTH_LG?fe=4:re.containerWidth>WIDTH_MD&&(fe=3);const _e=re.showSelectedFiles&&!Y,Se=re.recoveredState?Object.keys(re.recoveredState.files).length:null,ve=re.files?Object.keys(re.files).filter(Ue=>re.files[Ue].isGhost).length:0,$e=()=>ve>0?re.i18n("recoveredXFiles",{smart_count:ve}):re.i18n("recoveredAllFiles");return u$1("div",{className:he,"data-uppy-theme":re.theme,"data-uppy-num-acquirers":re.acquirers.length,"data-uppy-drag-drop-supported":!re.disableLocalFiles&&isDragDropSupported(),"aria-hidden":re.inline?"false":re.isHidden,"aria-disabled":re.disabled,"aria-label":re.inline?re.i18n("dashboardTitle"):re.i18n("dashboardWindowTitle"),onPaste:re.handlePaste,onDragOver:re.handleDragOver,onDragLeave:re.handleDragLeave,onDrop:re.handleDrop,children:[u$1("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:re.handleClickOutside}),u$1("div",{className:"uppy-Dashboard-inner",role:re.inline?void 0:"dialog",style:{width:re.inline&&re.width?re.width:"",height:re.inline&&re.height?re.height:""},children:[re.inline?null:u$1("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":re.i18n("closeModal"),title:re.i18n("closeModal"),onClick:re.closeModal,children:u$1("span",{"aria-hidden":"true",children:""})}),u$1("div",{className:"uppy-Dashboard-innerWrap",children:[u$1("div",{className:"uppy-Dashboard-dropFilesHereHint",children:re.i18n("dropHint")}),_e&&u$1(PanelTopBar,{...re}),Se&&u$1("div",{className:"uppy-Dashboard-serviceMsg",children:[u$1("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:u$1("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[u$1("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),u$1("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),u$1("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),u$1("strong",{className:"uppy-Dashboard-serviceMsg-title",children:re.i18n("sessionRestored")}),u$1("div",{className:"uppy-Dashboard-serviceMsg-text",children:$e()})]}),_e?u$1(FileList,{id:re.id,i18n:re.i18n,uppy:re.uppy,files:re.files,resumableUploads:re.resumableUploads,hideRetryButton:re.hideRetryButton,hidePauseResumeButton:re.hidePauseResumeButton,hideCancelButton:re.hideCancelButton,showLinkToFileUploadResult:re.showLinkToFileUploadResult,showRemoveButtonAfterComplete:re.showRemoveButtonAfterComplete,metaFields:re.metaFields,toggleFileCard:re.toggleFileCard,handleRequestThumbnail:re.handleRequestThumbnail,handleCancelThumbnail:re.handleCancelThumbnail,recoveredState:re.recoveredState,individualCancellation:re.individualCancellation,openFileEditor:re.openFileEditor,canEditFile:re.canEditFile,toggleAddFilesPanel:re.toggleAddFilesPanel,isSingleFile:oe,itemsPerRow:fe,containerWidth:re.containerWidth,containerHeight:re.containerHeight}):u$1(AddFiles,{i18n:re.i18n,i18nArray:re.i18nArray,acquirers:re.acquirers,handleInputChange:re.handleInputChange,maxNumberOfFiles:re.maxNumberOfFiles,allowedFileTypes:re.allowedFileTypes,showNativePhotoCameraButton:re.showNativePhotoCameraButton,showNativeVideoCameraButton:re.showNativeVideoCameraButton,nativeCameraFacingMode:re.nativeCameraFacingMode,showPanel:re.showPanel,activePickerPanel:re.activePickerPanel,disableLocalFiles:re.disableLocalFiles,fileManagerSelectionType:re.fileManagerSelectionType,note:re.note,proudlyDisplayPoweredByUppy:re.proudlyDisplayPoweredByUppy}),u$1(Slide,{children:re.showAddFilesPanel?u$1(AddFilesPanel,{...re,isSizeMD:le},"AddFiles"):null}),u$1(Slide,{children:re.fileCardFor?u$1(FileCard,{...re},"FileCard"):null}),u$1(Slide,{children:re.activePickerPanel?u$1(PickerPanelContent,{...re},"Picker"):null}),u$1(Slide,{children:re.showFileEditor?u$1(EditorPanel,{...re},"Editor"):null}),u$1("div",{className:"uppy-Dashboard-progressindicators",children:re.progressindicators.map(Ue=>re.uppy.getPlugin(Ue.id).render(re.state))})]})]})]})}const locale={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}},FOCUSABLE_ELEMENTS=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];var debounceExports=requireDebounce();const debounce=getDefaultExportFromCjs(debounceExports);function getActiveOverlayEl(re,Y){if(Y){const oe=re.querySelector(`[data-uppy-paneltype="${Y}"]`);if(oe)return oe}return re}function createSuperFocus(){let re=!1;return debounce((oe,le)=>{const ue=getActiveOverlayEl(oe,le),he=ue.contains(document.activeElement);if(he&&re)return;const fe=ue.querySelector("[data-uppy-super-focusable]");he&&!fe||(fe?(fe.focus({preventScroll:!0}),re=!0):(ue.querySelector(FOCUSABLE_ELEMENTS)?.focus({preventScroll:!0}),re=!1))},260)}function focusOnFirstNode(re,Y){const oe=Y[0];oe&&(oe.focus(),re.preventDefault())}function focusOnLastNode(re,Y){const oe=Y[Y.length-1];oe&&(oe.focus(),re.preventDefault())}function isFocusInOverlay(re){return re.contains(document.activeElement)}function trapFocus(re,Y,oe){const le=getActiveOverlayEl(oe,Y),ue=toArray(le.querySelectorAll(FOCUSABLE_ELEMENTS)),he=ue.indexOf(document.activeElement);isFocusInOverlay(le)?re.shiftKey&&he===0?focusOnLastNode(re,ue):!re.shiftKey&&he===ue.length-1&&focusOnFirstNode(re,ue):focusOnFirstNode(re,ue)}function forInline(re,Y,oe){Y===null||trapFocus(re,Y,oe)}const TAB_KEY=9,ESC_KEY=27;function createPromise(){const re={};return re.promise=new Promise((Y,oe)=>{re.resolve=Y,re.reject=oe}),re}const defaultOptions$3={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};class Dashboard extends UIPlugin{static VERSION=packageJson$1.version;#e;modalName=`uppy-Dashboard-${nanoid()}`;superFocus=createSuperFocus();ifFocusedOnUppyRecently=!1;dashboardIsDisabled;savedScrollPosition;savedActiveElement;resizeObserver;darkModeMediaQuery;makeDashboardInsidesVisibleAnywayTimeout;constructor(Y,oe){const le=oe?.autoOpen??null;super(Y,{...defaultOptions$3,...oe,autoOpen:le}),this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=locale,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),this.opts.onRequestCloseModal??=()=>this.closeModal(),this.i18nInit()}removeTarget=Y=>{const le=this.getPluginState().targets.filter(ue=>ue.id!==Y.id);this.setPluginState({targets:le})};addTarget=Y=>{const oe=Y.id||Y.constructor.name,le=Y.title||oe,ue=Y.type;if(ue!=="acquirer"&&ue!=="progressindicator"&&ue!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const he={id:oe,name:le,type:ue},_e=this.getPluginState().targets.slice();return _e.push(he),this.setPluginState({targets:_e}),this.el};hideAllPanels=()=>{const Y=this.getPluginState(),oe={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};Y.activePickerPanel===oe.activePickerPanel&&Y.showAddFilesPanel===oe.showAddFilesPanel&&Y.showFileEditor===oe.showFileEditor&&Y.activeOverlayType===oe.activeOverlayType||(this.setPluginState(oe),this.uppy.emit("dashboard:close-panel",Y.activePickerPanel?.id))};showPanel=Y=>{const{targets:oe}=this.getPluginState(),le=oe.find(ue=>ue.type==="acquirer"&&ue.id===Y);this.setPluginState({activePickerPanel:le,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",Y)};canEditFile=Y=>{const{targets:oe}=this.getPluginState();return this.#s(oe).some(ue=>this.uppy.getPlugin(ue.id).canEditFile(Y))};openFileEditor=Y=>{const{targets:oe}=this.getPluginState(),le=this.#s(oe);this.setPluginState({showFileEditor:!0,fileCardFor:Y.id||null,activeOverlayType:"FileEditor"}),le.forEach(ue=>{this.uppy.getPlugin(ue.id).selectFile(Y)})};closeFileEditor=()=>{const{metaFields:Y}=this.getPluginState();Y&&Y.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})};saveFileEditor=()=>{const{targets:Y}=this.getPluginState();this.#s(Y).forEach(le=>{this.uppy.getPlugin(le.id).save()}),this.closeFileEditor()};openModal=()=>{const{promise:Y,resolve:oe}=createPromise();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const le=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",le,!1),oe()};this.el.addEventListener("animationend",le,!1)}else this.setPluginState({isHidden:!1}),oe();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),Y};closeModal=Y=>{const oe=Y?.manualClose??!0,{isHidden:le,isClosing:ue}=this.getPluginState();if(le||ue)return;const{promise:he,resolve:fe}=createPromise();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const _e=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",_e,!1),fe()};this.el.addEventListener("animationend",_e,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),fe();return document.removeEventListener("keydown",this.handleKeyDownInModal),oe&&this.opts.browserBackButtonClose&&history.state?.[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),he};isModalOpen=()=>!this.getPluginState().isHidden||!1;requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal();setDarkModeCapability=Y=>{const{capabilities:oe}=this.uppy.getState();this.uppy.setState({capabilities:{...oe,darkMode:Y}})};handleSystemDarkModeChange=Y=>{const oe=Y.matches;this.uppy.log(`[Dashboard] Dark mode is ${oe?"on":"off"}`),this.setDarkModeCapability(oe)};toggleFileCard=(Y,oe)=>{const le=this.uppy.getFile(oe);Y?this.uppy.emit("dashboard:file-edit-start",le):this.uppy.emit("dashboard:file-edit-complete",le),this.setPluginState({fileCardFor:Y?oe:null,activeOverlayType:Y?"FileCard":null})};toggleAddFilesPanel=Y=>{this.setPluginState({showAddFilesPanel:Y,activeOverlayType:Y?"AddFiles":null})};addFiles=Y=>{const oe=Y.map(le=>({source:this.id,name:le.name,type:le.type,data:le,meta:{relativePath:le.relativePath||le.webkitRelativePath||null}}));try{this.uppy.addFiles(oe)}catch(le){this.uppy.log(le)}};startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(Y=>{const oe=Y[0],{width:le,height:ue}=oe.contentRect;this.setPluginState({containerWidth:le,containerHeight:ue,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const Y=this.getPluginState(),oe=!this.opts.inline&&Y.isHidden;!Y.areInsidesReadyToBeVisible&&!oe&&(this.uppy.log("[Dashboard] resize event didnt fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)};stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)};recordIfFocusedOnUppyRecently=Y=>{this.el.contains(Y.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())};disableInteractiveElements=Y=>{const oe=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],le=this.#e??toArray(this.el.querySelectorAll(oe)).filter(ue=>!ue.classList.contains("uppy-Dashboard-close"));for(const ue of le)ue.tagName==="A"?ue.setAttribute("aria-disabled",Y):ue.disabled=Y;Y?this.#e=le:this.#e=null,this.dashboardIsDisabled=Y};updateBrowserHistory=()=>{history.state?.[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)};handlePopState=Y=>{this.isModalOpen()&&(!Y.state||!Y.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&Y.state?.[this.modalName]&&history.back()};handleKeyDownInModal=Y=>{Y.keyCode===ESC_KEY&&this.requestCloseModal(),Y.keyCode===TAB_KEY&&trapFocus(Y,this.getPluginState().activeOverlayType,this.el)};handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()};handlePaste=Y=>{this.uppy.iteratePlugins(le=>{le.type==="acquirer"&&le.handleRootPaste?.(Y)});const oe=toArray(Y.clipboardData.files);oe.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(oe))};handleInputChange=Y=>{Y.preventDefault();const oe=toArray(Y.currentTarget.files||[]);oe.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(oe))};handleDragOver=Y=>{Y.preventDefault(),Y.stopPropagation();const oe=()=>{let fe=!0;return this.uppy.iteratePlugins(_e=>{_e.canHandleRootDrop?.(Y)&&(fe=!0)}),fe},le=()=>{const{types:fe}=Y.dataTransfer;return fe.some(_e=>_e==="Files")},ue=oe(),he=le();if(!ue&&!he||this.opts.disabled||this.opts.disableLocalFiles&&(he||!ue)||!this.uppy.getState().allowNewUpload){Y.dataTransfer.dropEffect="none";return}Y.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(Y)};handleDragLeave=Y=>{Y.preventDefault(),Y.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(Y)};handleDrop=async Y=>{Y.preventDefault(),Y.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(he=>{he.type==="acquirer"&&he.handleRootDrop?.(Y)});let oe=!1;const le=he=>{this.uppy.log(he,"error"),oe||(this.uppy.info(he.message,"error"),oe=!0)};this.uppy.log("[Dashboard] Processing dropped files");const ue=await getDroppedFiles(Y.dataTransfer,{logDropError:le});ue.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(ue)),this.opts.onDrop(Y)};handleRequestThumbnail=Y=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",Y)};handleCancelThumbnail=Y=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",Y)};handleKeyDownInInline=Y=>{Y.keyCode===TAB_KEY&&forInline(Y,this.getPluginState().activeOverlayType,this.el)};handlePasteOnBody=Y=>{this.el.contains(document.activeElement)&&this.handlePaste(Y)};handleComplete=({failed:Y})=>{this.opts.closeAfterFinish&&!Y?.length&&this.requestCloseModal()};handleCancelRestore=()=>{this.uppy.emit("restore-canceled")};#t=()=>{if(this.opts.disableThumbnailGenerator)return;const Y=600,oe=this.uppy.getFiles();if(oe.length===1){const le=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);le?.setOptions({thumbnailWidth:Y});const ue={...oe[0],preview:void 0};le?.requestThumbnail(ue).then(()=>{le?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}};#n=Y=>{const oe=Y[0],{metaFields:le}=this.getPluginState(),ue=le&&le.length>0,he=this.canEditFile(oe);ue&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,oe.id):he&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(oe)};initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const Y=findAllDOMElements(this.opts.trigger);Y?Y.forEach(oe=>oe.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",this.#u),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",this.#t),this.uppy.on("file-removed",this.#t),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",this.#n)};removeEvents=()=>{const Y=findAllDOMElements(this.opts.trigger);!this.opts.inline&&Y&&Y.forEach(oe=>oe.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",this.#u),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",this.#t),this.uppy.off("file-removed",this.#t),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",this.#n)};superFocusOnEachUpdate=()=>{const Y=this.el.contains(document.activeElement),oe=document.activeElement===document.body||document.activeElement===null,le=this.uppy.getState().info.length===0,ue=!this.opts.inline;le&&(ue||Y||oe&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()};afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()};saveFileCard=(Y,oe)=>{this.uppy.setFileMeta(oe,Y),this.toggleFileCard(!1,oe)};#r=Y=>{const oe=this.uppy.getPlugin(Y.id);return{...Y,icon:oe.icon||this.opts.defaultPickerIcon,render:oe.render}};#i=Y=>{const oe=this.uppy.getPlugin(Y.id);return typeof oe.isSupported!="function"?!0:oe.isSupported()};#o=Y=>Y.filter(oe=>oe.type==="acquirer"&&this.#i(oe)).map(this.#r);#a=Y=>Y.filter(oe=>oe.type==="progressindicator").map(this.#r);#s=Y=>Y.filter(oe=>oe.type==="editor").map(this.#r);render=Y=>{const oe=this.getPluginState(),{files:le,capabilities:ue,allowNewUpload:he}=Y,{newFiles:fe,uploadStartedFiles:_e,completeFiles:Se,erroredFiles:ve,inProgressFiles:$e,inProgressNotPausedFiles:Ee,processingFiles:Ue,isUploadStarted:Re,isAllComplete:xe,isAllPaused:Ne}=this.uppy.getObjectOfFilesPerState(),Ie=this.#o(oe.targets),De=this.#a(oe.targets),Pe=this.#s(oe.targets);let Ae;return this.opts.theme==="auto"?Ae=ue.darkMode?"dark":"light":Ae=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),Dashboard$1({state:Y,isHidden:oe.isHidden,files:le,newFiles:fe,uploadStartedFiles:_e,completeFiles:Se,erroredFiles:ve,inProgressFiles:$e,inProgressNotPausedFiles:Ee,processingFiles:Ue,isUploadStarted:Re,isAllComplete:xe,isAllPaused:Ne,totalFileCount:Object.keys(le).length,totalProgress:Y.totalProgress,allowNewUpload:he,acquirers:Ie,theme:Ae,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:oe.activePickerPanel,showFileEditor:oe.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:oe.isClosing,progressindicators:De,editors:Pe,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:Y.recoveredState,metaFields:oe.metaFields,resumableUploads:ue.resumableUploads||!1,individualCancellation:ue.individualCancellation,isMobileDevice:ue.isMobileDevice,fileCardFor:oe.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:oe.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:oe.containerWidth,containerHeight:oe.containerHeight,areInsidesReadyToBeVisible:oe.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:oe.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})};#l=()=>{const{plugins:Y}=this.opts;Y.forEach(oe=>{const le=this.uppy.getPlugin(oe);le?le.mount(this,le):this.uppy.log(`[Uppy] Dashboard could not find plugin '${oe}', make sure to uppy.use() the plugins you are specifying`,"warning")})};#p=()=>{this.uppy.iteratePlugins(this.#u)};#u=Y=>{const oe=["acquirer","editor"];Y&&!Y.opts?.target&&oe.includes(Y.type)&&(this.getPluginState().targets.some(ue=>Y.id===ue.id)||Y.mount(this,Y))};#h(){const{hideUploadButton:Y,hideRetryButton:oe,hidePauseResumeButton:le,hideCancelButton:ue,showProgressDetails:he,hideProgressAfterFinish:fe,locale:_e,doneButtonHandler:Se}=this.opts;return{hideUploadButton:Y,hideRetryButton:oe,hidePauseResumeButton:le,hideCancelButton:ue,showProgressDetails:he,hideAfterFinish:fe,locale:_e,doneButtonHandler:Se}}#d(){const{thumbnailWidth:Y,thumbnailHeight:oe,thumbnailType:le,waitForThumbnailsBeforeUpload:ue}=this.opts;return{thumbnailWidth:Y,thumbnailHeight:oe,thumbnailType:le,waitForThumbnailsBeforeUpload:ue,lazy:!ue}}#c(){return{}}setOptions(Y){super.setOptions(Y),this.uppy.getPlugin(this.#f())?.setOptions(this.#h()),this.uppy.getPlugin(this.#m())?.setOptions(this.#d())}#f(){return`${this.id}:StatusBar`}#m(){return`${this.id}:ThumbnailGenerator`}#v(){return`${this.id}:Informer`}install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:Y,closeAfterFinish:oe}=this.opts;if(Y&&oe)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:le,allowMultipleUploadBatches:ue}=this.uppy.opts;(le||ue)&&oe&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:he}=this.opts;he&&this.mount(he,this),this.opts.disableStatusBar||this.uppy.use(StatusBar,{id:this.#f(),target:this,...this.#h()}),this.opts.disableInformer||this.uppy.use(Informer,{id:this.#v(),target:this,...this.#c()}),this.opts.disableThumbnailGenerator||this.uppy.use(ThumbnailGenerator,{id:this.#m(),...this.#d()}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const fe=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${fe?"on":"off"}`),this.setDarkModeCapability(fe),this.opts.theme==="auto"&&this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange),this.#l(),this.#p(),this.initEvents()};uninstall=()=>{if(!this.opts.disableInformer){const oe=this.uppy.getPlugin(`${this.id}:Informer`);oe&&this.uppy.removePlugin(oe)}if(!this.opts.disableStatusBar){const oe=this.uppy.getPlugin(`${this.id}:StatusBar`);oe&&this.uppy.removePlugin(oe)}if(!this.opts.disableThumbnailGenerator){const oe=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);oe&&this.uppy.removePlugin(oe)}const{plugins:Y}=this.opts;Y.forEach(oe=>{const le=this.uppy.getPlugin(oe);le&&le.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()}}class EventManager{#e;#t=[];constructor(Y){this.#e=Y}on(Y,oe){return this.#t.push([Y,oe]),this.#e.on(Y,oe)}remove(){for(const[Y,oe]of this.#t.splice(0))this.#e.off(Y,oe)}onFilePause(Y,oe){this.on("upload-pause",(le,ue)=>{Y===le?.id&&oe(ue)})}onFileRemove(Y,oe){this.on("file-removed",le=>{Y===le.id&&oe(le.id)})}onPause(Y,oe){this.on("upload-pause",(le,ue)=>{Y===le?.id&&oe(ue)})}onRetry(Y,oe){this.on("upload-retry",le=>{Y===le?.id&&oe()})}onRetryAll(Y,oe){this.on("retry-all",()=>{this.#e.getFile(Y)&&oe()})}onPauseAll(Y,oe){this.on("pause-all",()=>{this.#e.getFile(Y)&&oe()})}onCancelAll(Y,oe){this.on("cancel-all",(...le)=>{this.#e.getFile(Y)&&oe(...le)})}onResumeAll(Y,oe){this.on("resume-all",()=>{this.#e.getFile(Y)&&oe()})}}function filterNonFailedFiles(re){const Y=oe=>"error"in oe&&!!oe.error;return re.filter(oe=>!Y(oe))}function filterFilesToEmitUploadStarted(re){return re.filter(Y=>!Y.progress?.uploadStarted||!Y.isRestored)}function getAllowedMetaFields(re,Y){return re===!0?Object.keys(Y):Array.isArray(re)?re:[]}function hasProperty(re,Y){return Object.hasOwn(re,Y)}function isNetworkError(re){return re?re.readyState!==0&&re.readyState!==4||re.status===0:!1}class NetworkError extends Error{cause;isNetworkError;request;constructor(Y,oe=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=Y,this.isNetworkError=!0,this.request=oe}}function createCancelError(re){return new Error("Cancelled",{cause:re})}function abortOn(re){if(re!=null){const Y=()=>this.abort(re.reason);re.addEventListener("abort",Y,{once:!0});const oe=()=>{re.removeEventListener("abort",Y)};this.then?.(oe,oe)}return this}class RateLimitedQueue{#e=0;#t=[];#n=!1;#r;#i=1;#o;#a;limit;constructor(Y){typeof Y!="number"||Y===0?this.limit=1/0:this.limit=Y}#s(Y){this.#e+=1;let oe=!1,le;try{le=Y()}catch(ue){throw this.#e-=1,ue}return{abort:ue=>{oe||(oe=!0,this.#e-=1,le?.(ue),this.#l())},done:()=>{oe||(oe=!0,this.#e-=1,this.#l())}}}#l(){queueMicrotask(()=>this.#p())}#p(){if(this.#n||this.#e>=this.limit||this.#t.length===0)return;const Y=this.#t.shift();if(Y==null)throw new Error("Invariant violation: next is null");const oe=this.#s(Y.fn);Y.abort=oe.abort,Y.done=oe.done}#u(Y,oe){const le={fn:Y,priority:oe?.priority||0,abort:()=>{this.#h(le)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},ue=this.#t.findIndex(he=>le.priority>he.priority);return ue===-1?this.#t.push(le):this.#t.splice(ue,0,le),le}#h(Y){const oe=this.#t.indexOf(Y);oe!==-1&&this.#t.splice(oe,1)}run(Y,oe){return!this.#n&&this.#e<this.limit?this.#s(Y):this.#u(Y,oe)}wrapSyncFunction(Y,oe){return(...le)=>{const ue=this.run(()=>(Y(...le),queueMicrotask(()=>ue.done()),()=>{}),oe);return{abortOn,abort(){ue.abort()}}}}wrapPromiseFunction(Y,oe){return(...le)=>{let ue;const he=new Promise((fe,_e)=>{ue=this.run(()=>{let Se,ve;try{ve=Promise.resolve(Y(...le))}catch($e){ve=Promise.reject($e)}return ve.then($e=>{Se?_e(Se):(ue.done(),fe($e))},$e=>{Se?_e(Se):(ue.done(),_e($e))}),$e=>{Se=createCancelError($e)}},oe)});return he.abort=fe=>{ue.abort(fe)},he.abortOn=abortOn,he}}resume(){this.#n=!1,clearTimeout(this.#r);for(let Y=0;Y<this.limit;Y++)this.#l()}#d=()=>this.resume();pause(Y=null){this.#n=!0,clearTimeout(this.#r),Y!=null&&(this.#r=setTimeout(this.#d,Y))}rateLimit(Y){clearTimeout(this.#a),this.pause(Y),this.limit>1&&Number.isFinite(this.limit)&&(this.#o=this.limit-1,this.limit=this.#i,this.#a=setTimeout(this.#c,Y))}#c=()=>{if(this.#n){this.#a=setTimeout(this.#c,0);return}this.#i=this.limit,this.limit=Math.ceil((this.#o+this.#i)/2);for(let Y=this.#i;Y<=this.limit;Y++)this.#l();this.#o-this.#i>3?this.#a=setTimeout(this.#c,2e3):this.#i=Math.floor(this.#i/2)};get isPaused(){return this.#n}}function _typeof$8(re){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$8(re)}function _createClass$8(re,Y,oe){return Object.defineProperty(re,"prototype",{writable:!1}),re}function _classCallCheck$8(re,Y){if(!(re instanceof Y))throw new TypeError("Cannot call a class as a function")}function _callSuper$1(re,Y,oe){return Y=_getPrototypeOf$1(Y),_possibleConstructorReturn$1(re,_isNativeReflectConstruct$1()?Reflect.construct(Y,oe||[],_getPrototypeOf$1(re).constructor):Y.apply(re,oe))}function _possibleConstructorReturn$1(re,Y){if(Y&&(_typeof$8(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(re)}function _assertThisInitialized$1(re){if(re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re}function _inherits$1(re,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(Y&&Y.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),Object.defineProperty(re,"prototype",{writable:!1}),Y&&_setPrototypeOf$1(re,Y)}function _wrapNativeSuper(re){var Y=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(le){if(le===null||!_isNativeFunction(le))return le;if(typeof le!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Y<"u"){if(Y.has(le))return Y.get(le);Y.set(le,ue)}function ue(){return _construct(le,arguments,_getPrototypeOf$1(this).constructor)}return ue.prototype=Object.create(le.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf$1(ue,le)},_wrapNativeSuper(re)}function _construct(re,Y,oe){if(_isNativeReflectConstruct$1())return Reflect.construct.apply(null,arguments);var le=[null];le.push.apply(le,Y);var ue=new(re.bind.apply(re,le));return oe&&_setPrototypeOf$1(ue,oe.prototype),ue}function _isNativeReflectConstruct$1(){try{var re=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$1=function(){return!!re})()}function _isNativeFunction(re){try{return Function.toString.call(re).indexOf("[native code]")!==-1}catch{return typeof re=="function"}}function _setPrototypeOf$1(re,Y){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(le,ue){return le.__proto__=ue,le},_setPrototypeOf$1(re,Y)}function _getPrototypeOf$1(re){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},_getPrototypeOf$1(re)}var DetailedError=(function(re){function Y(oe){var le,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(_classCallCheck$8(this,Y),le=_callSuper$1(this,Y,[oe]),le.originalRequest=he,le.originalResponse=fe,le.causingError=ue,ue!=null&&(oe+=", caused by ".concat(ue.toString())),he!=null){var _e=he.getHeader("X-Request-ID")||"n/a",Se=he.getMethod(),ve=he.getURL(),$e=fe?fe.getStatus():"n/a",Ee=fe?fe.getBody()||"":"n/a";oe+=", originated from request (method: ".concat(Se,", url: ").concat(ve,", response code: ").concat($e,", response text: ").concat(Ee,", request id: ").concat(_e,")")}return le.message=oe,le}return _inherits$1(Y,re),_createClass$8(Y)})(_wrapNativeSuper(Error));function log(re){}function _typeof$7(re){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$7(re)}function _classCallCheck$7(re,Y){if(!(re instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(re,Y){for(var oe=0;oe<Y.length;oe++){var le=Y[oe];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(re,_toPropertyKey$7(le.key),le)}}function _createClass$7(re,Y,oe){return Y&&_defineProperties$7(re.prototype,Y),Object.defineProperty(re,"prototype",{writable:!1}),re}function _toPropertyKey$7(re){var Y=_toPrimitive$7(re,"string");return _typeof$7(Y)=="symbol"?Y:Y+""}function _toPrimitive$7(re,Y){if(_typeof$7(re)!="object"||!re)return re;var oe=re[Symbol.toPrimitive];if(oe!==void 0){var le=oe.call(re,Y);if(_typeof$7(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(re)}var NoopUrlStorage=(function(){function re(){_classCallCheck$7(this,re)}return _createClass$7(re,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(oe){return Promise.resolve([])}},{key:"removeUpload",value:function(oe){return Promise.resolve()}},{key:"addUpload",value:function(oe,le){return Promise.resolve(null)}}])})();const version$1="3.7.8",VERSION=version$1,_hasBuffer=typeof Buffer=="function",_TD=typeof TextDecoder=="function"?new TextDecoder:void 0,_TE=typeof TextEncoder=="function"?new TextEncoder:void 0,b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64chs=Array.prototype.slice.call(b64ch),b64tab=(re=>{let Y={};return re.forEach((oe,le)=>Y[oe]=le),Y})(b64chs),b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_fromCC=String.fromCharCode.bind(String),_U8Afrom=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):re=>new Uint8Array(Array.prototype.slice.call(re,0)),_mkUriSafe=re=>re.replace(/=/g,"").replace(/[+\/]/g,Y=>Y=="+"?"-":"_"),_tidyB64=re=>re.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=re=>{let Y,oe,le,ue,he="";const fe=re.length%3;for(let _e=0;_e<re.length;){if((oe=re.charCodeAt(_e++))>255||(le=re.charCodeAt(_e++))>255||(ue=re.charCodeAt(_e++))>255)throw new TypeError("invalid character found");Y=oe<<16|le<<8|ue,he+=b64chs[Y>>18&63]+b64chs[Y>>12&63]+b64chs[Y>>6&63]+b64chs[Y&63]}return fe?he.slice(0,fe-3)+"===".substring(fe):he},_btoa=typeof btoa=="function"?re=>btoa(re):_hasBuffer?re=>Buffer.from(re,"binary").toString("base64"):btoaPolyfill,_fromUint8Array=_hasBuffer?re=>Buffer.from(re).toString("base64"):re=>{let oe=[];for(let le=0,ue=re.length;le<ue;le+=4096)oe.push(_fromCC.apply(null,re.subarray(le,le+4096)));return _btoa(oe.join(""))},fromUint8Array=(re,Y=!1)=>Y?_mkUriSafe(_fromUint8Array(re)):_fromUint8Array(re),cb_utob=re=>{if(re.length<2){var Y=re.charCodeAt(0);return Y<128?re:Y<2048?_fromCC(192|Y>>>6)+_fromCC(128|Y&63):_fromCC(224|Y>>>12&15)+_fromCC(128|Y>>>6&63)+_fromCC(128|Y&63)}else{var Y=65536+(re.charCodeAt(0)-55296)*1024+(re.charCodeAt(1)-56320);return _fromCC(240|Y>>>18&7)+_fromCC(128|Y>>>12&63)+_fromCC(128|Y>>>6&63)+_fromCC(128|Y&63)}},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=re=>re.replace(re_utob,cb_utob),_encode=_hasBuffer?re=>Buffer.from(re,"utf8").toString("base64"):_TE?re=>_fromUint8Array(_TE.encode(re)):re=>_btoa(utob(re)),encode=(re,Y=!1)=>Y?_mkUriSafe(_encode(re)):_encode(re),encodeURI=re=>encode(re,!0),re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=re=>{switch(re.length){case 4:var Y=(7&re.charCodeAt(0))<<18|(63&re.charCodeAt(1))<<12|(63&re.charCodeAt(2))<<6|63&re.charCodeAt(3),oe=Y-65536;return _fromCC((oe>>>10)+55296)+_fromCC((oe&1023)+56320);case 3:return _fromCC((15&re.charCodeAt(0))<<12|(63&re.charCodeAt(1))<<6|63&re.charCodeAt(2));default:return _fromCC((31&re.charCodeAt(0))<<6|63&re.charCodeAt(1))}},btou=re=>re.replace(re_btou,cb_btou),atobPolyfill=re=>{if(re=re.replace(/\s+/g,""),!b64re.test(re))throw new TypeError("malformed base64.");re+="==".slice(2-(re.length&3));let Y,oe,le,ue=[];for(let he=0;he<re.length;)Y=b64tab[re.charAt(he++)]<<18|b64tab[re.charAt(he++)]<<12|(oe=b64tab[re.charAt(he++)])<<6|(le=b64tab[re.charAt(he++)]),oe===64?ue.push(_fromCC(Y>>16&255)):le===64?ue.push(_fromCC(Y>>16&255,Y>>8&255)):ue.push(_fromCC(Y>>16&255,Y>>8&255,Y&255));return ue.join("")},_atob=typeof atob=="function"?re=>atob(_tidyB64(re)):_hasBuffer?re=>Buffer.from(re,"base64").toString("binary"):atobPolyfill,_toUint8Array=_hasBuffer?re=>_U8Afrom(Buffer.from(re,"base64")):re=>_U8Afrom(_atob(re).split("").map(Y=>Y.charCodeAt(0))),toUint8Array=re=>_toUint8Array(_unURI(re)),_decode=_hasBuffer?re=>Buffer.from(re,"base64").toString("utf8"):_TD?re=>_TD.decode(_toUint8Array(re)):re=>btou(_atob(re)),_unURI=re=>_tidyB64(re.replace(/[-_]/g,Y=>Y=="-"?"+":"/")),decode=re=>_decode(_unURI(re)),isValid=re=>{if(typeof re!="string")return!1;const Y=re.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(Y)||!/[^\s0-9a-zA-Z\-_]/.test(Y)},_noEnum=re=>({value:re,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){const re=(Y,oe)=>Object.defineProperty(String.prototype,Y,_noEnum(oe));re("fromBase64",function(){return decode(this)}),re("toBase64",function(Y){return encode(this,Y)}),re("toBase64URI",function(){return encode(this,!0)}),re("toBase64URL",function(){return encode(this,!0)}),re("toUint8Array",function(){return toUint8Array(this)})},extendUint8Array=function(){const re=(Y,oe)=>Object.defineProperty(Uint8Array.prototype,Y,_noEnum(oe));re("toBase64",function(Y){return fromUint8Array(this,Y)}),re("toBase64URI",function(){return fromUint8Array(this,!0)}),re("toBase64URL",function(){return fromUint8Array(this,!0)})},extendBuiltins=()=>{extendString(),extendUint8Array()},gBase64={version:version$1,VERSION,atob:_atob,atobPolyfill,btoa:_btoa,btoaPolyfill,fromBase64:decode,toBase64:encode,encode,encodeURI,encodeURL:encodeURI,utob,btou,decode,isValid,fromUint8Array,toUint8Array,extendString,extendUint8Array,extendBuiltins};var requiresPort,hasRequiredRequiresPort;function requireRequiresPort(){return hasRequiredRequiresPort||(hasRequiredRequiresPort=1,requiresPort=function(Y,oe){if(oe=oe.split(":")[0],Y=+Y,!Y)return!1;switch(oe){case"http":case"ws":return Y!==80;case"https":case"wss":return Y!==443;case"ftp":return Y!==21;case"gopher":return Y!==70;case"file":return!1}return Y!==0}),requiresPort}var querystringify={},hasRequiredQuerystringify;function requireQuerystringify(){if(hasRequiredQuerystringify)return querystringify;hasRequiredQuerystringify=1;var re=Object.prototype.hasOwnProperty,Y;function oe(fe){try{return decodeURIComponent(fe.replace(/\+/g," "))}catch{return null}}function le(fe){try{return encodeURIComponent(fe)}catch{return null}}function ue(fe){for(var _e=/([^=?#&]+)=?([^&]*)/g,Se={},ve;ve=_e.exec(fe);){var $e=oe(ve[1]),Ee=oe(ve[2]);$e===null||Ee===null||$e in Se||(Se[$e]=Ee)}return Se}function he(fe,_e){_e=_e||"";var Se=[],ve,$e;typeof _e!="string"&&(_e="?");for($e in fe)if(re.call(fe,$e)){if(ve=fe[$e],!ve&&(ve===null||ve===Y||isNaN(ve))&&(ve=""),$e=le($e),ve=le(ve),$e===null||ve===null)continue;Se.push($e+"="+ve)}return Se.length?_e+Se.join("&"):""}return querystringify.stringify=he,querystringify.parse=ue,querystringify}var urlParse,hasRequiredUrlParse;function requireUrlParse(){if(hasRequiredUrlParse)return urlParse;hasRequiredUrlParse=1;var re=requireRequiresPort(),Y=requireQuerystringify(),oe=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,le=/[\n\r\t]/g,ue=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,he=/:\d+$/,fe=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,_e=/^[a-zA-Z]:/;function Se(Pe){return(Pe||"").toString().replace(oe,"")}var ve=[["#","hash"],["?","query"],function(Ae,Be){return Ue(Be.protocol)?Ae.replace(/\\/g,"/"):Ae},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],$e={hash:1,query:1};function Ee(Pe){var Ae;typeof window<"u"?Ae=window:typeof commonjsGlobal<"u"?Ae=commonjsGlobal:typeof self<"u"?Ae=self:Ae={};var Be=Ae.location||{};Pe=Pe||Be;var Le={},Ve=typeof Pe,ze;if(Pe.protocol==="blob:")Le=new Ne(unescape(Pe.pathname),{});else if(Ve==="string"){Le=new Ne(Pe,{});for(ze in $e)delete Le[ze]}else if(Ve==="object"){for(ze in Pe)ze in $e||(Le[ze]=Pe[ze]);Le.slashes===void 0&&(Le.slashes=ue.test(Pe.href))}return Le}function Ue(Pe){return Pe==="file:"||Pe==="ftp:"||Pe==="http:"||Pe==="https:"||Pe==="ws:"||Pe==="wss:"}function Re(Pe,Ae){Pe=Se(Pe),Pe=Pe.replace(le,""),Ae=Ae||{};var Be=fe.exec(Pe),Le=Be[1]?Be[1].toLowerCase():"",Ve=!!Be[2],ze=!!Be[3],Ge=0,We;return Ve?ze?(We=Be[2]+Be[3]+Be[4],Ge=Be[2].length+Be[3].length):(We=Be[2]+Be[4],Ge=Be[2].length):ze?(We=Be[3]+Be[4],Ge=Be[3].length):We=Be[4],Le==="file:"?Ge>=2&&(We=We.slice(2)):Ue(Le)?We=Be[4]:Le?Ve&&(We=We.slice(2)):Ge>=2&&Ue(Ae.protocol)&&(We=Be[4]),{protocol:Le,slashes:Ve||Ue(Le),slashesCount:Ge,rest:We}}function xe(Pe,Ae){if(Pe==="")return Ae;for(var Be=(Ae||"/").split("/").slice(0,-1).concat(Pe.split("/")),Le=Be.length,Ve=Be[Le-1],ze=!1,Ge=0;Le--;)Be[Le]==="."?Be.splice(Le,1):Be[Le]===".."?(Be.splice(Le,1),Ge++):Ge&&(Le===0&&(ze=!0),Be.splice(Le,1),Ge--);return ze&&Be.unshift(""),(Ve==="."||Ve==="..")&&Be.push(""),Be.join("/")}function Ne(Pe,Ae,Be){if(Pe=Se(Pe),Pe=Pe.replace(le,""),!(this instanceof Ne))return new Ne(Pe,Ae,Be);var Le,Ve,ze,Ge,We,Qe,Ye=ve.slice(),et=typeof Ae,je=this,Ze=0;for(et!=="object"&&et!=="string"&&(Be=Ae,Ae=null),Be&&typeof Be!="function"&&(Be=Y.parse),Ae=Ee(Ae),Ve=Re(Pe||"",Ae),Le=!Ve.protocol&&!Ve.slashes,je.slashes=Ve.slashes||Le&&Ae.slashes,je.protocol=Ve.protocol||Ae.protocol||"",Pe=Ve.rest,(Ve.protocol==="file:"&&(Ve.slashesCount!==2||_e.test(Pe))||!Ve.slashes&&(Ve.protocol||Ve.slashesCount<2||!Ue(je.protocol)))&&(Ye[3]=[/(.*)/,"pathname"]);Ze<Ye.length;Ze++){if(Ge=Ye[Ze],typeof Ge=="function"){Pe=Ge(Pe,je);continue}ze=Ge[0],Qe=Ge[1],ze!==ze?je[Qe]=Pe:typeof ze=="string"?(We=ze==="@"?Pe.lastIndexOf(ze):Pe.indexOf(ze),~We&&(typeof Ge[2]=="number"?(je[Qe]=Pe.slice(0,We),Pe=Pe.slice(We+Ge[2])):(je[Qe]=Pe.slice(We),Pe=Pe.slice(0,We)))):(We=ze.exec(Pe))&&(je[Qe]=We[1],Pe=Pe.slice(0,We.index)),je[Qe]=je[Qe]||Le&&Ge[3]&&Ae[Qe]||"",Ge[4]&&(je[Qe]=je[Qe].toLowerCase())}Be&&(je.query=Be(je.query)),Le&&Ae.slashes&&je.pathname.charAt(0)!=="/"&&(je.pathname!==""||Ae.pathname!=="")&&(je.pathname=xe(je.pathname,Ae.pathname)),je.pathname.charAt(0)!=="/"&&Ue(je.protocol)&&(je.pathname="/"+je.pathname),re(je.port,je.protocol)||(je.host=je.hostname,je.port=""),je.username=je.password="",je.auth&&(We=je.auth.indexOf(":"),~We?(je.username=je.auth.slice(0,We),je.username=encodeURIComponent(decodeURIComponent(je.username)),je.password=je.auth.slice(We+1),je.password=encodeURIComponent(decodeURIComponent(je.password))):je.username=encodeURIComponent(decodeURIComponent(je.auth)),je.auth=je.password?je.username+":"+je.password:je.username),je.origin=je.protocol!=="file:"&&Ue(je.protocol)&&je.host?je.protocol+"//"+je.host:"null",je.href=je.toString()}function Ie(Pe,Ae,Be){var Le=this;switch(Pe){case"query":typeof Ae=="string"&&Ae.length&&(Ae=(Be||Y.parse)(Ae)),Le[Pe]=Ae;break;case"port":Le[Pe]=Ae,re(Ae,Le.protocol)?Ae&&(Le.host=Le.hostname+":"+Ae):(Le.host=Le.hostname,Le[Pe]="");break;case"hostname":Le[Pe]=Ae,Le.port&&(Ae+=":"+Le.port),Le.host=Ae;break;case"host":Le[Pe]=Ae,he.test(Ae)?(Ae=Ae.split(":"),Le.port=Ae.pop(),Le.hostname=Ae.join(":")):(Le.hostname=Ae,Le.port="");break;case"protocol":Le.protocol=Ae.toLowerCase(),Le.slashes=!Be;break;case"pathname":case"hash":if(Ae){var Ve=Pe==="pathname"?"/":"#";Le[Pe]=Ae.charAt(0)!==Ve?Ve+Ae:Ae}else Le[Pe]=Ae;break;case"username":case"password":Le[Pe]=encodeURIComponent(Ae);break;case"auth":var ze=Ae.indexOf(":");~ze?(Le.username=Ae.slice(0,ze),Le.username=encodeURIComponent(decodeURIComponent(Le.username)),Le.password=Ae.slice(ze+1),Le.password=encodeURIComponent(decodeURIComponent(Le.password))):Le.username=encodeURIComponent(decodeURIComponent(Ae))}for(var Ge=0;Ge<ve.length;Ge++){var We=ve[Ge];We[4]&&(Le[We[1]]=Le[We[1]].toLowerCase())}return Le.auth=Le.password?Le.username+":"+Le.password:Le.username,Le.origin=Le.protocol!=="file:"&&Ue(Le.protocol)&&Le.host?Le.protocol+"//"+Le.host:"null",Le.href=Le.toString(),Le}function De(Pe){(!Pe||typeof Pe!="function")&&(Pe=Y.stringify);var Ae,Be=this,Le=Be.host,Ve=Be.protocol;Ve&&Ve.charAt(Ve.length-1)!==":"&&(Ve+=":");var ze=Ve+(Be.protocol&&Be.slashes||Ue(Be.protocol)?"//":"");return Be.username?(ze+=Be.username,Be.password&&(ze+=":"+Be.password),ze+="@"):Be.password?(ze+=":"+Be.password,ze+="@"):Be.protocol!=="file:"&&Ue(Be.protocol)&&!Le&&Be.pathname!=="/"&&(ze+="@"),(Le[Le.length-1]===":"||he.test(Be.hostname)&&!Be.port)&&(Le+=":"),ze+=Le+Be.pathname,Ae=typeof Be.query=="object"?Pe(Be.query):Be.query,Ae&&(ze+=Ae.charAt(0)!=="?"?"?"+Ae:Ae),Be.hash&&(ze+=Be.hash),ze}return Ne.prototype={set:Ie,toString:De},Ne.extractProtocol=Re,Ne.location=Ee,Ne.trimLeft=Se,Ne.qs=Y,urlParse=Ne,urlParse}var urlParseExports=requireUrlParse();const URL$1=getDefaultExportFromCjs(urlParseExports);function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(re){var Y=Math.random()*16|0,oe=re==="x"?Y:Y&3|8;return oe.toString(16)})}function _regeneratorRuntime$1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime$1=function(){return Y};var re,Y={},oe=Object.prototype,le=oe.hasOwnProperty,ue=Object.defineProperty||function(Ce,Fe,Te){Ce[Fe]=Te.value},he=typeof Symbol=="function"?Symbol:{},fe=he.iterator||"@@iterator",_e=he.asyncIterator||"@@asyncIterator",Se=he.toStringTag||"@@toStringTag";function ve(Ce,Fe,Te){return Object.defineProperty(Ce,Fe,{value:Te,enumerable:!0,configurable:!0,writable:!0}),Ce[Fe]}try{ve({},"")}catch{ve=function(Te,He,qe){return Te[He]=qe}}function $e(Ce,Fe,Te,He){var qe=Fe&&Fe.prototype instanceof De?Fe:De,Me=Object.create(qe.prototype),Ke=new Ze(He||[]);return ue(Me,"_invoke",{value:Qe(Ce,Te,Ke)}),Me}function Ee(Ce,Fe,Te){try{return{type:"normal",arg:Ce.call(Fe,Te)}}catch(He){return{type:"throw",arg:He}}}Y.wrap=$e;var Ue="suspendedStart",Re="suspendedYield",xe="executing",Ne="completed",Ie={};function De(){}function Pe(){}function Ae(){}var Be={};ve(Be,fe,function(){return this});var Le=Object.getPrototypeOf,Ve=Le&&Le(Le(tt([])));Ve&&Ve!==oe&&le.call(Ve,fe)&&(Be=Ve);var ze=Ae.prototype=De.prototype=Object.create(Be);function Ge(Ce){["next","throw","return"].forEach(function(Fe){ve(Ce,Fe,function(Te){return this._invoke(Fe,Te)})})}function We(Ce,Fe){function Te(qe,Me,Ke,Xe){var Je=Ee(Ce[qe],Ce,Me);if(Je.type!=="throw"){var rt=Je.arg,nt=rt.value;return nt&&_typeof$6(nt)=="object"&&le.call(nt,"__await")?Fe.resolve(nt.__await).then(function(it){Te("next",it,Ke,Xe)},function(it){Te("throw",it,Ke,Xe)}):Fe.resolve(nt).then(function(it){rt.value=it,Ke(rt)},function(it){return Te("throw",it,Ke,Xe)})}Xe(Je.arg)}var He;ue(this,"_invoke",{value:function(Me,Ke){function Xe(){return new Fe(function(Je,rt){Te(Me,Ke,Je,rt)})}return He=He?He.then(Xe,Xe):Xe()}})}function Qe(Ce,Fe,Te){var He=Ue;return function(qe,Me){if(He===xe)throw Error("Generator is already running");if(He===Ne){if(qe==="throw")throw Me;return{value:re,done:!0}}for(Te.method=qe,Te.arg=Me;;){var Ke=Te.delegate;if(Ke){var Xe=Ye(Ke,Te);if(Xe){if(Xe===Ie)continue;return Xe}}if(Te.method==="next")Te.sent=Te._sent=Te.arg;else if(Te.method==="throw"){if(He===Ue)throw He=Ne,Te.arg;Te.dispatchException(Te.arg)}else Te.method==="return"&&Te.abrupt("return",Te.arg);He=xe;var Je=Ee(Ce,Fe,Te);if(Je.type==="normal"){if(He=Te.done?Ne:Re,Je.arg===Ie)continue;return{value:Je.arg,done:Te.done}}Je.type==="throw"&&(He=Ne,Te.method="throw",Te.arg=Je.arg)}}}function Ye(Ce,Fe){var Te=Fe.method,He=Ce.iterator[Te];if(He===re)return Fe.delegate=null,Te==="throw"&&Ce.iterator.return&&(Fe.method="return",Fe.arg=re,Ye(Ce,Fe),Fe.method==="throw")||Te!=="return"&&(Fe.method="throw",Fe.arg=new TypeError("The iterator does not provide a '"+Te+"' method")),Ie;var qe=Ee(He,Ce.iterator,Fe.arg);if(qe.type==="throw")return Fe.method="throw",Fe.arg=qe.arg,Fe.delegate=null,Ie;var Me=qe.arg;return Me?Me.done?(Fe[Ce.resultName]=Me.value,Fe.next=Ce.nextLoc,Fe.method!=="return"&&(Fe.method="next",Fe.arg=re),Fe.delegate=null,Ie):Me:(Fe.method="throw",Fe.arg=new TypeError("iterator result is not an object"),Fe.delegate=null,Ie)}function et(Ce){var Fe={tryLoc:Ce[0]};1 in Ce&&(Fe.catchLoc=Ce[1]),2 in Ce&&(Fe.finallyLoc=Ce[2],Fe.afterLoc=Ce[3]),this.tryEntries.push(Fe)}function je(Ce){var Fe=Ce.completion||{};Fe.type="normal",delete Fe.arg,Ce.completion=Fe}function Ze(Ce){this.tryEntries=[{tryLoc:"root"}],Ce.forEach(et,this),this.reset(!0)}function tt(Ce){if(Ce||Ce===""){var Fe=Ce[fe];if(Fe)return Fe.call(Ce);if(typeof Ce.next=="function")return Ce;if(!isNaN(Ce.length)){var Te=-1,He=function qe(){for(;++Te<Ce.length;)if(le.call(Ce,Te))return qe.value=Ce[Te],qe.done=!1,qe;return qe.value=re,qe.done=!0,qe};return He.next=He}}throw new TypeError(_typeof$6(Ce)+" is not iterable")}return Pe.prototype=Ae,ue(ze,"constructor",{value:Ae,configurable:!0}),ue(Ae,"constructor",{value:Pe,configurable:!0}),Pe.displayName=ve(Ae,Se,"GeneratorFunction"),Y.isGeneratorFunction=function(Ce){var Fe=typeof Ce=="function"&&Ce.constructor;return!!Fe&&(Fe===Pe||(Fe.displayName||Fe.name)==="GeneratorFunction")},Y.mark=function(Ce){return Object.setPrototypeOf?Object.setPrototypeOf(Ce,Ae):(Ce.__proto__=Ae,ve(Ce,Se,"GeneratorFunction")),Ce.prototype=Object.create(ze),Ce},Y.awrap=function(Ce){return{__await:Ce}},Ge(We.prototype),ve(We.prototype,_e,function(){return this}),Y.AsyncIterator=We,Y.async=function(Ce,Fe,Te,He,qe){qe===void 0&&(qe=Promise);var Me=new We($e(Ce,Fe,Te,He),qe);return Y.isGeneratorFunction(Fe)?Me:Me.next().then(function(Ke){return Ke.done?Ke.value:Me.next()})},Ge(ze),ve(ze,Se,"Generator"),ve(ze,fe,function(){return this}),ve(ze,"toString",function(){return"[object Generator]"}),Y.keys=function(Ce){var Fe=Object(Ce),Te=[];for(var He in Fe)Te.push(He);return Te.reverse(),function qe(){for(;Te.length;){var Me=Te.pop();if(Me in Fe)return qe.value=Me,qe.done=!1,qe}return qe.done=!0,qe}},Y.values=tt,Ze.prototype={constructor:Ze,reset:function(Fe){if(this.prev=0,this.next=0,this.sent=this._sent=re,this.done=!1,this.delegate=null,this.method="next",this.arg=re,this.tryEntries.forEach(je),!Fe)for(var Te in this)Te.charAt(0)==="t"&&le.call(this,Te)&&!isNaN(+Te.slice(1))&&(this[Te]=re)},stop:function(){this.done=!0;var Fe=this.tryEntries[0].completion;if(Fe.type==="throw")throw Fe.arg;return this.rval},dispatchException:function(Fe){if(this.done)throw Fe;var Te=this;function He(rt,nt){return Ke.type="throw",Ke.arg=Fe,Te.next=rt,nt&&(Te.method="next",Te.arg=re),!!nt}for(var qe=this.tryEntries.length-1;qe>=0;--qe){var Me=this.tryEntries[qe],Ke=Me.completion;if(Me.tryLoc==="root")return He("end");if(Me.tryLoc<=this.prev){var Xe=le.call(Me,"catchLoc"),Je=le.call(Me,"finallyLoc");if(Xe&&Je){if(this.prev<Me.catchLoc)return He(Me.catchLoc,!0);if(this.prev<Me.finallyLoc)return He(Me.finallyLoc)}else if(Xe){if(this.prev<Me.catchLoc)return He(Me.catchLoc,!0)}else{if(!Je)throw Error("try statement without catch or finally");if(this.prev<Me.finallyLoc)return He(Me.finallyLoc)}}}},abrupt:function(Fe,Te){for(var He=this.tryEntries.length-1;He>=0;--He){var qe=this.tryEntries[He];if(qe.tryLoc<=this.prev&&le.call(qe,"finallyLoc")&&this.prev<qe.finallyLoc){var Me=qe;break}}Me&&(Fe==="break"||Fe==="continue")&&Me.tryLoc<=Te&&Te<=Me.finallyLoc&&(Me=null);var Ke=Me?Me.completion:{};return Ke.type=Fe,Ke.arg=Te,Me?(this.method="next",this.next=Me.finallyLoc,Ie):this.complete(Ke)},complete:function(Fe,Te){if(Fe.type==="throw")throw Fe.arg;return Fe.type==="break"||Fe.type==="continue"?this.next=Fe.arg:Fe.type==="return"?(this.rval=this.arg=Fe.arg,this.method="return",this.next="end"):Fe.type==="normal"&&Te&&(this.next=Te),Ie},finish:function(Fe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var He=this.tryEntries[Te];if(He.finallyLoc===Fe)return this.complete(He.completion,He.afterLoc),je(He),Ie}},catch:function(Fe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var He=this.tryEntries[Te];if(He.tryLoc===Fe){var qe=He.completion;if(qe.type==="throw"){var Me=qe.arg;je(He)}return Me}}throw Error("illegal catch attempt")},delegateYield:function(Fe,Te,He){return this.delegate={iterator:tt(Fe),resultName:Te,nextLoc:He},this.method==="next"&&(this.arg=re),Ie}},Y}function asyncGeneratorStep$1(re,Y,oe,le,ue,he,fe){try{var _e=re[he](fe),Se=_e.value}catch(ve){oe(ve);return}_e.done?Y(Se):Promise.resolve(Se).then(le,ue)}function _asyncToGenerator$1(re){return function(){var Y=this,oe=arguments;return new Promise(function(le,ue){var he=re.apply(Y,oe);function fe(Se){asyncGeneratorStep$1(he,le,ue,fe,_e,"next",Se)}function _e(Se){asyncGeneratorStep$1(he,le,ue,fe,_e,"throw",Se)}fe(void 0)})}}function _slicedToArray(re,Y){return _arrayWithHoles(re)||_iterableToArrayLimit(re,Y)||_unsupportedIterableToArray(re,Y)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit(re,Y){var oe=re==null?null:typeof Symbol<"u"&&re[Symbol.iterator]||re["@@iterator"];if(oe!=null){var le,ue,he,fe,_e=[],Se=!0,ve=!1;try{if(he=(oe=oe.call(re)).next,Y!==0)for(;!(Se=(le=he.call(oe)).done)&&(_e.push(le.value),_e.length!==Y);Se=!0);}catch($e){ve=!0,ue=$e}finally{try{if(!Se&&oe.return!=null&&(fe=oe.return(),Object(fe)!==fe))return}finally{if(ve)throw ue}}return _e}}function _arrayWithHoles(re){if(Array.isArray(re))return re}function _typeof$6(re){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$6(re)}function _createForOfIteratorHelper(re,Y){var oe=typeof Symbol<"u"&&re[Symbol.iterator]||re["@@iterator"];if(!oe){if(Array.isArray(re)||(oe=_unsupportedIterableToArray(re))||Y){oe&&(re=oe);var le=0,ue=function(){};return{s:ue,n:function(){return le>=re.length?{done:!0}:{done:!1,value:re[le++]}},e:function(ve){throw ve},f:ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var he=!0,fe=!1,_e;return{s:function(){oe=oe.call(re)},n:function(){var ve=oe.next();return he=ve.done,ve},e:function(ve){fe=!0,_e=ve},f:function(){try{!he&&oe.return!=null&&oe.return()}finally{if(fe)throw _e}}}}function _unsupportedIterableToArray(re,Y){if(re){if(typeof re=="string")return _arrayLikeToArray(re,Y);var oe=Object.prototype.toString.call(re).slice(8,-1);if(oe==="Object"&&re.constructor&&(oe=re.constructor.name),oe==="Map"||oe==="Set")return Array.from(re);if(oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(oe))return _arrayLikeToArray(re,Y)}}function _arrayLikeToArray(re,Y){(Y==null||Y>re.length)&&(Y=re.length);for(var oe=0,le=new Array(Y);oe<Y;oe++)le[oe]=re[oe];return le}function ownKeys$1(re,Y){var oe=Object.keys(re);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(re);Y&&(le=le.filter(function(ue){return Object.getOwnPropertyDescriptor(re,ue).enumerable})),oe.push.apply(oe,le)}return oe}function _objectSpread$1(re){for(var Y=1;Y<arguments.length;Y++){var oe=arguments[Y]!=null?arguments[Y]:{};Y%2?ownKeys$1(Object(oe),!0).forEach(function(le){_defineProperty$1(re,le,oe[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(oe)):ownKeys$1(Object(oe)).forEach(function(le){Object.defineProperty(re,le,Object.getOwnPropertyDescriptor(oe,le))})}return re}function _defineProperty$1(re,Y,oe){return Y=_toPropertyKey$6(Y),Y in re?Object.defineProperty(re,Y,{value:oe,enumerable:!0,configurable:!0,writable:!0}):re[Y]=oe,re}function _classCallCheck$6(re,Y){if(!(re instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(re,Y){for(var oe=0;oe<Y.length;oe++){var le=Y[oe];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(re,_toPropertyKey$6(le.key),le)}}function _createClass$6(re,Y,oe){return Y&&_defineProperties$6(re.prototype,Y),oe&&_defineProperties$6(re,oe),Object.defineProperty(re,"prototype",{writable:!1}),re}function _toPropertyKey$6(re){var Y=_toPrimitive$6(re,"string");return _typeof$6(Y)=="symbol"?Y:Y+""}function _toPrimitive$6(re,Y){if(_typeof$6(re)!="object"||!re)return re;var oe=re[Symbol.toPrimitive];if(oe!==void 0){var le=oe.call(re,Y);if(_typeof$6(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(re)}var PROTOCOL_TUS_V1="tus-v1",PROTOCOL_IETF_DRAFT_03="ietf-draft-03",PROTOCOL_IETF_DRAFT_05="ietf-draft-05",defaultOptions$2={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:defaultOnShouldRetry,chunkSize:Number.POSITIVE_INFINITY,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:PROTOCOL_TUS_V1},BaseUpload=(function(){function re(Y,oe){_classCallCheck$6(this,re),"resume"in oe&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=oe,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=Y,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return _createClass$6(re,[{key:"findPreviousUploads",value:function(){var oe=this;return this.options.fingerprint(this.file,this.options).then(function(le){return oe._urlStorage.findUploadsByFingerprint(le)})}},{key:"resumeFromPreviousUpload",value:function(oe){this.url=oe.uploadUrl||null,this._parallelUploadUrls=oe.parallelUploadUrls||null,this._urlStorageKey=oe.urlStorageKey}},{key:"start",value:function(){var oe=this,le=this.file;if(!le){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(![PROTOCOL_TUS_V1,PROTOCOL_IETF_DRAFT_03,PROTOCOL_IETF_DRAFT_05].includes(this.options.protocol)){this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var ue=this.options.retryDelays;if(ue!=null&&Object.prototype.toString.call(ue)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var he=0,fe=["uploadUrl","uploadSize","uploadLengthDeferred"];he<fe.length;he++){var _e=fe[he];if(this.options[_e]){this._emitError(new Error("tus: cannot use the ".concat(_e," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(le,this.options).then(function(Se){return oe._fingerprint=Se,oe._source?oe._source:oe.options.fileReader.openFile(le,oe.options.chunkSize)}).then(function(Se){if(oe._source=Se,oe.options.uploadLengthDeferred)oe._size=null;else if(oe.options.uploadSize!=null){if(oe._size=Number(oe.options.uploadSize),Number.isNaN(oe._size)){oe._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(oe._size=oe._source.size,oe._size==null){oe._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}oe.options.parallelUploads>1||oe._parallelUploadUrls!=null?oe._startParallelUpload():oe._startSingleUpload()}).catch(function(Se){oe._emitError(Se)})}},{key:"_startParallelUpload",value:function(){var oe,le=this,ue=this._size,he=0;this._parallelUploads=[];var fe=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,_e=(oe=this.options.parallelUploadBoundaries)!==null&&oe!==void 0?oe:splitSizeIntoParts(this._source.size,fe);this._parallelUploadUrls&&_e.forEach(function($e,Ee){$e.uploadUrl=le._parallelUploadUrls[Ee]||null}),this._parallelUploadUrls=new Array(_e.length);var Se=_e.map(function($e,Ee){var Ue=0;return le._source.slice($e.start,$e.end).then(function(Re){var xe=Re.value;return new Promise(function(Ne,Ie){var De=_objectSpread$1(_objectSpread$1({},le.options),{},{uploadUrl:$e.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:le.options.metadataForPartialUploads,headers:_objectSpread$1(_objectSpread$1({},le.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:Ne,onError:Ie,onProgress:function(Be){he=he-Ue+Be,Ue=Be,le._emitProgress(he,ue)},onUploadUrlAvailable:function(){le._parallelUploadUrls[Ee]=Pe.url,le._parallelUploadUrls.filter(function(Be){return!!Be}).length===_e.length&&le._saveUploadInUrlStorage()}}),Pe=new re(xe,De);Pe.start(),le._parallelUploads.push(Pe)})})}),ve;Promise.all(Se).then(function(){ve=le._openRequest("POST",le.options.endpoint),ve.setHeader("Upload-Concat","final;".concat(le._parallelUploadUrls.join(" ")));var $e=encodeMetadata(le.options.metadata);return $e!==""&&ve.setHeader("Upload-Metadata",$e),le._sendRequest(ve,null)}).then(function($e){if(!inStatusCategory($e.getStatus(),200)){le._emitHttpError(ve,$e,"tus: unexpected response while creating upload");return}var Ee=$e.getHeader("Location");if(Ee==null){le._emitHttpError(ve,$e,"tus: invalid or missing Location header");return}le.url=resolveUrl(le.options.endpoint,Ee),"Created upload at ".concat(le.url),le._emitSuccess($e)}).catch(function($e){le._emitError($e)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){"Resuming upload from previous URL: ".concat(this.url),this._resumeUpload();return}if(this.options.uploadUrl!=null){"Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,this._resumeUpload();return}this._createUpload()}},{key:"abort",value:function(oe){var le=this;if(this._parallelUploads!=null){var ue=_createForOfIteratorHelper(this._parallelUploads),he;try{for(ue.s();!(he=ue.n()).done;){var fe=he.value;fe.abort(oe)}}catch(_e){ue.e(_e)}finally{ue.f()}}return this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!oe||this.url==null?Promise.resolve():re.terminate(this.url,this.options).then(function(){return le._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(oe,le,ue,he){this._emitError(new DetailedError(ue,he,oe,le))}},{key:"_emitError",value:function(oe){var le=this;if(!this._aborted){if(this.options.retryDelays!=null){var ue=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(ue&&(this._retryAttempt=0),shouldRetry(oe,this._retryAttempt,this.options)){var he=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){le.start()},he);return}}if(typeof this.options.onError=="function")this.options.onError(oe);else throw oe}}},{key:"_emitSuccess",value:function(oe){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess({lastResponse:oe})}},{key:"_emitProgress",value:function(oe,le){typeof this.options.onProgress=="function"&&this.options.onProgress(oe,le)}},{key:"_emitChunkComplete",value:function(oe,le,ue){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(oe,le,ue)}},{key:"_createUpload",value:function(){var oe=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var le=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?le.setHeader("Upload-Defer-Length","1"):le.setHeader("Upload-Length","".concat(this._size));var ue=encodeMetadata(this.options.metadata);ue!==""&&le.setHeader("Upload-Metadata",ue);var he;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,he=this._addChunkToRequest(le)):((this.options.protocol===PROTOCOL_IETF_DRAFT_03||this.options.protocol===PROTOCOL_IETF_DRAFT_05)&&le.setHeader("Upload-Complete","?0"),he=this._sendRequest(le,null)),he.then(function(fe){if(!inStatusCategory(fe.getStatus(),200)){oe._emitHttpError(le,fe,"tus: unexpected response while creating upload");return}var _e=fe.getHeader("Location");if(_e==null){oe._emitHttpError(le,fe,"tus: invalid or missing Location header");return}if(oe.url=resolveUrl(oe.options.endpoint,_e),"Created upload at ".concat(oe.url),typeof oe.options.onUploadUrlAvailable=="function"&&oe.options.onUploadUrlAvailable(),oe._size===0){oe._emitSuccess(fe),oe._source.close();return}oe._saveUploadInUrlStorage().then(function(){oe.options.uploadDataDuringCreation?oe._handleUploadResponse(le,fe):(oe._offset=0,oe._performUpload())})}).catch(function(fe){oe._emitHttpError(le,null,"tus: failed to create upload",fe)})}},{key:"_resumeUpload",value:function(){var oe=this,le=this._openRequest("HEAD",this.url),ue=this._sendRequest(le,null);ue.then(function(he){var fe=he.getStatus();if(!inStatusCategory(fe,200)){if(fe===423){oe._emitHttpError(le,he,"tus: upload is currently locked; retry later");return}if(inStatusCategory(fe,400)&&oe._removeFromUrlStorage(),!oe.options.endpoint){oe._emitHttpError(le,he,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}oe.url=null,oe._createUpload();return}var _e=Number.parseInt(he.getHeader("Upload-Offset"),10);if(Number.isNaN(_e)){oe._emitHttpError(le,he,"tus: invalid or missing offset value");return}var Se=Number.parseInt(he.getHeader("Upload-Length"),10);if(Number.isNaN(Se)&&!oe.options.uploadLengthDeferred&&oe.options.protocol===PROTOCOL_TUS_V1){oe._emitHttpError(le,he,"tus: invalid or missing length value");return}typeof oe.options.onUploadUrlAvailable=="function"&&oe.options.onUploadUrlAvailable(),oe._saveUploadInUrlStorage().then(function(){if(_e===Se){oe._emitProgress(Se,Se),oe._emitSuccess(he);return}oe._offset=_e,oe._performUpload()})}).catch(function(he){oe._emitHttpError(le,null,"tus: failed to resume upload",he)})}},{key:"_performUpload",value:function(){var oe=this;if(!this._aborted){var le;this.options.overridePatchMethod?(le=this._openRequest("POST",this.url),le.setHeader("X-HTTP-Method-Override","PATCH")):le=this._openRequest("PATCH",this.url),le.setHeader("Upload-Offset","".concat(this._offset));var ue=this._addChunkToRequest(le);ue.then(function(he){if(!inStatusCategory(he.getStatus(),200)){oe._emitHttpError(le,he,"tus: unexpected response while uploading chunk");return}oe._handleUploadResponse(le,he)}).catch(function(he){oe._aborted||oe._emitHttpError(le,null,"tus: failed to upload chunk at offset ".concat(oe._offset),he)})}}},{key:"_addChunkToRequest",value:function(oe){var le=this,ue=this._offset,he=this._offset+this.options.chunkSize;return oe.setProgressHandler(function(fe){le._emitProgress(ue+fe,le._size)}),this.options.protocol===PROTOCOL_TUS_V1?oe.setHeader("Content-Type","application/offset+octet-stream"):this.options.protocol===PROTOCOL_IETF_DRAFT_05&&oe.setHeader("Content-Type","application/partial-upload"),(he===Number.POSITIVE_INFINITY||he>this._size)&&!this.options.uploadLengthDeferred&&(he=this._size),this._source.slice(ue,he).then(function(fe){var _e=fe.value,Se=fe.done,ve=_e!=null&&_e.size?_e.size:0;le.options.uploadLengthDeferred&&Se&&(le._size=le._offset+ve,oe.setHeader("Upload-Length","".concat(le._size)));var $e=le._offset+ve;return!le.options.uploadLengthDeferred&&Se&&$e!==le._size?Promise.reject(new Error("upload was configured with a size of ".concat(le._size," bytes, but the source is done after ").concat($e," bytes"))):_e===null?le._sendRequest(oe):((le.options.protocol===PROTOCOL_IETF_DRAFT_03||le.options.protocol===PROTOCOL_IETF_DRAFT_05)&&oe.setHeader("Upload-Complete",Se?"?1":"?0"),le._emitProgress(le._offset,le._size),le._sendRequest(oe,_e))})}},{key:"_handleUploadResponse",value:function(oe,le){var ue=Number.parseInt(le.getHeader("Upload-Offset"),10);if(Number.isNaN(ue)){this._emitHttpError(oe,le,"tus: invalid or missing offset value");return}if(this._emitProgress(ue,this._size),this._emitChunkComplete(ue-this._offset,ue,this._size),this._offset=ue,ue===this._size){this._emitSuccess(le),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(oe,le){var ue=openRequest(oe,le,this.options);return this._req=ue,ue}},{key:"_removeFromUrlStorage",value:function(){var oe=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(le){oe._emitError(le)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var oe=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var le={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?le.parallelUploadUrls=this._parallelUploadUrls:le.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,le).then(function(ue){oe._urlStorageKey=ue})}},{key:"_sendRequest",value:function(oe){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return sendRequest(oe,le,this.options)}}],[{key:"terminate",value:function(oe){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=openRequest("DELETE",oe,le);return sendRequest(ue,null,le).then(function(he){if(he.getStatus()!==204)throw new DetailedError("tus: unexpected response while terminating upload",null,ue,he)}).catch(function(he){if(he instanceof DetailedError||(he=new DetailedError("tus: failed to terminate upload",he,ue,null)),!shouldRetry(he,0,le))throw he;var fe=le.retryDelays[0],_e=le.retryDelays.slice(1),Se=_objectSpread$1(_objectSpread$1({},le),{},{retryDelays:_e});return new Promise(function(ve){return setTimeout(ve,fe)}).then(function(){return re.terminate(oe,Se)})})}}])})();function encodeMetadata(re){return Object.entries(re).map(function(Y){var oe=_slicedToArray(Y,2),le=oe[0],ue=oe[1];return"".concat(le," ").concat(gBase64.encode(String(ue)))}).join(",")}function inStatusCategory(re,Y){return re>=Y&&re<Y+100}function openRequest(re,Y,oe){var le=oe.httpStack.createRequest(re,Y);oe.protocol===PROTOCOL_IETF_DRAFT_03?le.setHeader("Upload-Draft-Interop-Version","5"):oe.protocol===PROTOCOL_IETF_DRAFT_05?le.setHeader("Upload-Draft-Interop-Version","6"):le.setHeader("Tus-Resumable","1.0.0");for(var ue=oe.headers||{},he=0,fe=Object.entries(ue);he<fe.length;he++){var _e=_slicedToArray(fe[he],2),Se=_e[0],ve=_e[1];le.setHeader(Se,ve)}if(oe.addRequestId){var $e=uuid();le.setHeader("X-Request-ID",$e)}return le}function sendRequest(re,Y,oe){return _sendRequest2.apply(this,arguments)}function _sendRequest2(){return _sendRequest2=_asyncToGenerator$1(_regeneratorRuntime$1().mark(function re(Y,oe,le){var ue;return _regeneratorRuntime$1().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(typeof le.onBeforeRequest!="function"){fe.next=3;break}return fe.next=3,le.onBeforeRequest(Y);case 3:return fe.next=5,Y.send(oe);case 5:if(ue=fe.sent,typeof le.onAfterResponse!="function"){fe.next=9;break}return fe.next=9,le.onAfterResponse(Y,ue);case 9:return fe.abrupt("return",ue);case 10:case"end":return fe.stop()}},re)})),_sendRequest2.apply(this,arguments)}function isOnline(){var re=!0;return typeof navigator<"u"&&navigator.onLine===!1&&(re=!1),re}function shouldRetry(re,Y,oe){return oe.retryDelays==null||Y>=oe.retryDelays.length||re.originalRequest==null?!1:oe&&typeof oe.onShouldRetry=="function"?oe.onShouldRetry(re,Y,oe):defaultOnShouldRetry(re)}function defaultOnShouldRetry(re){var Y=re.originalResponse?re.originalResponse.getStatus():0;return(!inStatusCategory(Y,400)||Y===409||Y===423)&&isOnline()}function resolveUrl(re,Y){return new URL$1(Y,re).toString()}function splitSizeIntoParts(re,Y){for(var oe=Math.floor(re/Y),le=[],ue=0;ue<Y;ue++)le.push({start:oe*ue,end:oe*(ue+1)});return le[Y-1].end=re,le}BaseUpload.defaultOptions=defaultOptions$2;var isReactNative$1=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};function uriToBlob(re){return new Promise(function(Y,oe){var le=new XMLHttpRequest;le.responseType="blob",le.onload=function(){var ue=le.response;Y(ue)},le.onerror=function(ue){oe(ue)},le.open("GET",re),le.send()})}var isCordova$1=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")};function readAsByteArray(re){return new Promise(function(Y,oe){var le=new FileReader;le.onload=function(){var ue=new Uint8Array(le.result);Y({value:ue})},le.onerror=function(ue){oe(ue)},le.readAsArrayBuffer(re)})}function _typeof$5(re){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$5(re)}function _classCallCheck$5(re,Y){if(!(re instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(re,Y){for(var oe=0;oe<Y.length;oe++){var le=Y[oe];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(re,_toPropertyKey$5(le.key),le)}}function _createClass$5(re,Y,oe){return Y&&_defineProperties$5(re.prototype,Y),Object.defineProperty(re,"prototype",{writable:!1}),re}function _toPropertyKey$5(re){var Y=_toPrimitive$5(re,"string");return _typeof$5(Y)=="symbol"?Y:Y+""}function _toPrimitive$5(re,Y){if(_typeof$5(re)!="object"||!re)return re;var oe=re[Symbol.toPrimitive];if(oe!==void 0){var le=oe.call(re,Y);if(_typeof$5(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(re)}var FileSource=(function(){function re(Y){_classCallCheck$5(this,re),this._file=Y,this.size=Y.size}return _createClass$5(re,[{key:"slice",value:function(oe,le){if(isCordova$1())return readAsByteArray(this._file.slice(oe,le));var ue=this._file.slice(oe,le),he=le>=this.size;return Promise.resolve({value:ue,done:he})}},{key:"close",value:function(){}}])})();function _typeof$4(re){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$4(re)}function _classCallCheck$4(re,Y){if(!(re instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(re,Y){for(var oe=0;oe<Y.length;oe++){var le=Y[oe];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(re,_toPropertyKey$4(le.key),le)}}function _createClass$4(re,Y,oe){return Y&&_defineProperties$4(re.prototype,Y),Object.defineProperty(re,"prototype",{writable:!1}),re}function _toPropertyKey$4(re){var Y=_toPrimitive$4(re,"string");return _typeof$4(Y)=="symbol"?Y:Y+""}function _toPrimitive$4(re,Y){if(_typeof$4(re)!="object"||!re)return re;var oe=re[Symbol.toPrimitive];if(oe!==void 0){var le=oe.call(re,Y);if(_typeof$4(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(re)}function len(re){return re===void 0?0:re.size!==void 0?re.size:re.length}function concat(re,Y){if(re.concat)return re.concat(Y);if(re instanceof Blob)return new Blob([re,Y],{type:re.type});if(re.set){var oe=new re.constructor(re.length+Y.length);return oe.set(re),oe.set(Y,re.length),oe}throw new Error("Unknown data type")}var StreamSource=(function(){function re(Y){_classCallCheck$4(this,re),this._buffer=void 0,this._bufferOffset=0,this._reader=Y,this._done=!1}return _createClass$4(re,[{key:"slice",value:function(oe,le){return oe<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(oe,le)}},{key:"_readUntilEnoughDataOrDone",value:function(oe,le){var ue=this,he=le<=this._bufferOffset+len(this._buffer);if(this._done||he){var fe=this._getDataFromBuffer(oe,le),_e=fe==null?this._done:!1;return Promise.resolve({value:fe,done:_e})}return this._reader.read().then(function(Se){var ve=Se.value,$e=Se.done;return $e?ue._done=!0:ue._buffer===void 0?ue._buffer=ve:ue._buffer=concat(ue._buffer,ve),ue._readUntilEnoughDataOrDone(oe,le)})}},{key:"_getDataFromBuffer",value:function(oe,le){oe>this._bufferOffset&&(this._buffer=this._buffer.slice(oe-this._bufferOffset),this._bufferOffset=oe);var ue=len(this._buffer)===0;return this._done&&ue?null:this._buffer.slice(0,le-oe)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])})();function _typeof$3(re){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$3(re)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return Y};var re,Y={},oe=Object.prototype,le=oe.hasOwnProperty,ue=Object.defineProperty||function(Ce,Fe,Te){Ce[Fe]=Te.value},he=typeof Symbol=="function"?Symbol:{},fe=he.iterator||"@@iterator",_e=he.asyncIterator||"@@asyncIterator",Se=he.toStringTag||"@@toStringTag";function ve(Ce,Fe,Te){return Object.defineProperty(Ce,Fe,{value:Te,enumerable:!0,configurable:!0,writable:!0}),Ce[Fe]}try{ve({},"")}catch{ve=function(Te,He,qe){return Te[He]=qe}}function $e(Ce,Fe,Te,He){var qe=Fe&&Fe.prototype instanceof De?Fe:De,Me=Object.create(qe.prototype),Ke=new Ze(He||[]);return ue(Me,"_invoke",{value:Qe(Ce,Te,Ke)}),Me}function Ee(Ce,Fe,Te){try{return{type:"normal",arg:Ce.call(Fe,Te)}}catch(He){return{type:"throw",arg:He}}}Y.wrap=$e;var Ue="suspendedStart",Re="suspendedYield",xe="executing",Ne="completed",Ie={};function De(){}function Pe(){}function Ae(){}var Be={};ve(Be,fe,function(){return this});var Le=Object.getPrototypeOf,Ve=Le&&Le(Le(tt([])));Ve&&Ve!==oe&&le.call(Ve,fe)&&(Be=Ve);var ze=Ae.prototype=De.prototype=Object.create(Be);function Ge(Ce){["next","throw","return"].forEach(function(Fe){ve(Ce,Fe,function(Te){return this._invoke(Fe,Te)})})}function We(Ce,Fe){function Te(qe,Me,Ke,Xe){var Je=Ee(Ce[qe],Ce,Me);if(Je.type!=="throw"){var rt=Je.arg,nt=rt.value;return nt&&_typeof$3(nt)=="object"&&le.call(nt,"__await")?Fe.resolve(nt.__await).then(function(it){Te("next",it,Ke,Xe)},function(it){Te("throw",it,Ke,Xe)}):Fe.resolve(nt).then(function(it){rt.value=it,Ke(rt)},function(it){return Te("throw",it,Ke,Xe)})}Xe(Je.arg)}var He;ue(this,"_invoke",{value:function(Me,Ke){function Xe(){return new Fe(function(Je,rt){Te(Me,Ke,Je,rt)})}return He=He?He.then(Xe,Xe):Xe()}})}function Qe(Ce,Fe,Te){var He=Ue;return function(qe,Me){if(He===xe)throw Error("Generator is already running");if(He===Ne){if(qe==="throw")throw Me;return{value:re,done:!0}}for(Te.method=qe,Te.arg=Me;;){var Ke=Te.delegate;if(Ke){var Xe=Ye(Ke,Te);if(Xe){if(Xe===Ie)continue;return Xe}}if(Te.method==="next")Te.sent=Te._sent=Te.arg;else if(Te.method==="throw"){if(He===Ue)throw He=Ne,Te.arg;Te.dispatchException(Te.arg)}else Te.method==="return"&&Te.abrupt("return",Te.arg);He=xe;var Je=Ee(Ce,Fe,Te);if(Je.type==="normal"){if(He=Te.done?Ne:Re,Je.arg===Ie)continue;return{value:Je.arg,done:Te.done}}Je.type==="throw"&&(He=Ne,Te.method="throw",Te.arg=Je.arg)}}}function Ye(Ce,Fe){var Te=Fe.method,He=Ce.iterator[Te];if(He===re)return Fe.delegate=null,Te==="throw"&&Ce.iterator.return&&(Fe.method="return",Fe.arg=re,Ye(Ce,Fe),Fe.method==="throw")||Te!=="return"&&(Fe.method="throw",Fe.arg=new TypeError("The iterator does not provide a '"+Te+"' method")),Ie;var qe=Ee(He,Ce.iterator,Fe.arg);if(qe.type==="throw")return Fe.method="throw",Fe.arg=qe.arg,Fe.delegate=null,Ie;var Me=qe.arg;return Me?Me.done?(Fe[Ce.resultName]=Me.value,Fe.next=Ce.nextLoc,Fe.method!=="return"&&(Fe.method="next",Fe.arg=re),Fe.delegate=null,Ie):Me:(Fe.method="throw",Fe.arg=new TypeError("iterator result is not an object"),Fe.delegate=null,Ie)}function et(Ce){var Fe={tryLoc:Ce[0]};1 in Ce&&(Fe.catchLoc=Ce[1]),2 in Ce&&(Fe.finallyLoc=Ce[2],Fe.afterLoc=Ce[3]),this.tryEntries.push(Fe)}function je(Ce){var Fe=Ce.completion||{};Fe.type="normal",delete Fe.arg,Ce.completion=Fe}function Ze(Ce){this.tryEntries=[{tryLoc:"root"}],Ce.forEach(et,this),this.reset(!0)}function tt(Ce){if(Ce||Ce===""){var Fe=Ce[fe];if(Fe)return Fe.call(Ce);if(typeof Ce.next=="function")return Ce;if(!isNaN(Ce.length)){var Te=-1,He=function qe(){for(;++Te<Ce.length;)if(le.call(Ce,Te))return qe.value=Ce[Te],qe.done=!1,qe;return qe.value=re,qe.done=!0,qe};return He.next=He}}throw new TypeError(_typeof$3(Ce)+" is not iterable")}return Pe.prototype=Ae,ue(ze,"constructor",{value:Ae,configurable:!0}),ue(Ae,"constructor",{value:Pe,configurable:!0}),Pe.displayName=ve(Ae,Se,"GeneratorFunction"),Y.isGeneratorFunction=function(Ce){var Fe=typeof Ce=="function"&&Ce.constructor;return!!Fe&&(Fe===Pe||(Fe.displayName||Fe.name)==="GeneratorFunction")},Y.mark=function(Ce){return Object.setPrototypeOf?Object.setPrototypeOf(Ce,Ae):(Ce.__proto__=Ae,ve(Ce,Se,"GeneratorFunction")),Ce.prototype=Object.create(ze),Ce},Y.awrap=function(Ce){return{__await:Ce}},Ge(We.prototype),ve(We.prototype,_e,function(){return this}),Y.AsyncIterator=We,Y.async=function(Ce,Fe,Te,He,qe){qe===void 0&&(qe=Promise);var Me=new We($e(Ce,Fe,Te,He),qe);return Y.isGeneratorFunction(Fe)?Me:Me.next().then(function(Ke){return Ke.done?Ke.value:Me.next()})},Ge(ze),ve(ze,Se,"Generator"),ve(ze,fe,function(){return this}),ve(ze,"toString",function(){return"[object Generator]"}),Y.keys=function(Ce){var Fe=Object(Ce),Te=[];for(var He in Fe)Te.push(He);return Te.reverse(),function qe(){for(;Te.length;){var Me=Te.pop();if(Me in Fe)return qe.value=Me,qe.done=!1,qe}return qe.done=!0,qe}},Y.values=tt,Ze.prototype={constructor:Ze,reset:function(Fe){if(this.prev=0,this.next=0,this.sent=this._sent=re,this.done=!1,this.delegate=null,this.method="next",this.arg=re,this.tryEntries.forEach(je),!Fe)for(var Te in this)Te.charAt(0)==="t"&&le.call(this,Te)&&!isNaN(+Te.slice(1))&&(this[Te]=re)},stop:function(){this.done=!0;var Fe=this.tryEntries[0].completion;if(Fe.type==="throw")throw Fe.arg;return this.rval},dispatchException:function(Fe){if(this.done)throw Fe;var Te=this;function He(rt,nt){return Ke.type="throw",Ke.arg=Fe,Te.next=rt,nt&&(Te.method="next",Te.arg=re),!!nt}for(var qe=this.tryEntries.length-1;qe>=0;--qe){var Me=this.tryEntries[qe],Ke=Me.completion;if(Me.tryLoc==="root")return He("end");if(Me.tryLoc<=this.prev){var Xe=le.call(Me,"catchLoc"),Je=le.call(Me,"finallyLoc");if(Xe&&Je){if(this.prev<Me.catchLoc)return He(Me.catchLoc,!0);if(this.prev<Me.finallyLoc)return He(Me.finallyLoc)}else if(Xe){if(this.prev<Me.catchLoc)return He(Me.catchLoc,!0)}else{if(!Je)throw Error("try statement without catch or finally");if(this.prev<Me.finallyLoc)return He(Me.finallyLoc)}}}},abrupt:function(Fe,Te){for(var He=this.tryEntries.length-1;He>=0;--He){var qe=this.tryEntries[He];if(qe.tryLoc<=this.prev&&le.call(qe,"finallyLoc")&&this.prev<qe.finallyLoc){var Me=qe;break}}Me&&(Fe==="break"||Fe==="continue")&&Me.tryLoc<=Te&&Te<=Me.finallyLoc&&(Me=null);var Ke=Me?Me.completion:{};return Ke.type=Fe,Ke.arg=Te,Me?(this.method="next",this.next=Me.finallyLoc,Ie):this.complete(Ke)},complete:function(Fe,Te){if(Fe.type==="throw")throw Fe.arg;return Fe.type==="break"||Fe.type==="continue"?this.next=Fe.arg:Fe.type==="return"?(this.rval=this.arg=Fe.arg,this.method="return",this.next="end"):Fe.type==="normal"&&Te&&(this.next=Te),Ie},finish:function(Fe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var He=this.tryEntries[Te];if(He.finallyLoc===Fe)return this.complete(He.completion,He.afterLoc),je(He),Ie}},catch:function(Fe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var He=this.tryEntries[Te];if(He.tryLoc===Fe){var qe=He.completion;if(qe.type==="throw"){var Me=qe.arg;je(He)}return Me}}throw Error("illegal catch attempt")},delegateYield:function(Fe,Te,He){return this.delegate={iterator:tt(Fe),resultName:Te,nextLoc:He},this.method==="next"&&(this.arg=re),Ie}},Y}function asyncGeneratorStep(re,Y,oe,le,ue,he,fe){try{var _e=re[he](fe),Se=_e.value}catch(ve){oe(ve);return}_e.done?Y(Se):Promise.resolve(Se).then(le,ue)}function _asyncToGenerator(re){return function(){var Y=this,oe=arguments;return new Promise(function(le,ue){var he=re.apply(Y,oe);function fe(Se){asyncGeneratorStep(he,le,ue,fe,_e,"next",Se)}function _e(Se){asyncGeneratorStep(he,le,ue,fe,_e,"throw",Se)}fe(void 0)})}}function _classCallCheck$3(re,Y){if(!(re instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(re,Y){for(var oe=0;oe<Y.length;oe++){var le=Y[oe];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(re,_toPropertyKey$3(le.key),le)}}function _createClass$3(re,Y,oe){return Y&&_defineProperties$3(re.prototype,Y),Object.defineProperty(re,"prototype",{writable:!1}),re}function _toPropertyKey$3(re){var Y=_toPrimitive$3(re,"string");return _typeof$3(Y)=="symbol"?Y:Y+""}function _toPrimitive$3(re,Y){if(_typeof$3(re)!="object"||!re)return re;var oe=re[Symbol.toPrimitive];if(oe!==void 0){var le=oe.call(re,Y);if(_typeof$3(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(re)}var FileReader$1=(function(){function re(){_classCallCheck$3(this,re)}return _createClass$3(re,[{key:"openFile",value:(function(){var Y=_asyncToGenerator(_regeneratorRuntime().mark(function le(ue,he){var fe;return _regeneratorRuntime().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(!(isReactNative$1()&&ue&&typeof ue.uri<"u")){Se.next=11;break}return Se.prev=1,Se.next=4,uriToBlob(ue.uri);case 4:return fe=Se.sent,Se.abrupt("return",new FileSource(fe));case 8:throw Se.prev=8,Se.t0=Se.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(Se.t0));case 11:if(!(typeof ue.slice=="function"&&typeof ue.size<"u")){Se.next=13;break}return Se.abrupt("return",Promise.resolve(new FileSource(ue)));case 13:if(typeof ue.read!="function"){Se.next=18;break}if(he=Number(he),Number.isFinite(he)){Se.next=17;break}return Se.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return Se.abrupt("return",Promise.resolve(new StreamSource(ue,he)));case 18:return Se.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return Se.stop()}},le,null,[[1,8]])}));function oe(le,ue){return Y.apply(this,arguments)}return oe})()}])})();function fingerprint(re,Y){return isReactNative$1()?Promise.resolve(reactNativeFingerprint(re,Y)):Promise.resolve(["tus-br",re.name,re.type,re.size,re.lastModified,Y.endpoint].join("-"))}function reactNativeFingerprint(re,Y){var oe=re.exif?hashCode(JSON.stringify(re.exif)):"noexif";return["tus-rn",re.name||"noname",re.size||"nosize",oe,Y.endpoint].join("/")}function hashCode(re){var Y=0;if(re.length===0)return Y;for(var oe=0;oe<re.length;oe++){var le=re.charCodeAt(oe);Y=(Y<<5)-Y+le,Y&=Y}return Y}function _typeof$2(re){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$2(re)}function _classCallCheck$2(re,Y){if(!(re instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(re,Y){for(var oe=0;oe<Y.length;oe++){var le=Y[oe];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(re,_toPropertyKey$2(le.key),le)}}function _createClass$2(re,Y,oe){return Y&&_defineProperties$2(re.prototype,Y),Object.defineProperty(re,"prototype",{writable:!1}),re}function _toPropertyKey$2(re){var Y=_toPrimitive$2(re,"string");return _typeof$2(Y)=="symbol"?Y:Y+""}function _toPrimitive$2(re,Y){if(_typeof$2(re)!="object"||!re)return re;var oe=re[Symbol.toPrimitive];if(oe!==void 0){var le=oe.call(re,Y);if(_typeof$2(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(re)}var XHRHttpStack=(function(){function re(){_classCallCheck$2(this,re)}return _createClass$2(re,[{key:"createRequest",value:function(oe,le){return new Request(oe,le)}},{key:"getName",value:function(){return"XHRHttpStack"}}])})(),Request=(function(){function re(Y,oe){_classCallCheck$2(this,re),this._xhr=new XMLHttpRequest,this._xhr.open(Y,oe,!0),this._method=Y,this._url=oe,this._headers={}}return _createClass$2(re,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(oe,le){this._xhr.setRequestHeader(oe,le),this._headers[oe]=le}},{key:"getHeader",value:function(oe){return this._headers[oe]}},{key:"setProgressHandler",value:function(oe){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(le){le.lengthComputable&&oe(le.loaded)})}},{key:"send",value:function(){var oe=this,le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(ue,he){oe._xhr.onload=function(){ue(new Response(oe._xhr))},oe._xhr.onerror=function(fe){he(fe)},oe._xhr.send(le)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])})(),Response=(function(){function re(Y){_classCallCheck$2(this,re),this._xhr=Y}return _createClass$2(re,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(oe){return this._xhr.getResponseHeader(oe)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])})();function _typeof$1(re){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof$1(re)}function _classCallCheck$1(re,Y){if(!(re instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(re,Y){for(var oe=0;oe<Y.length;oe++){var le=Y[oe];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(re,_toPropertyKey$1(le.key),le)}}function _createClass$1(re,Y,oe){return Y&&_defineProperties$1(re.prototype,Y),Object.defineProperty(re,"prototype",{writable:!1}),re}function _toPropertyKey$1(re){var Y=_toPrimitive$1(re,"string");return _typeof$1(Y)=="symbol"?Y:Y+""}function _toPrimitive$1(re,Y){if(_typeof$1(re)!="object"||!re)return re;var oe=re[Symbol.toPrimitive];if(oe!==void 0){var le=oe.call(re,Y);if(_typeof$1(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(re)}var hasStorage=!1;try{hasStorage="localStorage"in window;var key="tusSupport",originalValue=localStorage.getItem(key);localStorage.setItem(key,originalValue),originalValue===null&&localStorage.removeItem(key)}catch(re){if(re.code===re.SECURITY_ERR||re.code===re.QUOTA_EXCEEDED_ERR)hasStorage=!1;else throw re}var canStoreURLs=hasStorage,WebStorageUrlStorage=(function(){function re(){_classCallCheck$1(this,re)}return _createClass$1(re,[{key:"findAllUploads",value:function(){var oe=this._findEntries("tus::");return Promise.resolve(oe)}},{key:"findUploadsByFingerprint",value:function(oe){var le=this._findEntries("tus::".concat(oe,"::"));return Promise.resolve(le)}},{key:"removeUpload",value:function(oe){return localStorage.removeItem(oe),Promise.resolve()}},{key:"addUpload",value:function(oe,le){var ue=Math.round(Math.random()*1e12),he="tus::".concat(oe,"::").concat(ue);return localStorage.setItem(he,JSON.stringify(le)),Promise.resolve(he)}},{key:"_findEntries",value:function(oe){for(var le=[],ue=0;ue<localStorage.length;ue++){var he=localStorage.key(ue);if(he.indexOf(oe)===0)try{var fe=JSON.parse(localStorage.getItem(he));fe.urlStorageKey=he,le.push(fe)}catch{}}return le}}])})();function _typeof(re){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_typeof(re)}function _classCallCheck(re,Y){if(!(re instanceof Y))throw new TypeError("Cannot call a class as a function")}function _defineProperties(re,Y){for(var oe=0;oe<Y.length;oe++){var le=Y[oe];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(re,_toPropertyKey(le.key),le)}}function _createClass(re,Y,oe){return oe&&_defineProperties(re,oe),Object.defineProperty(re,"prototype",{writable:!1}),re}function _callSuper(re,Y,oe){return Y=_getPrototypeOf(Y),_possibleConstructorReturn(re,_isNativeReflectConstruct()?Reflect.construct(Y,oe||[],_getPrototypeOf(re).constructor):Y.apply(re,oe))}function _possibleConstructorReturn(re,Y){if(Y&&(_typeof(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(re)}function _assertThisInitialized(re){if(re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re}function _isNativeReflectConstruct(){try{var re=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!re})()}function _getPrototypeOf(re){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},_getPrototypeOf(re)}function _inherits(re,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(Y&&Y.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),Object.defineProperty(re,"prototype",{writable:!1}),Y&&_setPrototypeOf(re,Y)}function _setPrototypeOf(re,Y){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(le,ue){return le.__proto__=ue,le},_setPrototypeOf(re,Y)}function ownKeys(re,Y){var oe=Object.keys(re);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(re);Y&&(le=le.filter(function(ue){return Object.getOwnPropertyDescriptor(re,ue).enumerable})),oe.push.apply(oe,le)}return oe}function _objectSpread(re){for(var Y=1;Y<arguments.length;Y++){var oe=arguments[Y]!=null?arguments[Y]:{};Y%2?ownKeys(Object(oe),!0).forEach(function(le){_defineProperty(re,le,oe[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(oe)):ownKeys(Object(oe)).forEach(function(le){Object.defineProperty(re,le,Object.getOwnPropertyDescriptor(oe,le))})}return re}function _defineProperty(re,Y,oe){return Y=_toPropertyKey(Y),Y in re?Object.defineProperty(re,Y,{value:oe,enumerable:!0,configurable:!0,writable:!0}):re[Y]=oe,re}function _toPropertyKey(re){var Y=_toPrimitive(re,"string");return _typeof(Y)=="symbol"?Y:Y+""}function _toPrimitive(re,Y){if(_typeof(re)!="object"||!re)return re;var oe=re[Symbol.toPrimitive];if(oe!==void 0){var le=oe.call(re,Y);if(_typeof(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Y==="string"?String:Number)(re)}var defaultOptions$1=_objectSpread(_objectSpread({},BaseUpload.defaultOptions),{},{httpStack:new XHRHttpStack,fileReader:new FileReader$1,urlStorage:canStoreURLs?new WebStorageUrlStorage:new NoopUrlStorage,fingerprint}),Upload=(function(re){function Y(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _classCallCheck(this,Y),le=_objectSpread(_objectSpread({},defaultOptions$1),le),_callSuper(this,Y,[oe,le])}return _inherits(Y,re),_createClass(Y,null,[{key:"terminate",value:function(le){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ue=_objectSpread(_objectSpread({},defaultOptions$1),ue),BaseUpload.terminate(le,ue)}}])})(BaseUpload);const version="4.3.2",packageJson={version};function isCordova(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")}function isReactNative(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"}function getFingerprint(re){return(Y,oe)=>{if(isCordova()||isReactNative())return defaultOptions$1.fingerprint(Y,oe);const le=["tus",re.id,oe.endpoint].join("-");return Promise.resolve(le)}}const tusDefaultOptions={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},defaultOptions={limit:20,retryDelays:tusDefaultOptions.retryDelays,withCredentials:!1,allowedMetaFields:!0};class Tus extends BasePlugin{static VERSION=packageJson.version;#e;requests;uploaders;uploaderEvents;constructor(Y,oe){if(super(Y,{...defaultOptions,...oe}),this.type="uploader",this.id=this.opts.id||"Tus",oe?.allowedMetaFields===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in oe)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=this.opts.rateLimitedQueue??new RateLimitedQueue(this.opts.limit),this.#e=this.opts.retryDelays?.values(),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}resetUploaderReferences(Y,oe){const le=this.uploaders[Y];le&&(le.abort(),oe?.abort&&le.abort(!0),this.uploaders[Y]=null),this.uploaderEvents[Y]&&(this.uploaderEvents[Y].remove(),this.uploaderEvents[Y]=null)}#t(Y){return this.resetUploaderReferences(Y.id),new Promise((oe,le)=>{let ue,he,fe;const _e={...this.opts,...Y.tus||{}};typeof _e.headers=="function"&&(_e.headers=_e.headers(Y));const{onShouldRetry:Se,onBeforeRequest:ve,...$e}=_e,Ee={...tusDefaultOptions,...$e};Ee.fingerprint=getFingerprint(Y),Ee.onBeforeRequest=async De=>{const Pe=De.getUnderlyingObject();Pe.withCredentials=!!_e.withCredentials;let Ae;if(typeof ve=="function"&&(Ae=ve(De,Y)),hasProperty(ue,"shouldBeRequeued")){if(!ue.shouldBeRequeued)return Promise.reject();let Be;const Le=new Promise(Ve=>{Be=Ve});ue=this.requests.run(()=>(Y.isPaused&&ue.abort(),Be(),()=>{})),await Promise.all([Le,Ae]);return}return Ae},Ee.onError=De=>{this.uppy.log(De);const Pe=De.originalRequest!=null?De.originalRequest.getUnderlyingObject():null;isNetworkError(Pe)&&(De=new NetworkError(De,Pe)),this.resetUploaderReferences(Y.id),ue?.abort(),typeof _e.onError=="function"&&_e.onError(De),le(De)},Ee.onProgress=(De,Pe)=>{this.onReceiveUploadUrl(Y,fe.url),typeof _e.onProgress=="function"&&_e.onProgress(De,Pe);const Ae=this.uppy.getFile(Y.id);this.uppy.emit("upload-progress",Ae,{uploadStarted:Ae.progress.uploadStarted??0,bytesUploaded:De,bytesTotal:Pe})},Ee.onSuccess=De=>{const Pe={uploadURL:fe.url??void 0,status:200,body:{xhr:De.lastResponse.getUnderlyingObject()}};if(this.uppy.emit("upload-success",this.uppy.getFile(Y.id),Pe),this.resetUploaderReferences(Y.id),ue.done(),fe.url){const{name:Ae}=fe.file;this.uppy.log(`Download ${Ae} from ${fe.url}`)}typeof _e.onSuccess=="function"&&_e.onSuccess(De),oe(fe)};const Ue=De=>{const Pe=De?.originalResponse?.getStatus();if(Pe===429){if(!this.requests.isPaused){const Ae=this.#e?.next();if(Ae==null||Ae.done)return!1;this.requests.rateLimit(Ae.value)}}else{if(Pe!=null&&Pe>=400&&Pe<500&&Pe!==409&&Pe!==423)return!1;typeof navigator<"u"&&navigator.onLine===!1&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",()=>{this.requests.resume()},{once:!0})))}return ue.abort(),ue={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};Se!=null?Ee.onShouldRetry=(De,Pe)=>Se(De,Pe,_e,Ue):Ee.onShouldRetry=Ue;const Re=(De,Pe,Ae)=>{hasProperty(De,Pe)&&!hasProperty(De,Ae)&&(De[Ae]=De[Pe])},xe={};getAllowedMetaFields(_e.allowedMetaFields,Y.meta).forEach(De=>{xe[De]=String(Y.meta[De])}),Re(xe,"type","filetype"),Re(xe,"name","filename"),Ee.metadata=xe,fe=new Upload(Y.data,Ee),this.uploaders[Y.id]=fe;const Ie=new EventManager(this.uppy);this.uploaderEvents[Y.id]=Ie,he=()=>(Y.isPaused||fe.start(),()=>{}),fe.findPreviousUploads().then(De=>{const Pe=De[0];Pe&&(this.uppy.log(`[Tus] Resuming upload of ${Y.id} started at ${Pe.creationTime}`),fe.resumeFromPreviousUpload(Pe)),ue=this.requests.run(he)}),Ie.onFileRemove(Y.id,De=>{ue.abort(),this.resetUploaderReferences(Y.id,{abort:!!fe.url}),oe(`upload ${De} was removed`)}),Ie.onPause(Y.id,De=>{ue.abort(),De?fe.abort():ue=this.requests.run(he)}),Ie.onPauseAll(Y.id,()=>{ue.abort(),fe.abort()}),Ie.onCancelAll(Y.id,()=>{ue.abort(),this.resetUploaderReferences(Y.id,{abort:!!fe.url}),oe(`upload ${Y.id} was canceled`)}),Ie.onResumeAll(Y.id,()=>{ue.abort(),Y.error&&fe.abort(),ue=this.requests.run(he)})}).catch(oe=>{throw this.uppy.emit("upload-error",Y,oe),oe})}onReceiveUploadUrl(Y,oe){const le=this.uppy.getFile(Y.id);le&&(!le.tus||le.tus.uploadUrl!==oe)&&(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(le.id,{tus:{...le.tus,uploadUrl:oe}}))}#n(Y){const oe={...this.opts};return Y.tus&&Object.assign(oe,Y.tus),typeof oe.headers=="function"&&(oe.headers=oe.headers(Y)),{...Y.remote?.body,endpoint:oe.endpoint,uploadUrl:oe.uploadUrl,protocol:"tus",size:Y.data.size,headers:oe.headers,metadata:Y.meta}}async#r(Y){const oe=filterNonFailedFiles(Y),le=filterFilesToEmitUploadStarted(oe);this.uppy.emit("upload-start",le),await Promise.allSettled(oe.map(ue=>{if(ue.isRemote){const he=()=>this.requests,fe=new AbortController,_e=ve=>{ve.id===ue.id&&fe.abort()};this.uppy.on("file-removed",_e);const Se=this.uppy.getRequestClientForFile(ue).uploadRemoteFile(ue,this.#n(ue),{signal:fe.signal,getQueue:he});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",_e)},{priority:-1})(),Se}return this.#t(ue)}))}#i=async Y=>{if(Y.length===0){this.uppy.log("[Tus] No files to upload");return}this.opts.limit===0&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");const oe=this.uppy.getFilesByIds(Y);await this.#r(oe)};install(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!0}}),this.uppy.addUploader(this.#i)}uninstall(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!1}}),this.uppy.removeUploader(this.#i)}}var sha256={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(re){return Object.prototype.toString.call(re)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(re){return typeof re=="object"&&re.buffer&&re.buffer.constructor===ArrayBuffer});var createOutputMethod=function(re,Y){return function(oe){return new Sha256(Y,!0).update(oe)[re]()}},createMethod=function(re){var Y=createOutputMethod("hex",re);NODE_JS&&(Y=nodeWrap(Y,re)),Y.create=function(){return new Sha256(re)},Y.update=function(ue){return Y.create().update(ue)};for(var oe=0;oe<OUTPUT_TYPES.length;++oe){var le=OUTPUT_TYPES[oe];Y[le]=createOutputMethod(le,re)}return Y},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(re){if(typeof re=="string")return crypto.createHash(algorithm).update(re,"utf8").digest("hex");if(re==null)throw new Error(ERROR);return re.constructor===ArrayBuffer&&(re=new Uint8Array(re)),Array.isArray(re)||ArrayBuffer.isView(re)||re.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(re)).digest("hex"):method(re)};return nodeMethod},createHmacOutputMethod=function(re,Y){return function(oe,le){return new HmacSha256(oe,Y,!0).update(le)[re]()}},createHmacMethod=function(re){var Y=createHmacOutputMethod("hex",re);Y.create=function(ue){return new HmacSha256(ue,re)},Y.update=function(ue,he){return Y.create(ue).update(he)};for(var oe=0;oe<OUTPUT_TYPES.length;++oe){var le=OUTPUT_TYPES[oe];Y[le]=createHmacOutputMethod(le,re)}return Y};function Sha256(re,Y){Y?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],re?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=re}Sha256.prototype.update=function(re){if(!this.finalized){var Y,oe=typeof re;if(oe!=="string"){if(oe==="object"){if(re===null)throw new Error(ERROR);if(ARRAY_BUFFER&&re.constructor===ArrayBuffer)re=new Uint8Array(re);else if(!Array.isArray(re)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(re)))throw new Error(ERROR)}else throw new Error(ERROR);Y=!0}for(var le,ue=0,he,fe=re.length,_e=this.blocks;ue<fe;){if(this.hashed&&(this.hashed=!1,_e[0]=this.block,_e[16]=_e[1]=_e[2]=_e[3]=_e[4]=_e[5]=_e[6]=_e[7]=_e[8]=_e[9]=_e[10]=_e[11]=_e[12]=_e[13]=_e[14]=_e[15]=0),Y)for(he=this.start;ue<fe&&he<64;++ue)_e[he>>2]|=re[ue]<<SHIFT[he++&3];else for(he=this.start;ue<fe&&he<64;++ue)le=re.charCodeAt(ue),le<128?_e[he>>2]|=le<<SHIFT[he++&3]:le<2048?(_e[he>>2]|=(192|le>>6)<<SHIFT[he++&3],_e[he>>2]|=(128|le&63)<<SHIFT[he++&3]):le<55296||le>=57344?(_e[he>>2]|=(224|le>>12)<<SHIFT[he++&3],_e[he>>2]|=(128|le>>6&63)<<SHIFT[he++&3],_e[he>>2]|=(128|le&63)<<SHIFT[he++&3]):(le=65536+((le&1023)<<10|re.charCodeAt(++ue)&1023),_e[he>>2]|=(240|le>>18)<<SHIFT[he++&3],_e[he>>2]|=(128|le>>12&63)<<SHIFT[he++&3],_e[he>>2]|=(128|le>>6&63)<<SHIFT[he++&3],_e[he>>2]|=(128|le&63)<<SHIFT[he++&3]);this.lastByteIndex=he,this.bytes+=he-this.start,he>=64?(this.block=_e[16],this.start=he-64,this.hash(),this.hashed=!0):this.start=he}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var re=this.blocks,Y=this.lastByteIndex;re[16]=this.block,re[Y>>2]|=EXTRA[Y&3],this.block=re[16],Y>=56&&(this.hashed||this.hash(),re[0]=this.block,re[16]=re[1]=re[2]=re[3]=re[4]=re[5]=re[6]=re[7]=re[8]=re[9]=re[10]=re[11]=re[12]=re[13]=re[14]=re[15]=0),re[14]=this.hBytes<<3|this.bytes>>>29,re[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var re=this.h0,Y=this.h1,oe=this.h2,le=this.h3,ue=this.h4,he=this.h5,fe=this.h6,_e=this.h7,Se=this.blocks,ve,$e,Ee,Ue,Re,xe,Ne,Ie,De,Pe,Ae;for(ve=16;ve<64;++ve)Re=Se[ve-15],$e=(Re>>>7|Re<<25)^(Re>>>18|Re<<14)^Re>>>3,Re=Se[ve-2],Ee=(Re>>>17|Re<<15)^(Re>>>19|Re<<13)^Re>>>10,Se[ve]=Se[ve-16]+$e+Se[ve-7]+Ee<<0;for(Ae=Y&oe,ve=0;ve<64;ve+=4)this.first?(this.is224?(Ie=300032,Re=Se[0]-1413257819,_e=Re-150054599<<0,le=Re+24177077<<0):(Ie=704751109,Re=Se[0]-210244248,_e=Re-1521486534<<0,le=Re+143694565<<0),this.first=!1):($e=(re>>>2|re<<30)^(re>>>13|re<<19)^(re>>>22|re<<10),Ee=(ue>>>6|ue<<26)^(ue>>>11|ue<<21)^(ue>>>25|ue<<7),Ie=re&Y,Ue=Ie^re&oe^Ae,Ne=ue&he^~ue&fe,Re=_e+Ee+Ne+K[ve]+Se[ve],xe=$e+Ue,_e=le+Re<<0,le=Re+xe<<0),$e=(le>>>2|le<<30)^(le>>>13|le<<19)^(le>>>22|le<<10),Ee=(_e>>>6|_e<<26)^(_e>>>11|_e<<21)^(_e>>>25|_e<<7),De=le&re,Ue=De^le&Y^Ie,Ne=_e&ue^~_e&he,Re=fe+Ee+Ne+K[ve+1]+Se[ve+1],xe=$e+Ue,fe=oe+Re<<0,oe=Re+xe<<0,$e=(oe>>>2|oe<<30)^(oe>>>13|oe<<19)^(oe>>>22|oe<<10),Ee=(fe>>>6|fe<<26)^(fe>>>11|fe<<21)^(fe>>>25|fe<<7),Pe=oe&le,Ue=Pe^oe&re^De,Ne=fe&_e^~fe&ue,Re=he+Ee+Ne+K[ve+2]+Se[ve+2],xe=$e+Ue,he=Y+Re<<0,Y=Re+xe<<0,$e=(Y>>>2|Y<<30)^(Y>>>13|Y<<19)^(Y>>>22|Y<<10),Ee=(he>>>6|he<<26)^(he>>>11|he<<21)^(he>>>25|he<<7),Ae=Y&oe,Ue=Ae^Y&le^Pe,Ne=he&fe^~he&_e,Re=ue+Ee+Ne+K[ve+3]+Se[ve+3],xe=$e+Ue,ue=re+Re<<0,re=Re+xe<<0;this.h0=this.h0+re<<0,this.h1=this.h1+Y<<0,this.h2=this.h2+oe<<0,this.h3=this.h3+le<<0,this.h4=this.h4+ue<<0,this.h5=this.h5+he<<0,this.h6=this.h6+fe<<0,this.h7=this.h7+_e<<0},Sha256.prototype.hex=function(){this.finalize();var re=this.h0,Y=this.h1,oe=this.h2,le=this.h3,ue=this.h4,he=this.h5,fe=this.h6,_e=this.h7,Se=HEX_CHARS[re>>28&15]+HEX_CHARS[re>>24&15]+HEX_CHARS[re>>20&15]+HEX_CHARS[re>>16&15]+HEX_CHARS[re>>12&15]+HEX_CHARS[re>>8&15]+HEX_CHARS[re>>4&15]+HEX_CHARS[re&15]+HEX_CHARS[Y>>28&15]+HEX_CHARS[Y>>24&15]+HEX_CHARS[Y>>20&15]+HEX_CHARS[Y>>16&15]+HEX_CHARS[Y>>12&15]+HEX_CHARS[Y>>8&15]+HEX_CHARS[Y>>4&15]+HEX_CHARS[Y&15]+HEX_CHARS[oe>>28&15]+HEX_CHARS[oe>>24&15]+HEX_CHARS[oe>>20&15]+HEX_CHARS[oe>>16&15]+HEX_CHARS[oe>>12&15]+HEX_CHARS[oe>>8&15]+HEX_CHARS[oe>>4&15]+HEX_CHARS[oe&15]+HEX_CHARS[le>>28&15]+HEX_CHARS[le>>24&15]+HEX_CHARS[le>>20&15]+HEX_CHARS[le>>16&15]+HEX_CHARS[le>>12&15]+HEX_CHARS[le>>8&15]+HEX_CHARS[le>>4&15]+HEX_CHARS[le&15]+HEX_CHARS[ue>>28&15]+HEX_CHARS[ue>>24&15]+HEX_CHARS[ue>>20&15]+HEX_CHARS[ue>>16&15]+HEX_CHARS[ue>>12&15]+HEX_CHARS[ue>>8&15]+HEX_CHARS[ue>>4&15]+HEX_CHARS[ue&15]+HEX_CHARS[he>>28&15]+HEX_CHARS[he>>24&15]+HEX_CHARS[he>>20&15]+HEX_CHARS[he>>16&15]+HEX_CHARS[he>>12&15]+HEX_CHARS[he>>8&15]+HEX_CHARS[he>>4&15]+HEX_CHARS[he&15]+HEX_CHARS[fe>>28&15]+HEX_CHARS[fe>>24&15]+HEX_CHARS[fe>>20&15]+HEX_CHARS[fe>>16&15]+HEX_CHARS[fe>>12&15]+HEX_CHARS[fe>>8&15]+HEX_CHARS[fe>>4&15]+HEX_CHARS[fe&15];return this.is224||(Se+=HEX_CHARS[_e>>28&15]+HEX_CHARS[_e>>24&15]+HEX_CHARS[_e>>20&15]+HEX_CHARS[_e>>16&15]+HEX_CHARS[_e>>12&15]+HEX_CHARS[_e>>8&15]+HEX_CHARS[_e>>4&15]+HEX_CHARS[_e&15]),Se},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var re=this.h0,Y=this.h1,oe=this.h2,le=this.h3,ue=this.h4,he=this.h5,fe=this.h6,_e=this.h7,Se=[re>>24&255,re>>16&255,re>>8&255,re&255,Y>>24&255,Y>>16&255,Y>>8&255,Y&255,oe>>24&255,oe>>16&255,oe>>8&255,oe&255,le>>24&255,le>>16&255,le>>8&255,le&255,ue>>24&255,ue>>16&255,ue>>8&255,ue&255,he>>24&255,he>>16&255,he>>8&255,he&255,fe>>24&255,fe>>16&255,fe>>8&255,fe&255];return this.is224||Se.push(_e>>24&255,_e>>16&255,_e>>8&255,_e&255),Se},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var re=new ArrayBuffer(this.is224?28:32),Y=new DataView(re);return Y.setUint32(0,this.h0),Y.setUint32(4,this.h1),Y.setUint32(8,this.h2),Y.setUint32(12,this.h3),Y.setUint32(16,this.h4),Y.setUint32(20,this.h5),Y.setUint32(24,this.h6),this.is224||Y.setUint32(28,this.h7),re};function HmacSha256(re,Y,oe){var le,ue=typeof re;if(ue==="string"){var he=[],fe=re.length,_e=0,Se;for(le=0;le<fe;++le)Se=re.charCodeAt(le),Se<128?he[_e++]=Se:Se<2048?(he[_e++]=192|Se>>6,he[_e++]=128|Se&63):Se<55296||Se>=57344?(he[_e++]=224|Se>>12,he[_e++]=128|Se>>6&63,he[_e++]=128|Se&63):(Se=65536+((Se&1023)<<10|re.charCodeAt(++le)&1023),he[_e++]=240|Se>>18,he[_e++]=128|Se>>12&63,he[_e++]=128|Se>>6&63,he[_e++]=128|Se&63);re=he}else if(ue==="object"){if(re===null)throw new Error(ERROR);if(ARRAY_BUFFER&&re.constructor===ArrayBuffer)re=new Uint8Array(re);else if(!Array.isArray(re)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(re)))throw new Error(ERROR)}else throw new Error(ERROR);re.length>64&&(re=new Sha256(Y,!0).update(re).array());var ve=[],$e=[];for(le=0;le<64;++le){var Ee=re[le]||0;ve[le]=92^Ee,$e[le]=54^Ee}Sha256.call(this,Y,oe),this.update($e),this.oKeyPad=ve,this.inner=!0,this.sharedMemory=oe}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var re=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(re),Sha256.prototype.finalize.call(this)}};var exports$1=createMethod();exports$1.sha256=exports$1,exports$1.sha224=createMethod(!0),exports$1.sha256.hmac=createHmacMethod(),exports$1.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports$1:(root.sha256=exports$1.sha256,root.sha224=exports$1.sha224)})()})(sha256)),sha256.exports}var sha256Exports=requireSha256();class UppyBunnyCreator extends UIPlugin{constructor(Y,oe){super(Y,oe),this.id=this.opts.id||"UppyBunnyCreator",this.type="modifier"}create(Y){let oe={method:"POST",url:"https://video.bunnycdn.com/library/"+this.opts.library+"/videos",headers:{accept:"application/json","content-type":"application/*+json",AccessKey:this.opts.access},data:'{"title": "'+Y.meta.name+'", "thumbnailTime": "'+this.getMsFromTime(Y.meta.thumbTime)+'"}'};return axios.request(oe).then(le=>le.data.guid).catch(le=>console.error(le))}prepareUpload=async Y=>{const oe=Y.map(ue=>{const he=this.uppy.getFile(ue);return this.create(he).then(fe=>{this.uppy.setFileMeta(ue,{bunnyId:fe})}).catch(fe=>{this.uppy.log(fe,"warning")})}),le=()=>{Y.forEach(ue=>{const he=this.uppy.getFile(ue);this.uppy.emit("preprocess-complete",he)})};return await Promise.all(oe),le()};install(){this.uppy.addPreProcessor(this.prepareUpload)}uninstall(){this.uppy.removePreProcessor(this.prepareUpload)}getMsFromTime(Y){if(typeof Y>"u"||Y==null||Y=="")return 0;if(!this.validateTime(Y))throw this.uppy.info("Falsches Zeitformat fr die Thumbnailerstellung.","error",3e3),new Error("Wrong timestamp format for thumbnail creation.");let oe=Y.split(":");return(+oe[0]*60*60+ +oe[1]*60+ +oe[2])*1e3}validateTime(Y){if(!/^(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(Y))return!1;const[le,ue,he]=Y.split(":").map(Number);return!(le<0||le>23||ue<0||ue>59||he<0||he>59)}}const _sfc_main$2={components:{PlusIcon},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary"],data(){return{expirationTime:0,uploader:null}},methods:{getExpirationTime(){const re=new Date;return re.setDate(re.getDate()+1),re.getTime()},getAuthorizationSignature(re){const Y=this.bunnyLibrary+this.bunnyApiKey+this.expirationTime+re;return sha256Exports.sha256(Y)},initializeUppy(){this.expirationTime=this.getExpirationTime(),this.uploader=new Uppy().use(Dashboard,{inline:!1,trigger:"#bunny-upload",width:"auto",proudlyDisplayPoweredByUppy:!1,closeModalOnClickOutside:!0,closeAfterFinish:!0,metaFields:[{id:"name",name:__("Name"),placeholder:__("Filename")},{id:"thumbTime",name:__("Timestamp"),placeholder:__("hh:mm:ss e.g. 00:01:04 for minute 1, second 4")},{id:"bunnyId",name:__("Bunny ID"),render:({value:re},Y)=>Y("input",{type:"text",class:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input bg-gray-300",value:re,placeholder:__("Bunny ID"),disabled:!0},[])}]}).use(UppyBunnyCreator,{access:this.bunnyApiKey,library:this.bunnyLibrary}).use(Tus,{endpoint:"https://video.bunnycdn.com/tusupload",retryDelays:[0,30,50,3e3,5e3,1e4,6e4],onBeforeRequest:(re,Y)=>{const oe=this.uploader.getFile(Y.id).meta;if(oe.bunnyId)re.setHeader("AuthorizationSignature",this.getAuthorizationSignature(oe.bunnyId)),re.setHeader("AuthorizationExpire",this.expirationTime),re.setHeader("VideoId",oe.bunnyId),re.setHeader("LibraryId",this.bunnyLibrary);else throw""}}),this.uploader.on("complete",re=>{if(re.successful.length>0){const Y=re.successful.length===1?__("1 video uploaded successfully."):__(":count videos successfully uploaded.",{count:re.successful.length});console.log(Y)}re.failed.length>0&&console.log("Failed files: ",re.failed),emitter.emit("load")})}},created(){emitter.on("upload",()=>document.getElementById("bunny-upload").click())},mounted(){this.initializeUppy()}},_hoisted_1$2={class:"btn-primary",id:"bunny-upload"};function _sfc_render$1(re,Y,oe,le,ue,he){const fe=resolveComponent("PlusIcon");return openBlock(),createElementBlock("button",_hoisted_1$2,[createVNode(fe,{class:"h-6 w-6"}),createTextVNode(" "+toDisplayString(re.__("Upload Video")),1)])}const Uploader=_export_sfc(_sfc_main$2,[["render",_sfc_render$1]]),_sfc_main$1={},_hoisted_1$1={class:"container w-100 lg:w-4/5 mx-auto"},_hoisted_2$1={class:"flex flex-col items-center justify-center gap-2"},_hoisted_3={class:"mb-2"},_hoisted_4={class:"text-sm"},_hoisted_5={class:"text-sm"},_hoisted_6={href:"https://bunny.net?ref=uhvsqhaw0n",target:"_blank",class:"btn-primary my-2"},_hoisted_7={class:"text-sm"},_hoisted_8={class:"text-sm"};function _sfc_render(re,Y){return openBlock(),createElementBlock("div",_hoisted_1$1,[createElementVNode("div",_hoisted_2$1,[createElementVNode("h1",_hoisted_3,toDisplayString(re.__("Bunny Account Required")),1),createElementVNode("p",_hoisted_4,toDisplayString(re.__("To use this addon, you'll need a Bunny.net account. Make sure to add your credentials to the .env file.")),1),createElementVNode("p",_hoisted_5,toDisplayString(re.__("If you don't have one yet, you can sign up using our affiliate link.")),1),createElementVNode("a",_hoisted_6,toDisplayString(re.__("Sign Up Now")),1),createElementVNode("p",_hoisted_7,toDisplayString(re.__("By doing so, you'll be supporting the development of this addon at no extra cost to you.")),1),createElementVNode("p",_hoisted_8,[createElementVNode("b",null,toDisplayString(re.__("Thank you for your support!")),1)])])])}const Affiliate=_export_sfc(_sfc_main$1,[["render",_sfc_render]]),_hoisted_1={class:"flex gap-2 justify-between"},_hoisted_2={class:"flex-grow mb-4"},_sfc_main={__name:"Overview",props:{title:String,addon:Object,bunny:Object},setup(re){const Y=re;return provide("bunnyApiKey",Y.bunny.apiKey),provide("bunnyHostname",Y.bunny.hostname),provide("bunnyLibrary",Y.bunny.library),(oe,le)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(unref(Head),{title:re.title},null,8,["title"]),re.bunny.apiKey&&re.bunny.hostname&&re.bunny.library?(openBlock(),createElementBlock(Fragment,{key:0},[createElementVNode("div",_hoisted_1,[createElementVNode("h1",_hoisted_2,toDisplayString(re.title),1),createVNode(Uploader)]),createVNode(VideoBrowser)],64)):(openBlock(),createBlock(Affiliate,{key:1})),createVNode(unref(DocsCallout),{topic:re.addon.name,url:re.addon.url},null,8,["topic","url"])],64))}};Statamic.booting(()=>{Statamic.$components.register("BunnyOverview",_sfc_main),Statamic.$components.register("bunny-fieldtype",_sfc_main$e)});
